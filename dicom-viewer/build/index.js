!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var n="object"==typeof exports?t(require("react")):t(e.React);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(e=>(()=>{var t,n,r={363:(e,t)=>{"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):i===t}))}return!0}},742:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=s(e),o=a[0],l=a[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,l)),u=0,h=l>0?o-4:o;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(l(e,s,s+o>c?c:s+o));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],r[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,a,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},764:(e,t,n)=>{"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
const r=n(742),i=n(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=l,t.h2=50;const o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|p(e,t);let r=s(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const i=function(e){if(l.isBuffer(e)){const t=0|g(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Z(e.length)?s(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),s(e<0?0:0|g(e))}function d(e){const t=e.length<0?0:0|g(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function g(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return r?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){let a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let r=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===l)return r*o}else-1!==r&&(a-=a-r),r=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){let n=!0;for(let r=0;r<l;r++)if(c(e,a+r)!==c(t,r)){n=!1;break}if(n)return a}return-1}function b(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const a=t.length;let o;for(r>a/2&&(r=a/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(Z(r))return o;e[n+o]=r}return o}function C(e,t,n,r){return Y(W(t,e.length-n),e,n,r)}function w(e,t,n,r){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return Y(H(t),e,n,r)}function D(e,t,n,r){return Y(function(e,t){let n,r,i;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,l;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(a=l));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=o}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return h(e)},l.allocUnsafeSlow=function(e){return h(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))i+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)S(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const s=Math.min(a,o),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){a=c[e],o=u[e];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function A(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function L(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=$[e[r]];return i}function _(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function F(e,t,n,r,i){G(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function k(e,t,n,r,i){G(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function M(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function q(e,t,n,r,a){return t=+t,n>>>=0,a||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,a){return t=+t,n>>>=0,a||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=K((function(e,t=0){return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=K((function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=K((function(e,t=0){return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=K((function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=l.isBuffer(e)?e:l.from(e,r),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};const B={};function N(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function Q(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n,r,i,a){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=a>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(a+1)}${r}`:`>= -(2${r} ** ${8*(a+1)-1}${r}) and < 2 ** ${8*(a+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||V(t,e.length-(n+1))}(r,i,a)}function z(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}N("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),N("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),N("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=Q(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=Q(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const j=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let i=null;const a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const $=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function K(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},405:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(879),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".sA7PDxRJwtASDpG6SgH_ {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 20px 20px 60px;\r\n    border-width: 2px;\r\n    border-radius: 8px;\r\n    border-color: inherit;\r\n    border-style: dashed;\r\n    background-color: #ffffff;\r\n    color: #999999;\r\n    outline: none;\r\n    transition: border .24s ease-in-out;\r\n    height: 300px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.sA7PDxRJwtASDpG6SgH_:hover {\r\n    border-style: solid;\r\n}\r\n\r\n.sA7PDxRJwtASDpG6SgH_:hover .hv6m1n7kP_mcX_DqJGbM {\r\n    filter: contrast(0.8);\r\n}\r\n\r\n\r\n",""]),i.locals={dropZone:"sA7PDxRJwtASDpG6SgH_",titleText:"hv6m1n7kP_mcX_DqJGbM"};const a=i},595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(879),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".Dksr2od92yUqD8nV_DnH {\r\n    padding: 16px;\r\n    background: #303030;\r\n}\r\n\r\n.a2Cw07PZYR4Sz2Ww18Jf {\r\n    position: relative;\r\n}\r\n\r\n.veSiQvqmsCPrbhFjQKMQ {\r\n    right: 8px;\r\n    top: 72px;\r\n    position: absolute;\r\n    z-index: 20;\r\n    width: 40px;\r\n    height: 40px;\r\n}",""]),i.locals={fullScreenContainer:"Dksr2od92yUqD8nV_DnH",fullScreenButtonContainer:"a2Cw07PZYR4Sz2Ww18Jf",fullScreenButton:"veSiQvqmsCPrbhFjQKMQ"};const a=i},812:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(879),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".W_s1tQkS2oOxmVkNsFO9 {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n._f__gIJC6_A_jPx7MG_M {\r\n    font-weight: bold;\r\n}\r\n\r\n.pk9M1TprAcPrG8BtpOq_ {\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n}\r\n\r\n.AeuMJQ7YG3qwV6xP1tZR {\r\n    color: white!important;\r\n}",""]),i.locals={flexCenter:"W_s1tQkS2oOxmVkNsFO9",textBold:"_f__gIJC6_A_jPx7MG_M",loaderValueContainer:"pk9M1TprAcPrG8BtpOq_",whiteColor:"AeuMJQ7YG3qwV6xP1tZR"};const a=i},784:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(879),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".G3AVIMqq0PsToXh3qPW8 {\r\n    margin: -8px 0;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n}\r\n\r\n._c4C_J53TTJq5mhj_XQ8 {\r\n    position: relative;\r\n}\r\n\r\n._c4C_J53TTJq5mhj_XQ8 .Gu_DzEocfMIJNXSRNM3g {\r\n    position: absolute;\r\n    z-index: 99;\r\n    margin-top: 8px;\r\n}\r\n",""]),i.locals={itemsContainer:"G3AVIMqq0PsToXh3qPW8",menu:"_c4C_J53TTJq5mhj_XQ8",menuContent:"Gu_DzEocfMIJNXSRNM3g"};const a=i},635:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(879),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".yRyDOeXSdYkYrvqnK3nu {\r\n    box-sizing: border-box!important;\r\n    margin: 1px!important;\r\n    border: 1px solid #00000000!important;\r\n    overflow: hidden!important;\r\n    padding: 8px!important;\r\n    border-radius: 8px!important;\r\n}\r\n\r\n.NXNX9gGKfMjEHXyHV2v0 {\r\n    border: 1px solid!important;\r\n}\r\n\r\n.QWSygAi9CZT9x4nGf5Zt {\r\n    border-radius: 4px!important;\r\n    overflow: hidden;\r\n}\r\n",""]),i.locals={iconButton:"yRyDOeXSdYkYrvqnK3nu",active:"NXNX9gGKfMjEHXyHV2v0",iconContainer:"QWSygAi9CZT9x4nGf5Zt"};const a=i},145:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(879),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".Mrgpp4PJEvu0loCLjl4l {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    top: 0;\r\n    left: 0;\r\n    justify-content: center;\r\n    background: #303030b3;\r\n}\r\n\r\n._Qm8NoANko5YoOzajm2N {\r\n    padding: 4px 8px;\r\n    border-radius: 8px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    position: relative;\r\n    flex-wrap: wrap;\r\n}\r\n",""]),i.locals={loading:"Mrgpp4PJEvu0loCLjl4l",container:"_Qm8NoANko5YoOzajm2N"};const a=i},818:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(879),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".NtmVLejUc1no80jAZC9f {\r\n    margin-top: 10px;\r\n    opacity: 0;\r\n    animation: l33DbsCbvNn6GpuexJR5 0.25s forwards;\r\n}\r\n\r\n.lS_nCI_gbkoUMtxe9C1O {\r\n    height: 100%;\r\n    width: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    overflow: hidden;\r\n    border-radius: 8px;\r\n    border-width: 1px;\r\n    border-style: solid;\r\n    border-color: inherit;\r\n}\r\n\r\n.lS_nCI_gbkoUMtxe9C1O > * {\r\n    position: absolute;\r\n    pointer-events: none;\r\n}\r\n@keyframes l33DbsCbvNn6GpuexJR5 {\r\n    0% {\r\n        opacity: 0;\r\n    }\r\n    100% {\r\n        opacity: 1;\r\n    }\r\n}",""]),i.locals={dwvContainer:"NtmVLejUc1no80jAZC9f",ani:"l33DbsCbvNn6GpuexJR5",layerGroup:"lS_nCI_gbkoUMtxe9C1O"};const a=i},879:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},705:function(e,t,n){var r=n(764).lW;
/*! dicom-parser - 1.8.5 - 2021-10-06 | (c) 2017 Chris Hafey | https://github.com/cornerstonejs/dicomParser */e.exports=function(e){return n=[function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t),n.d(t,"isStringVr",(function(){return a})),n.d(t,"isPrivateTag",(function(){return o})),n.d(t,"parsePN",(function(){return s})),n.d(t,"parseTM",(function(){return l})),n.d(t,"parseDA",(function(){return u})),n.d(t,"explicitElementToString",(function(){return h})),n.d(t,"explicitDataSetToJS",(function(){return d})),n.d(t,"createJPEGBasicOffsetTable",(function(){return p})),n.d(t,"parseDicomDataSetExplicit",(function(){return R})),n.d(t,"parseDicomDataSetImplicit",(function(){return F})),n.d(t,"readFixedString",(function(){return v})),n.d(t,"alloc",(function(){return k})),n.d(t,"version",(function(){return M})),n.d(t,"bigEndianByteArrayParser",(function(){return q})),n.d(t,"ByteStream",(function(){return N})),n.d(t,"sharedCopy",(function(){return U})),n.d(t,"DataSet",(function(){return w})),n.d(t,"findAndSetUNElementLength",(function(){return y})),n.d(t,"findEndOfEncapsulatedElement",(function(){return S})),n.d(t,"findItemDelimitationItemAndSetElementLength",(function(){return x})),n.d(t,"littleEndianByteArrayParser",(function(){return Q})),n.d(t,"parseDicom",(function(){return z})),n.d(t,"readDicomElementExplicit",(function(){return E})),n.d(t,"readDicomElementImplicit",(function(){return T})),n.d(t,"readEncapsulatedImageFrame",(function(){return Y})),n.d(t,"readEncapsulatedPixelData",(function(){return Z})),n.d(t,"readEncapsulatedPixelDataFromFragments",(function(){return j})),n.d(t,"readPart10Header",(function(){return G})),n.d(t,"readSequenceItemsExplicit",(function(){return O})),n.d(t,"readSequenceItemsImplicit",(function(){return A})),n.d(t,"readSequenceItem",(function(){return P})),n.d(t,"readTag",(function(){return m}));var i={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0},a=function(e){return i[e]},o=function(e){return parseInt(e[4],10)%2==1},s=function(e){if(void 0!==e)return{familyName:(e=e.split("^"))[0],givenName:e[1],middleName:e[2],prefix:e[3],suffix:e[4]}};function l(e,t){if(2<=e.length){var n=parseInt(e.substring(0,2),10),r=4<=e.length?parseInt(e.substring(2,4),10):void 0,i=6<=e.length?parseInt(e.substring(4,6),10):void 0,a=(a=8<=e.length?e.substring(7,13):void 0)?parseInt(a,10)*Math.pow(10,6-a.length):void 0;if(t&&(isNaN(n)||void 0!==r&&isNaN(r)||void 0!==i&&isNaN(i)||void 0!==a&&isNaN(a)||n<0||23<n||r&&(r<0||59<r)||i&&(i<0||59<i)||a&&(a<0||999999<a)))throw"invalid TM '".concat(e,"'");return{hours:n,minutes:r,seconds:i,fractionalSeconds:a}}if(t)throw"invalid TM '".concat(e,"'")}function c(e,t,n){return!isNaN(n)&&0<t&&t<=12&&0<e&&e<=function(e,t){switch(e){case 2:return t%4==0&&t%100||t%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(t,n)}function u(e,t){if(e&&8===e.length){var n=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6,8),10);if(t&&!0!==c(i,r,n))throw"invalid DA '".concat(e,"'");return{year:n,month:r,day:i}}if(t)throw"invalid DA '".concat(e,"'")}function h(e,t){if(void 0===e||void 0===t)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===t.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var n,r=t.vr,i=t.tag;function o(t,n){for(var r="",a=0;a<t;a++)0!==a&&(r+="/"),r+=n.call(e,i,a).toString();return r}if(!0===a(r))n=e.string(i);else{if("AT"===r){var s=e.uint32(i);return void 0===s?void 0:"x".concat((s=s<0?4294967295+s+1:s).toString(16).toUpperCase())}"US"===r?n=o(t.length/2,e.uint16):"SS"===r?n=o(t.length/2,e.int16):"UL"===r?n=o(t.length/4,e.uint32):"SL"===r?n=o(t.length/4,e.int32):"FD"===r?n=o(t.length/8,e.double):"FL"===r&&(n=o(t.length/4,e.float))}return n}function d(e,t){if(void 0===e)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";t=t||{omitPrivateAttibutes:!0,maxElementLength:128};var n,r={};for(n in e.elements){var i=e.elements[n];if(!0!==t.omitPrivateAttibutes||!o(n))if(i.items){for(var a=[],s=0;s<i.items.length;s++)a.push(d(i.items[s].dataSet,t));r[n]=a}else{var l=void 0;i.length<t.maxElementLength&&(l=h(e,i)),r[n]=void 0!==l?l:{dataOffset:i.dataOffset,length:i.length}}}return r}function f(e,t){return 255===e.byteArray[t]&&217===e.byteArray[t+1]}function g(e,t,n){for(var r,i,a=n;a<t.fragments.length;a++)if(i=a,f(r=e,(i=t.fragments[i]).position+i.length-2)||f(r,i.position+i.length-3))return a}function p(e,t,n){if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||t.fragments;for(var r=[],i=0;;){r.push(t.fragments[i].offset);var a=g(e,t,i);if(void 0===a||a===t.fragments.length-1)return r;i=a+1}}function m(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";var t=256*e.readUint16()*256;return e=e.readUint16(),"x".concat("00000000".concat((t+e).toString(16)).substr(-8))}function S(e,t,n){if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(t.encapsulatedPixelData=!0,t.basicOffsetTable=[],t.fragments=[],"xfffee000"!==m(e))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var r=e.readUint32()/4,i=0;i<r;i++){var a=e.readUint32();t.basicOffsetTable.push(a)}for(var o=e.position;e.position<e.byteArray.length;){var s=m(e),l=e.readUint32();if("xfffee0dd"===s)return e.seek(l),void(t.length=e.position-t.dataOffset);if("xfffee000"!==s)return n&&n.push("unexpected tag ".concat(s," while searching for end of pixel data element with undefined length")),l>e.byteArray.length-e.position&&(l=e.byteArray.length-e.position),t.fragments.push({offset:e.position-o-8,position:e.position,length:l}),e.seek(l),void(t.length=e.position-t.dataOffset);t.fragments.push({offset:e.position-o-8,position:e.position,length:l}),e.seek(l)}n&&n.push("pixel data element ".concat(t.tag," missing sequence delimiter tag xfffee0dd"))}function y(e,t){if(void 0===e)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57565===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position ".concat(e.position-4," while reading element of undefined length with tag ").concat(t.tag)),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}function v(e,t,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+n>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var r,i="",a=0;a<n;a++){if(0===(r=e[t+a]))return t+=n,i;i+=String.fromCharCode(r)}return i}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return void 0!==e.parser?e.parser:t}var w=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.byteArrayParser=t,this.byteArray=n,this.elements=r}var t,n,r;return t=e,(n=[{key:"uint16",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return C(e,this.byteArrayParser).readUint16(this.byteArray,e.dataOffset+2*t)}},{key:"int16",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return C(e,this.byteArrayParser).readInt16(this.byteArray,e.dataOffset+2*t)}},{key:"uint32",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return C(e,this.byteArrayParser).readUint32(this.byteArray,e.dataOffset+4*t)}},{key:"int32",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return C(e,this.byteArrayParser).readInt32(this.byteArray,e.dataOffset+4*t)}},{key:"float",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return C(e,this.byteArrayParser).readFloat(this.byteArray,e.dataOffset+4*t)}},{key:"double",value:function(e,t){if(t=void 0!==t?t:0,(e=this.elements[e])&&0!==e.length)return C(e,this.byteArrayParser).readDouble(this.byteArray,e.dataOffset+8*t)}},{key:"numStringValues",value:function(e){if((e=this.elements[e])&&0<e.length)return null===(e=v(this.byteArray,e.dataOffset,e.length).match(/\\/g))?1:e.length+1}},{key:"string",value:function(e,t){if((e=this.elements[e])&&0<e.length)return e=v(this.byteArray,e.dataOffset,e.length),0<=t?e.split("\\")[t].trim():e.trim()}},{key:"text",value:function(e,t){if((e=this.elements[e])&&0<e.length)return e=v(this.byteArray,e.dataOffset,e.length),0<=t?e.split("\\")[t].replace(/ +$/,""):e.replace(/ +$/,"")}},{key:"floatString",value:function(e,t){var n=this.elements[e];if(n&&0<n.length&&void 0!==(t=this.string(e,t=void 0!==t?t:0)))return parseFloat(t)}},{key:"intString",value:function(e,t){var n=this.elements[e];if(n&&0<n.length&&void 0!==(t=this.string(e,t=void 0!==t?t:0)))return parseInt(t)}},{key:"attributeTag",value:function(e){if((n=this.elements[e])&&4===n.length){var t=C(n,this.byteArrayParser).readUint16,n=(e=this.byteArray,n.dataOffset);return"x".concat("00000000".concat((256*t(e,n)*256+t(e,n+2)).toString(16)).substr(-8))}}}])&&b(t.prototype,n),r&&b(t,r),e}();function x(e,t){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57357===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position ".concat(e.position-4," while reading element of undefined length with tag ").concat(t.tag)),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}var D=function(e,t,n){return void 0!==n?"SQ"===n(e.tag):t.position+4<=t.byteArray.length?(e=m(t),t.seek(-4),"xfffee000"===e||"xfffee0dd"===e):(t.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1)};function T(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var r={tag:m(e),length:e.readUint32(),dataOffset:e.position};return 4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===t||(D(r,e,n)&&!o(r.tag)?A(e,r):r.hadUndefinedLength?x(e,r):e.seek(r.length)),r}function P(e){if(void 0===e)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var t={tag:m(e),length:e.readUint32(),dataOffset:e.position};if("xfffee000"!==t.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset ".concat(e.position);return t}function I(e,t){var n=P(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var r=T(e,void 0,t);if("xfffee00d"===(n[r.tag]=r).tag)return new w(e.byteArrayParser,e.byteArray,n)}return e.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new w(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new w(e.byteArrayParser,e.byteArray,{}),F(n.dataSet,e,e.position+n.length,{vrCallback:t})),n}function A(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],(4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=m(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8);r=I(e,n),t.items.push(r)}e.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),t.length=e.byteArray.length-t.dataOffset}:function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var i=I(e,n);t.items.push(i)}})(e,t,n)}function L(e,t){var n=P(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(e,t){for(var n={};e.position<e.byteArray.length;){var r=E(e,t);if("xfffee00d"===(n[r.tag]=r).tag)return new w(e.byteArrayParser,e.byteArray,n)}return t.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new w(e.byteArrayParser,e.byteArray,n)}(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new w(e.byteArrayParser,e.byteArray,{}),R(n.dataSet,e,e.position+n.length)),n}function O(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],(4294967295===t.length?function(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=m(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8);r=L(e,n),t.items.push(r)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),t.length=e.position-t.dataOffset}:function(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var i=L(e,n);t.items.push(i)}})(e,t,n)}var _=function(e){return"OB"===e||"OD"===e||"OL"===e||"OW"===e||"SQ"===e||"OF"===e||"UC"===e||"UR"===e||"UT"===e||"UN"===e?4:2};function E(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var r={tag:m(e),vr:e.readFixedString(2)};return 2===_(r.vr)?r.length=e.readUint16():(e.seek(2),r.length=e.readUint32()),r.dataOffset=e.position,4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===n||("SQ"===r.vr?O(e,r,t):4294967295===r.length?"x7fe00010"===r.tag?S(e,r,t):("UN"===r.vr?A:x)(e,r):e.seek(r.length)),r}function R(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?t.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var i=e.elements;t.position<n;){var a=E(t,e.warnings,r.untilTag);if((i[a.tag]=a).tag===r.untilTag)return}if(t.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"}function F(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?e.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var i=e.elements;t.position<n;){var a=T(t,r.untilTag,r.vrCallback);if((i[a.tag]=a).tag===r.untilTag)return}}function k(e,t){if(void 0!==r&&e instanceof r)return r.alloc(t);if(e instanceof Uint8Array)return new Uint8Array(t);throw"dicomParser.alloc: unknown type for byteArray"}var M="1.8.5",q={readUint16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(e[t]<<8)+e[t+1]},readInt16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";return 32768&(t=(e[t]<<8)+e[t+1])?t-65535-1:t},readUint32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*e[t]+e[t+1])+e[t+2])+e[t+3]},readInt32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3]},readFloat:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=e[t],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=e[t],n[6]=e[t+1],n[5]=e[t+2],n[4]=e[t+3],n[3]=e[t+4],n[2]=e[t+5],n[1]=e[t+6],n[0]=e[t+7],new Float64Array(n.buffer)[0]}};function U(e,t,n){if(void 0!==r&&e instanceof r)return e.slice(t,t+n);if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset+t,n);throw"dicomParser.from: unknown type for byteArray"}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t,n,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(n instanceof Uint8Array==0&&(void 0===r||n instanceof r==0))throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(i<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(i>=n.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=t,this.byteArray=n,this.position=i||0,this.warnings=[]}var t,n,i;return t=e,(n=[{key:"seek",value:function(e){if(this.position+e<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=e}},{key:"readByteStream",value:function(t){if(this.position+t>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=U(this.byteArray,this.position,t);return this.position+=t,new e(this.byteArrayParser,n)}},{key:"readUint16",value:function(){var e=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,e}},{key:"readUint32",value:function(){var e=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,e}},{key:"readFixedString",value:function(e){var t=v(this.byteArray,this.position,e);return this.position+=e,t}}])&&B(t.prototype,n),i&&B(t,i),e}(),Q={readUint16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return e[t]+256*e[t+1]},readInt16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";return 32768&(t=e[t]+(e[t+1]<<8))?t-65535-1:t},readUint32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return e[t]+256*e[t+1]+256*e[t+2]*256+256*e[t+3]*256*256},readInt32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)},readFloat:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],new Float64Array(n.buffer)[0]}};function G(e,t){if(void 0===e)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var n=new N(Q,e);return function(){!function(){if(n.seek(128),"DICM"!==n.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}();for(var e=[],t={};n.position<n.byteArray.length;){var r=n.position,i=E(n,e);if("x0002ffff"<i.tag){n.position=r;break}i.parser=Q,t[i.tag]=i}var a=new w(n.byteArrayParser,n.byteArray,t);return a.warnings=n.warnings,a.position=n.position,a}()}function z(e,t){if(void 0===e)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";function r(r){var i="1.2.840.10008.1.2"!==(a=function(t){if(void 0===t.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";return t=t.elements.x00020010,v(e,t.dataOffset,t.length)}(r)),a=function(r,i){var a="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);if("1.2.840.10008.1.2.1.99"!==r)return new N("1.2.840.10008.1.2.2"===r?q:Q,e,i);if(t&&t.inflater)return r=t.inflater(e,i),new N(Q,r,0);if(1==a){var o=n(0),s=U(e,i,e.length-i);return o=o.inflateRawSync(s),s=k(e,o.length+i),e.copy(s,0,0,i),o.copy(s,i),new N(Q,s,0)}if("undefined"==typeof pako)throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax";return o=e.slice(i),s=pako.inflateRaw(o),(o=k(e,s.length+i)).set(e.slice(0,i),0),o.set(s,i),new N(Q,o,0)}(a,r.position);(r=new w(a.byteArrayParser,a.byteArray,{})).warnings=a.warnings;try{(i?R:F)(r,a,a.byteArray.length,t)}catch(a){throw{exception:a,dataSet:r}}return r}return function(e,t){for(var n in e.elements)e.elements.hasOwnProperty(n)&&(t.elements[n]=e.elements[n]);return void 0!==e.warnings&&(t.warnings=e.warnings.concat(t.warnings)),t}(i=G(e),r(i));var i}var V=function(e,t,n){for(var r=0,i=t;i<t+n;i++)r+=e[i].length;return r};function j(e,t,n,r,i){if(i=i||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===(r=r||1))throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(r<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+r>t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var a=new N(e.byteArrayParser,e.byteArray,t.dataOffset);if("xfffee000"!==(t=P(a)).tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";a.seek(t.length);var o=a.position;if(1===r)return U(a.byteArray,o+i[n].offset+8,i[n].length);t=V(i,n,r);for(var s=k(a.byteArray,t),l=0,c=n;c<n+r;c++)for(var u=o+i[c].offset+8,h=0;h<i[c].length;h++)s[l++]=a.byteArray[u++];return s}var W=function(e,t){for(var n=0;n<e.length;n++)if(e[n].offset===t)return n},H=function(e,t,n,r){if(e===t.length-1)return n.length-r;for(var i=t[e+1],a=r+1;a<n.length;a++)if(n[a].offset===i)return a-r;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"};function Y(e,t,n,r,i){if(r=r||t.basicOffsetTable,i=i||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===r.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(n<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(n>=r.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var a=r[n];if(void 0===(a=W(i,a)))throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";return j(e,t,a,H(n,r,i,a),i)}var X=!1;function Z(e,t,n){if(X||(X=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==t.basicOffsetTable.length?Y(e,t,n):j(e,t,0,t.fragments.length)}t.default={isStringVr:a,isPrivateTag:o,parsePN:s,parseTM:l,parseDA:u,explicitElementToString:h,explicitDataSetToJS:d,createJPEGBasicOffsetTable:p,parseDicomDataSetExplicit:R,parseDicomDataSetImplicit:F,readFixedString:v,alloc:k,version:M,bigEndianByteArrayParser:q,ByteStream:N,sharedCopy:U,DataSet:w,findAndSetUNElementLength:y,findEndOfEncapsulatedElement:S,findItemDelimitationItemAndSetElementLength:x,littleEndianByteArrayParser:Q,parseDicom:z,readDicomElementExplicit:E,readDicomElementImplicit:T,readEncapsulatedImageFrame:Y,readEncapsulatedPixelData:Z,readEncapsulatedPixelDataFromFragments:j,readPart10Header:G,readSequenceItemsExplicit:O,readSequenceItemsImplicit:A,readSequenceItem:P,readTag:m}}],i={},t.m=n,t.c=i,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1);function t(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return n[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n,i}(n(848))},918:function(e,t,n){var r,i,a;e.exports=(r=n(920),i=n(733),a=n(252),function(){"use strict";var e={626:function(e){e.exports=i},436:function(e){e.exports=r},812:function(e){e.exports=a}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){n.r(o),n.d(o,{App:function(){return Nn},AppOptions:function(){return Bn},ColourMap:function(){return d},DataElement:function(){return ae},DicomParser:function(){return be},DicomWriter:function(){return Xn},DrawLayer:function(){return wt},Geometry:function(){return Le},Image:function(){return We},Index:function(){return e},LayerGroup:function(){return Tt},Matrix33:function(){return C},Point:function(){return I},Point2D:function(){return T},Point3D:function(){return P},RescaleLut:function(){return r},RescaleSlopeAndIntercept:function(){return Pe},Size:function(){return Ie},Spacing:function(){return Ae},Tag:function(){return M},TagValueExtractor:function(){return Fe},ToolConfig:function(){return Un},ToolboxController:function(){return Mt},Vector3D:function(){return y},View:function(){return Ze},ViewConfig:function(){return qn},ViewController:function(){return et},ViewLayer:function(){return ot},WindowCenterAndWidth:function(){return a},WindowLut:function(){return s},WriterRule:function(){return zn},addTagsToDictionary:function(){return L},buildMultipart:function(){return ie},createImage:function(){return Ve},createMaskImage:function(){return je},createView:function(){return Xe},customUI:function(){return nt},decoderScripts:function(){return jt},defaultPresets:function(){return i},getDwvVersion:function(){return oe},getElementsFromJSONTags:function(){return Kn},getOrientationName:function(){return he},getPixelDataTag:function(){return Q},getReverseOrientation:function(){return ue},getTagFromKey:function(){return q},getTypedArray:function(){return ye},getUID:function(){return Vn},hasDicomPrefix:function(){return se},i18n:function(){return ln},logger:function(){return g},luts:function(){return f},precisionRound:function(){return K}});class e{#e;constructor(e){if(!e||void 0===e)throw new Error("Cannot create index with no values.");if(0===e.length)throw new Error("Cannot create index with empty values.");if(!e.every((function(e){return!isNaN(e)})))throw new Error("Cannot create index with non number values.");this.#e=e}get(e){return this.#e[e]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}canCompare(e){return!!e&&this.length()===e.length()}equals(e){if(!this.canCompare(e))return!1;for(let t=0,n=this.length();t<n;++t)if(this.get(t)!==e.get(t))return!1;return!0}compare(e){if(!this.canCompare(e))return null;const t=[];for(let n=0,r=this.length();n<r;++n)this.get(n)!==e.get(n)&&t.push(n);return t}add(t){if(!this.canCompare(t))return null;const n=[];for(let e=0,r=this.length();e<r;++e)n.push(this.get(e)+t.get(e));return new e(n)}getWithNew2D(t,n){const r=[t,n];for(let e=2,t=this.length();e<t;++e)r.push(this.get(e));return new e(r)}toStringId(e){if(void 0===e){e=[];for(let t=0;t<this.length();++t)e.push(t)}for(let t=0;t<e.length;++t)if(e[t]>=this.length())throw new Error("Non valid dimension for toStringId.");let t="";for(let n=0;n<e.length;++n)0!==n&&(t+="_"),t+="#"+e[n]+"-"+this.get(e[n]);return t}}function t(t){const n=t.split("_");let r,i=0;for(let e=0;e<n.length;++e)r=parseInt(n[e].substring(1,2),10),r>i&&(i=r);if(0===i)throw new Error("No dimension found in point stringId");const a=new Array(i);a.fill(0);for(let e=0;e<n.length;++e){r=parseInt(n[e].substring(1,3),10);const t=parseInt(n[e].substring(3),10);a[r]=t}return new e(a)}class r{#t;#n=null;#r=!1;#i;constructor(e,t){this.#t=e,this.#i=Math.pow(2,t)}getRSI(){return this.#t}isReady(){return this.#r}initialise(){if(!this.#r){this.#n=new Float32Array(this.#i);for(let e=0;e<this.#i;++e)this.#n[e]=this.#t.apply(e);this.#r=!0}}getLength(){return this.#i}getValue(e){return this.#n[e]}}const i={CT:{mediastinum:{center:40,width:400},lung:{center:-500,width:1500},bone:{center:500,width:2e3},brain:{center:40,width:80},head:{center:90,width:350}}};class a{#a;#o;constructor(e,t){if(t<1)throw new Error("Window width shall always be greater than or equal to 1");this.#a=e,this.#o=t,this.#s()}#l=0;#c=0;#u=255;#h=null;#d=null;#f=null;#g=null;#s(){const e=this.#a+this.#l;this.#h=e-.5-(this.#o-1)/2,this.#d=e-.5+(this.#o-1)/2,this.#f=(this.#u-this.#c)/(this.#o-1),this.#g=(-(e-.5)/(this.#o-1)+.5)*(this.#u-this.#c)+this.#c}getCenter(){return this.#a}getWidth(){return this.#o}setRange(e,t){this.#c=parseInt(e,10),this.#u=parseInt(t,10),this.#s()}setSignedOffset(e){this.#l=e,this.#s()}apply(e){return e<=this.#h?this.#c:e>this.#d?this.#u:e*this.#f+this.#g}equals(e){return null!==e&&this.getCenter()===e.getCenter()&&this.getWidth()===e.getWidth()}toString(){return this.getCenter()+", "+this.getWidth()}}class s{#p;#m;#n=null;#S=null;#r=!1;#y=0;constructor(e,t){this.#p=e,this.#m=t}getWindowLevel(){return this.#S}isSigned(){return this.#m}getRescaleLut(){return this.#p}isReady(){return this.#r}setWindowLevel(e){if(this.#S=e,this.#y=0,this.#S.setSignedOffset(0),this.#m){const e=this.#p.getLength();this.#y=e/2,this.#S.setSignedOffset(this.#p.getRSI().getSlope()*this.#y)}this.#r=!1}update(){if(this.#r)return;this.#p.isReady()||this.#p.initialise();const e=this.#p.getLength();this.#n||(this.#n=new Uint8ClampedArray(e));for(let t=0;t<e;++t)this.#n[t]=this.#S.apply(this.#p.getValue(t));this.#r=!0}getLength(){return this.#n.length}getValue(e){return this.#n[e+this.#y]}}const l=256;function c(e){const t=[];for(let n=0;n<l;++n)t.push(e(n));return t}function u(e){return e}function h(e){return 255-e}class d{red;green;blue;constructor(e,t,n){this.red=e,this.green=t,this.blue=n}}const f={plain:{red:c(u),green:c(u),blue:c(u)},invPlain:{red:c(h),green:c(h),blue:c(h)},rainbow:{blue:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,247,239,231,223,215,207,199,191,183,175,167,159,151,143,135,127,119,111,103,95,87,79,71,63,55,47,39,31,23,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,16,24,32,40,48,56,64,72,80,88,96,104,112,120,128,136,144,152,160,168,176,184,192,200,208,216,224,232,240,248,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,253,251,249,247,245,243,241,239,237,235,233,231,229,227,225,223,221,219,217,215,213,211,209,207,205,203,201,199,197,195,193,192,189,186,183,180,177,174,171,168,165,162,159,156,153,150,147,144,141,138,135,132,129,126,123,120,117,114,111,108,105,102,99,96,93,90,87,84,81,78,75,72,69,66,63,60,57,54,51,48,45,42,39,36,33,30,27,24,21,18,15,12,9,6,3],red:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,62,60,58,56,54,52,50,48,46,44,42,40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]},hot:{red:c((function(e){const t=3*e;return t>255?255:t})),green:c((function(e){const t=l/3;let n=0;return e>=t&&(n=3*(e-t),n>255)?255:n})),blue:c((function(e){const t=l/3;let n=0;return e>=2*t&&(n=3*(e-2*t),n>255)?255:n}))},hot_iron:{red:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,255],blue:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255]},pet:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,171,173,175,177,179,181,183,185,187,189,191,193,195,197,199,201,203,205,207,209,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,128,126,124,122,120,118,116,114,112,110,108,106,104,102,100,98,96,94,92,90,88,86,84,82,80,78,76,74,72,70,68,66,64,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31,29,27,25,23,21,19,17,15,13,11,9,7,5,3,1,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,255],blue:[0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,185,187,189,191,193,195,197,199,201,203,205,207,209,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,255,252,248,244,240,236,232,228,224,220,216,212,208,204,200,196,192,188,184,180,176,172,168,164,160,156,152,148,144,140,136,132,128,124,120,116,112,108,104,100,96,92,88,84,80,76,72,68,64,60,56,52,48,44,40,36,32,28,24,20,16,12,8,4,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,85,89,93,97,101,105,109,113,117,121,125,129,133,137,141,145,149,153,157,161,165,170,174,178,182,186,190,194,198,202,206,210,214,218,222,226,230,234,238,242,246,250,255]},hot_metal_blue:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,6,9,12,15,18,21,24,26,29,32,35,38,41,44,47,50,52,55,57,59,62,64,66,69,71,74,76,78,81,83,85,88,90,93,96,99,102,105,108,111,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,166,169,172,175,178,181,184,187,190,194,198,201,205,209,213,217,221,224,228,232,236,240,244,247,251,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,6,8,9,11,13,15,17,19,21,23,24,26,28,30,32,34,36,38,40,41,43,45,47,49,51,53,55,56,58,60,62,64,66,68,70,72,73,75,77,79,81,83,85,87,88,90,92,94,96,98,100,102,104,105,107,109,111,113,115,117,119,120,122,124,126,128,130,132,134,136,137,139,141,143,145,147,149,151,152,154,156,158,160,162,164,166,168,169,171,173,175,177,179,181,183,184,186,188,190,192,194,196,198,200,201,203,205,207,209,211,213,215,216,218,220,222,224,226,228,229,231,233,235,237,239,240,242,244,246,248,250,251,253,255],blue:[0,2,4,6,8,10,12,14,16,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,184,186,188,190,192,194,196,198,200,197,194,191,188,185,182,179,176,174,171,168,165,162,159,156,153,150,144,138,132,126,121,115,109,103,97,91,85,79,74,68,62,56,50,47,44,41,38,35,32,29,26,24,21,18,15,12,9,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,6,9,12,15,18,21,24,26,29,32,35,38,41,44,47,50,53,56,59,62,65,68,71,74,76,79,82,85,88,91,94,97,100,103,106,109,112,115,118,121,124,126,129,132,135,138,141,144,147,150,153,156,159,162,165,168,171,174,176,179,182,185,188,191,194,197,200,203,206,210,213,216,219,223,226,229,232,236,239,242,245,249,252,255]},pet_20step:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,96,96,96,96,96,96,96,96,96,96,96,96,96,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,112,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,64,64,64,64,64,64,64,64,64,64,64,64,224,224,224,224,224,224,224,224,224,224,224,224,224,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,192,192,192,192,192,192,192,192,192,192,192,192,192,176,176,176,176,176,176,176,176,176,176,176,176,176,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,112,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,96,96,96,96,96,96,96,96,96,96,96,96,96,144,144,144,144,144,144,144,144,144,144,144,144,144,192,192,192,192,192,192,192,192,192,192,192,192,192,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,208,208,208,208,208,208,208,208,208,208,208,208,208,176,176,176,176,176,176,176,176,176,176,176,176,176,144,144,144,144,144,144,144,144,144,144,144,144,96,96,96,96,96,96,96,96,96,96,96,96,96,48,48,48,48,48,48,48,48,48,48,48,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255],blue:[0,0,0,0,0,0,0,0,0,0,0,0,0,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,128,176,176,176,176,176,176,176,176,176,176,176,176,176,192,192,192,192,192,192,192,192,192,192,192,192,192,224,224,224,224,224,224,224,224,224,224,224,224,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,64,64,64,64,64,64,64,64,64,64,64,64,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,64,64,64,64,64,64,64,64,64,64,64,64,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255]}},g={levels:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},level:3,trace:function(e){this.level<=this.levels.TRACE&&console.trace(e)},debug:function(e){this.level<=this.levels.DEBUG&&console.debug(e)},info:function(e){this.level<=this.levels.INFO&&console.info(e)},warn:function(e){this.level<=this.levels.WARN&&console.warn(e)},error:function(e){this.level<=this.levels.ERROR&&console.error(e)}};function p(e){return function(e){return n=e,.001172549*(t={r:parseInt(n.substring(1,3),16),g:parseInt(n.substring(3,5),16),b:parseInt(n.substring(5,7),16)}).r+.002301961*t.g+447059e-9*t.b<.5;var t,n}(e)?"#fff":"#000"}const m={x:95.0489,y:100,z:108.884};function S(e){const t={Yellow:"#ffff00",Red:"#ff0000",White:"#ffffff",Green:"#008000",Blue:"#0000ff",Lime:"#00ff00",Fuchsia:"#ff00ff",Black:"#000000"};let n="#ffff00";return void 0!==t[e]&&(n=t[e]),n}class y{#v;#b;#C;constructor(e,t,n){this.#v=e,this.#b=t,this.#C=n}getX(){return this.#v}getY(){return this.#b}getZ(){return this.#C}equals(e){return null!==e&&this.getX()===e.getX()&&this.getY()===e.getY()&&this.getZ()===e.getZ()}toString(){return"("+this.getX()+", "+this.getY()+", "+this.getZ()+")"}norm(){return Math.sqrt(this.getX()*this.getX()+this.getY()*this.getY()+this.getZ()*this.getZ())}crossProduct(e){return new y(this.getY()*e.getZ()-e.getY()*this.getZ(),this.getZ()*e.getX()-e.getZ()*this.getX(),this.getX()*e.getY()-e.getX()*this.getY())}dotProduct(e){return this.getX()*e.getX()+this.getY()*e.getY()+this.getZ()*e.getZ()}}const v=1e4*Number.EPSILON;function b(e,t,n){return void 0===n&&(n=Number.EPSILON),Math.abs(e-t)<n}class C{#e;#w;constructor(e){this.#e=e}get(e,t){return this.#e[3*e+t]}getInverse(){return void 0===this.#w&&(this.#w=function(e){const t=e.get(0,0),n=e.get(0,1),r=e.get(0,2),i=e.get(1,0),a=e.get(1,1),o=e.get(1,2),s=e.get(2,0),l=e.get(2,1),c=e.get(2,2),u=a*c-o*l,h=o*s-i*c,d=i*l-a*s;let f=t*u+n*h+r*d;if(0!==f)return f=1/f,new C([f*u,f*(r*l-n*c),f*(n*o-r*a),f*h,f*(t*c-r*s),f*(r*i-t*o),f*d,f*(n*s-t*l),f*(t*a-n*i)]);g.warn("Cannot invert 3*3 matrix with zero determinant.")}(this)),this.#w}equals(e,t){for(let n=0;n<3;++n)for(let r=0;r<3;++r)if(!b(this.get(n,r),e.get(n,r),t))return!1;return!0}toString(){let e="[";for(let t=0;t<3;++t){0!==t&&(e+=", \n ");for(let n=0;n<3;++n)0!==n&&(e+=", "),e+=this.get(t,n)}return e+="]",e}multiply(e){const t=[];for(let n=0;n<3;++n)for(let r=0;r<3;++r){let i=0;for(let t=0;t<3;++t)i+=this.get(n,t)*e.get(t,r);t.push(i)}return new C(t)}getAbs(){const e=[];for(let t=0;t<3;++t)for(let n=0;n<3;++n)e.push(Math.abs(this.get(t,n)));return new C(e)}multiplyArray3D(e){if(3!==e.length)throw new Error("Cannot multiply 3x3 matrix with non 3D array: "+e.length);const t=[];for(let n=0;n<3;++n){let r=0;for(let t=0;t<3;++t)r+=this.get(n,t)*e[t];t.push(r)}return t}multiplyVector3D(e){const t=this.multiplyArray3D([e.getX(),e.getY(),e.getZ()]);return new y(t[0],t[1],t[2])}multiplyPoint3D(e){const t=this.multiplyArray3D([e.getX(),e.getY(),e.getZ()]);return new P(t[0],t[1],t[2])}multiplyIndex3D(t){const n=this.multiplyArray3D(t.getValues());return new e(n)}getRowAbsMax(e){const t=[Math.abs(this.get(e,0)),Math.abs(this.get(e,1)),Math.abs(this.get(e,2))],n=Math.max.apply(null,t),r=t.indexOf(n);return{value:this.get(e,r),index:r}}getColAbsMax(e){const t=[Math.abs(this.get(0,e)),Math.abs(this.get(1,e)),Math.abs(this.get(2,e))],n=Math.max.apply(null,t),r=t.indexOf(n);return{value:this.get(r,e),index:r}}asOneAndZeros(){const e=[];for(let t=0;t<3;++t){const n=this.getRowAbsMax(t),r=n.value>0?1:-1;for(let t=0;t<3;++t)t===n.index?e.push(1*r):e.push(0)}return new C(e)}getThirdColMajorDirection(){return this.getColAbsMax(2).index}}function w(){return new C([1,0,0,0,1,0,0,0,1])}function x(){return new C([1,0,0,0,0,1,0,-1,0])}function D(e){let t=null;return"axial"===e?t=w():"coronal"===e?t=x():"sagittal"===e&&(t=new C([0,0,-1,1,0,0,0,-1,0])),t}class T{#v;#b;constructor(e,t){this.#v=e,this.#b=t}getX(){return this.#v}getY(){return this.#b}equals(e){return null!==e&&this.getX()===e.getX()&&this.getY()===e.getY()}toString(){return"("+this.getX()+", "+this.getY()+")"}getDistance(e){return Math.sqrt((this.getX()-e.getX())*(this.getX()-e.getX())+(this.getY()-e.getY())*(this.getY()-e.getY()))}getRound(){return new T(Math.round(this.getX()),Math.round(this.getY()))}}class P{#v;#b;#C;constructor(e,t,n){this.#v=e,this.#b=t,this.#C=n}getX(){return this.#v}getY(){return this.#b}getZ(){return this.#C}equals(e){return null!==e&&this.getX()===e.getX()&&this.getY()===e.getY()&&this.getZ()===e.getZ()}isSimilar(e,t){return null!==e&&b(this.getX(),e.getX(),t)&&b(this.getY(),e.getY(),t)&&b(this.getZ(),e.getZ(),t)}toString(){return"("+this.getX()+", "+this.getY()+", "+this.getZ()+")"}getDistance(e){return Math.sqrt((this.getX()-e.getX())*(this.getX()-e.getX())+(this.getY()-e.getY())*(this.getY()-e.getY())+(this.getZ()-e.getZ())*(this.getZ()-e.getZ()))}minus(e){return new y(this.getX()-e.getX(),this.getY()-e.getY(),this.getZ()-e.getZ())}}class I{#e;constructor(e){if(!e||void 0===e)throw new Error("Cannot create point with no values.");if(0===e.length)throw new Error("Cannot create point with empty values.");if(!e.every((function(e){return!isNaN(e)})))throw new Error("Cannot create point with non number values.");this.#e=e}get(e){return this.#e[e]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}canCompare(e){return!!e&&this.length()===e.length()}equals(e){if(!this.canCompare(e))return!1;for(let t=0,n=this.length();t<n;++t)if(this.get(t)!==e.get(t))return!1;return!0}compare(e){if(!this.canCompare(e))return null;const t=[];for(let n=0,r=this.length();n<r;++n)this.get(n)!==e.get(n)&&t.push(n);return t}get3D(){return new P(this.get(0),this.get(1),this.get(2))}add(e){if(!this.canCompare(e))return null;const t=[],n=this.getValues(),r=e.getValues();for(let e=0;e<n.length;++e)t.push(n[e]+r[e]);return new I(t)}mergeWith3D(e){const t=this.getValues();return t[0]=e.getX(),t[1]=e.getY(),t[2]=e.getZ(),new I(t)}}const A={"0000":{"0000":["UL","1","CommandGroupLength"],"0001":["UL","1","CommandLengthToEnd"],"0002":["UI","1","AffectedSOPClassUID"],"0003":["UI","1","RequestedSOPClassUID"],"0010":["SH","1","CommandRecognitionCode"],"0100":["US","1","CommandField"],"0110":["US","1","MessageID"],"0120":["US","1","MessageIDBeingRespondedTo"],"0200":["AE","1","Initiator"],"0300":["AE","1","Receiver"],"0400":["AE","1","FindLocation"],"0600":["AE","1","MoveDestination"],"0700":["US","1","Priority"],"0800":["US","1","CommandDataSetType"],"0850":["US","1","NumberOfMatches"],"0860":["US","1","ResponseSequenceNumber"],"0900":["US","1","Status"],"0901":["AT","1-n","OffendingElement"],"0902":["LO","1","ErrorComment"],"0903":["US","1","ErrorID"],1e3:["UI","1","AffectedSOPInstanceUID"],1001:["UI","1","RequestedSOPInstanceUID"],1002:["US","1","EventTypeID"],1005:["AT","1-n","AttributeIdentifierList"],1008:["US","1","ActionTypeID"],1020:["US","1","NumberOfRemainingSuboperations"],1021:["US","1","NumberOfCompletedSuboperations"],1022:["US","1","NumberOfFailedSuboperations"],1023:["US","1","NumberOfWarningSuboperations"],1030:["AE","1","MoveOriginatorApplicationEntityTitle"],1031:["US","1","MoveOriginatorMessageID"],4e3:["LT","1","DialogReceiver"],4010:["LT","1","TerminalType"],5010:["SH","1","MessageSetID"],5020:["SH","1","EndMessageID"],5110:["LT","1","DisplayFormat"],5120:["LT","1","PagePositionID"],5130:["CS","1","TextFormatID"],5140:["CS","1","NormalReverse"],5150:["CS","1","AddGrayScale"],5160:["CS","1","Borders"],5170:["IS","1","Copies"],5180:["CS","1","CommandMagnificationType"],5190:["CS","1","Erase"],"51A0":["CS","1","Print"],"51B0":["US","1-n","Overlays"]},"0002":{"0000":["UL","1","FileMetaInformationGroupLength"],"0001":["OB","1","FileMetaInformationVersion"],"0002":["UI","1","MediaStorageSOPClassUID"],"0003":["UI","1","MediaStorageSOPInstanceUID"],"0010":["UI","1","TransferSyntaxUID"],"0012":["UI","1","ImplementationClassUID"],"0013":["SH","1","ImplementationVersionName"],"0016":["AE","1","SourceApplicationEntityTitle"],"0017":["AE","1","SendingApplicationEntityTitle"],"0018":["AE","1","ReceivingApplicationEntityTitle"],"0026":["UR","1","SourcePresentationAddress"],"0027":["UR","1","SendingPresentationAddress"],"0028":["UR","1","ReceivingPresentationAddress"],"0031":["OB","1","RTVMetaInformationVersion"],"0032":["UI","1","RTVCommunicationSOPClassUID"],"0033":["UI","1","RTVCommunicationSOPInstanceUID"],"0035":["OB","1","RTVSourceIdentifier"],"0036":["OB","1","RTVFlowIdentifier"],"0037":["UL","1","RTVFlowRTPSamplingRate"],"0038":["FD","1","RTVFlowActualFrameDuration"],"0100":["UI","1","PrivateInformationCreatorUID"],"0102":["OB","1","PrivateInformation"]},"0004":{"0000":["UL","1","GenericGroupLength"],1130:["CS","1","FileSetID"],1141:["CS","1-8","FileSetDescriptorFileID"],1142:["CS","1","SpecificCharacterSetOfFileSetDescriptorFile"],1200:["UL","1","OffsetOfTheFirstDirectoryRecordOfTheRootDirectoryEntity"],1202:["UL","1","OffsetOfTheLastDirectoryRecordOfTheRootDirectoryEntity"],1212:["US","1","FileSetConsistencyFlag"],1220:["SQ","1","DirectoryRecordSequence"],1400:["UL","1","OffsetOfTheNextDirectoryRecord"],1410:["US","1","RecordInUseFlag"],1420:["UL","1","OffsetOfReferencedLowerLevelDirectoryEntity"],1430:["CS","1","DirectoryRecordType"],1432:["UI","1","PrivateRecordUID"],1500:["CS","1-8","ReferencedFileID"],1504:["UL","1","MRDRDirectoryRecordOffset"],1510:["UI","1","ReferencedSOPClassUIDInFile"],1511:["UI","1","ReferencedSOPInstanceUIDInFile"],1512:["UI","1","ReferencedTransferSyntaxUIDInFile"],"151A":["UI","1-n","ReferencedRelatedGeneralSOPClassUIDInFile"],1600:["UL","1","NumberOfReferences"]},"0008":{"0000":["UL","1","GenericGroupLength"],"0001":["UL","1","LengthToEnd"],"0005":["CS","1-n","SpecificCharacterSet"],"0006":["SQ","1","LanguageCodeSequence"],"0008":["CS","2-n","ImageType"],"0010":["SH","1","RecognitionCode"],"0012":["DA","1","InstanceCreationDate"],"0013":["TM","1","InstanceCreationTime"],"0014":["UI","1","InstanceCreatorUID"],"0015":["DT","1","InstanceCoercionDateTime"],"0016":["UI","1","SOPClassUID"],"0018":["UI","1","SOPInstanceUID"],"001A":["UI","1-n","RelatedGeneralSOPClassUID"],"001B":["UI","1","OriginalSpecializedSOPClassUID"],"0020":["DA","1","StudyDate"],"0021":["DA","1","SeriesDate"],"0022":["DA","1","AcquisitionDate"],"0023":["DA","1","ContentDate"],"0024":["DA","1","OverlayDate"],"0025":["DA","1","CurveDate"],"002A":["DT","1","AcquisitionDateTime"],"0030":["TM","1","StudyTime"],"0031":["TM","1","SeriesTime"],"0032":["TM","1","AcquisitionTime"],"0033":["TM","1","ContentTime"],"0034":["TM","1","OverlayTime"],"0035":["TM","1","CurveTime"],"0040":["US","1","DataSetType"],"0041":["LO","1","DataSetSubtype"],"0042":["CS","1","NuclearMedicineSeriesType"],"0050":["SH","1","AccessionNumber"],"0051":["SQ","1","IssuerOfAccessionNumberSequence"],"0052":["CS","1","QueryRetrieveLevel"],"0053":["CS","1","QueryRetrieveView"],"0054":["AE","1-n","RetrieveAETitle"],"0055":["AE","1","StationAETitle"],"0056":["CS","1","InstanceAvailability"],"0058":["UI","1-n","FailedSOPInstanceUIDList"],"0060":["CS","1","Modality"],"0061":["CS","1-n","ModalitiesInStudy"],"0062":["UI","1-n","SOPClassesInStudy"],"0063":["SQ","1","AnatomicRegionsInStudyCodeSequence"],"0064":["CS","1","ConversionType"],"0068":["CS","1","PresentationIntentType"],"0070":["LO","1","Manufacturer"],"0080":["LO","1","InstitutionName"],"0081":["ST","1","InstitutionAddress"],"0082":["SQ","1","InstitutionCodeSequence"],"0090":["PN","1","ReferringPhysicianName"],"0092":["ST","1","ReferringPhysicianAddress"],"0094":["SH","1-n","ReferringPhysicianTelephoneNumbers"],"0096":["SQ","1","ReferringPhysicianIdentificationSequence"],"009C":["PN","1-n","ConsultingPhysicianName"],"009D":["SQ","1","ConsultingPhysicianIdentificationSequence"],"0100":["SH","1","CodeValue"],"0101":["LO","1","ExtendedCodeValue"],"0102":["SH","1","CodingSchemeDesignator"],"0103":["SH","1","CodingSchemeVersion"],"0104":["LO","1","CodeMeaning"],"0105":["CS","1","MappingResource"],"0106":["DT","1","ContextGroupVersion"],"0107":["DT","1","ContextGroupLocalVersion"],"0108":["LT","1","ExtendedCodeMeaning"],"0109":["SQ","1","CodingSchemeResourcesSequence"],"010A":["CS","1","CodingSchemeURLType"],"010B":["CS","1","ContextGroupExtensionFlag"],"010C":["UI","1","CodingSchemeUID"],"010D":["UI","1","ContextGroupExtensionCreatorUID"],"010E":["UR","1","CodingSchemeURL"],"010F":["CS","1","ContextIdentifier"],"0110":["SQ","1","CodingSchemeIdentificationSequence"],"0112":["LO","1","CodingSchemeRegistry"],"0114":["ST","1","CodingSchemeExternalID"],"0115":["ST","1","CodingSchemeName"],"0116":["ST","1","CodingSchemeResponsibleOrganization"],"0117":["UI","1","ContextUID"],"0118":["UI","1","MappingResourceUID"],"0119":["UC","1","LongCodeValue"],"0120":["UR","1","URNCodeValue"],"0121":["SQ","1","EquivalentCodeSequence"],"0122":["LO","1","MappingResourceName"],"0123":["SQ","1","ContextGroupIdentificationSequence"],"0124":["SQ","1","MappingResourceIdentificationSequence"],"0201":["SH","1","TimezoneOffsetFromUTC"],"0202":["","",""],"0220":["SQ","1","ResponsibleGroupCodeSequence"],"0221":["CS","1","EquipmentModality"],"0222":["LO","1","ManufacturerRelatedModelGroup"],"0300":["SQ","1","PrivateDataElementCharacteristicsSequence"],"0301":["US","1","PrivateGroupReference"],"0302":["LO","1","PrivateCreatorReference"],"0303":["CS","1","BlockIdentifyingInformationStatus"],"0304":["US","1-n","NonidentifyingPrivateElements"],"0305":["SQ","1","DeidentificationActionSequence"],"0306":["US","1-n","IdentifyingPrivateElements"],"0307":["CS","1","DeidentificationAction"],"0308":["US","1","PrivateDataElement"],"0309":["UL","1-3","PrivateDataElementValueMultiplicity"],"030A":["CS","1","PrivateDataElementValueRepresentation"],"030B":["UL","1-2","PrivateDataElementNumberOfItems"],"030C":["UC","1","PrivateDataElementName"],"030D":["UC","1","PrivateDataElementKeyword"],"030E":["UT","1","PrivateDataElementDescription"],"030F":["UT","1","PrivateDataElementEncoding"],"0310":["SQ","1","PrivateDataElementDefinitionSequence"],1e3:["AE","1","NetworkID"],1010:["SH","1","StationName"],1030:["LO","1","StudyDescription"],1032:["SQ","1","ProcedureCodeSequence"],"103E":["LO","1","SeriesDescription"],"103F":["SQ","1","SeriesDescriptionCodeSequence"],1040:["LO","1","InstitutionalDepartmentName"],1041:["SQ","1","InstitutionalDepartmentTypeCodeSequence"],1048:["PN","1-n","PhysiciansOfRecord"],1049:["SQ","1","PhysiciansOfRecordIdentificationSequence"],1050:["PN","1-n","PerformingPhysicianName"],1052:["SQ","1","PerformingPhysicianIdentificationSequence"],1060:["PN","1-n","NameOfPhysiciansReadingStudy"],1062:["SQ","1","PhysiciansReadingStudyIdentificationSequence"],1070:["PN","1-n","OperatorsName"],1072:["SQ","1","OperatorIdentificationSequence"],1080:["LO","1-n","AdmittingDiagnosesDescription"],1084:["SQ","1","AdmittingDiagnosesCodeSequence"],1090:["LO","1","ManufacturerModelName"],1100:["SQ","1","ReferencedResultsSequence"],1110:["SQ","1","ReferencedStudySequence"],1111:["SQ","1","ReferencedPerformedProcedureStepSequence"],1115:["SQ","1","ReferencedSeriesSequence"],1120:["SQ","1","ReferencedPatientSequence"],1125:["SQ","1","ReferencedVisitSequence"],1130:["SQ","1","ReferencedOverlaySequence"],1134:["SQ","1","ReferencedStereometricInstanceSequence"],"113A":["SQ","1","ReferencedWaveformSequence"],1140:["SQ","1","ReferencedImageSequence"],1145:["SQ","1","ReferencedCurveSequence"],"114A":["SQ","1","ReferencedInstanceSequence"],"114B":["SQ","1","ReferencedRealWorldValueMappingInstanceSequence"],1150:["UI","1","ReferencedSOPClassUID"],1155:["UI","1","ReferencedSOPInstanceUID"],1156:["SQ","1","DefinitionSourceSequence"],"115A":["UI","1-n","SOPClassesSupported"],1160:["IS","1-n","ReferencedFrameNumber"],1161:["UL","1-n","SimpleFrameList"],1162:["UL","3-3n","CalculatedFrameList"],1163:["FD","2","TimeRange"],1164:["SQ","1","FrameExtractionSequence"],1167:["UI","1","MultiFrameSourceSOPInstanceUID"],1190:["UR","1","RetrieveURL"],1195:["UI","1","TransactionUID"],1196:["US","1","WarningReason"],1197:["US","1","FailureReason"],1198:["SQ","1","FailedSOPSequence"],1199:["SQ","1","ReferencedSOPSequence"],"119A":["SQ","1","OtherFailuresSequence"],1200:["SQ","1","StudiesContainingOtherReferencedInstancesSequence"],1250:["SQ","1","RelatedSeriesSequence"],2110:["CS","1","LossyImageCompressionRetired"],2111:["ST","1","DerivationDescription"],2112:["SQ","1","SourceImageSequence"],2120:["SH","1","StageName"],2122:["IS","1","StageNumber"],2124:["IS","1","NumberOfStages"],2127:["SH","1","ViewName"],2128:["IS","1","ViewNumber"],2129:["IS","1","NumberOfEventTimers"],"212A":["IS","1","NumberOfViewsInStage"],2130:["DS","1-n","EventElapsedTimes"],2132:["LO","1-n","EventTimerNames"],2133:["SQ","1","EventTimerSequence"],2134:["FD","1","EventTimeOffset"],2135:["SQ","1","EventCodeSequence"],2142:["IS","1","StartTrim"],2143:["IS","1","StopTrim"],2144:["IS","1","RecommendedDisplayFrameRate"],2200:["CS","1","TransducerPosition"],2204:["CS","1","TransducerOrientation"],2208:["CS","1","AnatomicStructure"],2218:["SQ","1","AnatomicRegionSequence"],2220:["SQ","1","AnatomicRegionModifierSequence"],2228:["SQ","1","PrimaryAnatomicStructureSequence"],2229:["SQ","1","AnatomicStructureSpaceOrRegionSequence"],2230:["SQ","1","PrimaryAnatomicStructureModifierSequence"],2240:["SQ","1","TransducerPositionSequence"],2242:["SQ","1","TransducerPositionModifierSequence"],2244:["SQ","1","TransducerOrientationSequence"],2246:["SQ","1","TransducerOrientationModifierSequence"],2251:["SQ","1","AnatomicStructureSpaceOrRegionCodeSequenceTrial"],2253:["SQ","1","AnatomicPortalOfEntranceCodeSequenceTrial"],2255:["SQ","1","AnatomicApproachDirectionCodeSequenceTrial"],2256:["ST","1","AnatomicPerspectiveDescriptionTrial"],2257:["SQ","1","AnatomicPerspectiveCodeSequenceTrial"],2258:["ST","1","AnatomicLocationOfExaminingInstrumentDescriptionTrial"],2259:["SQ","1","AnatomicLocationOfExaminingInstrumentCodeSequenceTrial"],"225A":["SQ","1","AnatomicStructureSpaceOrRegionModifierCodeSequenceTrial"],"225C":["SQ","1","OnAxisBackgroundAnatomicStructureCodeSequenceTrial"],3001:["SQ","1","AlternateRepresentationSequence"],3002:["UI","1-n","AvailableTransferSyntaxUID"],3010:["UI","1-n","IrradiationEventUID"],3011:["SQ","1","SourceIrradiationEventSequence"],3012:["UI","1","RadiopharmaceuticalAdministrationEventUID"],4e3:["LT","1","IdentifyingComments"],9007:["CS","4","FrameType"],9092:["SQ","1","ReferencedImageEvidenceSequence"],9121:["SQ","1","ReferencedRawDataSequence"],9123:["UI","1","CreatorVersionUID"],9124:["SQ","1","DerivationImageSequence"],9154:["SQ","1","SourceImageEvidenceSequence"],9205:["CS","1","PixelPresentation"],9206:["CS","1","VolumetricProperties"],9207:["CS","1","VolumeBasedCalculationTechnique"],9208:["CS","1","ComplexImageComponent"],9209:["CS","1","AcquisitionContrast"],9215:["SQ","1","DerivationCodeSequence"],9237:["SQ","1","ReferencedPresentationStateSequence"],9410:["SQ","1","ReferencedOtherPlaneSequence"],9458:["SQ","1","FrameDisplaySequence"],9459:["FL","1","RecommendedDisplayFrameRateInFloat"],9460:["CS","1","SkipFrameRangeFlag"]},"0010":{"0000":["UL","1","GenericGroupLength"],"0010":["PN","1","PatientName"],"0020":["LO","1","PatientID"],"0021":["LO","1","IssuerOfPatientID"],"0022":["CS","1","TypeOfPatientID"],"0024":["SQ","1","IssuerOfPatientIDQualifiersSequence"],"0026":["SQ","1","SourcePatientGroupIdentificationSequence"],"0027":["SQ","1","GroupOfPatientsIdentificationSequence"],"0028":["US","3","SubjectRelativePositionInImage"],"0030":["DA","1","PatientBirthDate"],"0032":["TM","1","PatientBirthTime"],"0033":["LO","1","PatientBirthDateInAlternativeCalendar"],"0034":["LO","1","PatientDeathDateInAlternativeCalendar"],"0035":["CS","1","PatientAlternativeCalendar"],"0040":["CS","1","PatientSex"],"0050":["SQ","1","PatientInsurancePlanCodeSequence"],"0101":["SQ","1","PatientPrimaryLanguageCodeSequence"],"0102":["SQ","1","PatientPrimaryLanguageModifierCodeSequence"],"0200":["CS","1","QualityControlSubject"],"0201":["SQ","1","QualityControlSubjectTypeCodeSequence"],"0212":["UC","1","StrainDescription"],"0213":["LO","1","StrainNomenclature"],"0214":["LO","1","StrainStockNumber"],"0215":["SQ","1","StrainSourceRegistryCodeSequence"],"0216":["SQ","1","StrainStockSequence"],"0217":["LO","1","StrainSource"],"0218":["UT","1","StrainAdditionalInformation"],"0219":["SQ","1","StrainCodeSequence"],"0221":["SQ","1","GeneticModificationsSequence"],"0222":["UC","1","GeneticModificationsDescription"],"0223":["LO","1","GeneticModificationsNomenclature"],"0229":["SQ","1","GeneticModificationsCodeSequence"],1e3:["LO","1-n","OtherPatientIDs"],1001:["PN","1-n","OtherPatientNames"],1002:["SQ","1","OtherPatientIDsSequence"],1005:["PN","1","PatientBirthName"],1010:["AS","1","PatientAge"],1020:["DS","1","PatientSize"],1021:["SQ","1","PatientSizeCodeSequence"],1022:["DS","1","PatientBodyMassIndex"],1023:["DS","1","MeasuredAPDimension"],1024:["DS","1","MeasuredLateralDimension"],1030:["DS","1","PatientWeight"],1040:["LO","1","PatientAddress"],1050:["LO","1-n","InsurancePlanIdentification"],1060:["PN","1","PatientMotherBirthName"],1080:["LO","1","MilitaryRank"],1081:["LO","1","BranchOfService"],1090:["LO","1","MedicalRecordLocator"],1100:["SQ","1","ReferencedPatientPhotoSequence"],2e3:["LO","1-n","MedicalAlerts"],2110:["LO","1-n","Allergies"],2150:["LO","1","CountryOfResidence"],2152:["LO","1","RegionOfResidence"],2154:["SH","1-n","PatientTelephoneNumbers"],2155:["LT","1","PatientTelecomInformation"],2160:["SH","1","EthnicGroup"],2180:["SH","1","Occupation"],"21A0":["CS","1","SmokingStatus"],"21B0":["LT","1","AdditionalPatientHistory"],"21C0":["US","1","PregnancyStatus"],"21D0":["DA","1","LastMenstrualDate"],"21F0":["LO","1","PatientReligiousPreference"],2201:["LO","1","PatientSpeciesDescription"],2202:["SQ","1","PatientSpeciesCodeSequence"],2203:["CS","1","PatientSexNeutered"],2210:["CS","1","AnatomicalOrientationType"],2292:["LO","1","PatientBreedDescription"],2293:["SQ","1","PatientBreedCodeSequence"],2294:["SQ","1","BreedRegistrationSequence"],2295:["LO","1","BreedRegistrationNumber"],2296:["SQ","1","BreedRegistryCodeSequence"],2297:["PN","1","ResponsiblePerson"],2298:["CS","1","ResponsiblePersonRole"],2299:["LO","1","ResponsibleOrganization"],4e3:["LT","1","PatientComments"],9431:["FL","1","ExaminedBodyThickness"]},"0012":{"0000":["UL","1","GenericGroupLength"],"0010":["LO","1","ClinicalTrialSponsorName"],"0020":["LO","1","ClinicalTrialProtocolID"],"0021":["LO","1","ClinicalTrialProtocolName"],"0030":["LO","1","ClinicalTrialSiteID"],"0031":["LO","1","ClinicalTrialSiteName"],"0040":["LO","1","ClinicalTrialSubjectID"],"0042":["LO","1","ClinicalTrialSubjectReadingID"],"0050":["LO","1","ClinicalTrialTimePointID"],"0051":["ST","1","ClinicalTrialTimePointDescription"],"0052":["FD","1","LongitudinalTemporalOffsetFromEvent"],"0053":["CS","1","LongitudinalTemporalEventType"],"0060":["LO","1","ClinicalTrialCoordinatingCenterName"],"0062":["CS","1","PatientIdentityRemoved"],"0063":["LO","1-n","DeidentificationMethod"],"0064":["SQ","1","DeidentificationMethodCodeSequence"],"0071":["LO","1","ClinicalTrialSeriesID"],"0072":["LO","1","ClinicalTrialSeriesDescription"],"0081":["LO","1","ClinicalTrialProtocolEthicsCommitteeName"],"0082":["LO","1","ClinicalTrialProtocolEthicsCommitteeApprovalNumber"],"0083":["SQ","1","ConsentForClinicalTrialUseSequence"],"0084":["CS","1","DistributionType"],"0085":["CS","1","ConsentForDistributionFlag"],"0086":["DA","1","EthicsCommitteeApprovalEffectivenessStartDate"],"0087":["DA","1","EthicsCommitteeApprovalEffectivenessEndDate"]},"0014":{"0000":["UL","1","GenericGroupLength"],"0023":["ST","1","CADFileFormat"],"0024":["ST","1","ComponentReferenceSystem"],"0025":["ST","1","ComponentManufacturingProcedure"],"0028":["ST","1","ComponentManufacturer"],"0030":["DS","1-n","MaterialThickness"],"0032":["DS","1-n","MaterialPipeDiameter"],"0034":["DS","1-n","MaterialIsolationDiameter"],"0042":["ST","1","MaterialGrade"],"0044":["ST","1","MaterialPropertiesDescription"],"0045":["ST","1","MaterialPropertiesFileFormatRetired"],"0046":["LT","1","MaterialNotes"],"0050":["CS","1","ComponentShape"],"0052":["CS","1","CurvatureType"],"0054":["DS","1","OuterDiameter"],"0056":["DS","1","InnerDiameter"],"0100":["LO","1-n","ComponentWelderIDs"],"0101":["CS","1","SecondaryApprovalStatus"],"0102":["DA","1","SecondaryReviewDate"],"0103":["TM","1","SecondaryReviewTime"],"0104":["PN","1","SecondaryReviewerName"],"0105":["ST","1","RepairID"],"0106":["SQ","1","MultipleComponentApprovalSequence"],"0107":["CS","1-n","OtherApprovalStatus"],"0108":["CS","1-n","OtherSecondaryApprovalStatus"],1010:["ST","1","ActualEnvironmentalConditions"],1020:["DA","1","ExpiryDate"],1040:["ST","1","EnvironmentalConditions"],2002:["SQ","1","EvaluatorSequence"],2004:["IS","1","EvaluatorNumber"],2006:["PN","1","EvaluatorName"],2008:["IS","1","EvaluationAttempt"],2012:["SQ","1","IndicationSequence"],2014:["IS","1","IndicationNumber"],2016:["SH","1","IndicationLabel"],2018:["ST","1","IndicationDescription"],"201A":["CS","1-n","IndicationType"],"201C":["CS","1","IndicationDisposition"],"201E":["SQ","1","IndicationROISequence"],2030:["SQ","1","IndicationPhysicalPropertySequence"],2032:["SH","1","PropertyLabel"],2202:["IS","1","CoordinateSystemNumberOfAxes"],2204:["SQ","1","CoordinateSystemAxesSequence"],2206:["ST","1","CoordinateSystemAxisDescription"],2208:["CS","1","CoordinateSystemDataSetMapping"],"220A":["IS","1","CoordinateSystemAxisNumber"],"220C":["CS","1","CoordinateSystemAxisType"],"220E":["CS","1","CoordinateSystemAxisUnits"],2210:["OB","1","CoordinateSystemAxisValues"],2220:["SQ","1","CoordinateSystemTransformSequence"],2222:["ST","1","TransformDescription"],2224:["IS","1","TransformNumberOfAxes"],2226:["IS","1-n","TransformOrderOfAxes"],2228:["CS","1","TransformedAxisUnits"],"222A":["DS","1-n","CoordinateSystemTransformRotationAndScaleMatrix"],"222C":["DS","1-n","CoordinateSystemTransformTranslationMatrix"],3011:["DS","1","InternalDetectorFrameTime"],3012:["DS","1","NumberOfFramesIntegrated"],3020:["SQ","1","DetectorTemperatureSequence"],3022:["ST","1","SensorName"],3024:["DS","1","HorizontalOffsetOfSensor"],3026:["DS","1","VerticalOffsetOfSensor"],3028:["DS","1","SensorTemperature"],3040:["SQ","1","DarkCurrentSequence"],3050:["ox","1","DarkCurrentCounts"],3060:["SQ","1","GainCorrectionReferenceSequence"],3070:["ox","1","AirCounts"],3071:["DS","1","KVUsedInGainCalibration"],3072:["DS","1","MAUsedInGainCalibration"],3073:["DS","1","NumberOfFramesUsedForIntegration"],3074:["LO","1","FilterMaterialUsedInGainCalibration"],3075:["DS","1","FilterThicknessUsedInGainCalibration"],3076:["DA","1","DateOfGainCalibration"],3077:["TM","1","TimeOfGainCalibration"],3080:["OB","1","BadPixelImage"],3099:["LT","1","CalibrationNotes"],3100:["LT","1","LinearityCorrectionTechnique"],3101:["LT","1","BeamHardeningCorrectionTechnique"],4002:["SQ","1","PulserEquipmentSequence"],4004:["CS","1","PulserType"],4006:["LT","1","PulserNotes"],4008:["SQ","1","ReceiverEquipmentSequence"],"400A":["CS","1","AmplifierType"],"400C":["LT","1","ReceiverNotes"],"400E":["SQ","1","PreAmplifierEquipmentSequence"],"400F":["LT","1","PreAmplifierNotes"],4010:["SQ","1","TransmitTransducerSequence"],4011:["SQ","1","ReceiveTransducerSequence"],4012:["US","1","NumberOfElements"],4013:["CS","1","ElementShape"],4014:["DS","1","ElementDimensionA"],4015:["DS","1","ElementDimensionB"],4016:["DS","1","ElementPitchA"],4017:["DS","1","MeasuredBeamDimensionA"],4018:["DS","1","MeasuredBeamDimensionB"],4019:["DS","1","LocationOfMeasuredBeamDiameter"],"401A":["DS","1","NominalFrequency"],"401B":["DS","1","MeasuredCenterFrequency"],"401C":["DS","1","MeasuredBandwidth"],"401D":["DS","1","ElementPitchB"],4020:["SQ","1","PulserSettingsSequence"],4022:["DS","1","PulseWidth"],4024:["DS","1","ExcitationFrequency"],4026:["CS","1","ModulationType"],4028:["DS","1","Damping"],4030:["SQ","1","ReceiverSettingsSequence"],4031:["DS","1","AcquiredSoundpathLength"],4032:["CS","1","AcquisitionCompressionType"],4033:["IS","1","AcquisitionSampleSize"],4034:["DS","1","RectifierSmoothing"],4035:["SQ","1","DACSequence"],4036:["CS","1","DACType"],4038:["DS","1-n","DACGainPoints"],"403A":["DS","1-n","DACTimePoints"],"403C":["DS","1-n","DACAmplitude"],4040:["SQ","1","PreAmplifierSettingsSequence"],4050:["SQ","1","TransmitTransducerSettingsSequence"],4051:["SQ","1","ReceiveTransducerSettingsSequence"],4052:["DS","1","IncidentAngle"],4054:["ST","1","CouplingTechnique"],4056:["ST","1","CouplingMedium"],4057:["DS","1","CouplingVelocity"],4058:["DS","1","ProbeCenterLocationX"],4059:["DS","1","ProbeCenterLocationZ"],"405A":["DS","1","SoundPathLength"],"405C":["ST","1","DelayLawIdentifier"],4060:["SQ","1","GateSettingsSequence"],4062:["DS","1","GateThreshold"],4064:["DS","1","VelocityOfSound"],4070:["SQ","1","CalibrationSettingsSequence"],4072:["ST","1","CalibrationProcedure"],4074:["SH","1","ProcedureVersion"],4076:["DA","1","ProcedureCreationDate"],4078:["DA","1","ProcedureExpirationDate"],"407A":["DA","1","ProcedureLastModifiedDate"],"407C":["TM","1-n","CalibrationTime"],"407E":["DA","1-n","CalibrationDate"],4080:["SQ","1","ProbeDriveEquipmentSequence"],4081:["CS","1","DriveType"],4082:["LT","1","ProbeDriveNotes"],4083:["SQ","1","DriveProbeSequence"],4084:["DS","1","ProbeInductance"],4085:["DS","1","ProbeResistance"],4086:["SQ","1","ReceiveProbeSequence"],4087:["SQ","1","ProbeDriveSettingsSequence"],4088:["DS","1","BridgeResistors"],4089:["DS","1","ProbeOrientationAngle"],"408B":["DS","1","UserSelectedGainY"],"408C":["DS","1","UserSelectedPhase"],"408D":["DS","1","UserSelectedOffsetX"],"408E":["DS","1","UserSelectedOffsetY"],4091:["SQ","1","ChannelSettingsSequence"],4092:["DS","1","ChannelThreshold"],"409A":["SQ","1","ScannerSettingsSequence"],"409B":["ST","1","ScanProcedure"],"409C":["DS","1","TranslationRateX"],"409D":["DS","1","TranslationRateY"],"409F":["DS","1","ChannelOverlap"],"40A0":["LO","1-n","ImageQualityIndicatorType"],"40A1":["LO","1-n","ImageQualityIndicatorMaterial"],"40A2":["LO","1-n","ImageQualityIndicatorSize"],5002:["IS","1","LINACEnergy"],5004:["IS","1","LINACOutput"],5100:["US","1","ActiveAperture"],5101:["DS","1","TotalAperture"],5102:["DS","1","ApertureElevation"],5103:["DS","1","MainLobeAngle"],5104:["DS","1","MainRoofAngle"],5105:["CS","1","ConnectorType"],5106:["SH","1","WedgeModelNumber"],5107:["DS","1","WedgeAngleFloat"],5108:["DS","1","WedgeRoofAngle"],5109:["CS","1","WedgeElement1Position"],"510A":["DS","1","WedgeMaterialVelocity"],"510B":["SH","1","WedgeMaterial"],"510C":["DS","1","WedgeOffsetZ"],"510D":["DS","1","WedgeOriginOffsetX"],"510E":["DS","1","WedgeTimeDelay"],"510F":["SH","1","WedgeName"],5110:["SH","1","WedgeManufacturerName"],5111:["LO","1","WedgeDescription"],5112:["DS","1","NominalBeamAngle"],5113:["DS","1","WedgeOffsetX"],5114:["DS","1","WedgeOffsetY"],5115:["DS","1","WedgeTotalLength"],5116:["DS","1","WedgeInContactLength"],5117:["DS","1","WedgeFrontGap"],5118:["DS","1","WedgeTotalHeight"],5119:["DS","1","WedgeFrontHeight"],"511A":["DS","1","WedgeRearHeight"],"511B":["DS","1","WedgeTotalWidth"],"511C":["DS","1","WedgeInContactWidth"],"511D":["DS","1","WedgeChamferHeight"],"511E":["CS","1","WedgeCurve"],"511F":["DS","1","RadiusAlongWedge"]},"0016":{"0000":["UL","1","GenericGroupLength"],"0001":["DS","1","WhitePoint"],"0002":["DS","3","PrimaryChromaticities"],"0003":["UT","1","BatteryLevel"],"0004":["DS","1","ExposureTimeInSeconds"],"0005":["DS","1","FNumber"],"0006":["IS","1","OECFRows"],"0007":["IS","1","OECFColumns"],"0008":["UC","1-n","OECFColumnNames"],"0009":["DS","1-n","OECFValues"],"000A":["IS","1","SpatialFrequencyResponseRows"],"000B":["IS","1","SpatialFrequencyResponseColumns"],"000C":["UC","1-n","SpatialFrequencyResponseColumnNames"],"000D":["DS","1-n","SpatialFrequencyResponseValues"],"000E":["IS","1","ColorFilterArrayPatternRows"],"000F":["IS","1","ColorFilterArrayPatternColumns"],"0010":["DS","1-n","ColorFilterArrayPatternValues"],"0011":["US","1","FlashFiringStatus"],"0012":["US","1","FlashReturnStatus"],"0013":["US","1","FlashMode"],"0014":["US","1","FlashFunctionPresent"],"0015":["US","1","FlashRedEyeMode"],"0016":["US","1","ExposureProgram"],"0017":["UT","1","SpectralSensitivity"],"0018":["IS","1","PhotographicSensitivity"],"0019":["IS","1","SelfTimerMode"],"001A":["US","1","SensitivityType"],"001B":["IS","1","StandardOutputSensitivity"],"001C":["IS","1","RecommendedExposureIndex"],"001D":["IS","1","ISOSpeed"],"001E":["IS","1","ISOSpeedLatitudeyyy"],"001F":["IS","1","ISOSpeedLatitudezzz"],"0020":["UT","1","EXIFVersion"],"0021":["DS","1","ShutterSpeedValue"],"0022":["DS","1","ApertureValue"],"0023":["DS","1","BrightnessValue"],"0024":["DS","1","ExposureBiasValue"],"0025":["DS","1","MaxApertureValue"],"0026":["DS","1","SubjectDistance"],"0027":["US","1","MeteringMode"],"0028":["US","1","LightSource"],"0029":["DS","1","FocalLength"],"002A":["IS","2-4","SubjectArea"],"002B":["OB","1","MakerNote"],"0030":["DS","1","Temperature"],"0031":["DS","1","Humidity"],"0032":["DS","1","Pressure"],"0033":["DS","1","WaterDepth"],"0034":["DS","1","Acceleration"],"0035":["DS","1","CameraElevationAngle"],"0036":["DS","1-2","FlashEnergy"],"0037":["IS","2","SubjectLocation"],"0038":["DS","1","PhotographicExposureIndex"],"0039":["US","1","SensingMethod"],"003A":["US","1","FileSource"],"003B":["US","1","SceneType"],"0041":["US","1","CustomRendered"],"0042":["US","1","ExposureMode"],"0043":["US","1","WhiteBalance"],"0044":["DS","1","DigitalZoomRatio"],"0045":["IS","1","FocalLengthIn35mmFilm"],"0046":["US","1","SceneCaptureType"],"0047":["US","1","GainControl"],"0048":["US","1","Contrast"],"0049":["US","1","Saturation"],"004A":["US","1","Sharpness"],"004B":["OB","1","DeviceSettingDescription"],"004C":["US","1","SubjectDistanceRange"],"004D":["UT","1","CameraOwnerName"],"004E":["DS","4","LensSpecification"],"004F":["UT","1","LensMake"],"0050":["UT","1","LensModel"],"0051":["UT","1","LensSerialNumber"],"0061":["CS","1","InteroperabilityIndex"],"0062":["OB","1","InteroperabilityVersion"],"0070":["OB","1","GPSVersionID"],"0071":["CS","1","GPSLatitudeRef"],"0072":["DS","3","GPSLatitude"],"0073":["CS","1","GPSLongitudeRef"],"0074":["DS","3","GPSLongitude"],"0075":["US","1","GPSAltitudeRef"],"0076":["DS","1","GPSAltitude"],"0077":["DT","1","GPSTimeStamp"],"0078":["UT","1","GPSSatellites"],"0079":["CS","1","GPSStatus"],"007A":["CS","1","GPSMeasureMode"],"007B":["DS","1","GPSDOP"],"007C":["CS","1","GPSSpeedRef"],"007D":["DS","1","GPSSpeed"],"007E":["CS","1","GPSTrackRef"],"007F":["DS","1","GPSTrack"],"0080":["CS","1","GPSImgDirectionRef"],"0081":["DS","1","GPSImgDirection"],"0082":["UT","1","GPSMapDatum"],"0083":["CS","1","GPSDestLatitudeRef"],"0084":["DS","3","GPSDestLatitude"],"0085":["CS","1","GPSDestLongitudeRef"],"0086":["DS","3","GPSDestLongitude"],"0087":["CS","1","GPSDestBearingRef"],"0088":["DS","1","GPSDestBearing"],"0089":["CS","1","GPSDestDistanceRef"],"008A":["DS","1","GPSDestDistance"],"008B":["OB","1","GPSProcessingMethod"],"008C":["OB","1","GPSAreaInformation"],"008D":["DT","1","GPSDateStamp"],"008E":["IS","1","GPSDifferential"],1001:["CS","1","LightSourcePolarization"],1002:["DS","1","EmitterColorTemperature"],1003:["CS","1","ContactMethod"],1004:["CS","1-n","ImmersionMedia"],1005:["DS","1","OpticalMagnificationFactor"]},"0018":{"0000":["UL","1","GenericGroupLength"],"0010":["LO","1","ContrastBolusAgent"],"0012":["SQ","1","ContrastBolusAgentSequence"],"0013":["FL","1","ContrastBolusT1Relaxivity"],"0014":["SQ","1","ContrastBolusAdministrationRouteSequence"],"0015":["CS","1","BodyPartExamined"],"0020":["CS","1-n","ScanningSequence"],"0021":["CS","1-n","SequenceVariant"],"0022":["CS","1-n","ScanOptions"],"0023":["CS","1","MRAcquisitionType"],"0024":["SH","1","SequenceName"],"0025":["CS","1","AngioFlag"],"0026":["SQ","1","InterventionDrugInformationSequence"],"0027":["TM","1","InterventionDrugStopTime"],"0028":["DS","1","InterventionDrugDose"],"0029":["SQ","1","InterventionDrugCodeSequence"],"002A":["SQ","1","AdditionalDrugSequence"],"0030":["LO","1-n","Radionuclide"],"0031":["LO","1","Radiopharmaceutical"],"0032":["DS","1","EnergyWindowCenterline"],"0033":["DS","1-n","EnergyWindowTotalWidth"],"0034":["LO","1","InterventionDrugName"],"0035":["TM","1","InterventionDrugStartTime"],"0036":["SQ","1","InterventionSequence"],"0037":["CS","1","TherapyType"],"0038":["CS","1","InterventionStatus"],"0039":["CS","1","TherapyDescription"],"003A":["ST","1","InterventionDescription"],"0040":["IS","1","CineRate"],"0042":["CS","1","InitialCineRunState"],"0050":["DS","1","SliceThickness"],"0060":["DS","1","KVP"],"0061":["DS","1",""],"0070":["IS","1","CountsAccumulated"],"0071":["CS","1","AcquisitionTerminationCondition"],"0072":["DS","1","EffectiveDuration"],"0073":["CS","1","AcquisitionStartCondition"],"0074":["IS","1","AcquisitionStartConditionData"],"0075":["IS","1","AcquisitionTerminationConditionData"],"0080":["DS","1","RepetitionTime"],"0081":["DS","1","EchoTime"],"0082":["DS","1","InversionTime"],"0083":["DS","1","NumberOfAverages"],"0084":["DS","1","ImagingFrequency"],"0085":["SH","1","ImagedNucleus"],"0086":["IS","1-n","EchoNumbers"],"0087":["DS","1","MagneticFieldStrength"],"0088":["DS","1","SpacingBetweenSlices"],"0089":["IS","1","NumberOfPhaseEncodingSteps"],"0090":["DS","1","DataCollectionDiameter"],"0091":["IS","1","EchoTrainLength"],"0093":["DS","1","PercentSampling"],"0094":["DS","1","PercentPhaseFieldOfView"],"0095":["DS","1","PixelBandwidth"],1e3:["LO","1","DeviceSerialNumber"],1002:["UI","1","DeviceUID"],1003:["LO","1","DeviceID"],1004:["LO","1","PlateID"],1005:["LO","1","GeneratorID"],1006:["LO","1","GridID"],1007:["LO","1","CassetteID"],1008:["LO","1","GantryID"],1009:["UT","1","UniqueDeviceIdentifier"],"100A":["SQ","1","UDISequence"],"100B":["UI","1-n","ManufacturerDeviceClassUID"],1010:["LO","1","SecondaryCaptureDeviceID"],1011:["LO","1","HardcopyCreationDeviceID"],1012:["DA","1","DateOfSecondaryCapture"],1014:["TM","1","TimeOfSecondaryCapture"],1016:["LO","1","SecondaryCaptureDeviceManufacturer"],1017:["LO","1","HardcopyDeviceManufacturer"],1018:["LO","1","SecondaryCaptureDeviceManufacturerModelName"],1019:["LO","1-n","SecondaryCaptureDeviceSoftwareVersions"],"101A":["LO","1-n","HardcopyDeviceSoftwareVersion"],"101B":["LO","1","HardcopyDeviceManufacturerModelName"],1020:["LO","1-n","SoftwareVersions"],1022:["SH","1","VideoImageFormatAcquired"],1023:["LO","1","DigitalImageFormatAcquired"],1030:["LO","1","ProtocolName"],1040:["LO","1","ContrastBolusRoute"],1041:["DS","1","ContrastBolusVolume"],1042:["TM","1","ContrastBolusStartTime"],1043:["TM","1","ContrastBolusStopTime"],1044:["DS","1","ContrastBolusTotalDose"],1045:["IS","1","SyringeCounts"],1046:["DS","1-n","ContrastFlowRate"],1047:["DS","1-n","ContrastFlowDuration"],1048:["CS","1","ContrastBolusIngredient"],1049:["DS","1","ContrastBolusIngredientConcentration"],1050:["DS","1","SpatialResolution"],1060:["DS","1","TriggerTime"],1061:["LO","1","TriggerSourceOrType"],1062:["IS","1","NominalInterval"],1063:["DS","1","FrameTime"],1064:["LO","1","CardiacFramingType"],1065:["DS","1-n","FrameTimeVector"],1066:["DS","1","FrameDelay"],1067:["DS","1","ImageTriggerDelay"],1068:["DS","1","MultiplexGroupTimeOffset"],1069:["DS","1","TriggerTimeOffset"],"106A":["CS","1","SynchronizationTrigger"],"106C":["US","2","SynchronizationChannel"],"106E":["UL","1","TriggerSamplePosition"],1070:["LO","1","RadiopharmaceuticalRoute"],1071:["DS","1","RadiopharmaceuticalVolume"],1072:["TM","1","RadiopharmaceuticalStartTime"],1073:["TM","1","RadiopharmaceuticalStopTime"],1074:["DS","1","RadionuclideTotalDose"],1075:["DS","1","RadionuclideHalfLife"],1076:["DS","1","RadionuclidePositronFraction"],1077:["DS","1","RadiopharmaceuticalSpecificActivity"],1078:["DT","1","RadiopharmaceuticalStartDateTime"],1079:["DT","1","RadiopharmaceuticalStopDateTime"],1080:["CS","1","BeatRejectionFlag"],1081:["IS","1","LowRRValue"],1082:["IS","1","HighRRValue"],1083:["IS","1","IntervalsAcquired"],1084:["IS","1","IntervalsRejected"],1085:["LO","1","PVCRejection"],1086:["IS","1","SkipBeats"],1088:["IS","1","HeartRate"],1090:["IS","1","CardiacNumberOfImages"],1094:["IS","1","TriggerWindow"],1100:["DS","1","ReconstructionDiameter"],1110:["DS","1","DistanceSourceToDetector"],1111:["DS","1","DistanceSourceToPatient"],1114:["DS","1","EstimatedRadiographicMagnificationFactor"],1120:["DS","1","GantryDetectorTilt"],1121:["DS","1","GantryDetectorSlew"],1130:["DS","1","TableHeight"],1131:["DS","1","TableTraverse"],1134:["CS","1","TableMotion"],1135:["DS","1-n","TableVerticalIncrement"],1136:["DS","1-n","TableLateralIncrement"],1137:["DS","1-n","TableLongitudinalIncrement"],1138:["DS","1","TableAngle"],"113A":["CS","1","TableType"],1140:["CS","1","RotationDirection"],1141:["DS","1","AngularPosition"],1142:["DS","1-n","RadialPosition"],1143:["DS","1","ScanArc"],1144:["DS","1","AngularStep"],1145:["DS","1","CenterOfRotationOffset"],1146:["DS","1-n","RotationOffset"],1147:["CS","1","FieldOfViewShape"],1149:["IS","1-2","FieldOfViewDimensions"],1150:["IS","1","ExposureTime"],1151:["IS","1","XRayTubeCurrent"],1152:["IS","1","Exposure"],1153:["IS","1","ExposureInuAs"],1154:["DS","1","AveragePulseWidth"],1155:["CS","1","RadiationSetting"],1156:["CS","1","RectificationType"],"115A":["CS","1","RadiationMode"],"115E":["DS","1","ImageAndFluoroscopyAreaDoseProduct"],1160:["SH","1","FilterType"],1161:["LO","1-n","TypeOfFilters"],1162:["DS","1","IntensifierSize"],1164:["DS","2","ImagerPixelSpacing"],1166:["CS","1-n","Grid"],1170:["IS","1","GeneratorPower"],1180:["SH","1","CollimatorGridName"],1181:["CS","1","CollimatorType"],1182:["IS","1-2","FocalDistance"],1183:["DS","1-2","XFocusCenter"],1184:["DS","1-2","YFocusCenter"],1190:["DS","1-n","FocalSpots"],1191:["CS","1","AnodeTargetMaterial"],"11A0":["DS","1","BodyPartThickness"],"11A2":["DS","1","CompressionForce"],"11A3":["DS","1","CompressionPressure"],"11A4":["LO","1","PaddleDescription"],"11A5":["DS","1","CompressionContactArea"],"11B0":["LO","1","AcquisitionMode"],"11B1":["LO","1","DoseModeName"],"11B2":["CS","1","AcquiredSubtractionMaskFlag"],"11B3":["CS","1","FluoroscopyPersistenceFlag"],"11B4":["CS","1","FluoroscopyLastImageHoldPersistenceFlag"],"11B5":["IS","1","UpperLimitNumberOfPersistentFluoroscopyFrames"],"11B6":["CS","1","ContrastBolusAutoInjectionTriggerFlag"],"11B7":["FD","1","ContrastBolusInjectionDelay"],"11B8":["SQ","1","XAAcquisitionPhaseDetailsSequence"],"11B9":["FD","1","XAAcquisitionFrameRate"],"11BA":["SQ","1","XAPlaneDetailsSequence"],"11BB":["LO","1","AcquisitionFieldOfViewLabel"],"11BC":["SQ","1","XRayFilterDetailsSequence"],"11BD":["FD","1","XAAcquisitionDuration"],"11BE":["CS","1","ReconstructionPipelineType"],"11BF":["SQ","1","ImageFilterDetailsSequence"],"11C0":["CS","1","AppliedMaskSubtractionFlag"],"11C1":["SQ","1","RequestedSeriesDescriptionCodeSequence"],1200:["DA","1-n","DateOfLastCalibration"],1201:["TM","1-n","TimeOfLastCalibration"],1202:["DT","1","DateTimeOfLastCalibration"],1203:["DT","1","CalibrationDateTime"],1210:["SH","1-n","ConvolutionKernel"],1240:["IS","1-n","UpperLowerPixelValues"],1242:["IS","1","ActualFrameDuration"],1243:["IS","1","CountRate"],1244:["US","1","PreferredPlaybackSequencing"],1250:["SH","1","ReceiveCoilName"],1251:["SH","1","TransmitCoilName"],1260:["SH","1","PlateType"],1261:["LO","1","PhosphorType"],1271:["FD","1","WaterEquivalentDiameter"],1272:["SQ","1","WaterEquivalentDiameterCalculationMethodCodeSequence"],1300:["DS","1","ScanVelocity"],1301:["CS","1-n","WholeBodyTechnique"],1302:["IS","1","ScanLength"],1310:["US","4","AcquisitionMatrix"],1312:["CS","1","InPlanePhaseEncodingDirection"],1314:["DS","1","FlipAngle"],1315:["CS","1","VariableFlipAngleFlag"],1316:["DS","1","SAR"],1318:["DS","1","dBdt"],1320:["FL","1","B1rms"],1400:["LO","1","AcquisitionDeviceProcessingDescription"],1401:["LO","1","AcquisitionDeviceProcessingCode"],1402:["CS","1","CassetteOrientation"],1403:["CS","1","CassetteSize"],1404:["US","1","ExposuresOnPlate"],1405:["IS","1","RelativeXRayExposure"],1411:["DS","1","ExposureIndex"],1412:["DS","1","TargetExposureIndex"],1413:["DS","1","DeviationIndex"],1450:["DS","1","ColumnAngulation"],1460:["DS","1","TomoLayerHeight"],1470:["DS","1","TomoAngle"],1480:["DS","1","TomoTime"],1490:["CS","1","TomoType"],1491:["CS","1","TomoClass"],1495:["IS","1","NumberOfTomosynthesisSourceImages"],1500:["CS","1","PositionerMotion"],1508:["CS","1","PositionerType"],1510:["DS","1","PositionerPrimaryAngle"],1511:["DS","1","PositionerSecondaryAngle"],1520:["DS","1-n","PositionerPrimaryAngleIncrement"],1521:["DS","1-n","PositionerSecondaryAngleIncrement"],1530:["DS","1","DetectorPrimaryAngle"],1531:["DS","1","DetectorSecondaryAngle"],1600:["CS","1-3","ShutterShape"],1602:["IS","1","ShutterLeftVerticalEdge"],1604:["IS","1","ShutterRightVerticalEdge"],1606:["IS","1","ShutterUpperHorizontalEdge"],1608:["IS","1","ShutterLowerHorizontalEdge"],1610:["IS","2","CenterOfCircularShutter"],1612:["IS","1","RadiusOfCircularShutter"],1620:["IS","2-2n","VerticesOfThePolygonalShutter"],1622:["US","1","ShutterPresentationValue"],1623:["US","1","ShutterOverlayGroup"],1624:["US","3","ShutterPresentationColorCIELabValue"],1630:["CS","1","OutlineShapeType"],1631:["FD","1","OutlineLeftVerticalEdge"],1632:["FD","1","OutlineRightVerticalEdge"],1633:["FD","1","OutlineUpperHorizontalEdge"],1634:["FD","1","OutlineLowerHorizontalEdge"],1635:["FD","2","CenterOfCircularOutline"],1636:["FD","1","DiameterOfCircularOutline"],1637:["UL","1","NumberOfPolygonalVertices"],1638:["OF","1","VerticesOfThePolygonalOutline"],1700:["CS","1-3","CollimatorShape"],1702:["IS","1","CollimatorLeftVerticalEdge"],1704:["IS","1","CollimatorRightVerticalEdge"],1706:["IS","1","CollimatorUpperHorizontalEdge"],1708:["IS","1","CollimatorLowerHorizontalEdge"],1710:["IS","2","CenterOfCircularCollimator"],1712:["IS","1","RadiusOfCircularCollimator"],1720:["IS","2-2n","VerticesOfThePolygonalCollimator"],1800:["CS","1","AcquisitionTimeSynchronized"],1801:["SH","1","TimeSource"],1802:["CS","1","TimeDistributionProtocol"],1803:["LO","1","NTPSourceAddress"],2001:["IS","1-n","PageNumberVector"],2002:["SH","1-n","FrameLabelVector"],2003:["DS","1-n","FramePrimaryAngleVector"],2004:["DS","1-n","FrameSecondaryAngleVector"],2005:["DS","1-n","SliceLocationVector"],2006:["SH","1-n","DisplayWindowLabelVector"],2010:["DS","2","NominalScannedPixelSpacing"],2020:["CS","1","DigitizingDeviceTransportDirection"],2030:["DS","1","RotationOfScannedFilm"],2041:["SQ","1","BiopsyTargetSequence"],2042:["UI","1","TargetUID"],2043:["FL","2","LocalizingCursorPosition"],2044:["FL","3","CalculatedTargetPosition"],2045:["SH","1","TargetLabel"],2046:["FL","1","DisplayedZValue"],3100:["CS","1","IVUSAcquisition"],3101:["DS","1","IVUSPullbackRate"],3102:["DS","1","IVUSGatedRate"],3103:["IS","1","IVUSPullbackStartFrameNumber"],3104:["IS","1","IVUSPullbackStopFrameNumber"],3105:["IS","1-n","LesionNumber"],4e3:["LT","1","AcquisitionComments"],5e3:["SH","1-n","OutputPower"],5010:["LO","1-n","TransducerData"],5011:["SQ","1","TransducerIdentificationSequence"],5012:["DS","1","FocusDepth"],5020:["LO","1","ProcessingFunction"],5021:["LO","1","PostprocessingFunction"],5022:["DS","1","MechanicalIndex"],5024:["DS","1","BoneThermalIndex"],5026:["DS","1","CranialThermalIndex"],5027:["DS","1","SoftTissueThermalIndex"],5028:["DS","1","SoftTissueFocusThermalIndex"],5029:["DS","1","SoftTissueSurfaceThermalIndex"],5030:["DS","1","DynamicRange"],5040:["DS","1","TotalGain"],5050:["IS","1","DepthOfScanField"],5100:["CS","1","PatientPosition"],5101:["CS","1","ViewPosition"],5104:["SQ","1","ProjectionEponymousNameCodeSequence"],5210:["DS","6","ImageTransformationMatrix"],5212:["DS","3","ImageTranslationVector"],6e3:["DS","1","Sensitivity"],6011:["SQ","1","SequenceOfUltrasoundRegions"],6012:["US","1","RegionSpatialFormat"],6014:["US","1","RegionDataType"],6016:["UL","1","RegionFlags"],6018:["UL","1","RegionLocationMinX0"],"601A":["UL","1","RegionLocationMinY0"],"601C":["UL","1","RegionLocationMaxX1"],"601E":["UL","1","RegionLocationMaxY1"],6020:["SL","1","ReferencePixelX0"],6022:["SL","1","ReferencePixelY0"],6024:["US","1","PhysicalUnitsXDirection"],6026:["US","1","PhysicalUnitsYDirection"],6028:["FD","1","ReferencePixelPhysicalValueX"],"602A":["FD","1","ReferencePixelPhysicalValueY"],"602C":["FD","1","PhysicalDeltaX"],"602E":["FD","1","PhysicalDeltaY"],6030:["UL","1","TransducerFrequency"],6031:["CS","1","TransducerType"],6032:["UL","1","PulseRepetitionFrequency"],6034:["FD","1","DopplerCorrectionAngle"],6036:["FD","1","SteeringAngle"],6038:["UL","1","DopplerSampleVolumeXPositionRetired"],6039:["SL","1","DopplerSampleVolumeXPosition"],"603A":["UL","1","DopplerSampleVolumeYPositionRetired"],"603B":["SL","1","DopplerSampleVolumeYPosition"],"603C":["UL","1","TMLinePositionX0Retired"],"603D":["SL","1","TMLinePositionX0"],"603E":["UL","1","TMLinePositionY0Retired"],"603F":["SL","1","TMLinePositionY0"],6040:["UL","1","TMLinePositionX1Retired"],6041:["SL","1","TMLinePositionX1"],6042:["UL","1","TMLinePositionY1Retired"],6043:["SL","1","TMLinePositionY1"],6044:["US","1","PixelComponentOrganization"],6046:["UL","1","PixelComponentMask"],6048:["UL","1","PixelComponentRangeStart"],"604A":["UL","1","PixelComponentRangeStop"],"604C":["US","1","PixelComponentPhysicalUnits"],"604E":["US","1","PixelComponentDataType"],6050:["UL","1","NumberOfTableBreakPoints"],6052:["UL","1-n","TableOfXBreakPoints"],6054:["FD","1-n","TableOfYBreakPoints"],6056:["UL","1","NumberOfTableEntries"],6058:["UL","1-n","TableOfPixelValues"],"605A":["FL","1-n","TableOfParameterValues"],6060:["FL","1-n","RWaveTimeVector"],6070:["US","1","ActiveImageAreaOverlayGroup"],7e3:["CS","1","DetectorConditionsNominalFlag"],7001:["DS","1","DetectorTemperature"],7004:["CS","1","DetectorType"],7005:["CS","1","DetectorConfiguration"],7006:["LT","1","DetectorDescription"],7008:["LT","1","DetectorMode"],"700A":["SH","1","DetectorID"],"700C":["DA","1","DateOfLastDetectorCalibration"],"700E":["TM","1","TimeOfLastDetectorCalibration"],7010:["IS","1","ExposuresOnDetectorSinceLastCalibration"],7011:["IS","1","ExposuresOnDetectorSinceManufactured"],7012:["DS","1","DetectorTimeSinceLastExposure"],7014:["DS","1","DetectorActiveTime"],7016:["DS","1","DetectorActivationOffsetFromExposure"],"701A":["DS","2","DetectorBinning"],7020:["DS","2","DetectorElementPhysicalSize"],7022:["DS","2","DetectorElementSpacing"],7024:["CS","1","DetectorActiveShape"],7026:["DS","1-2","DetectorActiveDimensions"],7028:["DS","2","DetectorActiveOrigin"],"702A":["LO","1","DetectorManufacturerName"],"702B":["LO","1","DetectorManufacturerModelName"],7030:["DS","2","FieldOfViewOrigin"],7032:["DS","1","FieldOfViewRotation"],7034:["CS","1","FieldOfViewHorizontalFlip"],7036:["FL","2","PixelDataAreaOriginRelativeToFOV"],7038:["FL","1","PixelDataAreaRotationAngleRelativeToFOV"],7040:["LT","1","GridAbsorbingMaterial"],7041:["LT","1","GridSpacingMaterial"],7042:["DS","1","GridThickness"],7044:["DS","1","GridPitch"],7046:["IS","2","GridAspectRatio"],7048:["DS","1","GridPeriod"],"704C":["DS","1","GridFocalDistance"],7050:["CS","1-n","FilterMaterial"],7052:["DS","1-n","FilterThicknessMinimum"],7054:["DS","1-n","FilterThicknessMaximum"],7056:["FL","1-n","FilterBeamPathLengthMinimum"],7058:["FL","1-n","FilterBeamPathLengthMaximum"],7060:["CS","1","ExposureControlMode"],7062:["LT","1","ExposureControlModeDescription"],7064:["CS","1","ExposureStatus"],7065:["DS","1","PhototimerSetting"],8150:["DS","1","ExposureTimeInuS"],8151:["DS","1","XRayTubeCurrentInuA"],9004:["CS","1","ContentQualification"],9005:["SH","1","PulseSequenceName"],9006:["SQ","1","MRImagingModifierSequence"],9008:["CS","1","EchoPulseSequence"],9009:["CS","1","InversionRecovery"],9010:["CS","1","FlowCompensation"],9011:["CS","1","MultipleSpinEcho"],9012:["CS","1","MultiPlanarExcitation"],9014:["CS","1","PhaseContrast"],9015:["CS","1","TimeOfFlightContrast"],9016:["CS","1","Spoiling"],9017:["CS","1","SteadyStatePulseSequence"],9018:["CS","1","EchoPlanarPulseSequence"],9019:["FD","1","TagAngleFirstAxis"],9020:["CS","1","MagnetizationTransfer"],9021:["CS","1","T2Preparation"],9022:["CS","1","BloodSignalNulling"],9024:["CS","1","SaturationRecovery"],9025:["CS","1","SpectrallySelectedSuppression"],9026:["CS","1","SpectrallySelectedExcitation"],9027:["CS","1","SpatialPresaturation"],9028:["CS","1","Tagging"],9029:["CS","1","OversamplingPhase"],9030:["FD","1","TagSpacingFirstDimension"],9032:["CS","1","GeometryOfKSpaceTraversal"],9033:["CS","1","SegmentedKSpaceTraversal"],9034:["CS","1","RectilinearPhaseEncodeReordering"],9035:["FD","1","TagThickness"],9036:["CS","1","PartialFourierDirection"],9037:["CS","1","CardiacSynchronizationTechnique"],9041:["LO","1","ReceiveCoilManufacturerName"],9042:["SQ","1","MRReceiveCoilSequence"],9043:["CS","1","ReceiveCoilType"],9044:["CS","1","QuadratureReceiveCoil"],9045:["SQ","1","MultiCoilDefinitionSequence"],9046:["LO","1","MultiCoilConfiguration"],9047:["SH","1","MultiCoilElementName"],9048:["CS","1","MultiCoilElementUsed"],9049:["SQ","1","MRTransmitCoilSequence"],9050:["LO","1","TransmitCoilManufacturerName"],9051:["CS","1","TransmitCoilType"],9052:["FD","1-2","SpectralWidth"],9053:["FD","1-2","ChemicalShiftReference"],9054:["CS","1","VolumeLocalizationTechnique"],9058:["US","1","MRAcquisitionFrequencyEncodingSteps"],9059:["CS","1","Decoupling"],9060:["CS","1-2","DecoupledNucleus"],9061:["FD","1-2","DecouplingFrequency"],9062:["CS","1","DecouplingMethod"],9063:["FD","1-2","DecouplingChemicalShiftReference"],9064:["CS","1","KSpaceFiltering"],9065:["CS","1-2","TimeDomainFiltering"],9066:["US","1-2","NumberOfZeroFills"],9067:["CS","1","BaselineCorrection"],9069:["FD","1","ParallelReductionFactorInPlane"],9070:["FD","1","CardiacRRIntervalSpecified"],9073:["FD","1","AcquisitionDuration"],9074:["DT","1","FrameAcquisitionDateTime"],9075:["CS","1","DiffusionDirectionality"],9076:["SQ","1","DiffusionGradientDirectionSequence"],9077:["CS","1","ParallelAcquisition"],9078:["CS","1","ParallelAcquisitionTechnique"],9079:["FD","1-n","InversionTimes"],9080:["ST","1","MetaboliteMapDescription"],9081:["CS","1","PartialFourier"],9082:["FD","1","EffectiveEchoTime"],9083:["SQ","1","MetaboliteMapCodeSequence"],9084:["SQ","1","ChemicalShiftSequence"],9085:["CS","1","CardiacSignalSource"],9087:["FD","1","DiffusionBValue"],9089:["FD","3","DiffusionGradientOrientation"],9090:["FD","3","VelocityEncodingDirection"],9091:["FD","1","VelocityEncodingMinimumValue"],9092:["SQ","1","VelocityEncodingAcquisitionSequence"],9093:["US","1","NumberOfKSpaceTrajectories"],9094:["CS","1","CoverageOfKSpace"],9095:["UL","1","SpectroscopyAcquisitionPhaseRows"],9096:["FD","1","ParallelReductionFactorInPlaneRetired"],9098:["FD","1-2","TransmitterFrequency"],9100:["CS","1-2","ResonantNucleus"],9101:["CS","1","FrequencyCorrection"],9103:["SQ","1","MRSpectroscopyFOVGeometrySequence"],9104:["FD","1","SlabThickness"],9105:["FD","3","SlabOrientation"],9106:["FD","3","MidSlabPosition"],9107:["SQ","1","MRSpatialSaturationSequence"],9112:["SQ","1","MRTimingAndRelatedParametersSequence"],9114:["SQ","1","MREchoSequence"],9115:["SQ","1","MRModifierSequence"],9117:["SQ","1","MRDiffusionSequence"],9118:["SQ","1","CardiacSynchronizationSequence"],9119:["SQ","1","MRAveragesSequence"],9125:["SQ","1","MRFOVGeometrySequence"],9126:["SQ","1","VolumeLocalizationSequence"],9127:["UL","1","SpectroscopyAcquisitionDataColumns"],9147:["CS","1","DiffusionAnisotropyType"],9151:["DT","1","FrameReferenceDateTime"],9152:["SQ","1","MRMetaboliteMapSequence"],9155:["FD","1","ParallelReductionFactorOutOfPlane"],9159:["UL","1","SpectroscopyAcquisitionOutOfPlanePhaseSteps"],9166:["CS","1","BulkMotionStatus"],9168:["FD","1","ParallelReductionFactorSecondInPlane"],9169:["CS","1","CardiacBeatRejectionTechnique"],9170:["CS","1","RespiratoryMotionCompensationTechnique"],9171:["CS","1","RespiratorySignalSource"],9172:["CS","1","BulkMotionCompensationTechnique"],9173:["CS","1","BulkMotionSignalSource"],9174:["CS","1","ApplicableSafetyStandardAgency"],9175:["LO","1","ApplicableSafetyStandardDescription"],9176:["SQ","1","OperatingModeSequence"],9177:["CS","1","OperatingModeType"],9178:["CS","1","OperatingMode"],9179:["CS","1","SpecificAbsorptionRateDefinition"],9180:["CS","1","GradientOutputType"],9181:["FD","1","SpecificAbsorptionRateValue"],9182:["FD","1","GradientOutput"],9183:["CS","1","FlowCompensationDirection"],9184:["FD","1","TaggingDelay"],9185:["ST","1","RespiratoryMotionCompensationTechniqueDescription"],9186:["SH","1","RespiratorySignalSourceID"],9195:["FD","1","ChemicalShiftMinimumIntegrationLimitInHz"],9196:["FD","1","ChemicalShiftMaximumIntegrationLimitInHz"],9197:["SQ","1","MRVelocityEncodingSequence"],9198:["CS","1","FirstOrderPhaseCorrection"],9199:["CS","1","WaterReferencedPhaseCorrection"],9200:["CS","1","MRSpectroscopyAcquisitionType"],9214:["CS","1","RespiratoryCyclePosition"],9217:["FD","1","VelocityEncodingMaximumValue"],9218:["FD","1","TagSpacingSecondDimension"],9219:["SS","1","TagAngleSecondAxis"],9220:["FD","1","FrameAcquisitionDuration"],9226:["SQ","1","MRImageFrameTypeSequence"],9227:["SQ","1","MRSpectroscopyFrameTypeSequence"],9231:["US","1","MRAcquisitionPhaseEncodingStepsInPlane"],9232:["US","1","MRAcquisitionPhaseEncodingStepsOutOfPlane"],9234:["UL","1","SpectroscopyAcquisitionPhaseColumns"],9236:["CS","1","CardiacCyclePosition"],9239:["SQ","1","SpecificAbsorptionRateSequence"],9240:["US","1","RFEchoTrainLength"],9241:["US","1","GradientEchoTrainLength"],9250:["CS","1","ArterialSpinLabelingContrast"],9251:["SQ","1","MRArterialSpinLabelingSequence"],9252:["LO","1","ASLTechniqueDescription"],9253:["US","1","ASLSlabNumber"],9254:["FD","1","ASLSlabThickness"],9255:["FD","3","ASLSlabOrientation"],9256:["FD","3","ASLMidSlabPosition"],9257:["CS","1","ASLContext"],9258:["UL","1","ASLPulseTrainDuration"],9259:["CS","1","ASLCrusherFlag"],"925A":["FD","1","ASLCrusherFlowLimit"],"925B":["LO","1","ASLCrusherDescription"],"925C":["CS","1","ASLBolusCutoffFlag"],"925D":["SQ","1","ASLBolusCutoffTimingSequence"],"925E":["LO","1","ASLBolusCutoffTechnique"],"925F":["UL","1","ASLBolusCutoffDelayTime"],9260:["SQ","1","ASLSlabSequence"],9295:["FD","1","ChemicalShiftMinimumIntegrationLimitInppm"],9296:["FD","1","ChemicalShiftMaximumIntegrationLimitInppm"],9297:["CS","1","WaterReferenceAcquisition"],9298:["IS","1","EchoPeakPosition"],9301:["SQ","1","CTAcquisitionTypeSequence"],9302:["CS","1","AcquisitionType"],9303:["FD","1","TubeAngle"],9304:["SQ","1","CTAcquisitionDetailsSequence"],9305:["FD","1","RevolutionTime"],9306:["FD","1","SingleCollimationWidth"],9307:["FD","1","TotalCollimationWidth"],9308:["SQ","1","CTTableDynamicsSequence"],9309:["FD","1","TableSpeed"],9310:["FD","1","TableFeedPerRotation"],9311:["FD","1","SpiralPitchFactor"],9312:["SQ","1","CTGeometrySequence"],9313:["FD","3","DataCollectionCenterPatient"],9314:["SQ","1","CTReconstructionSequence"],9315:["CS","1","ReconstructionAlgorithm"],9316:["CS","1","ConvolutionKernelGroup"],9317:["FD","2","ReconstructionFieldOfView"],9318:["FD","3","ReconstructionTargetCenterPatient"],9319:["FD","1","ReconstructionAngle"],9320:["SH","1","ImageFilter"],9321:["SQ","1","CTExposureSequence"],9322:["FD","2","ReconstructionPixelSpacing"],9323:["CS","1-n","ExposureModulationType"],9324:["FD","1","EstimatedDoseSaving"],9325:["SQ","1","CTXRayDetailsSequence"],9326:["SQ","1","CTPositionSequence"],9327:["FD","1","TablePosition"],9328:["FD","1","ExposureTimeInms"],9329:["SQ","1","CTImageFrameTypeSequence"],9330:["FD","1","XRayTubeCurrentInmA"],9332:["FD","1","ExposureInmAs"],9333:["CS","1","ConstantVolumeFlag"],9334:["CS","1","FluoroscopyFlag"],9335:["FD","1","DistanceSourceToDataCollectionCenter"],9337:["US","1","ContrastBolusAgentNumber"],9338:["SQ","1","ContrastBolusIngredientCodeSequence"],9340:["SQ","1","ContrastAdministrationProfileSequence"],9341:["SQ","1","ContrastBolusUsageSequence"],9342:["CS","1","ContrastBolusAgentAdministered"],9343:["CS","1","ContrastBolusAgentDetected"],9344:["CS","1","ContrastBolusAgentPhase"],9345:["FD","1","CTDIvol"],9346:["SQ","1","CTDIPhantomTypeCodeSequence"],9351:["FL","1","CalciumScoringMassFactorPatient"],9352:["FL","3","CalciumScoringMassFactorDevice"],9353:["FL","1","EnergyWeightingFactor"],9360:["SQ","1","CTAdditionalXRaySourceSequence"],9361:["CS","1","MultienergyCTAcquisition"],9362:["SQ","1","MultienergyCTAcquisitionSequence"],9363:["SQ","1","MultienergyCTProcessingSequence"],9364:["SQ","1","MultienergyCTCharacteristicsSequence"],9365:["SQ","1","MultienergyCTXRaySourceSequence"],9366:["US","1","XRaySourceIndex"],9367:["UC","1","XRaySourceID"],9368:["CS","1","MultienergySourceTechnique"],9369:["DT","1","SourceStartDateTime"],"936A":["DT","1","SourceEndDateTime"],"936B":["US","1","SwitchingPhaseNumber"],"936C":["DS","1","SwitchingPhaseNominalDuration"],"936D":["DS","1","SwitchingPhaseTransitionDuration"],"936E":["DS","1","EffectiveBinEnergy"],"936F":["SQ","1","MultienergyCTXRayDetectorSequence"],9370:["US","1","XRayDetectorIndex"],9371:["UC","1","XRayDetectorID"],9372:["CS","1","MultienergyDetectorType"],9373:["ST","1","XRayDetectorLabel"],9374:["DS","1","NominalMaxEnergy"],9375:["DS","1","NominalMinEnergy"],9376:["US","1-n","ReferencedXRayDetectorIndex"],9377:["US","1-n","ReferencedXRaySourceIndex"],9378:["US","1-n","ReferencedPathIndex"],9379:["SQ","1","MultienergyCTPathSequence"],"937A":["US","1","MultienergyCTPathIndex"],"937B":["UT","1","MultienergyAcquisitionDescription"],"937C":["FD","1","MonoenergeticEnergyEquivalent"],"937D":["SQ","1","MaterialCodeSequence"],"937E":["CS","1","DecompositionMethod"],"937F":["UT","1","DecompositionDescription"],9380:["SQ","1","DecompositionAlgorithmIdentificationSequence"],9381:["SQ","1","DecompositionMaterialSequence"],9382:["SQ","1","MaterialAttenuationSequence"],9383:["DS","1","PhotonEnergy"],9384:["DS","1","XRayMassAttenuationCoefficient"],9401:["SQ","1","ProjectionPixelCalibrationSequence"],9402:["FL","1","DistanceSourceToIsocenter"],9403:["FL","1","DistanceObjectToTableTop"],9404:["FL","2","ObjectPixelSpacingInCenterOfBeam"],9405:["SQ","1","PositionerPositionSequence"],9406:["SQ","1","TablePositionSequence"],9407:["SQ","1","CollimatorShapeSequence"],9410:["CS","1","PlanesInAcquisition"],9412:["SQ","1","XAXRFFrameCharacteristicsSequence"],9417:["SQ","1","FrameAcquisitionSequence"],9420:["CS","1","XRayReceptorType"],9423:["LO","1","AcquisitionProtocolName"],9424:["LT","1","AcquisitionProtocolDescription"],9425:["CS","1","ContrastBolusIngredientOpaque"],9426:["FL","1","DistanceReceptorPlaneToDetectorHousing"],9427:["CS","1","IntensifierActiveShape"],9428:["FL","1-2","IntensifierActiveDimensions"],9429:["FL","2","PhysicalDetectorSize"],9430:["FL","2","PositionOfIsocenterProjection"],9432:["SQ","1","FieldOfViewSequence"],9433:["LO","1","FieldOfViewDescription"],9434:["SQ","1","ExposureControlSensingRegionsSequence"],9435:["CS","1","ExposureControlSensingRegionShape"],9436:["SS","1","ExposureControlSensingRegionLeftVerticalEdge"],9437:["SS","1","ExposureControlSensingRegionRightVerticalEdge"],9438:["SS","1","ExposureControlSensingRegionUpperHorizontalEdge"],9439:["SS","1","ExposureControlSensingRegionLowerHorizontalEdge"],9440:["SS","2","CenterOfCircularExposureControlSensingRegion"],9441:["US","1","RadiusOfCircularExposureControlSensingRegion"],9442:["SS","2-n","VerticesOfThePolygonalExposureControlSensingRegion"],9445:["","",""],9447:["FL","1","ColumnAngulationPatient"],9449:["FL","1","BeamAngle"],9451:["SQ","1","FrameDetectorParametersSequence"],9452:["FL","1","CalculatedAnatomyThickness"],9455:["SQ","1","CalibrationSequence"],9456:["SQ","1","ObjectThicknessSequence"],9457:["CS","1","PlaneIdentification"],9461:["FL","1-2","FieldOfViewDimensionsInFloat"],9462:["SQ","1","IsocenterReferenceSystemSequence"],9463:["FL","1","PositionerIsocenterPrimaryAngle"],9464:["FL","1","PositionerIsocenterSecondaryAngle"],9465:["FL","1","PositionerIsocenterDetectorRotationAngle"],9466:["FL","1","TableXPositionToIsocenter"],9467:["FL","1","TableYPositionToIsocenter"],9468:["FL","1","TableZPositionToIsocenter"],9469:["FL","1","TableHorizontalRotationAngle"],9470:["FL","1","TableHeadTiltAngle"],9471:["FL","1","TableCradleTiltAngle"],9472:["SQ","1","FrameDisplayShutterSequence"],9473:["FL","1","AcquiredImageAreaDoseProduct"],9474:["CS","1","CArmPositionerTabletopRelationship"],9476:["SQ","1","XRayGeometrySequence"],9477:["SQ","1","IrradiationEventIdentificationSequence"],9504:["SQ","1","XRay3DFrameTypeSequence"],9506:["SQ","1","ContributingSourcesSequence"],9507:["SQ","1","XRay3DAcquisitionSequence"],9508:["FL","1","PrimaryPositionerScanArc"],9509:["FL","1","SecondaryPositionerScanArc"],9510:["FL","1","PrimaryPositionerScanStartAngle"],9511:["FL","1","SecondaryPositionerScanStartAngle"],9514:["FL","1","PrimaryPositionerIncrement"],9515:["FL","1","SecondaryPositionerIncrement"],9516:["DT","1","StartAcquisitionDateTime"],9517:["DT","1","EndAcquisitionDateTime"],9518:["SS","1","PrimaryPositionerIncrementSign"],9519:["SS","1","SecondaryPositionerIncrementSign"],9524:["LO","1","ApplicationName"],9525:["LO","1","ApplicationVersion"],9526:["LO","1","ApplicationManufacturer"],9527:["CS","1","AlgorithmType"],9528:["LO","1","AlgorithmDescription"],9530:["SQ","1","XRay3DReconstructionSequence"],9531:["LO","1","ReconstructionDescription"],9538:["SQ","1","PerProjectionAcquisitionSequence"],9541:["SQ","1","DetectorPositionSequence"],9542:["SQ","1","XRayAcquisitionDoseSequence"],9543:["FD","1","XRaySourceIsocenterPrimaryAngle"],9544:["FD","1","XRaySourceIsocenterSecondaryAngle"],9545:["FD","1","BreastSupportIsocenterPrimaryAngle"],9546:["FD","1","BreastSupportIsocenterSecondaryAngle"],9547:["FD","1","BreastSupportXPositionToIsocenter"],9548:["FD","1","BreastSupportYPositionToIsocenter"],9549:["FD","1","BreastSupportZPositionToIsocenter"],9550:["FD","1","DetectorIsocenterPrimaryAngle"],9551:["FD","1","DetectorIsocenterSecondaryAngle"],9552:["FD","1","DetectorXPositionToIsocenter"],9553:["FD","1","DetectorYPositionToIsocenter"],9554:["FD","1","DetectorZPositionToIsocenter"],9555:["SQ","1","XRayGridSequence"],9556:["SQ","1","XRayFilterSequence"],9557:["FD","3","DetectorActiveAreaTLHCPosition"],9558:["FD","6","DetectorActiveAreaOrientation"],9559:["CS","1","PositionerPrimaryAngleDirection"],9601:["SQ","1","DiffusionBMatrixSequence"],9602:["FD","1","DiffusionBValueXX"],9603:["FD","1","DiffusionBValueXY"],9604:["FD","1","DiffusionBValueXZ"],9605:["FD","1","DiffusionBValueYY"],9606:["FD","1","DiffusionBValueYZ"],9607:["FD","1","DiffusionBValueZZ"],9621:["SQ","1","FunctionalMRSequence"],9622:["CS","1","FunctionalSettlingPhaseFramesPresent"],9623:["DT","1","FunctionalSyncPulse"],9624:["CS","1","SettlingPhaseFrame"],9701:["DT","1","DecayCorrectionDateTime"],9715:["FD","1","StartDensityThreshold"],9716:["FD","1","StartRelativeDensityDifferenceThreshold"],9717:["FD","1","StartCardiacTriggerCountThreshold"],9718:["FD","1","StartRespiratoryTriggerCountThreshold"],9719:["FD","1","TerminationCountsThreshold"],9720:["FD","1","TerminationDensityThreshold"],9721:["FD","1","TerminationRelativeDensityThreshold"],9722:["FD","1","TerminationTimeThreshold"],9723:["FD","1","TerminationCardiacTriggerCountThreshold"],9724:["FD","1","TerminationRespiratoryTriggerCountThreshold"],9725:["CS","1","DetectorGeometry"],9726:["FD","1","TransverseDetectorSeparation"],9727:["FD","1","AxialDetectorDimension"],9729:["US","1","RadiopharmaceuticalAgentNumber"],9732:["SQ","1","PETFrameAcquisitionSequence"],9733:["SQ","1","PETDetectorMotionDetailsSequence"],9734:["SQ","1","PETTableDynamicsSequence"],9735:["SQ","1","PETPositionSequence"],9736:["SQ","1","PETFrameCorrectionFactorsSequence"],9737:["SQ","1","RadiopharmaceuticalUsageSequence"],9738:["CS","1","AttenuationCorrectionSource"],9739:["US","1","NumberOfIterations"],9740:["US","1","NumberOfSubsets"],9749:["SQ","1","PETReconstructionSequence"],9751:["SQ","1","PETFrameTypeSequence"],9755:["CS","1","TimeOfFlightInformationUsed"],9756:["CS","1","ReconstructionType"],9758:["CS","1","DecayCorrected"],9759:["CS","1","AttenuationCorrected"],9760:["CS","1","ScatterCorrected"],9761:["CS","1","DeadTimeCorrected"],9762:["CS","1","GantryMotionCorrected"],9763:["CS","1","PatientMotionCorrected"],9764:["CS","1","CountLossNormalizationCorrected"],9765:["CS","1","RandomsCorrected"],9766:["CS","1","NonUniformRadialSamplingCorrected"],9767:["CS","1","SensitivityCalibrated"],9768:["CS","1","DetectorNormalizationCorrection"],9769:["CS","1","IterativeReconstructionMethod"],9770:["CS","1","AttenuationCorrectionTemporalRelationship"],9771:["SQ","1","PatientPhysiologicalStateSequence"],9772:["SQ","1","PatientPhysiologicalStateCodeSequence"],9801:["FD","1-n","DepthsOfFocus"],9803:["SQ","1","ExcludedIntervalsSequence"],9804:["DT","1","ExclusionStartDateTime"],9805:["FD","1","ExclusionDuration"],9806:["SQ","1","USImageDescriptionSequence"],9807:["SQ","1","ImageDataTypeSequence"],9808:["CS","1","DataType"],9809:["SQ","1","TransducerScanPatternCodeSequence"],"980B":["CS","1","AliasedDataType"],"980C":["CS","1","PositionMeasuringDeviceUsed"],"980D":["SQ","1","TransducerGeometryCodeSequence"],"980E":["SQ","1","TransducerBeamSteeringCodeSequence"],"980F":["SQ","1","TransducerApplicationCodeSequence"],9810:["xs","1","ZeroVelocityPixelValue"],9900:["LO","1","ReferenceLocationLabel"],9901:["UT","1","ReferenceLocationDescription"],9902:["SQ","1","ReferenceBasisCodeSequence"],9903:["SQ","1","ReferenceGeometryCodeSequence"],9904:["DS","1","OffsetDistance"],9905:["CS","1","OffsetDirection"],9906:["SQ","1","PotentialScheduledProtocolCodeSequence"],9907:["SQ","1","PotentialRequestedProcedureCodeSequence"],9908:["UC","1-n","PotentialReasonsForProcedure"],9909:["SQ","1","PotentialReasonsForProcedureCodeSequence"],"990A":["UC","1-n","PotentialDiagnosticTasks"],"990B":["SQ","1","ContraindicationsCodeSequence"],"990C":["SQ","1","ReferencedDefinedProtocolSequence"],"990D":["SQ","1","ReferencedPerformedProtocolSequence"],"990E":["SQ","1","PredecessorProtocolSequence"],"990F":["UT","1","ProtocolPlanningInformation"],9910:["UT","1","ProtocolDesignRationale"],9911:["SQ","1","PatientSpecificationSequence"],9912:["SQ","1","ModelSpecificationSequence"],9913:["SQ","1","ParametersSpecificationSequence"],9914:["SQ","1","InstructionSequence"],9915:["US","1","InstructionIndex"],9916:["LO","1","InstructionText"],9917:["UT","1","InstructionDescription"],9918:["CS","1","InstructionPerformedFlag"],9919:["DT","1","InstructionPerformedDateTime"],"991A":["UT","1","InstructionPerformanceComment"],"991B":["SQ","1","PatientPositioningInstructionSequence"],"991C":["SQ","1","PositioningMethodCodeSequence"],"991D":["SQ","1","PositioningLandmarkSequence"],"991E":["UI","1","TargetFrameOfReferenceUID"],"991F":["SQ","1","AcquisitionProtocolElementSpecificationSequence"],9920:["SQ","1","AcquisitionProtocolElementSequence"],9921:["US","1","ProtocolElementNumber"],9922:["LO","1","ProtocolElementName"],9923:["UT","1","ProtocolElementCharacteristicsSummary"],9924:["UT","1","ProtocolElementPurpose"],9930:["CS","1","AcquisitionMotion"],9931:["SQ","1","AcquisitionStartLocationSequence"],9932:["SQ","1","AcquisitionEndLocationSequence"],9933:["SQ","1","ReconstructionProtocolElementSpecificationSequence"],9934:["SQ","1","ReconstructionProtocolElementSequence"],9935:["SQ","1","StorageProtocolElementSpecificationSequence"],9936:["SQ","1","StorageProtocolElementSequence"],9937:["LO","1","RequestedSeriesDescription"],9938:["US","1-n","SourceAcquisitionProtocolElementNumber"],9939:["US","1-n","SourceAcquisitionBeamNumber"],"993A":["US","1-n","SourceReconstructionProtocolElementNumber"],"993B":["SQ","1","ReconstructionStartLocationSequence"],"993C":["SQ","1","ReconstructionEndLocationSequence"],"993D":["SQ","1","ReconstructionAlgorithmSequence"],"993E":["SQ","1","ReconstructionTargetCenterLocationSequence"],9941:["UT","1","ImageFilterDescription"],9942:["FD","1","CTDIvolNotificationTrigger"],9943:["FD","1","DLPNotificationTrigger"],9944:["CS","1","AutoKVPSelectionType"],9945:["FD","1","AutoKVPUpperBound"],9946:["FD","1","AutoKVPLowerBound"],9947:["CS","1","ProtocolDefinedPatientPosition"],A001:["SQ","1","ContributingEquipmentSequence"],A002:["DT","1","ContributionDateTime"],A003:["ST","1","ContributionDescription"]},"0020":{"0000":["UL","1","GenericGroupLength"],"000D":["UI","1","StudyInstanceUID"],"000E":["UI","1","SeriesInstanceUID"],"0010":["SH","1","StudyID"],"0011":["IS","1","SeriesNumber"],"0012":["IS","1","AcquisitionNumber"],"0013":["IS","1","InstanceNumber"],"0014":["IS","1","IsotopeNumber"],"0015":["IS","1","PhaseNumber"],"0016":["IS","1","IntervalNumber"],"0017":["IS","1","TimeSlotNumber"],"0018":["IS","1","AngleNumber"],"0019":["IS","1","ItemNumber"],"0020":["CS","2","PatientOrientation"],"0022":["IS","1","OverlayNumber"],"0024":["IS","1","CurveNumber"],"0026":["IS","1","LUTNumber"],"0030":["DS","3","ImagePosition"],"0032":["DS","3","ImagePositionPatient"],"0035":["DS","6","ImageOrientation"],"0037":["DS","6","ImageOrientationPatient"],"0050":["DS","1","Location"],"0052":["UI","1","FrameOfReferenceUID"],"0060":["CS","1","Laterality"],"0062":["CS","1","ImageLaterality"],"0070":["LO","1","ImageGeometryType"],"0080":["CS","1-n","MaskingImage"],"00AA":["IS","1","ReportNumber"],"0100":["IS","1","TemporalPositionIdentifier"],"0105":["IS","1","NumberOfTemporalPositions"],"0110":["DS","1","TemporalResolution"],"0200":["UI","1","SynchronizationFrameOfReferenceUID"],"0242":["UI","1","SOPInstanceUIDOfConcatenationSource"],1e3:["IS","1","SeriesInStudy"],1001:["IS","1","AcquisitionsInSeries"],1002:["IS","1","ImagesInAcquisition"],1003:["IS","1","ImagesInSeries"],1004:["IS","1","AcquisitionsInStudy"],1005:["IS","1","ImagesInStudy"],1020:["LO","1-n","Reference"],"103F":["LO","1","TargetPositionReferenceIndicator"],1040:["LO","1","PositionReferenceIndicator"],1041:["DS","1","SliceLocation"],1070:["IS","1-n","OtherStudyNumbers"],1200:["IS","1","NumberOfPatientRelatedStudies"],1202:["IS","1","NumberOfPatientRelatedSeries"],1204:["IS","1","NumberOfPatientRelatedInstances"],1206:["IS","1","NumberOfStudyRelatedSeries"],1208:["IS","1","NumberOfStudyRelatedInstances"],1209:["IS","1","NumberOfSeriesRelatedInstances"],3100:["CS","1-n","SourceImageIDs"],3401:["CS","1","ModifyingDeviceID"],3402:["CS","1","ModifiedImageID"],3403:["DA","1","ModifiedImageDate"],3404:["LO","1","ModifyingDeviceManufacturer"],3405:["TM","1","ModifiedImageTime"],3406:["LO","1","ModifiedImageDescription"],4e3:["LT","1","ImageComments"],5e3:["AT","1-n","OriginalImageIdentification"],5002:["LO","1-n","OriginalImageIdentificationNomenclature"],9056:["SH","1","StackID"],9057:["UL","1","InStackPositionNumber"],9071:["SQ","1","FrameAnatomySequence"],9072:["CS","1","FrameLaterality"],9111:["SQ","1","FrameContentSequence"],9113:["SQ","1","PlanePositionSequence"],9116:["SQ","1","PlaneOrientationSequence"],9128:["UL","1","TemporalPositionIndex"],9153:["FD","1","NominalCardiacTriggerDelayTime"],9154:["FL","1","NominalCardiacTriggerTimePriorToRPeak"],9155:["FL","1","ActualCardiacTriggerTimePriorToRPeak"],9156:["US","1","FrameAcquisitionNumber"],9157:["UL","1-n","DimensionIndexValues"],9158:["LT","1","FrameComments"],9161:["UI","1","ConcatenationUID"],9162:["US","1","InConcatenationNumber"],9163:["US","1","InConcatenationTotalNumber"],9164:["UI","1","DimensionOrganizationUID"],9165:["AT","1","DimensionIndexPointer"],9167:["AT","1","FunctionalGroupPointer"],9170:["SQ","1","UnassignedSharedConvertedAttributesSequence"],9171:["SQ","1","UnassignedPerFrameConvertedAttributesSequence"],9172:["SQ","1","ConversionSourceAttributesSequence"],9213:["LO","1","DimensionIndexPrivateCreator"],9221:["SQ","1","DimensionOrganizationSequence"],9222:["SQ","1","DimensionIndexSequence"],9228:["UL","1","ConcatenationFrameOffsetNumber"],9238:["LO","1","FunctionalGroupPrivateCreator"],9241:["FL","1","NominalPercentageOfCardiacPhase"],9245:["FL","1","NominalPercentageOfRespiratoryPhase"],9246:["FL","1","StartingRespiratoryAmplitude"],9247:["CS","1","StartingRespiratoryPhase"],9248:["FL","1","EndingRespiratoryAmplitude"],9249:["CS","1","EndingRespiratoryPhase"],9250:["CS","1","RespiratoryTriggerType"],9251:["FD","1","RRIntervalTimeNominal"],9252:["FD","1","ActualCardiacTriggerDelayTime"],9253:["SQ","1","RespiratorySynchronizationSequence"],9254:["FD","1","RespiratoryIntervalTime"],9255:["FD","1","NominalRespiratoryTriggerDelayTime"],9256:["FD","1","RespiratoryTriggerDelayThreshold"],9257:["FD","1","ActualRespiratoryTriggerDelayTime"],9301:["FD","3","ImagePositionVolume"],9302:["FD","6","ImageOrientationVolume"],9307:["CS","1","UltrasoundAcquisitionGeometry"],9308:["FD","3","ApexPosition"],9309:["FD","16","VolumeToTransducerMappingMatrix"],"930A":["FD","16","VolumeToTableMappingMatrix"],"930B":["CS","1","VolumeToTransducerRelationship"],"930C":["CS","1","PatientFrameOfReferenceSource"],"930D":["FD","1","TemporalPositionTimeOffset"],"930E":["SQ","1","PlanePositionVolumeSequence"],"930F":["SQ","1","PlaneOrientationVolumeSequence"],9310:["SQ","1","TemporalPositionSequence"],9311:["CS","1","DimensionOrganizationType"],9312:["UI","1","VolumeFrameOfReferenceUID"],9313:["UI","1","TableFrameOfReferenceUID"],9421:["LO","1","DimensionDescriptionLabel"],9450:["SQ","1","PatientOrientationInFrameSequence"],9453:["LO","1","FrameLabel"],9518:["US","1-n","AcquisitionIndex"],9529:["SQ","1","ContributingSOPInstancesReferenceSequence"],9536:["US","1","ReconstructionIndex"]},"0022":{"0000":["UL","1","GenericGroupLength"],"0001":["US","1","LightPathFilterPassThroughWavelength"],"0002":["US","2","LightPathFilterPassBand"],"0003":["US","1","ImagePathFilterPassThroughWavelength"],"0004":["US","2","ImagePathFilterPassBand"],"0005":["CS","1","PatientEyeMovementCommanded"],"0006":["SQ","1","PatientEyeMovementCommandCodeSequence"],"0007":["FL","1","SphericalLensPower"],"0008":["FL","1","CylinderLensPower"],"0009":["FL","1","CylinderAxis"],"000A":["FL","1","EmmetropicMagnification"],"000B":["FL","1","IntraOcularPressure"],"000C":["FL","1","HorizontalFieldOfView"],"000D":["CS","1","PupilDilated"],"000E":["FL","1","DegreeOfDilation"],"0010":["FL","1","StereoBaselineAngle"],"0011":["FL","1","StereoBaselineDisplacement"],"0012":["FL","1","StereoHorizontalPixelOffset"],"0013":["FL","1","StereoVerticalPixelOffset"],"0014":["FL","1","StereoRotation"],"0015":["SQ","1","AcquisitionDeviceTypeCodeSequence"],"0016":["SQ","1","IlluminationTypeCodeSequence"],"0017":["SQ","1","LightPathFilterTypeStackCodeSequence"],"0018":["SQ","1","ImagePathFilterTypeStackCodeSequence"],"0019":["SQ","1","LensesCodeSequence"],"001A":["SQ","1","ChannelDescriptionCodeSequence"],"001B":["SQ","1","RefractiveStateSequence"],"001C":["SQ","1","MydriaticAgentCodeSequence"],"001D":["SQ","1","RelativeImagePositionCodeSequence"],"001E":["FL","1","CameraAngleOfView"],"0020":["SQ","1","StereoPairsSequence"],"0021":["SQ","1","LeftImageSequence"],"0022":["SQ","1","RightImageSequence"],"0028":["CS","1","StereoPairsPresent"],"0030":["FL","1","AxialLengthOfTheEye"],"0031":["SQ","1","OphthalmicFrameLocationSequence"],"0032":["FL","2-2n","ReferenceCoordinates"],"0035":["FL","1","DepthSpatialResolution"],"0036":["FL","1","MaximumDepthDistortion"],"0037":["FL","1","AlongScanSpatialResolution"],"0038":["FL","1","MaximumAlongScanDistortion"],"0039":["CS","1","OphthalmicImageOrientation"],"0041":["FL","1","DepthOfTransverseImage"],"0042":["SQ","1","MydriaticAgentConcentrationUnitsSequence"],"0048":["FL","1","AcrossScanSpatialResolution"],"0049":["FL","1","MaximumAcrossScanDistortion"],"004E":["DS","1","MydriaticAgentConcentration"],"0055":["FL","1","IlluminationWaveLength"],"0056":["FL","1","IlluminationPower"],"0057":["FL","1","IlluminationBandwidth"],"0058":["SQ","1","MydriaticAgentSequence"],1007:["SQ","1","OphthalmicAxialMeasurementsRightEyeSequence"],1008:["SQ","1","OphthalmicAxialMeasurementsLeftEyeSequence"],1009:["CS","1","OphthalmicAxialMeasurementsDeviceType"],1010:["CS","1","OphthalmicAxialLengthMeasurementsType"],1012:["SQ","1","OphthalmicAxialLengthSequence"],1019:["FL","1","OphthalmicAxialLength"],1024:["SQ","1","LensStatusCodeSequence"],1025:["SQ","1","VitreousStatusCodeSequence"],1028:["SQ","1","IOLFormulaCodeSequence"],1029:["LO","1","IOLFormulaDetail"],1033:["FL","1","KeratometerIndex"],1035:["SQ","1","SourceOfOphthalmicAxialLengthCodeSequence"],1036:["SQ","1","SourceOfCornealSizeDataCodeSequence"],1037:["FL","1","TargetRefraction"],1039:["CS","1","RefractiveProcedureOccurred"],1040:["SQ","1","RefractiveSurgeryTypeCodeSequence"],1044:["SQ","1","OphthalmicUltrasoundMethodCodeSequence"],1045:["SQ","1","SurgicallyInducedAstigmatismSequence"],1046:["CS","1","TypeOfOpticalCorrection"],1047:["SQ","1","ToricIOLPowerSequence"],1048:["SQ","1","PredictedToricErrorSequence"],1049:["CS","1","PreSelectedForImplantation"],"104A":["SQ","1","ToricIOLPowerForExactEmmetropiaSequence"],"104B":["SQ","1","ToricIOLPowerForExactTargetRefractionSequence"],1050:["SQ","1","OphthalmicAxialLengthMeasurementsSequence"],1053:["FL","1","IOLPower"],1054:["FL","1","PredictedRefractiveError"],1059:["FL","1","OphthalmicAxialLengthVelocity"],1065:["LO","1","LensStatusDescription"],1066:["LO","1","VitreousStatusDescription"],1090:["SQ","1","IOLPowerSequence"],1092:["SQ","1","LensConstantSequence"],1093:["LO","1","IOLManufacturer"],1094:["LO","1","LensConstantDescription"],1095:["LO","1","ImplantName"],1096:["SQ","1","KeratometryMeasurementTypeCodeSequence"],1097:["LO","1","ImplantPartNumber"],1100:["SQ","1","ReferencedOphthalmicAxialMeasurementsSequence"],1101:["SQ","1","OphthalmicAxialLengthMeasurementsSegmentNameCodeSequence"],1103:["SQ","1","RefractiveErrorBeforeRefractiveSurgeryCodeSequence"],1121:["FL","1","IOLPowerForExactEmmetropia"],1122:["FL","1","IOLPowerForExactTargetRefraction"],1125:["SQ","1","AnteriorChamberDepthDefinitionCodeSequence"],1127:["SQ","1","LensThicknessSequence"],1128:["SQ","1","AnteriorChamberDepthSequence"],"112A":["SQ","1","CalculationCommentSequence"],"112B":["CS","1","CalculationCommentType"],"112C":["LT","1","CalculationComment"],1130:["FL","1","LensThickness"],1131:["FL","1","AnteriorChamberDepth"],1132:["SQ","1","SourceOfLensThicknessDataCodeSequence"],1133:["SQ","1","SourceOfAnteriorChamberDepthDataCodeSequence"],1134:["SQ","1","SourceOfRefractiveMeasurementsSequence"],1135:["SQ","1","SourceOfRefractiveMeasurementsCodeSequence"],1140:["CS","1","OphthalmicAxialLengthMeasurementModified"],1150:["SQ","1","OphthalmicAxialLengthDataSourceCodeSequence"],1153:["SQ","1","OphthalmicAxialLengthAcquisitionMethodCodeSequence"],1155:["FL","1","SignalToNoiseRatio"],1159:["LO","1","OphthalmicAxialLengthDataSourceDescription"],1210:["SQ","1","OphthalmicAxialLengthMeasurementsTotalLengthSequence"],1211:["SQ","1","OphthalmicAxialLengthMeasurementsSegmentalLengthSequence"],1212:["SQ","1","OphthalmicAxialLengthMeasurementsLengthSummationSequence"],1220:["SQ","1","UltrasoundOphthalmicAxialLengthMeasurementsSequence"],1225:["SQ","1","OpticalOphthalmicAxialLengthMeasurementsSequence"],1230:["SQ","1","UltrasoundSelectedOphthalmicAxialLengthSequence"],1250:["SQ","1","OphthalmicAxialLengthSelectionMethodCodeSequence"],1255:["SQ","1","OpticalSelectedOphthalmicAxialLengthSequence"],1257:["SQ","1","SelectedSegmentalOphthalmicAxialLengthSequence"],1260:["SQ","1","SelectedTotalOphthalmicAxialLengthSequence"],1262:["SQ","1","OphthalmicAxialLengthQualityMetricSequence"],1265:["SQ","1","OphthalmicAxialLengthQualityMetricTypeCodeSequence"],1273:["LO","1","OphthalmicAxialLengthQualityMetricTypeDescription"],1300:["SQ","1","IntraocularLensCalculationsRightEyeSequence"],1310:["SQ","1","IntraocularLensCalculationsLeftEyeSequence"],1330:["SQ","1","ReferencedOphthalmicAxialLengthMeasurementQCImageSequence"],1415:["CS","1","OphthalmicMappingDeviceType"],1420:["SQ","1","AcquisitionMethodCodeSequence"],1423:["SQ","1","AcquisitionMethodAlgorithmSequence"],1436:["SQ","1","OphthalmicThicknessMapTypeCodeSequence"],1443:["SQ","1","OphthalmicThicknessMappingNormalsSequence"],1445:["SQ","1","RetinalThicknessDefinitionCodeSequence"],1450:["SQ","1","PixelValueMappingToCodedConceptSequence"],1452:["xs","1","MappedPixelValue"],1454:["LO","1","PixelValueMappingExplanation"],1458:["SQ","1","OphthalmicThicknessMapQualityThresholdSequence"],1460:["FL","1","OphthalmicThicknessMapThresholdQualityRating"],1463:["FL","2","AnatomicStructureReferencePoint"],1465:["SQ","1","RegistrationToLocalizerSequence"],1466:["CS","1","RegisteredLocalizerUnits"],1467:["FL","2","RegisteredLocalizerTopLeftHandCorner"],1468:["FL","2","RegisteredLocalizerBottomRightHandCorner"],1470:["SQ","1","OphthalmicThicknessMapQualityRatingSequence"],1472:["SQ","1","RelevantOPTAttributesSequence"],1512:["SQ","1","TransformationMethodCodeSequence"],1513:["SQ","1","TransformationAlgorithmSequence"],1515:["CS","1","OphthalmicAxialLengthMethod"],1517:["FL","1","OphthalmicFOV"],1518:["SQ","1","TwoDimensionalToThreeDimensionalMapSequence"],1525:["SQ","1","WideFieldOphthalmicPhotographyQualityRatingSequence"],1526:["SQ","1","WideFieldOphthalmicPhotographyQualityThresholdSequence"],1527:["FL","1","WideFieldOphthalmicPhotographyThresholdQualityRating"],1528:["FL","1","XCoordinatesCenterPixelViewAngle"],1529:["FL","1","YCoordinatesCenterPixelViewAngle"],1530:["UL","1","NumberOfMapPoints"],1531:["OF","1","TwoDimensionalToThreeDimensionalMapData"],1612:["SQ","1","DerivationAlgorithmSequence"],1615:["SQ","1","OphthalmicImageTypeCodeSequence"],1616:["LO","1","OphthalmicImageTypeDescription"],1618:["SQ","1","ScanPatternTypeCodeSequence"],1620:["SQ","1","ReferencedSurfaceMeshIdentificationSequence"],1622:["CS","1","OphthalmicVolumetricPropertiesFlag"],1624:["FL","1","OphthalmicAnatomicReferencePointXCoordinate"],1626:["FL","1","OphthalmicAnatomicReferencePointYCoordinate"],1628:["SQ","1","OphthalmicEnFaceImageQualityRatingSequence"],1630:["DS","1","QualityThreshold"],1640:["SQ","1","OCTBscanAnalysisAcquisitionParametersSequence"],1642:["UL","1","NumberOfBscansPerFrame"],1643:["FL","1","BscanSlabThickness"],1644:["FL","1","DistanceBetweenBscanSlabs"],1645:["FL","1","BscanCycleTime"],1646:["FL","1-n","BscanCycleTimeVector"],1649:["FL","1","AscanRate"],1650:["FL","1","BscanRate"],1658:["UL","1","SurfaceMeshZPixelOffset"]},"0024":{"0000":["UL","1","GenericGroupLength"],"0010":["FL","1","VisualFieldHorizontalExtent"],"0011":["FL","1","VisualFieldVerticalExtent"],"0012":["CS","1","VisualFieldShape"],"0016":["SQ","1","ScreeningTestModeCodeSequence"],"0018":["FL","1","MaximumStimulusLuminance"],"0020":["FL","1","BackgroundLuminance"],"0021":["SQ","1","StimulusColorCodeSequence"],"0024":["SQ","1","BackgroundIlluminationColorCodeSequence"],"0025":["FL","1","StimulusArea"],"0028":["FL","1","StimulusPresentationTime"],"0032":["SQ","1","FixationSequence"],"0033":["SQ","1","FixationMonitoringCodeSequence"],"0034":["SQ","1","VisualFieldCatchTrialSequence"],"0035":["US","1","FixationCheckedQuantity"],"0036":["US","1","PatientNotProperlyFixatedQuantity"],"0037":["CS","1","PresentedVisualStimuliDataFlag"],"0038":["US","1","NumberOfVisualStimuli"],"0039":["CS","1","ExcessiveFixationLossesDataFlag"],"0040":["CS","1","ExcessiveFixationLosses"],"0042":["US","1","StimuliRetestingQuantity"],"0044":["LT","1","CommentsOnPatientPerformanceOfVisualField"],"0045":["CS","1","FalseNegativesEstimateFlag"],"0046":["FL","1","FalseNegativesEstimate"],"0048":["US","1","NegativeCatchTrialsQuantity"],"0050":["US","1","FalseNegativesQuantity"],"0051":["CS","1","ExcessiveFalseNegativesDataFlag"],"0052":["CS","1","ExcessiveFalseNegatives"],"0053":["CS","1","FalsePositivesEstimateFlag"],"0054":["FL","1","FalsePositivesEstimate"],"0055":["CS","1","CatchTrialsDataFlag"],"0056":["US","1","PositiveCatchTrialsQuantity"],"0057":["CS","1","TestPointNormalsDataFlag"],"0058":["SQ","1","TestPointNormalsSequence"],"0059":["CS","1","GlobalDeviationProbabilityNormalsFlag"],"0060":["US","1","FalsePositivesQuantity"],"0061":["CS","1","ExcessiveFalsePositivesDataFlag"],"0062":["CS","1","ExcessiveFalsePositives"],"0063":["CS","1","VisualFieldTestNormalsFlag"],"0064":["SQ","1","ResultsNormalsSequence"],"0065":["SQ","1","AgeCorrectedSensitivityDeviationAlgorithmSequence"],"0066":["FL","1","GlobalDeviationFromNormal"],"0067":["SQ","1","GeneralizedDefectSensitivityDeviationAlgorithmSequence"],"0068":["FL","1","LocalizedDeviationFromNormal"],"0069":["LO","1","PatientReliabilityIndicator"],"0070":["FL","1","VisualFieldMeanSensitivity"],"0071":["FL","1","GlobalDeviationProbability"],"0072":["CS","1","LocalDeviationProbabilityNormalsFlag"],"0073":["FL","1","LocalizedDeviationProbability"],"0074":["CS","1","ShortTermFluctuationCalculated"],"0075":["FL","1","ShortTermFluctuation"],"0076":["CS","1","ShortTermFluctuationProbabilityCalculated"],"0077":["FL","1","ShortTermFluctuationProbability"],"0078":["CS","1","CorrectedLocalizedDeviationFromNormalCalculated"],"0079":["FL","1","CorrectedLocalizedDeviationFromNormal"],"0080":["CS","1","CorrectedLocalizedDeviationFromNormalProbabilityCalculated"],"0081":["FL","1","CorrectedLocalizedDeviationFromNormalProbability"],"0083":["SQ","1","GlobalDeviationProbabilitySequence"],"0085":["SQ","1","LocalizedDeviationProbabilitySequence"],"0086":["CS","1","FovealSensitivityMeasured"],"0087":["FL","1","FovealSensitivity"],"0088":["FL","1","VisualFieldTestDuration"],"0089":["SQ","1","VisualFieldTestPointSequence"],"0090":["FL","1","VisualFieldTestPointXCoordinate"],"0091":["FL","1","VisualFieldTestPointYCoordinate"],"0092":["FL","1","AgeCorrectedSensitivityDeviationValue"],"0093":["CS","1","StimulusResults"],"0094":["FL","1","SensitivityValue"],"0095":["CS","1","RetestStimulusSeen"],"0096":["FL","1","RetestSensitivityValue"],"0097":["SQ","1","VisualFieldTestPointNormalsSequence"],"0098":["FL","1","QuantifiedDefect"],"0100":["FL","1","AgeCorrectedSensitivityDeviationProbabilityValue"],"0102":["CS","1","GeneralizedDefectCorrectedSensitivityDeviationFlag"],"0103":["FL","1","GeneralizedDefectCorrectedSensitivityDeviationValue"],"0104":["FL","1","GeneralizedDefectCorrectedSensitivityDeviationProbabilityValue"],"0105":["FL","1","MinimumSensitivityValue"],"0106":["CS","1","BlindSpotLocalized"],"0107":["FL","1","BlindSpotXCoordinate"],"0108":["FL","1","BlindSpotYCoordinate"],"0110":["SQ","1","VisualAcuityMeasurementSequence"],"0112":["SQ","1","RefractiveParametersUsedOnPatientSequence"],"0113":["CS","1","MeasurementLaterality"],"0114":["SQ","1","OphthalmicPatientClinicalInformationLeftEyeSequence"],"0115":["SQ","1","OphthalmicPatientClinicalInformationRightEyeSequence"],"0117":["CS","1","FovealPointNormativeDataFlag"],"0118":["FL","1","FovealPointProbabilityValue"],"0120":["CS","1","ScreeningBaselineMeasured"],"0122":["SQ","1","ScreeningBaselineMeasuredSequence"],"0124":["CS","1","ScreeningBaselineType"],"0126":["FL","1","ScreeningBaselineValue"],"0202":["LO","1","AlgorithmSource"],"0306":["LO","1","DataSetName"],"0307":["LO","1","DataSetVersion"],"0308":["LO","1","DataSetSource"],"0309":["LO","1","DataSetDescription"],"0317":["SQ","1","VisualFieldTestReliabilityGlobalIndexSequence"],"0320":["SQ","1","VisualFieldGlobalResultsIndexSequence"],"0325":["SQ","1","DataObservationSequence"],"0338":["CS","1","IndexNormalsFlag"],"0341":["FL","1","IndexProbability"],"0344":["SQ","1","IndexProbabilitySequence"]},"0028":{"0000":["UL","1","GenericGroupLength"],"0002":["US","1","SamplesPerPixel"],"0003":["US","1","SamplesPerPixelUsed"],"0004":["CS","1","PhotometricInterpretation"],"0005":["US","1","ImageDimensions"],"0006":["US","1","PlanarConfiguration"],"0008":["IS","1","NumberOfFrames"],"0009":["AT","1-n","FrameIncrementPointer"],"000A":["AT","1-n","FrameDimensionPointer"],"0010":["US","1","Rows"],"0011":["US","1","Columns"],"0012":["US","1","Planes"],"0014":["US","1","UltrasoundColorDataPresent"],"0020":["","",""],"0030":["DS","2","PixelSpacing"],"0031":["DS","2","ZoomFactor"],"0032":["DS","2","ZoomCenter"],"0034":["IS","2","PixelAspectRatio"],"0040":["CS","1","ImageFormat"],"0050":["LO","1-n","ManipulatedImage"],"0051":["CS","1-n","CorrectedImage"],"005F":["LO","1","CompressionRecognitionCode"],"0060":["CS","1","CompressionCode"],"0061":["SH","1","CompressionOriginator"],"0062":["LO","1","CompressionLabel"],"0063":["SH","1","CompressionDescription"],"0065":["CS","1-n","CompressionSequence"],"0066":["AT","1-n","CompressionStepPointers"],"0068":["US","1","RepeatInterval"],"0069":["US","1","BitsGrouped"],"0070":["US","1-n","PerimeterTable"],"0071":["xs","1","PerimeterValue"],"0080":["US","1","PredictorRows"],"0081":["US","1","PredictorColumns"],"0082":["US","1-n","PredictorConstants"],"0090":["CS","1","BlockedPixels"],"0091":["US","1","BlockRows"],"0092":["US","1","BlockColumns"],"0093":["US","1","RowOverlap"],"0094":["US","1","ColumnOverlap"],"0100":["US","1","BitsAllocated"],"0101":["US","1","BitsStored"],"0102":["US","1","HighBit"],"0103":["US","1","PixelRepresentation"],"0104":["xs","1","SmallestValidPixelValue"],"0105":["xs","1","LargestValidPixelValue"],"0106":["xs","1","SmallestImagePixelValue"],"0107":["xs","1","LargestImagePixelValue"],"0108":["xs","1","SmallestPixelValueInSeries"],"0109":["xs","1","LargestPixelValueInSeries"],"0110":["xs","1","SmallestImagePixelValueInPlane"],"0111":["xs","1","LargestImagePixelValueInPlane"],"0120":["xs","1","PixelPaddingValue"],"0121":["xs","1","PixelPaddingRangeLimit"],"0122":["FL","1","FloatPixelPaddingValue"],"0123":["FD","1","DoubleFloatPixelPaddingValue"],"0124":["FL","1","FloatPixelPaddingRangeLimit"],"0125":["FD","1","DoubleFloatPixelPaddingRangeLimit"],"0200":["US","1","ImageLocation"],"0300":["CS","1","QualityControlImage"],"0301":["CS","1","BurnedInAnnotation"],"0302":["CS","1","RecognizableVisualFeatures"],"0303":["CS","1","LongitudinalTemporalInformationModified"],"0304":["UI","1","ReferencedColorPaletteInstanceUID"],"0400":["LO","1","TransformLabel"],"0401":["LO","1","TransformVersionNumber"],"0402":["US","1","NumberOfTransformSteps"],"0403":["LO","1-n","SequenceOfCompressedData"],"0404":["AT","1-n","DetailsOfCoefficients"],"04x0":["US","1","RowsForNthOrderCoefficients"],"04x1":["US","1","ColumnsForNthOrderCoefficients"],"04x2":["LO","1-n","CoefficientCoding"],"04x3":["AT","1-n","CoefficientCodingPointers"],"0700":["LO","1","DCTLabel"],"0701":["CS","1-n","DataBlockDescription"],"0702":["AT","1-n","DataBlock"],"0710":["US","1","NormalizationFactorFormat"],"0720":["US","1","ZonalMapNumberFormat"],"0721":["AT","1-n","ZonalMapLocation"],"0722":["US","1","ZonalMapFormat"],"0730":["US","1","AdaptiveMapFormat"],"0740":["US","1","CodeNumberFormat"],"08x0":["CS","1-n","CodeLabel"],"08x2":["US","1","NumberOfTables"],"08x3":["AT","1-n","CodeTableLocation"],"08x4":["US","1","BitsForCodeWord"],"08x8":["AT","1-n","ImageDataLocation"],"0A02":["CS","1","PixelSpacingCalibrationType"],"0A04":["LO","1","PixelSpacingCalibrationDescription"],1040:["CS","1","PixelIntensityRelationship"],1041:["SS","1","PixelIntensityRelationshipSign"],1050:["DS","1-n","WindowCenter"],1051:["DS","1-n","WindowWidth"],1052:["DS","1","RescaleIntercept"],1053:["DS","1","RescaleSlope"],1054:["LO","1","RescaleType"],1055:["LO","1-n","WindowCenterWidthExplanation"],1056:["CS","1","VOILUTFunction"],1080:["CS","1","GrayScale"],1090:["CS","1","RecommendedViewingMode"],1100:["xs","3","GrayLookupTableDescriptor"],1101:["xs","3","RedPaletteColorLookupTableDescriptor"],1102:["xs","3","GreenPaletteColorLookupTableDescriptor"],1103:["xs","3","BluePaletteColorLookupTableDescriptor"],1104:["US","3","AlphaPaletteColorLookupTableDescriptor"],1111:["xs","4","LargeRedPaletteColorLookupTableDescriptor"],1112:["xs","4","LargeGreenPaletteColorLookupTableDescriptor"],1113:["xs","4","LargeBluePaletteColorLookupTableDescriptor"],1199:["UI","1","PaletteColorLookupTableUID"],1200:["xs","1-n or 1","GrayLookupTableData"],1201:["OW","1","RedPaletteColorLookupTableData"],1202:["OW","1","GreenPaletteColorLookupTableData"],1203:["OW","1","BluePaletteColorLookupTableData"],1204:["OW","1","AlphaPaletteColorLookupTableData"],1211:["OW","1","LargeRedPaletteColorLookupTableData"],1212:["OW","1","LargeGreenPaletteColorLookupTableData"],1213:["OW","1","LargeBluePaletteColorLookupTableData"],1214:["UI","1","LargePaletteColorLookupTableUID"],1221:["OW","1","SegmentedRedPaletteColorLookupTableData"],1222:["OW","1","SegmentedGreenPaletteColorLookupTableData"],1223:["OW","1","SegmentedBluePaletteColorLookupTableData"],1224:["OW","1","SegmentedAlphaPaletteColorLookupTableData"],1230:["SQ","1","StoredValueColorRangeSequence"],1231:["FD","1","MinimumStoredValueMapped"],1232:["FD","1","MaximumStoredValueMapped"],1300:["CS","1","BreastImplantPresent"],1350:["CS","1","PartialView"],1351:["ST","1","PartialViewDescription"],1352:["SQ","1","PartialViewCodeSequence"],"135A":["CS","1","SpatialLocationsPreserved"],1401:["SQ","1","DataFrameAssignmentSequence"],1402:["CS","1","DataPathAssignment"],1403:["US","1","BitsMappedToColorLookupTable"],1404:["SQ","1","BlendingLUT1Sequence"],1405:["CS","1","BlendingLUT1TransferFunction"],1406:["FD","1","BlendingWeightConstant"],1407:["US","3","BlendingLookupTableDescriptor"],1408:["OW","1","BlendingLookupTableData"],"140B":["SQ","1","EnhancedPaletteColorLookupTableSequence"],"140C":["SQ","1","BlendingLUT2Sequence"],"140D":["CS","1","BlendingLUT2TransferFunction"],"140E":["CS","1","DataPathID"],"140F":["CS","1","RGBLUTTransferFunction"],1410:["CS","1","AlphaLUTTransferFunction"],2e3:["OB","1","ICCProfile"],2002:["CS","1","ColorSpace"],2110:["CS","1","LossyImageCompression"],2112:["DS","1-n","LossyImageCompressionRatio"],2114:["CS","1-n","LossyImageCompressionMethod"],3e3:["SQ","1","ModalityLUTSequence"],3002:["xs","3","LUTDescriptor"],3003:["LO","1","LUTExplanation"],3004:["LO","1","ModalityLUTType"],3006:["xx","1-n or 1","LUTData"],3010:["SQ","1","VOILUTSequence"],3110:["SQ","1","SoftcopyVOILUTSequence"],4e3:["LT","1","ImagePresentationComments"],5e3:["SQ","1","BiPlaneAcquisitionSequence"],6010:["US","1","RepresentativeFrameNumber"],6020:["US","1-n","FrameNumbersOfInterest"],6022:["LO","1-n","FrameOfInterestDescription"],6023:["CS","1-n","FrameOfInterestType"],6030:["US","1-n","MaskPointers"],6040:["US","1-n","RWavePointer"],6100:["SQ","1","MaskSubtractionSequence"],6101:["CS","1","MaskOperation"],6102:["US","2-2n","ApplicableFrameRange"],6110:["US","1-n","MaskFrameNumbers"],6112:["US","1","ContrastFrameAveraging"],6114:["FL","2","MaskSubPixelShift"],6120:["SS","1","TIDOffset"],6190:["ST","1","MaskOperationExplanation"],7e3:["SQ","1","EquipmentAdministratorSequence"],7001:["US","1","NumberOfDisplaySubsystems"],7002:["US","1","CurrentConfigurationID"],7003:["US","1","DisplaySubsystemID"],7004:["SH","1","DisplaySubsystemName"],7005:["LO","1","DisplaySubsystemDescription"],7006:["CS","1","SystemStatus"],7007:["LO","1","SystemStatusComment"],7008:["SQ","1","TargetLuminanceCharacteristicsSequence"],7009:["US","1","LuminanceCharacteristicsID"],"700A":["SQ","1","DisplaySubsystemConfigurationSequence"],"700B":["US","1","ConfigurationID"],"700C":["SH","1","ConfigurationName"],"700D":["LO","1","ConfigurationDescription"],"700E":["US","1","ReferencedTargetLuminanceCharacteristicsID"],"700F":["SQ","1","QAResultsSequence"],7010:["SQ","1","DisplaySubsystemQAResultsSequence"],7011:["SQ","1","ConfigurationQAResultsSequence"],7012:["SQ","1","MeasurementEquipmentSequence"],7013:["CS","1-n","MeasurementFunctions"],7014:["CS","1","MeasurementEquipmentType"],7015:["SQ","1","VisualEvaluationResultSequence"],7016:["SQ","1","DisplayCalibrationResultSequence"],7017:["US","1","DDLValue"],7018:["FL","2","CIExyWhitePoint"],7019:["CS","1","DisplayFunctionType"],"701A":["FL","1","GammaValue"],"701B":["US","1","NumberOfLuminancePoints"],"701C":["SQ","1","LuminanceResponseSequence"],"701D":["FL","1","TargetMinimumLuminance"],"701E":["FL","1","TargetMaximumLuminance"],"701F":["FL","1","LuminanceValue"],7020:["LO","1","LuminanceResponseDescription"],7021:["CS","1","WhitePointFlag"],7022:["SQ","1","DisplayDeviceTypeCodeSequence"],7023:["SQ","1","DisplaySubsystemSequence"],7024:["SQ","1","LuminanceResultSequence"],7025:["CS","1","AmbientLightValueSource"],7026:["CS","1-n","MeasuredCharacteristics"],7027:["SQ","1","LuminanceUniformityResultSequence"],7028:["SQ","1","VisualEvaluationTestSequence"],7029:["CS","1","TestResult"],"702A":["LO","1","TestResultComment"],"702B":["CS","1","TestImageValidation"],"702C":["SQ","1","TestPatternCodeSequence"],"702D":["SQ","1","MeasurementPatternCodeSequence"],"702E":["SQ","1","VisualEvaluationMethodCodeSequence"],"7FE0":["UR","1","PixelDataProviderURL"],9001:["UL","1","DataPointRows"],9002:["UL","1","DataPointColumns"],9003:["CS","1","SignalDomainColumns"],9099:["US","1","LargestMonochromePixelValue"],9108:["CS","1","DataRepresentation"],9110:["SQ","1","PixelMeasuresSequence"],9132:["SQ","1","FrameVOILUTSequence"],9145:["SQ","1","PixelValueTransformationSequence"],9235:["CS","1","SignalDomainRows"],9411:["FL","1","DisplayFilterPercentage"],9415:["SQ","1","FramePixelShiftSequence"],9416:["US","1","SubtractionItemID"],9422:["SQ","1","PixelIntensityRelationshipLUTSequence"],9443:["SQ","1","FramePixelDataPropertiesSequence"],9444:["CS","1","GeometricalProperties"],9445:["FL","1","GeometricMaximumDistortion"],9446:["CS","1-n","ImageProcessingApplied"],9454:["CS","1","MaskSelectionMode"],9474:["CS","1","LUTFunction"],9478:["FL","1","MaskVisibilityPercentage"],9501:["SQ","1","PixelShiftSequence"],9502:["SQ","1","RegionPixelShiftSequence"],9503:["SS","2-2n","VerticesOfTheRegion"],9505:["SQ","1","MultiFramePresentationSequence"],9506:["US","2-2n","PixelShiftFrameRange"],9507:["US","2-2n","LUTFrameRange"],9520:["DS","16","ImageToEquipmentMappingMatrix"],9537:["CS","1","EquipmentCoordinateSystemIdentification"]},"0032":{"0000":["UL","1","GenericGroupLength"],"000A":["CS","1","StudyStatusID"],"000C":["CS","1","StudyPriorityID"],"0012":["LO","1","StudyIDIssuer"],"0032":["DA","1","StudyVerifiedDate"],"0033":["TM","1","StudyVerifiedTime"],"0034":["DA","1","StudyReadDate"],"0035":["TM","1","StudyReadTime"],1e3:["DA","1","ScheduledStudyStartDate"],1001:["TM","1","ScheduledStudyStartTime"],1010:["DA","1","ScheduledStudyStopDate"],1011:["TM","1","ScheduledStudyStopTime"],1020:["LO","1","ScheduledStudyLocation"],1021:["AE","1-n","ScheduledStudyLocationAETitle"],1030:["LO","1","ReasonForStudy"],1031:["SQ","1","RequestingPhysicianIdentificationSequence"],1032:["PN","1","RequestingPhysician"],1033:["LO","1","RequestingService"],1034:["SQ","1","RequestingServiceCodeSequence"],1040:["DA","1","StudyArrivalDate"],1041:["TM","1","StudyArrivalTime"],1050:["DA","1","StudyCompletionDate"],1051:["TM","1","StudyCompletionTime"],1055:["CS","1","StudyComponentStatusID"],1060:["LO","1","RequestedProcedureDescription"],1064:["SQ","1","RequestedProcedureCodeSequence"],1065:["SQ","1","RequestedLateralityCodeSequence"],1066:["UT","1","ReasonForVisit"],1067:["SQ","1","ReasonForVisitCodeSequence"],1070:["LO","1","RequestedContrastAgent"],4e3:["LT","1","StudyComments"]},"0034":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","FlowIdentifierSequence"],"0002":["OB","1","FlowIdentifier"],"0003":["UI","1","FlowTransferSyntaxUID"],"0004":["UL","1","FlowRTPSamplingRate"],"0005":["OB","1","SourceIdentifier"],"0007":["OB","1","FrameOriginTimestamp"],"0008":["CS","1","IncludesImagingSubject"],"0009":["SQ","1","FrameUsefulnessGroupSequence"],"000A":["SQ","1","RealTimeBulkDataFlowSequence"],"000B":["SQ","1","CameraPositionGroupSequence"],"000C":["CS","1","IncludesInformation"],"000D":["SQ","1","TimeOfFrameGroupSequence"]},"0038":{"0000":["UL","1","GenericGroupLength"],"0004":["SQ","1","ReferencedPatientAliasSequence"],"0008":["CS","1","VisitStatusID"],"0010":["LO","1","AdmissionID"],"0011":["LO","1","IssuerOfAdmissionID"],"0014":["SQ","1","IssuerOfAdmissionIDSequence"],"0016":["LO","1","RouteOfAdmissions"],"001A":["DA","1","ScheduledAdmissionDate"],"001B":["TM","1","ScheduledAdmissionTime"],"001C":["DA","1","ScheduledDischargeDate"],"001D":["TM","1","ScheduledDischargeTime"],"001E":["LO","1","ScheduledPatientInstitutionResidence"],"0020":["DA","1","AdmittingDate"],"0021":["TM","1","AdmittingTime"],"0030":["DA","1","DischargeDate"],"0032":["TM","1","DischargeTime"],"0040":["LO","1","DischargeDiagnosisDescription"],"0044":["SQ","1","DischargeDiagnosisCodeSequence"],"0050":["LO","1","SpecialNeeds"],"0060":["LO","1","ServiceEpisodeID"],"0061":["LO","1","IssuerOfServiceEpisodeID"],"0062":["LO","1","ServiceEpisodeDescription"],"0064":["SQ","1","IssuerOfServiceEpisodeIDSequence"],"0100":["SQ","1","PertinentDocumentsSequence"],"0101":["SQ","1","PertinentResourcesSequence"],"0102":["LO","1","ResourceDescription"],"0300":["LO","1","CurrentPatientLocation"],"0400":["LO","1","PatientInstitutionResidence"],"0500":["LO","1","PatientState"],"0502":["SQ","1","PatientClinicalTrialParticipationSequence"],4e3:["LT","1","VisitComments"]},"003A":{"0000":["UL","1","GenericGroupLength"],"0004":["CS","1","WaveformOriginality"],"0005":["US","1","NumberOfWaveformChannels"],"0010":["UL","1","NumberOfWaveformSamples"],"001A":["DS","1","SamplingFrequency"],"0020":["SH","1","MultiplexGroupLabel"],"0200":["SQ","1","ChannelDefinitionSequence"],"0202":["IS","1","WaveformChannelNumber"],"0203":["SH","1","ChannelLabel"],"0205":["CS","1-n","ChannelStatus"],"0208":["SQ","1","ChannelSourceSequence"],"0209":["SQ","1","ChannelSourceModifiersSequence"],"020A":["SQ","1","SourceWaveformSequence"],"020C":["LO","1","ChannelDerivationDescription"],"0210":["DS","1","ChannelSensitivity"],"0211":["SQ","1","ChannelSensitivityUnitsSequence"],"0212":["DS","1","ChannelSensitivityCorrectionFactor"],"0213":["DS","1","ChannelBaseline"],"0214":["DS","1","ChannelTimeSkew"],"0215":["DS","1","ChannelSampleSkew"],"0218":["DS","1","ChannelOffset"],"021A":["US","1","WaveformBitsStored"],"0220":["DS","1","FilterLowFrequency"],"0221":["DS","1","FilterHighFrequency"],"0222":["DS","1","NotchFilterFrequency"],"0223":["DS","1","NotchFilterBandwidth"],"0230":["FL","1","WaveformDataDisplayScale"],"0231":["US","3","WaveformDisplayBackgroundCIELabValue"],"0240":["SQ","1","WaveformPresentationGroupSequence"],"0241":["US","1","PresentationGroupNumber"],"0242":["SQ","1","ChannelDisplaySequence"],"0244":["US","3","ChannelRecommendedDisplayCIELabValue"],"0245":["FL","1","ChannelPosition"],"0246":["CS","1","DisplayShadingFlag"],"0247":["FL","1","FractionalChannelDisplayScale"],"0248":["FL","1","AbsoluteChannelDisplayScale"],"0300":["SQ","1","MultiplexedAudioChannelsDescriptionCodeSequence"],"0301":["IS","1","ChannelIdentificationCode"],"0302":["CS","1","ChannelMode"],"0310":["UI","1","MultiplexGroupUID"],"0311":["DS","1","PowerlineFrequency"],"0312":["SQ","1","ChannelImpedanceSequence"],"0313":["DS","1","ImpedanceValue"],"0314":["DT","1","ImpedanceMeasurementDateTime"],"0315":["DS","1","ImpedanceMeasurementFrequency"],"0316":["CS","1","ImpedanceMeasurementCurrentType"]},"0040":{"0000":["UL","1","GenericGroupLength"],"0001":["AE","1-n","ScheduledStationAETitle"],"0002":["DA","1","ScheduledProcedureStepStartDate"],"0003":["TM","1","ScheduledProcedureStepStartTime"],"0004":["DA","1","ScheduledProcedureStepEndDate"],"0005":["TM","1","ScheduledProcedureStepEndTime"],"0006":["PN","1","ScheduledPerformingPhysicianName"],"0007":["LO","1","ScheduledProcedureStepDescription"],"0008":["SQ","1","ScheduledProtocolCodeSequence"],"0009":["SH","1","ScheduledProcedureStepID"],"000A":["SQ","1","StageCodeSequence"],"000B":["SQ","1","ScheduledPerformingPhysicianIdentificationSequence"],"0010":["SH","1-n","ScheduledStationName"],"0011":["SH","1","ScheduledProcedureStepLocation"],"0012":["LO","1","PreMedication"],"0020":["CS","1","ScheduledProcedureStepStatus"],"0026":["SQ","1","OrderPlacerIdentifierSequence"],"0027":["SQ","1","OrderFillerIdentifierSequence"],"0031":["UT","1","LocalNamespaceEntityID"],"0032":["UT","1","UniversalEntityID"],"0033":["CS","1","UniversalEntityIDType"],"0035":["CS","1","IdentifierTypeCode"],"0036":["SQ","1","AssigningFacilitySequence"],"0039":["SQ","1","AssigningJurisdictionCodeSequence"],"003A":["SQ","1","AssigningAgencyOrDepartmentCodeSequence"],"0100":["SQ","1","ScheduledProcedureStepSequence"],"0220":["SQ","1","ReferencedNonImageCompositeSOPInstanceSequence"],"0241":["AE","1","PerformedStationAETitle"],"0242":["SH","1","PerformedStationName"],"0243":["SH","1","PerformedLocation"],"0244":["DA","1","PerformedProcedureStepStartDate"],"0245":["TM","1","PerformedProcedureStepStartTime"],"0250":["DA","1","PerformedProcedureStepEndDate"],"0251":["TM","1","PerformedProcedureStepEndTime"],"0252":["CS","1","PerformedProcedureStepStatus"],"0253":["SH","1","PerformedProcedureStepID"],"0254":["LO","1","PerformedProcedureStepDescription"],"0255":["LO","1","PerformedProcedureTypeDescription"],"0260":["SQ","1","PerformedProtocolCodeSequence"],"0261":["CS","1","PerformedProtocolType"],"0270":["SQ","1","ScheduledStepAttributesSequence"],"0275":["SQ","1","RequestAttributesSequence"],"0280":["ST","1","CommentsOnThePerformedProcedureStep"],"0281":["SQ","1","PerformedProcedureStepDiscontinuationReasonCodeSequence"],"0293":["SQ","1","QuantitySequence"],"0294":["DS","1","Quantity"],"0295":["SQ","1","MeasuringUnitsSequence"],"0296":["SQ","1","BillingItemSequence"],"0300":["US","1","TotalTimeOfFluoroscopy"],"0301":["US","1","TotalNumberOfExposures"],"0302":["US","1","EntranceDose"],"0303":["US","1-2","ExposedArea"],"0306":["DS","1","DistanceSourceToEntrance"],"0307":["DS","1","DistanceSourceToSupport"],"030E":["SQ","1","ExposureDoseSequence"],"0310":["ST","1","CommentsOnRadiationDose"],"0312":["DS","1","XRayOutput"],"0314":["DS","1","HalfValueLayer"],"0316":["DS","1","OrganDose"],"0318":["CS","1","OrganExposed"],"0320":["SQ","1","BillingProcedureStepSequence"],"0321":["SQ","1","FilmConsumptionSequence"],"0324":["SQ","1","BillingSuppliesAndDevicesSequence"],"0330":["SQ","1","ReferencedProcedureStepSequence"],"0340":["SQ","1","PerformedSeriesSequence"],"0400":["LT","1","CommentsOnTheScheduledProcedureStep"],"0440":["SQ","1","ProtocolContextSequence"],"0441":["SQ","1","ContentItemModifierSequence"],"0500":["SQ","1","ScheduledSpecimenSequence"],"050A":["LO","1","SpecimenAccessionNumber"],"0512":["LO","1","ContainerIdentifier"],"0513":["SQ","1","IssuerOfTheContainerIdentifierSequence"],"0515":["SQ","1","AlternateContainerIdentifierSequence"],"0518":["SQ","1","ContainerTypeCodeSequence"],"051A":["LO","1","ContainerDescription"],"0520":["SQ","1","ContainerComponentSequence"],"0550":["SQ","1","SpecimenSequence"],"0551":["LO","1","SpecimenIdentifier"],"0552":["SQ","1","SpecimenDescriptionSequenceTrial"],"0553":["ST","1","SpecimenDescriptionTrial"],"0554":["UI","1","SpecimenUID"],"0555":["SQ","1","AcquisitionContextSequence"],"0556":["ST","1","AcquisitionContextDescription"],"0560":["SQ","1","SpecimenDescriptionSequence"],"0562":["SQ","1","IssuerOfTheSpecimenIdentifierSequence"],"059A":["SQ","1","SpecimenTypeCodeSequence"],"0600":["LO","1","SpecimenShortDescription"],"0602":["UT","1","SpecimenDetailedDescription"],"0610":["SQ","1","SpecimenPreparationSequence"],"0612":["SQ","1","SpecimenPreparationStepContentItemSequence"],"0620":["SQ","1","SpecimenLocalizationContentItemSequence"],"06FA":["LO","1","SlideIdentifier"],"0710":["SQ","1","WholeSlideMicroscopyImageFrameTypeSequence"],"071A":["SQ","1","ImageCenterPointCoordinatesSequence"],"072A":["DS","1","XOffsetInSlideCoordinateSystem"],"073A":["DS","1","YOffsetInSlideCoordinateSystem"],"074A":["DS","1","ZOffsetInSlideCoordinateSystem"],"08D8":["SQ","1","PixelSpacingSequence"],"08DA":["SQ","1","CoordinateSystemAxisCodeSequence"],"08EA":["SQ","1","MeasurementUnitsCodeSequence"],"09F8":["SQ","1","VitalStainCodeSequenceTrial"],1001:["SH","1","RequestedProcedureID"],1002:["LO","1","ReasonForTheRequestedProcedure"],1003:["SH","1","RequestedProcedurePriority"],1004:["LO","1","PatientTransportArrangements"],1005:["LO","1","RequestedProcedureLocation"],1006:["SH","1","PlacerOrderNumberProcedure"],1007:["SH","1","FillerOrderNumberProcedure"],1008:["LO","1","ConfidentialityCode"],1009:["SH","1","ReportingPriority"],"100A":["SQ","1","ReasonForRequestedProcedureCodeSequence"],1010:["PN","1-n","NamesOfIntendedRecipientsOfResults"],1011:["SQ","1","IntendedRecipientsOfResultsIdentificationSequence"],1012:["SQ","1","ReasonForPerformedProcedureCodeSequence"],1060:["LO","1","RequestedProcedureDescriptionTrial"],1101:["SQ","1","PersonIdentificationCodeSequence"],1102:["ST","1","PersonAddress"],1103:["LO","1-n","PersonTelephoneNumbers"],1104:["LT","1","PersonTelecomInformation"],1400:["LT","1","RequestedProcedureComments"],2001:["LO","1","ReasonForTheImagingServiceRequest"],2004:["DA","1","IssueDateOfImagingServiceRequest"],2005:["TM","1","IssueTimeOfImagingServiceRequest"],2006:["SH","1","PlacerOrderNumberImagingServiceRequestRetired"],2007:["SH","1","FillerOrderNumberImagingServiceRequestRetired"],2008:["PN","1","OrderEnteredBy"],2009:["SH","1","OrderEntererLocation"],2010:["SH","1","OrderCallbackPhoneNumber"],2011:["LT","1","OrderCallbackTelecomInformation"],2016:["LO","1","PlacerOrderNumberImagingServiceRequest"],2017:["LO","1","FillerOrderNumberImagingServiceRequest"],2400:["LT","1","ImagingServiceRequestComments"],3001:["LO","1","ConfidentialityConstraintOnPatientDataDescription"],4001:["CS","1","GeneralPurposeScheduledProcedureStepStatus"],4002:["CS","1","GeneralPurposePerformedProcedureStepStatus"],4003:["CS","1","GeneralPurposeScheduledProcedureStepPriority"],4004:["SQ","1","ScheduledProcessingApplicationsCodeSequence"],4005:["DT","1","ScheduledProcedureStepStartDateTime"],4006:["CS","1","MultipleCopiesFlag"],4007:["SQ","1","PerformedProcessingApplicationsCodeSequence"],4008:["DT","1","ScheduledProcedureStepExpirationDateTime"],4009:["SQ","1","HumanPerformerCodeSequence"],4010:["DT","1","ScheduledProcedureStepModificationDateTime"],4011:["DT","1","ExpectedCompletionDateTime"],4015:["SQ","1","ResultingGeneralPurposePerformedProcedureStepsSequence"],4016:["SQ","1","ReferencedGeneralPurposeScheduledProcedureStepSequence"],4018:["SQ","1","ScheduledWorkitemCodeSequence"],4019:["SQ","1","PerformedWorkitemCodeSequence"],4020:["CS","1","InputAvailabilityFlag"],4021:["SQ","1","InputInformationSequence"],4022:["SQ","1","RelevantInformationSequence"],4023:["UI","1","ReferencedGeneralPurposeScheduledProcedureStepTransactionUID"],4025:["SQ","1","ScheduledStationNameCodeSequence"],4026:["SQ","1","ScheduledStationClassCodeSequence"],4027:["SQ","1","ScheduledStationGeographicLocationCodeSequence"],4028:["SQ","1","PerformedStationNameCodeSequence"],4029:["SQ","1","PerformedStationClassCodeSequence"],4030:["SQ","1","PerformedStationGeographicLocationCodeSequence"],4031:["SQ","1","RequestedSubsequentWorkitemCodeSequence"],4032:["SQ","1","NonDICOMOutputCodeSequence"],4033:["SQ","1","OutputInformationSequence"],4034:["SQ","1","ScheduledHumanPerformersSequence"],4035:["SQ","1","ActualHumanPerformersSequence"],4036:["LO","1","HumanPerformerOrganization"],4037:["PN","1","HumanPerformerName"],4040:["CS","1","RawDataHandling"],4041:["CS","1","InputReadinessState"],4050:["DT","1","PerformedProcedureStepStartDateTime"],4051:["DT","1","PerformedProcedureStepEndDateTime"],4052:["DT","1","ProcedureStepCancellationDateTime"],4070:["SQ","1","OutputDestinationSequence"],4071:["SQ","1","DICOMStorageSequence"],4072:["SQ","1","STOWRSStorageSequence"],4073:["UR","1","StorageURL"],4074:["SQ","1","XDSStorageSequence"],8302:["DS","1","EntranceDoseInmGy"],8303:["CS","1","EntranceDoseDerivation"],9092:["SQ","1","ParametricMapFrameTypeSequence"],9094:["SQ","1","ReferencedImageRealWorldValueMappingSequence"],9096:["SQ","1","RealWorldValueMappingSequence"],9098:["SQ","1","PixelValueMappingCodeSequence"],9210:["SH","1","LUTLabel"],9211:["xs","1","RealWorldValueLastValueMapped"],9212:["FD","1-n","RealWorldValueLUTData"],9213:["FD","1","DoubleFloatRealWorldValueLastValueMapped"],9214:["FD","1","DoubleFloatRealWorldValueFirstValueMapped"],9216:["xs","1","RealWorldValueFirstValueMapped"],9220:["SQ","1","QuantityDefinitionSequence"],9224:["FD","1","RealWorldValueIntercept"],9225:["FD","1","RealWorldValueSlope"],A007:["CS","1","FindingsFlagTrial"],A010:["CS","1","RelationshipType"],A020:["SQ","1","FindingsSequenceTrial"],A021:["UI","1","FindingsGroupUIDTrial"],A022:["UI","1","ReferencedFindingsGroupUIDTrial"],A023:["DA","1","FindingsGroupRecordingDateTrial"],A024:["TM","1","FindingsGroupRecordingTimeTrial"],A026:["SQ","1","FindingsSourceCategoryCodeSequenceTrial"],A027:["LO","1","VerifyingOrganization"],A028:["SQ","1","DocumentingOrganizationIdentifierCodeSequenceTrial"],A030:["DT","1","VerificationDateTime"],A032:["DT","1","ObservationDateTime"],A033:["DT","1","ObservationStartDateTime"],A040:["CS","1","ValueType"],A043:["SQ","1","ConceptNameCodeSequence"],A047:["LO","1","MeasurementPrecisionDescriptionTrial"],A050:["CS","1","ContinuityOfContent"],A057:["CS","1-n","UrgencyOrPriorityAlertsTrial"],A060:["LO","1","SequencingIndicatorTrial"],A066:["SQ","1","DocumentIdentifierCodeSequenceTrial"],A067:["PN","1","DocumentAuthorTrial"],A068:["SQ","1","DocumentAuthorIdentifierCodeSequenceTrial"],A070:["SQ","1","IdentifierCodeSequenceTrial"],A073:["SQ","1","VerifyingObserverSequence"],A074:["OB","1","ObjectBinaryIdentifierTrial"],A075:["PN","1","VerifyingObserverName"],A076:["SQ","1","DocumentingObserverIdentifierCodeSequenceTrial"],A078:["SQ","1","AuthorObserverSequence"],A07A:["SQ","1","ParticipantSequence"],A07C:["SQ","1","CustodialOrganizationSequence"],A080:["CS","1","ParticipationType"],A082:["DT","1","ParticipationDateTime"],A084:["CS","1","ObserverType"],A085:["SQ","1","ProcedureIdentifierCodeSequenceTrial"],A088:["SQ","1","VerifyingObserverIdentificationCodeSequence"],A089:["OB","1","ObjectDirectoryBinaryIdentifierTrial"],A090:["SQ","1","EquivalentCDADocumentSequence"],A0B0:["US","2-2n","ReferencedWaveformChannels"],A110:["DA","1","DateOfDocumentOrVerbalTransactionTrial"],A112:["TM","1","TimeOfDocumentCreationOrVerbalTransactionTrial"],A120:["DT","1","DateTime"],A121:["DA","1","Date"],A122:["TM","1","Time"],A123:["PN","1","PersonName"],A124:["UI","1","UID"],A125:["CS","2","ReportStatusIDTrial"],A130:["CS","1","TemporalRangeType"],A132:["UL","1-n","ReferencedSamplePositions"],A136:["US","1-n","ReferencedFrameNumbers"],A138:["DS","1-n","ReferencedTimeOffsets"],A13A:["DT","1-n","ReferencedDateTime"],A160:["UT","1","TextValue"],A161:["FD","1-n","FloatingPointValue"],A162:["SL","1-n","RationalNumeratorValue"],A163:["UL","1-n","RationalDenominatorValue"],A167:["SQ","1","ObservationCategoryCodeSequenceTrial"],A168:["SQ","1","ConceptCodeSequence"],A16A:["ST","1","BibliographicCitationTrial"],A170:["SQ","1","PurposeOfReferenceCodeSequence"],A171:["UI","1","ObservationUID"],A172:["UI","1","ReferencedObservationUIDTrial"],A173:["CS","1","ReferencedObservationClassTrial"],A174:["CS","1","ReferencedObjectObservationClassTrial"],A180:["US","1","AnnotationGroupNumber"],A192:["DA","1","ObservationDateTrial"],A193:["TM","1","ObservationTimeTrial"],A194:["CS","1","MeasurementAutomationTrial"],A195:["SQ","1","ModifierCodeSequence"],A224:["ST","1","IdentificationDescriptionTrial"],A290:["CS","1","CoordinatesSetGeometricTypeTrial"],A296:["SQ","1","AlgorithmCodeSequenceTrial"],A297:["ST","1","AlgorithmDescriptionTrial"],A29A:["SL","2-2n","PixelCoordinatesSetTrial"],A300:["SQ","1","MeasuredValueSequence"],A301:["SQ","1","NumericValueQualifierCodeSequence"],A307:["PN","1","CurrentObserverTrial"],A30A:["DS","1-n","NumericValue"],A313:["SQ","1","ReferencedAccessionSequenceTrial"],A33A:["ST","1","ReportStatusCommentTrial"],A340:["SQ","1","ProcedureContextSequenceTrial"],A352:["PN","1","VerbalSourceTrial"],A353:["ST","1","AddressTrial"],A354:["LO","1","TelephoneNumberTrial"],A358:["SQ","1","VerbalSourceIdentifierCodeSequenceTrial"],A360:["SQ","1","PredecessorDocumentsSequence"],A370:["SQ","1","ReferencedRequestSequence"],A372:["SQ","1","PerformedProcedureCodeSequence"],A375:["SQ","1","CurrentRequestedProcedureEvidenceSequence"],A380:["SQ","1","ReportDetailSequenceTrial"],A385:["SQ","1","PertinentOtherEvidenceSequence"],A390:["SQ","1","HL7StructuredDocumentReferenceSequence"],A402:["UI","1","ObservationSubjectUIDTrial"],A403:["CS","1","ObservationSubjectClassTrial"],A404:["SQ","1","ObservationSubjectTypeCodeSequenceTrial"],A491:["CS","1","CompletionFlag"],A492:["LO","1","CompletionFlagDescription"],A493:["CS","1","VerificationFlag"],A494:["CS","1","ArchiveRequested"],A496:["CS","1","PreliminaryFlag"],A504:["SQ","1","ContentTemplateSequence"],A525:["SQ","1","IdenticalDocumentsSequence"],A600:["CS","1","ObservationSubjectContextFlagTrial"],A601:["CS","1","ObserverContextFlagTrial"],A603:["CS","1","ProcedureContextFlagTrial"],A730:["SQ","1","ContentSequence"],A731:["SQ","1","RelationshipSequenceTrial"],A732:["SQ","1","RelationshipTypeCodeSequenceTrial"],A744:["SQ","1","LanguageCodeSequenceTrial"],A801:["SQ","1","TabulatedValuesSequence"],A802:["UL","1","NumberOfTableRows"],A803:["UL","1","NumberOfTableColumns"],A804:["UL","1","TableRowNumber"],A805:["UL","1","TableColumnNumber"],A806:["SQ","1","TableRowDefinitionSequence"],A807:["SQ","1","TableColumnDefinitionSequence"],A808:["SQ","1","CellValuesSequence"],A992:["ST","1","UniformResourceLocatorTrial"],B020:["SQ","1","WaveformAnnotationSequence"],DB00:["CS","1","TemplateIdentifier"],DB06:["DT","1","TemplateVersion"],DB07:["DT","1","TemplateLocalVersion"],DB0B:["CS","1","TemplateExtensionFlag"],DB0C:["UI","1","TemplateExtensionOrganizationUID"],DB0D:["UI","1","TemplateExtensionCreatorUID"],DB73:["UL","1-n","ReferencedContentItemIdentifier"],E001:["ST","1","HL7InstanceIdentifier"],E004:["DT","1","HL7DocumentEffectiveTime"],E006:["SQ","1","HL7DocumentTypeCodeSequence"],E008:["SQ","1","DocumentClassCodeSequence"],E010:["UR","1","RetrieveURI"],E011:["UI","1","RetrieveLocationUID"],E020:["CS","1","TypeOfInstances"],E021:["SQ","1","DICOMRetrievalSequence"],E022:["SQ","1","DICOMMediaRetrievalSequence"],E023:["SQ","1","WADORetrievalSequence"],E024:["SQ","1","XDSRetrievalSequence"],E025:["SQ","1","WADORSRetrievalSequence"],E030:["UI","1","RepositoryUniqueID"],E031:["UI","1","HomeCommunityID"]},"0042":{"0000":["UL","1","GenericGroupLength"],"0010":["ST","1","DocumentTitle"],"0011":["OB","1","EncapsulatedDocument"],"0012":["LO","1","MIMETypeOfEncapsulatedDocument"],"0013":["SQ","1","SourceInstanceSequence"],"0014":["LO","1-n","ListOfMIMETypes"],"0015":["UL","1","EncapsulatedDocumentLength"]},"0044":{"0000":["UL","1","GenericGroupLength"],"0001":["ST","1","ProductPackageIdentifier"],"0002":["CS","1","SubstanceAdministrationApproval"],"0003":["LT","1","ApprovalStatusFurtherDescription"],"0004":["DT","1","ApprovalStatusDateTime"],"0007":["SQ","1","ProductTypeCodeSequence"],"0008":["LO","1-n","ProductName"],"0009":["LT","1","ProductDescription"],"000A":["LO","1","ProductLotIdentifier"],"000B":["DT","1","ProductExpirationDateTime"],"0010":["DT","1","SubstanceAdministrationDateTime"],"0011":["LO","1","SubstanceAdministrationNotes"],"0012":["LO","1","SubstanceAdministrationDeviceID"],"0013":["SQ","1","ProductParameterSequence"],"0019":["SQ","1","SubstanceAdministrationParameterSequence"],"0100":["SQ","1","ApprovalSequence"],"0101":["SQ","1","AssertionCodeSequence"],"0102":["UI","1","AssertionUID"],"0103":["SQ","1","AsserterIdentificationSequence"],"0104":["DT","1","AssertionDateTime"],"0105":["DT","1","AssertionExpirationDateTime"],"0106":["UT","1","AssertionComments"],"0107":["SQ","1","RelatedAssertionSequence"],"0108":["UI","1","ReferencedAssertionUID"],"0109":["SQ","1","ApprovalSubjectSequence"],"010A":["SQ","1","OrganizationalRoleCodeSequence"]},"0046":{"0000":["UL","1","GenericGroupLength"],"0012":["LO","1","LensDescription"],"0014":["SQ","1","RightLensSequence"],"0015":["SQ","1","LeftLensSequence"],"0016":["SQ","1","UnspecifiedLateralityLensSequence"],"0018":["SQ","1","CylinderSequence"],"0028":["SQ","1","PrismSequence"],"0030":["FD","1","HorizontalPrismPower"],"0032":["CS","1","HorizontalPrismBase"],"0034":["FD","1","VerticalPrismPower"],"0036":["CS","1","VerticalPrismBase"],"0038":["CS","1","LensSegmentType"],"0040":["FD","1","OpticalTransmittance"],"0042":["FD","1","ChannelWidth"],"0044":["FD","1","PupilSize"],"0046":["FD","1","CornealSize"],"0047":["SQ","1","CornealSizeSequence"],"0050":["SQ","1","AutorefractionRightEyeSequence"],"0052":["SQ","1","AutorefractionLeftEyeSequence"],"0060":["FD","1","DistancePupillaryDistance"],"0062":["FD","1","NearPupillaryDistance"],"0063":["FD","1","IntermediatePupillaryDistance"],"0064":["FD","1","OtherPupillaryDistance"],"0070":["SQ","1","KeratometryRightEyeSequence"],"0071":["SQ","1","KeratometryLeftEyeSequence"],"0074":["SQ","1","SteepKeratometricAxisSequence"],"0075":["FD","1","RadiusOfCurvature"],"0076":["FD","1","KeratometricPower"],"0077":["FD","1","KeratometricAxis"],"0080":["SQ","1","FlatKeratometricAxisSequence"],"0092":["CS","1","BackgroundColor"],"0094":["CS","1","Optotype"],"0095":["CS","1","OptotypePresentation"],"0097":["SQ","1","SubjectiveRefractionRightEyeSequence"],"0098":["SQ","1","SubjectiveRefractionLeftEyeSequence"],"0100":["SQ","1","AddNearSequence"],"0101":["SQ","1","AddIntermediateSequence"],"0102":["SQ","1","AddOtherSequence"],"0104":["FD","1","AddPower"],"0106":["FD","1","ViewingDistance"],"0110":["SQ","1","CorneaMeasurementsSequence"],"0111":["SQ","1","SourceOfCorneaMeasurementDataCodeSequence"],"0112":["SQ","1","SteepCornealAxisSequence"],"0113":["SQ","1","FlatCornealAxisSequence"],"0114":["FD","1","CornealPower"],"0115":["FD","1","CornealAxis"],"0116":["SQ","1","CorneaMeasurementMethodCodeSequence"],"0117":["FL","1","RefractiveIndexOfCornea"],"0118":["FL","1","RefractiveIndexOfAqueousHumor"],"0121":["SQ","1","VisualAcuityTypeCodeSequence"],"0122":["SQ","1","VisualAcuityRightEyeSequence"],"0123":["SQ","1","VisualAcuityLeftEyeSequence"],"0124":["SQ","1","VisualAcuityBothEyesOpenSequence"],"0125":["CS","1","ViewingDistanceType"],"0135":["SS","2","VisualAcuityModifiers"],"0137":["FD","1","DecimalVisualAcuity"],"0139":["LO","1","OptotypeDetailedDefinition"],"0145":["SQ","1","ReferencedRefractiveMeasurementsSequence"],"0146":["FD","1","SpherePower"],"0147":["FD","1","CylinderPower"],"0201":["CS","1","CornealTopographySurface"],"0202":["FL","2","CornealVertexLocation"],"0203":["FL","1","PupilCentroidXCoordinate"],"0204":["FL","1","PupilCentroidYCoordinate"],"0205":["FL","1","EquivalentPupilRadius"],"0207":["SQ","1","CornealTopographyMapTypeCodeSequence"],"0208":["IS","2-2n","VerticesOfTheOutlineOfPupil"],"0210":["SQ","1","CornealTopographyMappingNormalsSequence"],"0211":["SQ","1","MaximumCornealCurvatureSequence"],"0212":["FL","1","MaximumCornealCurvature"],"0213":["FL","2","MaximumCornealCurvatureLocation"],"0215":["SQ","1","MinimumKeratometricSequence"],"0218":["SQ","1","SimulatedKeratometricCylinderSequence"],"0220":["FL","1","AverageCornealPower"],"0224":["FL","1","CornealISValue"],"0227":["FL","1","AnalyzedArea"],"0230":["FL","1","SurfaceRegularityIndex"],"0232":["FL","1","SurfaceAsymmetryIndex"],"0234":["FL","1","CornealEccentricityIndex"],"0236":["FL","1","KeratoconusPredictionIndex"],"0238":["FL","1","DecimalPotentialVisualAcuity"],"0242":["CS","1","CornealTopographyMapQualityEvaluation"],"0244":["SQ","1","SourceImageCornealProcessedDataSequence"],"0247":["FL","3","CornealPointLocation"],"0248":["CS","1","CornealPointEstimated"],"0249":["FL","1","AxialPower"],"0250":["FL","1","TangentialPower"],"0251":["FL","1","RefractivePower"],"0252":["FL","1","RelativeElevation"],"0253":["FL","1","CornealWavefront"]},"0048":{"0000":["UL","1","GenericGroupLength"],"0001":["FL","1","ImagedVolumeWidth"],"0002":["FL","1","ImagedVolumeHeight"],"0003":["FL","1","ImagedVolumeDepth"],"0006":["UL","1","TotalPixelMatrixColumns"],"0007":["UL","1","TotalPixelMatrixRows"],"0008":["SQ","1","TotalPixelMatrixOriginSequence"],"0010":["CS","1","SpecimenLabelInImage"],"0011":["CS","1","FocusMethod"],"0012":["CS","1","ExtendedDepthOfField"],"0013":["US","1","NumberOfFocalPlanes"],"0014":["FL","1","DistanceBetweenFocalPlanes"],"0015":["US","3","RecommendedAbsentPixelCIELabValue"],"0100":["SQ","1","IlluminatorTypeCodeSequence"],"0102":["DS","6","ImageOrientationSlide"],"0105":["SQ","1","OpticalPathSequence"],"0106":["SH","1","OpticalPathIdentifier"],"0107":["ST","1","OpticalPathDescription"],"0108":["SQ","1","IlluminationColorCodeSequence"],"0110":["SQ","1","SpecimenReferenceSequence"],"0111":["DS","1","CondenserLensPower"],"0112":["DS","1","ObjectiveLensPower"],"0113":["DS","1","ObjectiveLensNumericalAperture"],"0120":["SQ","1","PaletteColorLookupTableSequence"],"0200":["SQ","1","ReferencedImageNavigationSequence"],"0201":["US","2","TopLeftHandCornerOfLocalizerArea"],"0202":["US","2","BottomRightHandCornerOfLocalizerArea"],"0207":["SQ","1","OpticalPathIdentificationSequence"],"021A":["SQ","1","PlanePositionSlideSequence"],"021E":["SL","1","ColumnPositionInTotalImagePixelMatrix"],"021F":["SL","1","RowPositionInTotalImagePixelMatrix"],"0301":["CS","1","PixelOriginInterpretation"],"0302":["UL","1","NumberOfOpticalPaths"],"0303":["UL","1","TotalPixelMatrixFocalPlanes"]},"0050":{"0000":["UL","1","GenericGroupLength"],"0004":["CS","1","CalibrationImage"],"0010":["SQ","1","DeviceSequence"],"0012":["SQ","1","ContainerComponentTypeCodeSequence"],"0013":["FD","1","ContainerComponentThickness"],"0014":["DS","1","DeviceLength"],"0015":["FD","1","ContainerComponentWidth"],"0016":["DS","1","DeviceDiameter"],"0017":["CS","1","DeviceDiameterUnits"],"0018":["DS","1","DeviceVolume"],"0019":["DS","1","InterMarkerDistance"],"001A":["CS","1","ContainerComponentMaterial"],"001B":["LO","1","ContainerComponentID"],"001C":["FD","1","ContainerComponentLength"],"001D":["FD","1","ContainerComponentDiameter"],"001E":["LO","1","ContainerComponentDescription"],"0020":["LO","1","DeviceDescription"],"0021":["ST","1","LongDeviceDescription"]},"0052":{"0000":["UL","1","GenericGroupLength"],"0001":["FL","1","ContrastBolusIngredientPercentByVolume"],"0002":["FD","1","OCTFocalDistance"],"0003":["FD","1","BeamSpotSize"],"0004":["FD","1","EffectiveRefractiveIndex"],"0006":["CS","1","OCTAcquisitionDomain"],"0007":["FD","1","OCTOpticalCenterWavelength"],"0008":["FD","1","AxialResolution"],"0009":["FD","1","RangingDepth"],"0011":["FD","1","ALineRate"],"0012":["US","1","ALinesPerFrame"],"0013":["FD","1","CatheterRotationalRate"],"0014":["FD","1","ALinePixelSpacing"],"0016":["SQ","1","ModeOfPercutaneousAccessSequence"],"0025":["SQ","1","IntravascularOCTFrameTypeSequence"],"0026":["CS","1","OCTZOffsetApplied"],"0027":["SQ","1","IntravascularFrameContentSequence"],"0028":["FD","1","IntravascularLongitudinalDistance"],"0029":["SQ","1","IntravascularOCTFrameContentSequence"],"0030":["SS","1","OCTZOffsetCorrection"],"0031":["CS","1","CatheterDirectionOfRotation"],"0033":["FD","1","SeamLineLocation"],"0034":["FD","1","FirstALineLocation"],"0036":["US","1","SeamLineIndex"],"0038":["US","1","NumberOfPaddedALines"],"0039":["CS","1","InterpolationType"],"003A":["CS","1","RefractiveIndexApplied"]},"0054":{"0000":["UL","1","GenericGroupLength"],"0010":["US","1-n","EnergyWindowVector"],"0011":["US","1","NumberOfEnergyWindows"],"0012":["SQ","1","EnergyWindowInformationSequence"],"0013":["SQ","1","EnergyWindowRangeSequence"],"0014":["DS","1","EnergyWindowLowerLimit"],"0015":["DS","1","EnergyWindowUpperLimit"],"0016":["SQ","1","RadiopharmaceuticalInformationSequence"],"0017":["IS","1","ResidualSyringeCounts"],"0018":["SH","1","EnergyWindowName"],"0020":["US","1-n","DetectorVector"],"0021":["US","1","NumberOfDetectors"],"0022":["SQ","1","DetectorInformationSequence"],"0030":["US","1-n","PhaseVector"],"0031":["US","1","NumberOfPhases"],"0032":["SQ","1","PhaseInformationSequence"],"0033":["US","1","NumberOfFramesInPhase"],"0036":["IS","1","PhaseDelay"],"0038":["IS","1","PauseBetweenFrames"],"0039":["CS","1","PhaseDescription"],"0050":["US","1-n","RotationVector"],"0051":["US","1","NumberOfRotations"],"0052":["SQ","1","RotationInformationSequence"],"0053":["US","1","NumberOfFramesInRotation"],"0060":["US","1-n","RRIntervalVector"],"0061":["US","1","NumberOfRRIntervals"],"0062":["SQ","1","GatedInformationSequence"],"0063":["SQ","1","DataInformationSequence"],"0070":["US","1-n","TimeSlotVector"],"0071":["US","1","NumberOfTimeSlots"],"0072":["SQ","1","TimeSlotInformationSequence"],"0073":["DS","1","TimeSlotTime"],"0080":["US","1-n","SliceVector"],"0081":["US","1","NumberOfSlices"],"0090":["US","1-n","AngularViewVector"],"0100":["US","1-n","TimeSliceVector"],"0101":["US","1","NumberOfTimeSlices"],"0200":["DS","1","StartAngle"],"0202":["CS","1","TypeOfDetectorMotion"],"0210":["IS","1-n","TriggerVector"],"0211":["US","1","NumberOfTriggersInPhase"],"0220":["SQ","1","ViewCodeSequence"],"0222":["SQ","1","ViewModifierCodeSequence"],"0300":["SQ","1","RadionuclideCodeSequence"],"0302":["SQ","1","AdministrationRouteCodeSequence"],"0304":["SQ","1","RadiopharmaceuticalCodeSequence"],"0306":["SQ","1","CalibrationDataSequence"],"0308":["US","1","EnergyWindowNumber"],"0400":["SH","1","ImageID"],"0410":["SQ","1","PatientOrientationCodeSequence"],"0412":["SQ","1","PatientOrientationModifierCodeSequence"],"0414":["SQ","1","PatientGantryRelationshipCodeSequence"],"0500":["CS","1","SliceProgressionDirection"],"0501":["CS","1","ScanProgressionDirection"],1e3:["CS","2","SeriesType"],1001:["CS","1","Units"],1002:["CS","1","CountsSource"],1004:["CS","1","ReprojectionMethod"],1006:["CS","1","SUVType"],1100:["CS","1","RandomsCorrectionMethod"],1101:["LO","1","AttenuationCorrectionMethod"],1102:["CS","1","DecayCorrection"],1103:["LO","1","ReconstructionMethod"],1104:["LO","1","DetectorLinesOfResponseUsed"],1105:["LO","1","ScatterCorrectionMethod"],1200:["DS","1","AxialAcceptance"],1201:["IS","2","AxialMash"],1202:["IS","1","TransverseMash"],1203:["DS","2","DetectorElementSize"],1210:["DS","1","CoincidenceWindowWidth"],1220:["CS","1-n","SecondaryCountsType"],1300:["DS","1","FrameReferenceTime"],1310:["IS","1","PrimaryPromptsCountsAccumulated"],1311:["IS","1-n","SecondaryCountsAccumulated"],1320:["DS","1","SliceSensitivityFactor"],1321:["DS","1","DecayFactor"],1322:["DS","1","DoseCalibrationFactor"],1323:["DS","1","ScatterFractionFactor"],1324:["DS","1","DeadTimeFactor"],1330:["US","1","ImageIndex"],1400:["CS","1-n","CountsIncluded"],1401:["CS","1","DeadTimeCorrectionFlag"]},"0060":{"0000":["UL","1","GenericGroupLength"],3e3:["SQ","1","HistogramSequence"],3002:["US","1","HistogramNumberOfBins"],3004:["xs","1","HistogramFirstBinValue"],3006:["xs","1","HistogramLastBinValue"],3008:["US","1","HistogramBinWidth"],3010:["LO","1","HistogramExplanation"],3020:["UL","1-n","HistogramData"]},"0062":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","SegmentationType"],"0002":["SQ","1","SegmentSequence"],"0003":["SQ","1","SegmentedPropertyCategoryCodeSequence"],"0004":["US","1","SegmentNumber"],"0005":["LO","1","SegmentLabel"],"0006":["ST","1","SegmentDescription"],"0007":["SQ","1","SegmentationAlgorithmIdentificationSequence"],"0008":["CS","1","SegmentAlgorithmType"],"0009":["LO","1-n","SegmentAlgorithmName"],"000A":["SQ","1","SegmentIdentificationSequence"],"000B":["US","1-n","ReferencedSegmentNumber"],"000C":["US","1","RecommendedDisplayGrayscaleValue"],"000D":["US","3","RecommendedDisplayCIELabValue"],"000E":["US","1","MaximumFractionalValue"],"000F":["SQ","1","SegmentedPropertyTypeCodeSequence"],"0010":["CS","1","SegmentationFractionalType"],"0011":["SQ","1","SegmentedPropertyTypeModifierCodeSequence"],"0012":["SQ","1","UsedSegmentsSequence"],"0013":["CS","1","SegmentsOverlap"],"0020":["UT","1","TrackingID"],"0021":["UI","1","TrackingUID"]},"0064":{"0000":["UL","1","GenericGroupLength"],"0002":["SQ","1","DeformableRegistrationSequence"],"0003":["UI","1","SourceFrameOfReferenceUID"],"0005":["SQ","1","DeformableRegistrationGridSequence"],"0007":["UL","3","GridDimensions"],"0008":["FD","3","GridResolution"],"0009":["OF","1","VectorGridData"],"000F":["SQ","1","PreDeformationMatrixRegistrationSequence"],"0010":["SQ","1","PostDeformationMatrixRegistrationSequence"]},"0066":{"0000":["UL","1","GenericGroupLength"],"0001":["UL","1","NumberOfSurfaces"],"0002":["SQ","1","SurfaceSequence"],"0003":["UL","1","SurfaceNumber"],"0004":["LT","1","SurfaceComments"],"0009":["CS","1","SurfaceProcessing"],"000A":["FL","1","SurfaceProcessingRatio"],"000B":["LO","1","SurfaceProcessingDescription"],"000C":["FL","1","RecommendedPresentationOpacity"],"000D":["CS","1","RecommendedPresentationType"],"000E":["CS","1","FiniteVolume"],"0010":["CS","1","Manifold"],"0011":["SQ","1","SurfacePointsSequence"],"0012":["SQ","1","SurfacePointsNormalsSequence"],"0013":["SQ","1","SurfaceMeshPrimitivesSequence"],"0015":["UL","1","NumberOfSurfacePoints"],"0016":["OF","1","PointCoordinatesData"],"0017":["FL","3","PointPositionAccuracy"],"0018":["FL","1","MeanPointDistance"],"0019":["FL","1","MaximumPointDistance"],"001A":["FL","6","PointsBoundingBoxCoordinates"],"001B":["FL","3","AxisOfRotation"],"001C":["FL","3","CenterOfRotation"],"001E":["UL","1","NumberOfVectors"],"001F":["US","1","VectorDimensionality"],"0020":["FL","1-n","VectorAccuracy"],"0021":["OF","1","VectorCoordinateData"],"0022":["OD","1","DoublePointCoordinatesData"],"0023":["OW","1","TrianglePointIndexList"],"0024":["OW","1","EdgePointIndexList"],"0025":["OW","1","VertexPointIndexList"],"0026":["SQ","1","TriangleStripSequence"],"0027":["SQ","1","TriangleFanSequence"],"0028":["SQ","1","LineSequence"],"0029":["OW","1","PrimitivePointIndexList"],"002A":["UL","1","SurfaceCount"],"002B":["SQ","1","ReferencedSurfaceSequence"],"002C":["UL","1","ReferencedSurfaceNumber"],"002D":["SQ","1","SegmentSurfaceGenerationAlgorithmIdentificationSequence"],"002E":["SQ","1","SegmentSurfaceSourceInstanceSequence"],"002F":["SQ","1","AlgorithmFamilyCodeSequence"],"0030":["SQ","1","AlgorithmNameCodeSequence"],"0031":["LO","1","AlgorithmVersion"],"0032":["LT","1","AlgorithmParameters"],"0034":["SQ","1","FacetSequence"],"0035":["SQ","1","SurfaceProcessingAlgorithmIdentificationSequence"],"0036":["LO","1","AlgorithmName"],"0037":["FL","1","RecommendedPointRadius"],"0038":["FL","1","RecommendedLineThickness"],"0040":["OL","1","LongPrimitivePointIndexList"],"0041":["OL","1","LongTrianglePointIndexList"],"0042":["OL","1","LongEdgePointIndexList"],"0043":["OL","1","LongVertexPointIndexList"],"0101":["SQ","1","TrackSetSequence"],"0102":["SQ","1","TrackSequence"],"0103":["OW","1","RecommendedDisplayCIELabValueList"],"0104":["SQ","1","TrackingAlgorithmIdentificationSequence"],"0105":["UL","1","TrackSetNumber"],"0106":["LO","1","TrackSetLabel"],"0107":["UT","1","TrackSetDescription"],"0108":["SQ","1","TrackSetAnatomicalTypeCodeSequence"],"0121":["SQ","1","MeasurementsSequence"],"0124":["SQ","1","TrackSetStatisticsSequence"],"0125":["OF","1","FloatingPointValues"],"0129":["OL","1","TrackPointIndexList"],"0130":["SQ","1","TrackStatisticsSequence"],"0132":["SQ","1","MeasurementValuesSequence"],"0133":["SQ","1","DiffusionAcquisitionCodeSequence"],"0134":["SQ","1","DiffusionModelCodeSequence"]},"0068":{"0000":["UL","1","GenericGroupLength"],6210:["LO","1","ImplantSize"],6221:["LO","1","ImplantTemplateVersion"],6222:["SQ","1","ReplacedImplantTemplateSequence"],6223:["CS","1","ImplantType"],6224:["SQ","1","DerivationImplantTemplateSequence"],6225:["SQ","1","OriginalImplantTemplateSequence"],6226:["DT","1","EffectiveDateTime"],6230:["SQ","1","ImplantTargetAnatomySequence"],6260:["SQ","1","InformationFromManufacturerSequence"],6265:["SQ","1","NotificationFromManufacturerSequence"],6270:["DT","1","InformationIssueDateTime"],6280:["ST","1","InformationSummary"],"62A0":["SQ","1","ImplantRegulatoryDisapprovalCodeSequence"],"62A5":["FD","1","OverallTemplateSpatialTolerance"],"62C0":["SQ","1","HPGLDocumentSequence"],"62D0":["US","1","HPGLDocumentID"],"62D5":["LO","1","HPGLDocumentLabel"],"62E0":["SQ","1","ViewOrientationCodeSequence"],"62F0":["SQ","1","ViewOrientationModifierCodeSequence"],"62F2":["FD","1","HPGLDocumentScaling"],6300:["OB","1","HPGLDocument"],6310:["US","1","HPGLContourPenNumber"],6320:["SQ","1","HPGLPenSequence"],6330:["US","1","HPGLPenNumber"],6340:["LO","1","HPGLPenLabel"],6345:["ST","1","HPGLPenDescription"],6346:["FD","2","RecommendedRotationPoint"],6347:["FD","4","BoundingRectangle"],6350:["US","1-n","ImplantTemplate3DModelSurfaceNumber"],6360:["SQ","1","SurfaceModelDescriptionSequence"],6380:["LO","1","SurfaceModelLabel"],6390:["FD","1","SurfaceModelScalingFactor"],"63A0":["SQ","1","MaterialsCodeSequence"],"63A4":["SQ","1","CoatingMaterialsCodeSequence"],"63A8":["SQ","1","ImplantTypeCodeSequence"],"63AC":["SQ","1","FixationMethodCodeSequence"],"63B0":["SQ","1","MatingFeatureSetsSequence"],"63C0":["US","1","MatingFeatureSetID"],"63D0":["LO","1","MatingFeatureSetLabel"],"63E0":["SQ","1","MatingFeatureSequence"],"63F0":["US","1","MatingFeatureID"],6400:["SQ","1","MatingFeatureDegreeOfFreedomSequence"],6410:["US","1","DegreeOfFreedomID"],6420:["CS","1","DegreeOfFreedomType"],6430:["SQ","1","TwoDMatingFeatureCoordinatesSequence"],6440:["US","1","ReferencedHPGLDocumentID"],6450:["FD","2","TwoDMatingPoint"],6460:["FD","4","TwoDMatingAxes"],6470:["SQ","1","TwoDDegreeOfFreedomSequence"],6490:["FD","3","ThreeDDegreeOfFreedomAxis"],"64A0":["FD","2","RangeOfFreedom"],"64C0":["FD","3","ThreeDMatingPoint"],"64D0":["FD","9","ThreeDMatingAxes"],"64F0":["FD","3","TwoDDegreeOfFreedomAxis"],6500:["SQ","1","PlanningLandmarkPointSequence"],6510:["SQ","1","PlanningLandmarkLineSequence"],6520:["SQ","1","PlanningLandmarkPlaneSequence"],6530:["US","1","PlanningLandmarkID"],6540:["LO","1","PlanningLandmarkDescription"],6545:["SQ","1","PlanningLandmarkIdentificationCodeSequence"],6550:["SQ","1","TwoDPointCoordinatesSequence"],6560:["FD","2","TwoDPointCoordinates"],6590:["FD","3","ThreeDPointCoordinates"],"65A0":["SQ","1","TwoDLineCoordinatesSequence"],"65B0":["FD","4","TwoDLineCoordinates"],"65D0":["FD","6","ThreeDLineCoordinates"],"65E0":["SQ","1","TwoDPlaneCoordinatesSequence"],"65F0":["FD","4","TwoDPlaneIntersection"],6610:["FD","3","ThreeDPlaneOrigin"],6620:["FD","3","ThreeDPlaneNormal"],7001:["CS","1","ModelModification"],7002:["CS","1","ModelMirroring"],7003:["SQ","1","ModelUsageCodeSequence"],7004:["UI","1","ModelGroupUID"],7005:["UR","1","RelativeURIReferenceWithinEncapsulatedDocument"]},"006A":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","AnnotationCoordinateType"],"0002":["SQ","1","AnnotationGroupSequence"],"0003":["UI","1","AnnotationGroupUID"],"0005":["LO","1","AnnotationGroupLabel"],"0006":["UT","1","AnnotationGroupDescription"],"0007":["CS","1","AnnotationGroupGenerationType"],"0008":["SQ","1","AnnotationGroupAlgorithmIdentificationSequence"],"0009":["SQ","1","AnnotationPropertyCategoryCodeSequence"],"000A":["SQ","1","AnnotationPropertyTypeCodeSequence"],"000B":["SQ","1","AnnotationPropertyTypeModifierCodeSequence"],"000C":["UL","1","NumberOfAnnotations"],"000D":["CS","1","AnnotationAppliesToAllOpticalPaths"],"000E":["SH","1-n","ReferencedOpticalPathIdentifier"],"000F":["CS","1","AnnotationAppliesToAllZPlanes"],"0010":["FD","1-n","CommonZCoordinateValue"],"0011":["OL","1","AnnotationIndexList"]},"0070":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","GraphicAnnotationSequence"],"0002":["CS","1","GraphicLayer"],"0003":["CS","1","BoundingBoxAnnotationUnits"],"0004":["CS","1","AnchorPointAnnotationUnits"],"0005":["CS","1","GraphicAnnotationUnits"],"0006":["ST","1","UnformattedTextValue"],"0008":["SQ","1","TextObjectSequence"],"0009":["SQ","1","GraphicObjectSequence"],"0010":["FL","2","BoundingBoxTopLeftHandCorner"],"0011":["FL","2","BoundingBoxBottomRightHandCorner"],"0012":["CS","1","BoundingBoxTextHorizontalJustification"],"0014":["FL","2","AnchorPoint"],"0015":["CS","1","AnchorPointVisibility"],"0020":["US","1","GraphicDimensions"],"0021":["US","1","NumberOfGraphicPoints"],"0022":["FL","2-n","GraphicData"],"0023":["CS","1","GraphicType"],"0024":["CS","1","GraphicFilled"],"0040":["IS","1","ImageRotationRetired"],"0041":["CS","1","ImageHorizontalFlip"],"0042":["US","1","ImageRotation"],"0050":["US","2","DisplayedAreaTopLeftHandCornerTrial"],"0051":["US","2","DisplayedAreaBottomRightHandCornerTrial"],"0052":["SL","2","DisplayedAreaTopLeftHandCorner"],"0053":["SL","2","DisplayedAreaBottomRightHandCorner"],"005A":["SQ","1","DisplayedAreaSelectionSequence"],"0060":["SQ","1","GraphicLayerSequence"],"0062":["IS","1","GraphicLayerOrder"],"0066":["US","1","GraphicLayerRecommendedDisplayGrayscaleValue"],"0067":["US","3","GraphicLayerRecommendedDisplayRGBValue"],"0068":["LO","1","GraphicLayerDescription"],"0080":["CS","1","ContentLabel"],"0081":["LO","1","ContentDescription"],"0082":["DA","1","PresentationCreationDate"],"0083":["TM","1","PresentationCreationTime"],"0084":["PN","1","ContentCreatorName"],"0086":["SQ","1","ContentCreatorIdentificationCodeSequence"],"0087":["SQ","1","AlternateContentDescriptionSequence"],"0100":["CS","1","PresentationSizeMode"],"0101":["DS","2","PresentationPixelSpacing"],"0102":["IS","2","PresentationPixelAspectRatio"],"0103":["FL","1","PresentationPixelMagnificationRatio"],"0207":["LO","1","GraphicGroupLabel"],"0208":["ST","1","GraphicGroupDescription"],"0209":["SQ","1","CompoundGraphicSequence"],"0226":["UL","1","CompoundGraphicInstanceID"],"0227":["LO","1","FontName"],"0228":["CS","1","FontNameType"],"0229":["LO","1","CSSFontName"],"0230":["FD","1","RotationAngle"],"0231":["SQ","1","TextStyleSequence"],"0232":["SQ","1","LineStyleSequence"],"0233":["SQ","1","FillStyleSequence"],"0234":["SQ","1","GraphicGroupSequence"],"0241":["US","3","TextColorCIELabValue"],"0242":["CS","1","HorizontalAlignment"],"0243":["CS","1","VerticalAlignment"],"0244":["CS","1","ShadowStyle"],"0245":["FL","1","ShadowOffsetX"],"0246":["FL","1","ShadowOffsetY"],"0247":["US","3","ShadowColorCIELabValue"],"0248":["CS","1","Underlined"],"0249":["CS","1","Bold"],"0250":["CS","1","Italic"],"0251":["US","3","PatternOnColorCIELabValue"],"0252":["US","3","PatternOffColorCIELabValue"],"0253":["FL","1","LineThickness"],"0254":["CS","1","LineDashingStyle"],"0255":["UL","1","LinePattern"],"0256":["OB","1","FillPattern"],"0257":["CS","1","FillMode"],"0258":["FL","1","ShadowOpacity"],"0261":["FL","1","GapLength"],"0262":["FL","1","DiameterOfVisibility"],"0273":["FL","2","RotationPoint"],"0274":["CS","1","TickAlignment"],"0278":["CS","1","ShowTickLabel"],"0279":["CS","1","TickLabelAlignment"],"0282":["CS","1","CompoundGraphicUnits"],"0284":["FL","1","PatternOnOpacity"],"0285":["FL","1","PatternOffOpacity"],"0287":["SQ","1","MajorTicksSequence"],"0288":["FL","1","TickPosition"],"0289":["SH","1","TickLabel"],"0294":["CS","1","CompoundGraphicType"],"0295":["UL","1","GraphicGroupID"],"0306":["CS","1","ShapeType"],"0308":["SQ","1","RegistrationSequence"],"0309":["SQ","1","MatrixRegistrationSequence"],"030A":["SQ","1","MatrixSequence"],"030B":["FD","16","FrameOfReferenceToDisplayedCoordinateSystemTransformationMatrix"],"030C":["CS","1","FrameOfReferenceTransformationMatrixType"],"030D":["SQ","1","RegistrationTypeCodeSequence"],"030F":["ST","1","FiducialDescription"],"0310":["SH","1","FiducialIdentifier"],"0311":["SQ","1","FiducialIdentifierCodeSequence"],"0312":["FD","1","ContourUncertaintyRadius"],"0314":["SQ","1","UsedFiducialsSequence"],"0318":["SQ","1","GraphicCoordinatesDataSequence"],"031A":["UI","1","FiducialUID"],"031B":["UI","1","ReferencedFiducialUID"],"031C":["SQ","1","FiducialSetSequence"],"031E":["SQ","1","FiducialSequence"],"031F":["SQ","1","FiducialsPropertyCategoryCodeSequence"],"0401":["US","3","GraphicLayerRecommendedDisplayCIELabValue"],"0402":["SQ","1","BlendingSequence"],"0403":["FL","1","RelativeOpacity"],"0404":["SQ","1","ReferencedSpatialRegistrationSequence"],"0405":["CS","1","BlendingPosition"],1101:["UI","1","PresentationDisplayCollectionUID"],1102:["UI","1","PresentationSequenceCollectionUID"],1103:["US","1","PresentationSequencePositionIndex"],1104:["SQ","1","RenderedImageReferenceSequence"],1201:["SQ","1","VolumetricPresentationStateInputSequence"],1202:["CS","1","PresentationInputType"],1203:["US","1","InputSequencePositionIndex"],1204:["CS","1","Crop"],1205:["US","1-n","CroppingSpecificationIndex"],1206:["CS","1","CompositingMethod"],1207:["US","1","VolumetricPresentationInputNumber"],1208:["CS","1","ImageVolumeGeometry"],1209:["UI","1","VolumetricPresentationInputSetUID"],"120A":["SQ","1","VolumetricPresentationInputSetSequence"],"120B":["CS","1","GlobalCrop"],"120C":["US","1-n","GlobalCroppingSpecificationIndex"],"120D":["CS","1","RenderingMethod"],1301:["SQ","1","VolumeCroppingSequence"],1302:["CS","1","VolumeCroppingMethod"],1303:["FD","6","BoundingBoxCrop"],1304:["SQ","1","ObliqueCroppingPlaneSequence"],1305:["FD","4","Plane"],1306:["FD","3","PlaneNormal"],1309:["US","1","CroppingSpecificationNumber"],1501:["CS","1","MultiPlanarReconstructionStyle"],1502:["CS","1","MPRThicknessType"],1503:["FD","1","MPRSlabThickness"],1505:["FD","3","MPRTopLeftHandCorner"],1507:["FD","3","MPRViewWidthDirection"],1508:["FD","1","MPRViewWidth"],"150C":["UL","1","NumberOfVolumetricCurvePoints"],"150D":["OD","1","VolumetricCurvePoints"],1511:["FD","3","MPRViewHeightDirection"],1512:["FD","1","MPRViewHeight"],1602:["CS","1","RenderProjection"],1603:["FD","3","ViewpointPosition"],1604:["FD","3","ViewpointLookAtPoint"],1605:["FD","3","ViewpointUpDirection"],1606:["FD","6","RenderFieldOfView"],1607:["FD","1","SamplingStepSize"],1701:["CS","1","ShadingStyle"],1702:["FD","1","AmbientReflectionIntensity"],1703:["FD","3","LightDirection"],1704:["FD","1","DiffuseReflectionIntensity"],1705:["FD","1","SpecularReflectionIntensity"],1706:["FD","1","Shininess"],1801:["SQ","1","PresentationStateClassificationComponentSequence"],1802:["CS","1","ComponentType"],1803:["SQ","1","ComponentInputSequence"],1804:["US","1","VolumetricPresentationInputIndex"],1805:["SQ","1","PresentationStateCompositorComponentSequence"],1806:["SQ","1","WeightingTransferFunctionSequence"],1807:["US","3","WeightingLookupTableDescriptor"],1808:["OB","1","WeightingLookupTableData"],1901:["SQ","1","VolumetricAnnotationSequence"],1903:["SQ","1","ReferencedStructuredContextSequence"],1904:["UI","1","ReferencedContentItem"],1905:["SQ","1","VolumetricPresentationInputAnnotationSequence"],1907:["CS","1","AnnotationClipping"],"1A01":["CS","1","PresentationAnimationStyle"],"1A03":["FD","1","RecommendedAnimationRate"],"1A04":["SQ","1","AnimationCurveSequence"],"1A05":["FD","1","AnimationStepSize"],"1A06":["FD","1","SwivelRange"],"1A07":["OD","1","VolumetricCurveUpDirections"],"1A08":["SQ","1","VolumeStreamSequence"],"1A09":["LO","1","RGBATransferFunctionDescription"],"1B01":["SQ","1","AdvancedBlendingSequence"],"1B02":["US","1","BlendingInputNumber"],"1B03":["SQ","1","BlendingDisplayInputSequence"],"1B04":["SQ","1","BlendingDisplaySequence"],"1B06":["CS","1","BlendingMode"],"1B07":["CS","1","TimeSeriesBlending"],"1B08":["CS","1","GeometryForDisplay"],"1B11":["SQ","1","ThresholdSequence"],"1B12":["SQ","1","ThresholdValueSequence"],"1B13":["CS","1","ThresholdType"],"1B14":["FD","1","ThresholdValue"]},"0072":{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","HangingProtocolName"],"0004":["LO","1","HangingProtocolDescription"],"0006":["CS","1","HangingProtocolLevel"],"0008":["LO","1","HangingProtocolCreator"],"000A":["DT","1","HangingProtocolCreationDateTime"],"000C":["SQ","1","HangingProtocolDefinitionSequence"],"000E":["SQ","1","HangingProtocolUserIdentificationCodeSequence"],"0010":["LO","1","HangingProtocolUserGroupName"],"0012":["SQ","1","SourceHangingProtocolSequence"],"0014":["US","1","NumberOfPriorsReferenced"],"0020":["SQ","1","ImageSetsSequence"],"0022":["SQ","1","ImageSetSelectorSequence"],"0024":["CS","1","ImageSetSelectorUsageFlag"],"0026":["AT","1","SelectorAttribute"],"0028":["US","1","SelectorValueNumber"],"0030":["SQ","1","TimeBasedImageSetsSequence"],"0032":["US","1","ImageSetNumber"],"0034":["CS","1","ImageSetSelectorCategory"],"0038":["US","2","RelativeTime"],"003A":["CS","1","RelativeTimeUnits"],"003C":["SS","2","AbstractPriorValue"],"003E":["SQ","1","AbstractPriorCodeSequence"],"0040":["LO","1","ImageSetLabel"],"0050":["CS","1","SelectorAttributeVR"],"0052":["AT","1-n","SelectorSequencePointer"],"0054":["LO","1-n","SelectorSequencePointerPrivateCreator"],"0056":["LO","1","SelectorAttributePrivateCreator"],"005E":["AE","1-n","SelectorAEValue"],"005F":["AS","1-n","SelectorASValue"],"0060":["AT","1-n","SelectorATValue"],"0061":["DA","1-n","SelectorDAValue"],"0062":["CS","1-n","SelectorCSValue"],"0063":["DT","1-n","SelectorDTValue"],"0064":["IS","1-n","SelectorISValue"],"0065":["OB","1","SelectorOBValue"],"0066":["LO","1-n","SelectorLOValue"],"0067":["OF","1","SelectorOFValue"],"0068":["LT","1","SelectorLTValue"],"0069":["OW","1","SelectorOWValue"],"006A":["PN","1-n","SelectorPNValue"],"006B":["TM","1-n","SelectorTMValue"],"006C":["SH","1-n","SelectorSHValue"],"006D":["UN","1","SelectorUNValue"],"006E":["ST","1","SelectorSTValue"],"006F":["UC","1-n","SelectorUCValue"],"0070":["UT","1","SelectorUTValue"],"0071":["UR","1","SelectorURValue"],"0072":["DS","1-n","SelectorDSValue"],"0073":["OD","1","SelectorODValue"],"0074":["FD","1-n","SelectorFDValue"],"0075":["OL","1","SelectorOLValue"],"0076":["FL","1-n","SelectorFLValue"],"0078":["UL","1-n","SelectorULValue"],"007A":["US","1-n","SelectorUSValue"],"007C":["SL","1-n","SelectorSLValue"],"007E":["SS","1-n","SelectorSSValue"],"007F":["UI","1-n","SelectorUIValue"],"0080":["SQ","1","SelectorCodeSequenceValue"],"0081":["OV","1","SelectorOVValue"],"0082":["SV","1-n","SelectorSVValue"],"0083":["UV","1-n","SelectorUVValue"],"0100":["US","1","NumberOfScreens"],"0102":["SQ","1","NominalScreenDefinitionSequence"],"0104":["US","1","NumberOfVerticalPixels"],"0106":["US","1","NumberOfHorizontalPixels"],"0108":["FD","4","DisplayEnvironmentSpatialPosition"],"010A":["US","1","ScreenMinimumGrayscaleBitDepth"],"010C":["US","1","ScreenMinimumColorBitDepth"],"010E":["US","1","ApplicationMaximumRepaintTime"],"0200":["SQ","1","DisplaySetsSequence"],"0202":["US","1","DisplaySetNumber"],"0203":["LO","1","DisplaySetLabel"],"0204":["US","1","DisplaySetPresentationGroup"],"0206":["LO","1","DisplaySetPresentationGroupDescription"],"0208":["CS","1","PartialDataDisplayHandling"],"0210":["SQ","1","SynchronizedScrollingSequence"],"0212":["US","2-n","DisplaySetScrollingGroup"],"0214":["SQ","1","NavigationIndicatorSequence"],"0216":["US","1","NavigationDisplaySet"],"0218":["US","1-n","ReferenceDisplaySets"],"0300":["SQ","1","ImageBoxesSequence"],"0302":["US","1","ImageBoxNumber"],"0304":["CS","1","ImageBoxLayoutType"],"0306":["US","1","ImageBoxTileHorizontalDimension"],"0308":["US","1","ImageBoxTileVerticalDimension"],"0310":["CS","1","ImageBoxScrollDirection"],"0312":["CS","1","ImageBoxSmallScrollType"],"0314":["US","1","ImageBoxSmallScrollAmount"],"0316":["CS","1","ImageBoxLargeScrollType"],"0318":["US","1","ImageBoxLargeScrollAmount"],"0320":["US","1","ImageBoxOverlapPriority"],"0330":["FD","1","CineRelativeToRealTime"],"0400":["SQ","1","FilterOperationsSequence"],"0402":["CS","1","FilterByCategory"],"0404":["CS","1","FilterByAttributePresence"],"0406":["CS","1","FilterByOperator"],"0420":["US","3","StructuredDisplayBackgroundCIELabValue"],"0421":["US","3","EmptyImageBoxCIELabValue"],"0422":["SQ","1","StructuredDisplayImageBoxSequence"],"0424":["SQ","1","StructuredDisplayTextBoxSequence"],"0427":["SQ","1","ReferencedFirstFrameSequence"],"0430":["SQ","1","ImageBoxSynchronizationSequence"],"0432":["US","2-n","SynchronizedImageBoxList"],"0434":["CS","1","TypeOfSynchronization"],"0500":["CS","1","BlendingOperationType"],"0510":["CS","1","ReformattingOperationType"],"0512":["FD","1","ReformattingThickness"],"0514":["FD","1","ReformattingInterval"],"0516":["CS","1","ReformattingOperationInitialViewDirection"],"0520":["CS","1-n","ThreeDRenderingType"],"0600":["SQ","1","SortingOperationsSequence"],"0602":["CS","1","SortByCategory"],"0604":["CS","1","SortingDirection"],"0700":["CS","2","DisplaySetPatientOrientation"],"0702":["CS","1","VOIType"],"0704":["CS","1","PseudoColorType"],"0705":["SQ","1","PseudoColorPaletteInstanceReferenceSequence"],"0706":["CS","1","ShowGrayscaleInverted"],"0710":["CS","1","ShowImageTrueSizeFlag"],"0712":["CS","1","ShowGraphicAnnotationFlag"],"0714":["CS","1","ShowPatientDemographicsFlag"],"0716":["CS","1","ShowAcquisitionTechniquesFlag"],"0717":["CS","1","DisplaySetHorizontalJustification"],"0718":["CS","1","DisplaySetVerticalJustification"]},"0074":{"0000":["UL","1","GenericGroupLength"],"0120":["FD","1","ContinuationStartMeterset"],"0121":["FD","1","ContinuationEndMeterset"],1e3:["CS","1","ProcedureStepState"],1002:["SQ","1","ProcedureStepProgressInformationSequence"],1004:["DS","1","ProcedureStepProgress"],1006:["ST","1","ProcedureStepProgressDescription"],1007:["SQ","1","ProcedureStepProgressParametersSequence"],1008:["SQ","1","ProcedureStepCommunicationsURISequence"],"100A":["UR","1","ContactURI"],"100C":["LO","1","ContactDisplayName"],"100E":["SQ","1","ProcedureStepDiscontinuationReasonCodeSequence"],1020:["SQ","1","BeamTaskSequence"],1022:["CS","1","BeamTaskType"],1024:["IS","1","BeamOrderIndexTrial"],1025:["CS","1","AutosequenceFlag"],1026:["FD","1","TableTopVerticalAdjustedPosition"],1027:["FD","1","TableTopLongitudinalAdjustedPosition"],1028:["FD","1","TableTopLateralAdjustedPosition"],"102A":["FD","1","PatientSupportAdjustedAngle"],"102B":["FD","1","TableTopEccentricAdjustedAngle"],"102C":["FD","1","TableTopPitchAdjustedAngle"],"102D":["FD","1","TableTopRollAdjustedAngle"],1030:["SQ","1","DeliveryVerificationImageSequence"],1032:["CS","1","VerificationImageTiming"],1034:["CS","1","DoubleExposureFlag"],1036:["CS","1","DoubleExposureOrdering"],1038:["DS","1","DoubleExposureMetersetTrial"],"103A":["DS","4","DoubleExposureFieldDeltaTrial"],1040:["SQ","1","RelatedReferenceRTImageSequence"],1042:["SQ","1","GeneralMachineVerificationSequence"],1044:["SQ","1","ConventionalMachineVerificationSequence"],1046:["SQ","1","IonMachineVerificationSequence"],1048:["SQ","1","FailedAttributesSequence"],"104A":["SQ","1","OverriddenAttributesSequence"],"104C":["SQ","1","ConventionalControlPointVerificationSequence"],"104E":["SQ","1","IonControlPointVerificationSequence"],1050:["SQ","1","AttributeOccurrenceSequence"],1052:["AT","1","AttributeOccurrencePointer"],1054:["UL","1","AttributeItemSelector"],1056:["LO","1","AttributeOccurrencePrivateCreator"],1057:["IS","1-n","SelectorSequencePointerItems"],1200:["CS","1","ScheduledProcedureStepPriority"],1202:["LO","1","WorklistLabel"],1204:["LO","1","ProcedureStepLabel"],1210:["SQ","1","ScheduledProcessingParametersSequence"],1212:["SQ","1","PerformedProcessingParametersSequence"],1216:["SQ","1","UnifiedProcedureStepPerformedProcedureSequence"],1220:["SQ","1","RelatedProcedureStepSequence"],1222:["LO","1","ProcedureStepRelationshipType"],1224:["SQ","1","ReplacedProcedureStepSequence"],1230:["LO","1","DeletionLock"],1234:["AE","1","ReceivingAE"],1236:["AE","1","RequestingAE"],1238:["LT","1","ReasonForCancellation"],1242:["CS","1","SCPStatus"],1244:["CS","1","SubscriptionListStatus"],1246:["CS","1","UnifiedProcedureStepListStatus"],1324:["UL","1","BeamOrderIndex"],1338:["FD","1","DoubleExposureMeterset"],"133A":["FD","4","DoubleExposureFieldDelta"],1401:["SQ","1","BrachyTaskSequence"],1402:["DS","1","ContinuationStartTotalReferenceAirKerma"],1403:["DS","1","ContinuationEndTotalReferenceAirKerma"],1404:["IS","1","ContinuationPulseNumber"],1405:["SQ","1","ChannelDeliveryOrderSequence"],1406:["IS","1","ReferencedChannelNumber"],1407:["DS","1","StartCumulativeTimeWeight"],1408:["DS","1","EndCumulativeTimeWeight"],1409:["SQ","1","OmittedChannelSequence"],"140A":["CS","1","ReasonForChannelOmission"],"140B":["LO","1","ReasonForChannelOmissionDescription"],"140C":["IS","1","ChannelDeliveryOrderIndex"],"140D":["SQ","1","ChannelDeliveryContinuationSequence"],"140E":["SQ","1","OmittedApplicationSetupSequence"]},"0076":{"0000":["UL","1","GenericGroupLength"],"0001":["LO","1","ImplantAssemblyTemplateName"],"0003":["LO","1","ImplantAssemblyTemplateIssuer"],"0006":["LO","1","ImplantAssemblyTemplateVersion"],"0008":["SQ","1","ReplacedImplantAssemblyTemplateSequence"],"000A":["CS","1","ImplantAssemblyTemplateType"],"000C":["SQ","1","OriginalImplantAssemblyTemplateSequence"],"000E":["SQ","1","DerivationImplantAssemblyTemplateSequence"],"0010":["SQ","1","ImplantAssemblyTemplateTargetAnatomySequence"],"0020":["SQ","1","ProcedureTypeCodeSequence"],"0030":["LO","1","SurgicalTechnique"],"0032":["SQ","1","ComponentTypesSequence"],"0034":["SQ","1","ComponentTypeCodeSequence"],"0036":["CS","1","ExclusiveComponentType"],"0038":["CS","1","MandatoryComponentType"],"0040":["SQ","1","ComponentSequence"],"0055":["US","1","ComponentID"],"0060":["SQ","1","ComponentAssemblySequence"],"0070":["US","1","Component1ReferencedID"],"0080":["US","1","Component1ReferencedMatingFeatureSetID"],"0090":["US","1","Component1ReferencedMatingFeatureID"],"00A0":["US","1","Component2ReferencedID"],"00B0":["US","1","Component2ReferencedMatingFeatureSetID"],"00C0":["US","1","Component2ReferencedMatingFeatureID"]},"0078":{"0000":["UL","1","GenericGroupLength"],"0001":["LO","1","ImplantTemplateGroupName"],"0010":["ST","1","ImplantTemplateGroupDescription"],"0020":["LO","1","ImplantTemplateGroupIssuer"],"0024":["LO","1","ImplantTemplateGroupVersion"],"0026":["SQ","1","ReplacedImplantTemplateGroupSequence"],"0028":["SQ","1","ImplantTemplateGroupTargetAnatomySequence"],"002A":["SQ","1","ImplantTemplateGroupMembersSequence"],"002E":["US","1","ImplantTemplateGroupMemberID"],"0050":["FD","3","ThreeDImplantTemplateGroupMemberMatchingPoint"],"0060":["FD","9","ThreeDImplantTemplateGroupMemberMatchingAxes"],"0070":["SQ","1","ImplantTemplateGroupMemberMatching2DCoordinatesSequence"],"0090":["FD","2","TwoDImplantTemplateGroupMemberMatchingPoint"],"00A0":["FD","4","TwoDImplantTemplateGroupMemberMatchingAxes"],"00B0":["SQ","1","ImplantTemplateGroupVariationDimensionSequence"],"00B2":["LO","1","ImplantTemplateGroupVariationDimensionName"],"00B4":["SQ","1","ImplantTemplateGroupVariationDimensionRankSequence"],"00B6":["US","1","ReferencedImplantTemplateGroupMemberID"],"00B8":["US","1","ImplantTemplateGroupVariationDimensionRank"]},"0080":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","SurfaceScanAcquisitionTypeCodeSequence"],"0002":["SQ","1","SurfaceScanModeCodeSequence"],"0003":["SQ","1","RegistrationMethodCodeSequence"],"0004":["FD","1","ShotDurationTime"],"0005":["FD","1","ShotOffsetTime"],"0006":["US","1-n","SurfacePointPresentationValueData"],"0007":["US","3-3n","SurfacePointColorCIELabValueData"],"0008":["SQ","1","UVMappingSequence"],"0009":["SH","1","TextureLabel"],"0010":["OF","1","UValueData"],"0011":["OF","1","VValueData"],"0012":["SQ","1","ReferencedTextureSequence"],"0013":["SQ","1","ReferencedSurfaceDataSequence"]},"0082":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","AssessmentSummary"],"0003":["UT","1","AssessmentSummaryDescription"],"0004":["SQ","1","AssessedSOPInstanceSequence"],"0005":["SQ","1","ReferencedComparisonSOPInstanceSequence"],"0006":["UL","1","NumberOfAssessmentObservations"],"0007":["SQ","1","AssessmentObservationsSequence"],"0008":["CS","1","ObservationSignificance"],"000A":["UT","1","ObservationDescription"],"000C":["SQ","1","StructuredConstraintObservationSequence"],"0010":["SQ","1","AssessedAttributeValueSequence"],"0016":["LO","1","AssessmentSetID"],"0017":["SQ","1","AssessmentRequesterSequence"],"0018":["LO","1","SelectorAttributeName"],"0019":["LO","1","SelectorAttributeKeyword"],"0021":["SQ","1","AssessmentTypeCodeSequence"],"0022":["SQ","1","ObservationBasisCodeSequence"],"0023":["LO","1","AssessmentLabel"],"0032":["CS","1","ConstraintType"],"0033":["UT","1","SpecificationSelectionGuidance"],"0034":["SQ","1","ConstraintValueSequence"],"0035":["SQ","1","RecommendedDefaultValueSequence"],"0036":["CS","1","ConstraintViolationSignificance"],"0037":["UT","1","ConstraintViolationCondition"],"0038":["CS","1","ModifiableConstraintFlag"]},"0088":{"0000":["UL","1","GenericGroupLength"],"0130":["SH","1","StorageMediaFileSetID"],"0140":["UI","1","StorageMediaFileSetUID"],"0200":["SQ","1","IconImageSequence"],"0904":["LO","1","TopicTitle"],"0906":["ST","1","TopicSubject"],"0910":["LO","1","TopicAuthor"],"0912":["LO","1-32","TopicKeywords"]},"0100":{"0000":["UL","1","GenericGroupLength"],"0410":["CS","1","SOPInstanceStatus"],"0420":["DT","1","SOPAuthorizationDateTime"],"0424":["LT","1","SOPAuthorizationComment"],"0426":["LO","1","AuthorizationEquipmentCertificationNumber"]},"0400":{"0000":["UL","1","GenericGroupLength"],"0005":["US","1","MACIDNumber"],"0010":["UI","1","MACCalculationTransferSyntaxUID"],"0015":["CS","1","MACAlgorithm"],"0020":["AT","1-n","DataElementsSigned"],"0100":["UI","1","DigitalSignatureUID"],"0105":["DT","1","DigitalSignatureDateTime"],"0110":["CS","1","CertificateType"],"0115":["OB","1","CertificateOfSigner"],"0120":["OB","1","Signature"],"0305":["CS","1","CertifiedTimestampType"],"0310":["OB","1","CertifiedTimestamp"],"0315":["FL","1",""],"0401":["SQ","1","DigitalSignaturePurposeCodeSequence"],"0402":["SQ","1","ReferencedDigitalSignatureSequence"],"0403":["SQ","1","ReferencedSOPInstanceMACSequence"],"0404":["OB","1","MAC"],"0500":["SQ","1","EncryptedAttributesSequence"],"0510":["UI","1","EncryptedContentTransferSyntaxUID"],"0520":["OB","1","EncryptedContent"],"0550":["SQ","1","ModifiedAttributesSequence"],"0551":["SQ","1","NonconformingModifiedAttributesSequence"],"0552":["OB","1","NonconformingDataElementValue"],"0561":["SQ","1","OriginalAttributesSequence"],"0562":["DT","1","AttributeModificationDateTime"],"0563":["LO","1","ModifyingSystem"],"0564":["LO","1","SourceOfPreviousValues"],"0565":["CS","1","ReasonForTheAttributeModification"],"0600":["CS","1","InstanceOriginStatus"]},1e3:{"0000":["UL","1","GenericGroupLength"],"0010":["US","3","EscapeTriplet"],"0011":["US","3","RunLengthTriplet"],"0012":["US","1","HuffmanTableSize"],"0013":["US","3","HuffmanTableTriplet"],"0014":["US","1","ShiftTableSize"],"0015":["US","3","ShiftTableTriplet"]},1010:{"0000":["UL","1","GenericGroupLength"],"0004":["US","1-n","ZonalMap"]},2e3:{"0000":["UL","1","GenericGroupLength"],"0010":["IS","1","NumberOfCopies"],"001E":["SQ","1","PrinterConfigurationSequence"],"0020":["CS","1","PrintPriority"],"0030":["CS","1","MediumType"],"0040":["CS","1","FilmDestination"],"0050":["LO","1","FilmSessionLabel"],"0060":["IS","1","MemoryAllocation"],"0061":["IS","1","MaximumMemoryAllocation"],"0062":["CS","1","ColorImagePrintingFlag"],"0063":["CS","1","CollationFlag"],"0065":["CS","1","AnnotationFlag"],"0067":["CS","1","ImageOverlayFlag"],"0069":["CS","1","PresentationLUTFlag"],"006A":["CS","1","ImageBoxPresentationLUTFlag"],"00A0":["US","1","MemoryBitDepth"],"00A1":["US","1","PrintingBitDepth"],"00A2":["SQ","1","MediaInstalledSequence"],"00A4":["SQ","1","OtherMediaAvailableSequence"],"00A8":["SQ","1","SupportedImageDisplayFormatsSequence"],"0500":["SQ","1","ReferencedFilmBoxSequence"],"0510":["SQ","1","ReferencedStoredPrintSequence"]},2010:{"0000":["UL","1","GenericGroupLength"],"0010":["ST","1","ImageDisplayFormat"],"0030":["CS","1","AnnotationDisplayFormatID"],"0040":["CS","1","FilmOrientation"],"0050":["CS","1","FilmSizeID"],"0052":["CS","1","PrinterResolutionID"],"0054":["CS","1","DefaultPrinterResolutionID"],"0060":["CS","1","MagnificationType"],"0080":["CS","1","SmoothingType"],"00A6":["CS","1","DefaultMagnificationType"],"00A7":["CS","1-n","OtherMagnificationTypesAvailable"],"00A8":["CS","1","DefaultSmoothingType"],"00A9":["CS","1-n","OtherSmoothingTypesAvailable"],"0100":["CS","1","BorderDensity"],"0110":["CS","1","EmptyImageDensity"],"0120":["US","1","MinDensity"],"0130":["US","1","MaxDensity"],"0140":["CS","1","Trim"],"0150":["ST","1","ConfigurationInformation"],"0152":["LT","1","ConfigurationInformationDescription"],"0154":["IS","1","MaximumCollatedFilms"],"015E":["US","1","Illumination"],"0160":["US","1","ReflectedAmbientLight"],"0376":["DS","2","PrinterPixelSpacing"],"0500":["SQ","1","ReferencedFilmSessionSequence"],"0510":["SQ","1","ReferencedImageBoxSequence"],"0520":["SQ","1","ReferencedBasicAnnotationBoxSequence"]},2020:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","ImageBoxPosition"],"0020":["CS","1","Polarity"],"0030":["DS","1","RequestedImageSize"],"0040":["CS","1","RequestedDecimateCropBehavior"],"0050":["CS","1","RequestedResolutionID"],"00A0":["CS","1","RequestedImageSizeFlag"],"00A2":["CS","1","DecimateCropResult"],"0110":["SQ","1","BasicGrayscaleImageSequence"],"0111":["SQ","1","BasicColorImageSequence"],"0130":["SQ","1","ReferencedImageOverlayBoxSequence"],"0140":["SQ","1","ReferencedVOILUTBoxSequence"]},2030:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","AnnotationPosition"],"0020":["LO","1","TextString"]},2040:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","ReferencedOverlayPlaneSequence"],"0011":["US","1-99","ReferencedOverlayPlaneGroups"],"0020":["SQ","1","OverlayPixelDataSequence"],"0060":["CS","1","OverlayMagnificationType"],"0070":["CS","1","OverlaySmoothingType"],"0072":["CS","1","OverlayOrImageMagnification"],"0074":["US","1","MagnifyToNumberOfColumns"],"0080":["CS","1","OverlayForegroundDensity"],"0082":["CS","1","OverlayBackgroundDensity"],"0090":["CS","1","OverlayMode"],"0100":["CS","1","ThresholdDensity"],"0500":["SQ","1","ReferencedImageBoxSequenceRetired"]},2050:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","PresentationLUTSequence"],"0020":["CS","1","PresentationLUTShape"],"0500":["SQ","1","ReferencedPresentationLUTSequence"]},2100:{"0000":["UL","1","GenericGroupLength"],"0010":["SH","1","PrintJobID"],"0020":["CS","1","ExecutionStatus"],"0030":["CS","1","ExecutionStatusInfo"],"0040":["DA","1","CreationDate"],"0050":["TM","1","CreationTime"],"0070":["AE","1","Originator"],"0140":["AE","1","DestinationAE"],"0160":["SH","1","OwnerID"],"0170":["IS","1","NumberOfFilms"],"0500":["SQ","1","ReferencedPrintJobSequencePullStoredPrint"]},2110:{"0000":["UL","1","GenericGroupLength"],"0010":["CS","1","PrinterStatus"],"0020":["CS","1","PrinterStatusInfo"],"0030":["LO","1","PrinterName"],"0099":["SH","1","PrintQueueID"]},2120:{"0000":["UL","1","GenericGroupLength"],"0010":["CS","1","QueueStatus"],"0050":["SQ","1","PrintJobDescriptionSequence"],"0070":["SQ","1","ReferencedPrintJobSequence"]},2130:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","PrintManagementCapabilitiesSequence"],"0015":["SQ","1","PrinterCharacteristicsSequence"],"0030":["SQ","1","FilmBoxContentSequence"],"0040":["SQ","1","ImageBoxContentSequence"],"0050":["SQ","1","AnnotationContentSequence"],"0060":["SQ","1","ImageOverlayBoxContentSequence"],"0080":["SQ","1","PresentationLUTContentSequence"],"00A0":["SQ","1","ProposedStudySequence"],"00C0":["SQ","1","OriginalImageSequence"]},2200:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","LabelUsingInformationExtractedFromInstances"],"0002":["UT","1","LabelText"],"0003":["CS","1","LabelStyleSelection"],"0004":["LT","1","MediaDisposition"],"0005":["LT","1","BarcodeValue"],"0006":["CS","1","BarcodeSymbology"],"0007":["CS","1","AllowMediaSplitting"],"0008":["CS","1","IncludeNonDICOMObjects"],"0009":["CS","1","IncludeDisplayApplication"],"000A":["CS","1","PreserveCompositeInstancesAfterMediaCreation"],"000B":["US","1","TotalNumberOfPiecesOfMediaCreated"],"000C":["LO","1","RequestedMediaApplicationProfile"],"000D":["SQ","1","ReferencedStorageMediaSequence"],"000E":["AT","1-n","FailureAttributes"],"000F":["CS","1","AllowLossyCompression"],"0020":["CS","1","RequestPriority"]},3002:{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","RTImageLabel"],"0003":["LO","1","RTImageName"],"0004":["ST","1","RTImageDescription"],"000A":["CS","1","ReportedValuesOrigin"],"000C":["CS","1","RTImagePlane"],"000D":["DS","3","XRayImageReceptorTranslation"],"000E":["DS","1","XRayImageReceptorAngle"],"0010":["DS","6","RTImageOrientation"],"0011":["DS","2","ImagePlanePixelSpacing"],"0012":["DS","2","RTImagePosition"],"0020":["SH","1","RadiationMachineName"],"0022":["DS","1","RadiationMachineSAD"],"0024":["DS","1","RadiationMachineSSD"],"0026":["DS","1","RTImageSID"],"0028":["DS","1","SourceToReferenceObjectDistance"],"0029":["IS","1","FractionNumber"],"0030":["SQ","1","ExposureSequence"],"0032":["DS","1","MetersetExposure"],"0034":["DS","4","DiaphragmPosition"],"0040":["SQ","1","FluenceMapSequence"],"0041":["CS","1","FluenceDataSource"],"0042":["DS","1","FluenceDataScale"],"0050":["SQ","1","PrimaryFluenceModeSequence"],"0051":["CS","1","FluenceMode"],"0052":["SH","1","FluenceModeID"]},3004:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","DVHType"],"0002":["CS","1","DoseUnits"],"0004":["CS","1","DoseType"],"0005":["CS","1","SpatialTransformOfDose"],"0006":["LO","1","DoseComment"],"0008":["DS","3","NormalizationPoint"],"000A":["CS","1","DoseSummationType"],"000C":["DS","2-n","GridFrameOffsetVector"],"000E":["DS","1","DoseGridScaling"],"0010":["SQ","1","RTDoseROISequence"],"0012":["DS","1","DoseValue"],"0014":["CS","1-3","TissueHeterogeneityCorrection"],"0040":["DS","3","DVHNormalizationPoint"],"0042":["DS","1","DVHNormalizationDoseValue"],"0050":["SQ","1","DVHSequence"],"0052":["DS","1","DVHDoseScaling"],"0054":["CS","1","DVHVolumeUnits"],"0056":["IS","1","DVHNumberOfBins"],"0058":["DS","2-2n","DVHData"],"0060":["SQ","1","DVHReferencedROISequence"],"0062":["CS","1","DVHROIContributionType"],"0070":["DS","1","DVHMinimumDose"],"0072":["DS","1","DVHMaximumDose"],"0074":["DS","1","DVHMeanDose"]},3006:{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","StructureSetLabel"],"0004":["LO","1","StructureSetName"],"0006":["ST","1","StructureSetDescription"],"0008":["DA","1","StructureSetDate"],"0009":["TM","1","StructureSetTime"],"0010":["SQ","1","ReferencedFrameOfReferenceSequence"],"0012":["SQ","1","RTReferencedStudySequence"],"0014":["SQ","1","RTReferencedSeriesSequence"],"0016":["SQ","1","ContourImageSequence"],"0018":["SQ","1","PredecessorStructureSetSequence"],"0020":["SQ","1","StructureSetROISequence"],"0022":["IS","1","ROINumber"],"0024":["UI","1","ReferencedFrameOfReferenceUID"],"0026":["LO","1","ROIName"],"0028":["ST","1","ROIDescription"],"002A":["IS","3","ROIDisplayColor"],"002C":["DS","1","ROIVolume"],"0030":["SQ","1","RTRelatedROISequence"],"0033":["CS","1","RTROIRelationship"],"0036":["CS","1","ROIGenerationAlgorithm"],"0037":["SQ","1","ROIDerivationAlgorithmIdentificationSequence"],"0038":["LO","1","ROIGenerationDescription"],"0039":["SQ","1","ROIContourSequence"],"0040":["SQ","1","ContourSequence"],"0042":["CS","1","ContourGeometricType"],"0044":["DS","1","ContourSlabThickness"],"0045":["DS","3","ContourOffsetVector"],"0046":["IS","1","NumberOfContourPoints"],"0048":["IS","1","ContourNumber"],"0049":["IS","1-n","AttachedContours"],"004A":["SQ","1","SourcePixelPlanesCharacteristicsSequence"],"0050":["DS","3-3n","ContourData"],"0080":["SQ","1","RTROIObservationsSequence"],"0082":["IS","1","ObservationNumber"],"0084":["IS","1","ReferencedROINumber"],"0085":["SH","1","ROIObservationLabel"],"0086":["SQ","1","RTROIIdentificationCodeSequence"],"0088":["ST","1","ROIObservationDescription"],"00A0":["SQ","1","RelatedRTROIObservationsSequence"],"00A4":["CS","1","RTROIInterpretedType"],"00A6":["PN","1","ROIInterpreter"],"00B0":["SQ","1","ROIPhysicalPropertiesSequence"],"00B2":["CS","1","ROIPhysicalProperty"],"00B4":["DS","1","ROIPhysicalPropertyValue"],"00B6":["SQ","1","ROIElementalCompositionSequence"],"00B7":["US","1","ROIElementalCompositionAtomicNumber"],"00B8":["FL","1","ROIElementalCompositionAtomicMassFraction"],"00B9":["SQ","1","AdditionalRTROIIdentificationCodeSequence"],"00C0":["SQ","1","FrameOfReferenceRelationshipSequence"],"00C2":["UI","1","RelatedFrameOfReferenceUID"],"00C4":["CS","1","FrameOfReferenceTransformationType"],"00C6":["DS","16","FrameOfReferenceTransformationMatrix"],"00C8":["LO","1","FrameOfReferenceTransformationComment"],"00C9":["SQ","1","PatientLocationCoordinatesSequence"],"00CA":["SQ","1","PatientLocationCoordinatesCodeSequence"],"00CB":["SQ","1","PatientSupportPositionSequence"]},3008:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","MeasuredDoseReferenceSequence"],"0012":["ST","1","MeasuredDoseDescription"],"0014":["CS","1","MeasuredDoseType"],"0016":["DS","1","MeasuredDoseValue"],"0020":["SQ","1","TreatmentSessionBeamSequence"],"0021":["SQ","1","TreatmentSessionIonBeamSequence"],"0022":["IS","1","CurrentFractionNumber"],"0024":["DA","1","TreatmentControlPointDate"],"0025":["TM","1","TreatmentControlPointTime"],"002A":["CS","1","TreatmentTerminationStatus"],"002B":["SH","1","TreatmentTerminationCode"],"002C":["CS","1","TreatmentVerificationStatus"],"0030":["SQ","1","ReferencedTreatmentRecordSequence"],"0032":["DS","1","SpecifiedPrimaryMeterset"],"0033":["DS","1","SpecifiedSecondaryMeterset"],"0036":["DS","1","DeliveredPrimaryMeterset"],"0037":["DS","1","DeliveredSecondaryMeterset"],"003A":["DS","1","SpecifiedTreatmentTime"],"003B":["DS","1","DeliveredTreatmentTime"],"0040":["SQ","1","ControlPointDeliverySequence"],"0041":["SQ","1","IonControlPointDeliverySequence"],"0042":["DS","1","SpecifiedMeterset"],"0044":["DS","1","DeliveredMeterset"],"0045":["FL","1","MetersetRateSet"],"0046":["FL","1","MetersetRateDelivered"],"0047":["FL","1-n","ScanSpotMetersetsDelivered"],"0048":["DS","1","DoseRateDelivered"],"0050":["SQ","1","TreatmentSummaryCalculatedDoseReferenceSequence"],"0052":["DS","1","CumulativeDoseToDoseReference"],"0054":["DA","1","FirstTreatmentDate"],"0056":["DA","1","MostRecentTreatmentDate"],"005A":["IS","1","NumberOfFractionsDelivered"],"0060":["SQ","1","OverrideSequence"],"0061":["AT","1","ParameterSequencePointer"],"0062":["AT","1","OverrideParameterPointer"],"0063":["IS","1","ParameterItemIndex"],"0064":["IS","1","MeasuredDoseReferenceNumber"],"0065":["AT","1","ParameterPointer"],"0066":["ST","1","OverrideReason"],"0067":["US","1","ParameterValueNumber"],"0068":["SQ","1","CorrectedParameterSequence"],"006A":["FL","1","CorrectionValue"],"0070":["SQ","1","CalculatedDoseReferenceSequence"],"0072":["IS","1","CalculatedDoseReferenceNumber"],"0074":["ST","1","CalculatedDoseReferenceDescription"],"0076":["DS","1","CalculatedDoseReferenceDoseValue"],"0078":["DS","1","StartMeterset"],"007A":["DS","1","EndMeterset"],"0080":["SQ","1","ReferencedMeasuredDoseReferenceSequence"],"0082":["IS","1","ReferencedMeasuredDoseReferenceNumber"],"0090":["SQ","1","ReferencedCalculatedDoseReferenceSequence"],"0092":["IS","1","ReferencedCalculatedDoseReferenceNumber"],"00A0":["SQ","1","BeamLimitingDeviceLeafPairsSequence"],"00B0":["SQ","1","RecordedWedgeSequence"],"00C0":["SQ","1","RecordedCompensatorSequence"],"00D0":["SQ","1","RecordedBlockSequence"],"00D1":["SQ","1","RecordedBlockSlabSequence"],"00E0":["SQ","1","TreatmentSummaryMeasuredDoseReferenceSequence"],"00F0":["SQ","1","RecordedSnoutSequence"],"00F2":["SQ","1","RecordedRangeShifterSequence"],"00F4":["SQ","1","RecordedLateralSpreadingDeviceSequence"],"00F6":["SQ","1","RecordedRangeModulatorSequence"],"0100":["SQ","1","RecordedSourceSequence"],"0105":["LO","1","SourceSerialNumber"],"0110":["SQ","1","TreatmentSessionApplicationSetupSequence"],"0116":["CS","1","ApplicationSetupCheck"],"0120":["SQ","1","RecordedBrachyAccessoryDeviceSequence"],"0122":["IS","1","ReferencedBrachyAccessoryDeviceNumber"],"0130":["SQ","1","RecordedChannelSequence"],"0132":["DS","1","SpecifiedChannelTotalTime"],"0134":["DS","1","DeliveredChannelTotalTime"],"0136":["IS","1","SpecifiedNumberOfPulses"],"0138":["IS","1","DeliveredNumberOfPulses"],"013A":["DS","1","SpecifiedPulseRepetitionInterval"],"013C":["DS","1","DeliveredPulseRepetitionInterval"],"0140":["SQ","1","RecordedSourceApplicatorSequence"],"0142":["IS","1","ReferencedSourceApplicatorNumber"],"0150":["SQ","1","RecordedChannelShieldSequence"],"0152":["IS","1","ReferencedChannelShieldNumber"],"0160":["SQ","1","BrachyControlPointDeliveredSequence"],"0162":["DA","1","SafePositionExitDate"],"0164":["TM","1","SafePositionExitTime"],"0166":["DA","1","SafePositionReturnDate"],"0168":["TM","1","SafePositionReturnTime"],"0171":["SQ","1","PulseSpecificBrachyControlPointDeliveredSequence"],"0172":["US","1","PulseNumber"],"0173":["SQ","1","BrachyPulseControlPointDeliveredSequence"],"0200":["CS","1","CurrentTreatmentStatus"],"0202":["ST","1","TreatmentStatusComment"],"0220":["SQ","1","FractionGroupSummarySequence"],"0223":["IS","1","ReferencedFractionNumber"],"0224":["CS","1","FractionGroupType"],"0230":["CS","1","BeamStopperPosition"],"0240":["SQ","1","FractionStatusSummarySequence"],"0250":["DA","1","TreatmentDate"],"0251":["TM","1","TreatmentTime"]},"300A":{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","RTPlanLabel"],"0003":["LO","1","RTPlanName"],"0004":["ST","1","RTPlanDescription"],"0006":["DA","1","RTPlanDate"],"0007":["TM","1","RTPlanTime"],"0009":["LO","1-n","TreatmentProtocols"],"000A":["CS","1","PlanIntent"],"000B":["LO","1-n","TreatmentSites"],"000C":["CS","1","RTPlanGeometry"],"000E":["ST","1","PrescriptionDescription"],"0010":["SQ","1","DoseReferenceSequence"],"0012":["IS","1","DoseReferenceNumber"],"0013":["UI","1","DoseReferenceUID"],"0014":["CS","1","DoseReferenceStructureType"],"0015":["CS","1","NominalBeamEnergyUnit"],"0016":["LO","1","DoseReferenceDescription"],"0018":["DS","3","DoseReferencePointCoordinates"],"001A":["DS","1","NominalPriorDose"],"0020":["CS","1","DoseReferenceType"],"0021":["DS","1","ConstraintWeight"],"0022":["DS","1","DeliveryWarningDose"],"0023":["DS","1","DeliveryMaximumDose"],"0025":["DS","1","TargetMinimumDose"],"0026":["DS","1","TargetPrescriptionDose"],"0027":["DS","1","TargetMaximumDose"],"0028":["DS","1","TargetUnderdoseVolumeFraction"],"002A":["DS","1","OrganAtRiskFullVolumeDose"],"002B":["DS","1","OrganAtRiskLimitDose"],"002C":["DS","1","OrganAtRiskMaximumDose"],"002D":["DS","1","OrganAtRiskOverdoseVolumeFraction"],"0040":["SQ","1","ToleranceTableSequence"],"0042":["IS","1","ToleranceTableNumber"],"0043":["SH","1","ToleranceTableLabel"],"0044":["DS","1","GantryAngleTolerance"],"0046":["DS","1","BeamLimitingDeviceAngleTolerance"],"0048":["SQ","1","BeamLimitingDeviceToleranceSequence"],"004A":["DS","1","BeamLimitingDevicePositionTolerance"],"004B":["FL","1","SnoutPositionTolerance"],"004C":["DS","1","PatientSupportAngleTolerance"],"004E":["DS","1","TableTopEccentricAngleTolerance"],"004F":["FL","1","TableTopPitchAngleTolerance"],"0050":["FL","1","TableTopRollAngleTolerance"],"0051":["DS","1","TableTopVerticalPositionTolerance"],"0052":["DS","1","TableTopLongitudinalPositionTolerance"],"0053":["DS","1","TableTopLateralPositionTolerance"],"0055":["CS","1","RTPlanRelationship"],"0070":["SQ","1","FractionGroupSequence"],"0071":["IS","1","FractionGroupNumber"],"0072":["LO","1","FractionGroupDescription"],"0078":["IS","1","NumberOfFractionsPlanned"],"0079":["IS","1","NumberOfFractionPatternDigitsPerDay"],"007A":["IS","1","RepeatFractionCycleLength"],"007B":["LT","1","FractionPattern"],"0080":["IS","1","NumberOfBeams"],"0082":["DS","3","BeamDoseSpecificationPoint"],"0083":["UI","1","ReferencedDoseReferenceUID"],"0084":["DS","1","BeamDose"],"0086":["DS","1","BeamMeterset"],"0088":["FL","1","BeamDosePointDepth"],"0089":["FL","1","BeamDosePointEquivalentDepth"],"008A":["FL","1","BeamDosePointSSD"],"008B":["CS","1","BeamDoseMeaning"],"008C":["SQ","1","BeamDoseVerificationControlPointSequence"],"008D":["FL","1","AverageBeamDosePointDepth"],"008E":["FL","1","AverageBeamDosePointEquivalentDepth"],"008F":["FL","1","AverageBeamDosePointSSD"],"0090":["CS","1","BeamDoseType"],"0091":["DS","1","AlternateBeamDose"],"0092":["CS","1","AlternateBeamDoseType"],"0093":["CS","1","DepthValueAveragingFlag"],"0094":["DS","1","BeamDosePointSourceToExternalContourDistance"],"00A0":["IS","1","NumberOfBrachyApplicationSetups"],"00A2":["DS","3","BrachyApplicationSetupDoseSpecificationPoint"],"00A4":["DS","1","BrachyApplicationSetupDose"],"00B0":["SQ","1","BeamSequence"],"00B2":["SH","1","TreatmentMachineName"],"00B3":["CS","1","PrimaryDosimeterUnit"],"00B4":["DS","1","SourceAxisDistance"],"00B6":["SQ","1","BeamLimitingDeviceSequence"],"00B8":["CS","1","RTBeamLimitingDeviceType"],"00BA":["DS","1","SourceToBeamLimitingDeviceDistance"],"00BB":["FL","1","IsocenterToBeamLimitingDeviceDistance"],"00BC":["IS","1","NumberOfLeafJawPairs"],"00BE":["DS","3-n","LeafPositionBoundaries"],"00C0":["IS","1","BeamNumber"],"00C2":["LO","1","BeamName"],"00C3":["ST","1","BeamDescription"],"00C4":["CS","1","BeamType"],"00C5":["FD","1","BeamDeliveryDurationLimit"],"00C6":["CS","1","RadiationType"],"00C7":["CS","1","HighDoseTechniqueType"],"00C8":["IS","1","ReferenceImageNumber"],"00CA":["SQ","1","PlannedVerificationImageSequence"],"00CC":["LO","1-n","ImagingDeviceSpecificAcquisitionParameters"],"00CE":["CS","1","TreatmentDeliveryType"],"00D0":["IS","1","NumberOfWedges"],"00D1":["SQ","1","WedgeSequence"],"00D2":["IS","1","WedgeNumber"],"00D3":["CS","1","WedgeType"],"00D4":["SH","1","WedgeID"],"00D5":["IS","1","WedgeAngle"],"00D6":["DS","1","WedgeFactor"],"00D7":["FL","1","TotalWedgeTrayWaterEquivalentThickness"],"00D8":["DS","1","WedgeOrientation"],"00D9":["FL","1","IsocenterToWedgeTrayDistance"],"00DA":["DS","1","SourceToWedgeTrayDistance"],"00DB":["FL","1","WedgeThinEdgePosition"],"00DC":["SH","1","BolusID"],"00DD":["ST","1","BolusDescription"],"00DE":["DS","1","EffectiveWedgeAngle"],"00E0":["IS","1","NumberOfCompensators"],"00E1":["SH","1","MaterialID"],"00E2":["DS","1","TotalCompensatorTrayFactor"],"00E3":["SQ","1","CompensatorSequence"],"00E4":["IS","1","CompensatorNumber"],"00E5":["SH","1","CompensatorID"],"00E6":["DS","1","SourceToCompensatorTrayDistance"],"00E7":["IS","1","CompensatorRows"],"00E8":["IS","1","CompensatorColumns"],"00E9":["DS","2","CompensatorPixelSpacing"],"00EA":["DS","2","CompensatorPosition"],"00EB":["DS","1-n","CompensatorTransmissionData"],"00EC":["DS","1-n","CompensatorThicknessData"],"00ED":["IS","1","NumberOfBoli"],"00EE":["CS","1","CompensatorType"],"00EF":["SH","1","CompensatorTrayID"],"00F0":["IS","1","NumberOfBlocks"],"00F2":["DS","1","TotalBlockTrayFactor"],"00F3":["FL","1","TotalBlockTrayWaterEquivalentThickness"],"00F4":["SQ","1","BlockSequence"],"00F5":["SH","1","BlockTrayID"],"00F6":["DS","1","SourceToBlockTrayDistance"],"00F7":["FL","1","IsocenterToBlockTrayDistance"],"00F8":["CS","1","BlockType"],"00F9":["LO","1","AccessoryCode"],"00FA":["CS","1","BlockDivergence"],"00FB":["CS","1","BlockMountingPosition"],"00FC":["IS","1","BlockNumber"],"00FE":["LO","1","BlockName"],"0100":["DS","1","BlockThickness"],"0102":["DS","1","BlockTransmission"],"0104":["IS","1","BlockNumberOfPoints"],"0106":["DS","2-2n","BlockData"],"0107":["SQ","1","ApplicatorSequence"],"0108":["SH","1","ApplicatorID"],"0109":["CS","1","ApplicatorType"],"010A":["LO","1","ApplicatorDescription"],"010C":["DS","1","CumulativeDoseReferenceCoefficient"],"010E":["DS","1","FinalCumulativeMetersetWeight"],"0110":["IS","1","NumberOfControlPoints"],"0111":["SQ","1","ControlPointSequence"],"0112":["IS","1","ControlPointIndex"],"0114":["DS","1","NominalBeamEnergy"],"0115":["DS","1","DoseRateSet"],"0116":["SQ","1","WedgePositionSequence"],"0118":["CS","1","WedgePosition"],"011A":["SQ","1","BeamLimitingDevicePositionSequence"],"011C":["DS","2-2n","LeafJawPositions"],"011E":["DS","1","GantryAngle"],"011F":["CS","1","GantryRotationDirection"],"0120":["DS","1","BeamLimitingDeviceAngle"],"0121":["CS","1","BeamLimitingDeviceRotationDirection"],"0122":["DS","1","PatientSupportAngle"],"0123":["CS","1","PatientSupportRotationDirection"],"0124":["DS","1","TableTopEccentricAxisDistance"],"0125":["DS","1","TableTopEccentricAngle"],"0126":["CS","1","TableTopEccentricRotationDirection"],"0128":["DS","1","TableTopVerticalPosition"],"0129":["DS","1","TableTopLongitudinalPosition"],"012A":["DS","1","TableTopLateralPosition"],"012C":["DS","3","IsocenterPosition"],"012E":["DS","3","SurfaceEntryPoint"],"0130":["DS","1","SourceToSurfaceDistance"],"0131":["FL","1","AverageBeamDosePointSourceToExternalContourDistance"],"0132":["FL","1","SourceToExternalContourDistance"],"0133":["FL","3","ExternalContourEntryPoint"],"0134":["DS","1","CumulativeMetersetWeight"],"0140":["FL","1","TableTopPitchAngle"],"0142":["CS","1","TableTopPitchRotationDirection"],"0144":["FL","1","TableTopRollAngle"],"0146":["CS","1","TableTopRollRotationDirection"],"0148":["FL","1","HeadFixationAngle"],"014A":["FL","1","GantryPitchAngle"],"014C":["CS","1","GantryPitchRotationDirection"],"014E":["FL","1","GantryPitchAngleTolerance"],"0150":["CS","1","FixationEye"],"0151":["DS","1","ChairHeadFramePosition"],"0152":["DS","1","HeadFixationAngleTolerance"],"0153":["DS","1","ChairHeadFramePositionTolerance"],"0154":["DS","1","FixationLightAzimuthalAngleTolerance"],"0155":["DS","1","FixationLightPolarAngleTolerance"],"0180":["SQ","1","PatientSetupSequence"],"0182":["IS","1","PatientSetupNumber"],"0183":["LO","1","PatientSetupLabel"],"0184":["LO","1","PatientAdditionalPosition"],"0190":["SQ","1","FixationDeviceSequence"],"0192":["CS","1","FixationDeviceType"],"0194":["SH","1","FixationDeviceLabel"],"0196":["ST","1","FixationDeviceDescription"],"0198":["SH","1","FixationDevicePosition"],"0199":["FL","1","FixationDevicePitchAngle"],"019A":["FL","1","FixationDeviceRollAngle"],"01A0":["SQ","1","ShieldingDeviceSequence"],"01A2":["CS","1","ShieldingDeviceType"],"01A4":["SH","1","ShieldingDeviceLabel"],"01A6":["ST","1","ShieldingDeviceDescription"],"01A8":["SH","1","ShieldingDevicePosition"],"01B0":["CS","1","SetupTechnique"],"01B2":["ST","1","SetupTechniqueDescription"],"01B4":["SQ","1","SetupDeviceSequence"],"01B6":["CS","1","SetupDeviceType"],"01B8":["SH","1","SetupDeviceLabel"],"01BA":["ST","1","SetupDeviceDescription"],"01BC":["DS","1","SetupDeviceParameter"],"01D0":["ST","1","SetupReferenceDescription"],"01D2":["DS","1","TableTopVerticalSetupDisplacement"],"01D4":["DS","1","TableTopLongitudinalSetupDisplacement"],"01D6":["DS","1","TableTopLateralSetupDisplacement"],"0200":["CS","1","BrachyTreatmentTechnique"],"0202":["CS","1","BrachyTreatmentType"],"0206":["SQ","1","TreatmentMachineSequence"],"0210":["SQ","1","SourceSequence"],"0212":["IS","1","SourceNumber"],"0214":["CS","1","SourceType"],"0216":["LO","1","SourceManufacturer"],"0218":["DS","1","ActiveSourceDiameter"],"021A":["DS","1","ActiveSourceLength"],"021B":["SH","1","SourceModelID"],"021C":["LO","1","SourceDescription"],"0222":["DS","1","SourceEncapsulationNominalThickness"],"0224":["DS","1","SourceEncapsulationNominalTransmission"],"0226":["LO","1","SourceIsotopeName"],"0228":["DS","1","SourceIsotopeHalfLife"],"0229":["CS","1","SourceStrengthUnits"],"022A":["DS","1","ReferenceAirKermaRate"],"022B":["DS","1","SourceStrength"],"022C":["DA","1","SourceStrengthReferenceDate"],"022E":["TM","1","SourceStrengthReferenceTime"],"0230":["SQ","1","ApplicationSetupSequence"],"0232":["CS","1","ApplicationSetupType"],"0234":["IS","1","ApplicationSetupNumber"],"0236":["LO","1","ApplicationSetupName"],"0238":["LO","1","ApplicationSetupManufacturer"],"0240":["IS","1","TemplateNumber"],"0242":["SH","1","TemplateType"],"0244":["LO","1","TemplateName"],"0250":["DS","1","TotalReferenceAirKerma"],"0260":["SQ","1","BrachyAccessoryDeviceSequence"],"0262":["IS","1","BrachyAccessoryDeviceNumber"],"0263":["SH","1","BrachyAccessoryDeviceID"],"0264":["CS","1","BrachyAccessoryDeviceType"],"0266":["LO","1","BrachyAccessoryDeviceName"],"026A":["DS","1","BrachyAccessoryDeviceNominalThickness"],"026C":["DS","1","BrachyAccessoryDeviceNominalTransmission"],"0271":["DS","1","ChannelEffectiveLength"],"0272":["DS","1","ChannelInnerLength"],"0273":["SH","1","AfterloaderChannelID"],"0274":["DS","1","SourceApplicatorTipLength"],"0280":["SQ","1","ChannelSequence"],"0282":["IS","1","ChannelNumber"],"0284":["DS","1","ChannelLength"],"0286":["DS","1","ChannelTotalTime"],"0288":["CS","1","SourceMovementType"],"028A":["IS","1","NumberOfPulses"],"028C":["DS","1","PulseRepetitionInterval"],"0290":["IS","1","SourceApplicatorNumber"],"0291":["SH","1","SourceApplicatorID"],"0292":["CS","1","SourceApplicatorType"],"0294":["LO","1","SourceApplicatorName"],"0296":["DS","1","SourceApplicatorLength"],"0298":["LO","1","SourceApplicatorManufacturer"],"029C":["DS","1","SourceApplicatorWallNominalThickness"],"029E":["DS","1","SourceApplicatorWallNominalTransmission"],"02A0":["DS","1","SourceApplicatorStepSize"],"02A1":["IS","1","ApplicatorShapeReferencedROINumber"],"02A2":["IS","1","TransferTubeNumber"],"02A4":["DS","1","TransferTubeLength"],"02B0":["SQ","1","ChannelShieldSequence"],"02B2":["IS","1","ChannelShieldNumber"],"02B3":["SH","1","ChannelShieldID"],"02B4":["LO","1","ChannelShieldName"],"02B8":["DS","1","ChannelShieldNominalThickness"],"02BA":["DS","1","ChannelShieldNominalTransmission"],"02C8":["DS","1","FinalCumulativeTimeWeight"],"02D0":["SQ","1","BrachyControlPointSequence"],"02D2":["DS","1","ControlPointRelativePosition"],"02D4":["DS","3","ControlPoint3DPosition"],"02D6":["DS","1","CumulativeTimeWeight"],"02E0":["CS","1","CompensatorDivergence"],"02E1":["CS","1","CompensatorMountingPosition"],"02E2":["DS","1-n","SourceToCompensatorDistance"],"02E3":["FL","1","TotalCompensatorTrayWaterEquivalentThickness"],"02E4":["FL","1","IsocenterToCompensatorTrayDistance"],"02E5":["FL","1","CompensatorColumnOffset"],"02E6":["FL","1-n","IsocenterToCompensatorDistances"],"02E7":["FL","1","CompensatorRelativeStoppingPowerRatio"],"02E8":["FL","1","CompensatorMillingToolDiameter"],"02EA":["SQ","1","IonRangeCompensatorSequence"],"02EB":["LT","1","CompensatorDescription"],"0302":["IS","1","RadiationMassNumber"],"0304":["IS","1","RadiationAtomicNumber"],"0306":["SS","1","RadiationChargeState"],"0308":["CS","1","ScanMode"],"0309":["CS","1","ModulatedScanModeType"],"030A":["FL","2","VirtualSourceAxisDistances"],"030C":["SQ","1","SnoutSequence"],"030D":["FL","1","SnoutPosition"],"030F":["SH","1","SnoutID"],"0312":["IS","1","NumberOfRangeShifters"],"0314":["SQ","1","RangeShifterSequence"],"0316":["IS","1","RangeShifterNumber"],"0318":["SH","1","RangeShifterID"],"0320":["CS","1","RangeShifterType"],"0322":["LO","1","RangeShifterDescription"],"0330":["IS","1","NumberOfLateralSpreadingDevices"],"0332":["SQ","1","LateralSpreadingDeviceSequence"],"0334":["IS","1","LateralSpreadingDeviceNumber"],"0336":["SH","1","LateralSpreadingDeviceID"],"0338":["CS","1","LateralSpreadingDeviceType"],"033A":["LO","1","LateralSpreadingDeviceDescription"],"033C":["FL","1","LateralSpreadingDeviceWaterEquivalentThickness"],"0340":["IS","1","NumberOfRangeModulators"],"0342":["SQ","1","RangeModulatorSequence"],"0344":["IS","1","RangeModulatorNumber"],"0346":["SH","1","RangeModulatorID"],"0348":["CS","1","RangeModulatorType"],"034A":["LO","1","RangeModulatorDescription"],"034C":["SH","1","BeamCurrentModulationID"],"0350":["CS","1","PatientSupportType"],"0352":["SH","1","PatientSupportID"],"0354":["LO","1","PatientSupportAccessoryCode"],"0355":["LO","1","TrayAccessoryCode"],"0356":["FL","1","FixationLightAzimuthalAngle"],"0358":["FL","1","FixationLightPolarAngle"],"035A":["FL","1","MetersetRate"],"0360":["SQ","1","RangeShifterSettingsSequence"],"0362":["LO","1","RangeShifterSetting"],"0364":["FL","1","IsocenterToRangeShifterDistance"],"0366":["FL","1","RangeShifterWaterEquivalentThickness"],"0370":["SQ","1","LateralSpreadingDeviceSettingsSequence"],"0372":["LO","1","LateralSpreadingDeviceSetting"],"0374":["FL","1","IsocenterToLateralSpreadingDeviceDistance"],"0380":["SQ","1","RangeModulatorSettingsSequence"],"0382":["FL","1","RangeModulatorGatingStartValue"],"0384":["FL","1","RangeModulatorGatingStopValue"],"0386":["FL","1","RangeModulatorGatingStartWaterEquivalentThickness"],"0388":["FL","1","RangeModulatorGatingStopWaterEquivalentThickness"],"038A":["FL","1","IsocenterToRangeModulatorDistance"],"038F":["FL","1-n","ScanSpotTimeOffset"],"0390":["SH","1","ScanSpotTuneID"],"0391":["IS","1-n","ScanSpotPrescribedIndices"],"0392":["IS","1","NumberOfScanSpotPositions"],"0393":["CS","1","ScanSpotReordered"],"0394":["FL","1-n","ScanSpotPositionMap"],"0395":["CS","1","ScanSpotReorderingAllowed"],"0396":["FL","1-n","ScanSpotMetersetWeights"],"0398":["FL","2","ScanningSpotSize"],"0399":["FL","2-2n","ScanSpotSizesDelivered"],"039A":["IS","1","NumberOfPaintings"],"03A0":["SQ","1","IonToleranceTableSequence"],"03A2":["SQ","1","IonBeamSequence"],"03A4":["SQ","1","IonBeamLimitingDeviceSequence"],"03A6":["SQ","1","IonBlockSequence"],"03A8":["SQ","1","IonControlPointSequence"],"03AA":["SQ","1","IonWedgeSequence"],"03AC":["SQ","1","IonWedgePositionSequence"],"0401":["SQ","1","ReferencedSetupImageSequence"],"0402":["ST","1","SetupImageComment"],"0410":["SQ","1","MotionSynchronizationSequence"],"0412":["FL","3","ControlPointOrientation"],"0420":["SQ","1","GeneralAccessorySequence"],"0421":["SH","1","GeneralAccessoryID"],"0422":["ST","1","GeneralAccessoryDescription"],"0423":["CS","1","GeneralAccessoryType"],"0424":["IS","1","GeneralAccessoryNumber"],"0425":["FL","1","SourceToGeneralAccessoryDistance"],"0426":["DS","1","IsocenterToGeneralAccessoryDistance"],"0431":["SQ","1","ApplicatorGeometrySequence"],"0432":["CS","1","ApplicatorApertureShape"],"0433":["FL","1","ApplicatorOpening"],"0434":["FL","1","ApplicatorOpeningX"],"0435":["FL","1","ApplicatorOpeningY"],"0436":["FL","1","SourceToApplicatorMountingPositionDistance"],"0440":["IS","1","NumberOfBlockSlabItems"],"0441":["SQ","1","BlockSlabSequence"],"0442":["DS","1","BlockSlabThickness"],"0443":["US","1","BlockSlabNumber"],"0450":["SQ","1","DeviceMotionControlSequence"],"0451":["CS","1","DeviceMotionExecutionMode"],"0452":["CS","1","DeviceMotionObservationMode"],"0453":["SQ","1","DeviceMotionParameterCodeSequence"],"0501":["FL","1","DistalDepthFraction"],"0502":["FL","1","DistalDepth"],"0503":["FL","2","NominalRangeModulationFractions"],"0504":["FL","2","NominalRangeModulatedRegionDepths"],"0505":["SQ","1","DepthDoseParametersSequence"],"0506":["SQ","1","DeliveredDepthDoseParametersSequence"],"0507":["FL","1","DeliveredDistalDepthFraction"],"0508":["FL","1","DeliveredDistalDepth"],"0509":["FL","2","DeliveredNominalRangeModulationFractions"],"0510":["FL","2","DeliveredNominalRangeModulatedRegionDepths"],"0511":["CS","1","DeliveredReferenceDoseDefinition"],"0512":["CS","1","ReferenceDoseDefinition"],"0600":["US","1","RTControlPointIndex"],"0601":["US","1","RadiationGenerationModeIndex"],"0602":["US","1","ReferencedDefinedDeviceIndex"],"0603":["US","1","RadiationDoseIdentificationIndex"],"0604":["US","1","NumberOfRTControlPoints"],"0605":["US","1","ReferencedRadiationGenerationModeIndex"],"0606":["US","1","TreatmentPositionIndex"],"0607":["US","1","ReferencedDeviceIndex"],"0608":["LO","1","TreatmentPositionGroupLabel"],"0609":["UI","1","TreatmentPositionGroupUID"],"060A":["SQ","1","TreatmentPositionGroupSequence"],"060B":["US","1","ReferencedTreatmentPositionIndex"],"060C":["US","1","ReferencedRadiationDoseIdentificationIndex"],"060D":["FD","1","RTAccessoryHolderWaterEquivalentThickness"],"060E":["US","1","ReferencedRTAccessoryHolderDeviceIndex"],"060F":["CS","1","RTAccessoryHolderSlotExistenceFlag"],"0610":["SQ","1","RTAccessoryHolderSlotSequence"],"0611":["LO","1","RTAccessoryHolderSlotID"],"0612":["FD","1","RTAccessoryHolderSlotDistance"],"0613":["FD","1","RTAccessorySlotDistance"],"0614":["SQ","1","RTAccessoryHolderDefinitionSequence"],"0615":["LO","1","RTAccessoryDeviceSlotID"],"0616":["SQ","1","RTRadiationSequence"],"0617":["SQ","1","RadiationDoseSequence"],"0618":["SQ","1","RadiationDoseIdentificationSequence"],"0619":["LO","1","RadiationDoseIdentificationLabel"],"061A":["CS","1","ReferenceDoseType"],"061B":["CS","1","PrimaryDoseValueIndicator"],"061C":["SQ","1","DoseValuesSequence"],"061D":["CS","1-n","DoseValuePurpose"],"061E":["FD","3","ReferenceDosePointCoordinates"],"061F":["SQ","1","RadiationDoseValuesParametersSequence"],"0620":["SQ","1","MetersetToDoseMappingSequence"],"0621":["SQ","1","ExpectedInVivoMeasurementValuesSequence"],"0622":["US","1","ExpectedInVivoMeasurementValueIndex"],"0623":["LO","1","RadiationDoseInVivoMeasurementLabel"],"0624":["FD","2","RadiationDoseCentralAxisDisplacement"],"0625":["FD","1","RadiationDoseValue"],"0626":["FD","1","RadiationDoseSourceToSkinDistance"],"0627":["FD","3","RadiationDoseMeasurementPointCoordinates"],"0628":["FD","1","RadiationDoseSourceToExternalContourDistance"],"0629":["SQ","1","RTToleranceSetSequence"],"062A":["LO","1","RTToleranceSetLabel"],"062B":["SQ","1","AttributeToleranceValuesSequence"],"062C":["FD","1","ToleranceValue"],"062D":["SQ","1","PatientSupportPositionToleranceSequence"],"062E":["FD","1","TreatmentTimeLimit"],"062F":["SQ","1","CArmPhotonElectronControlPointSequence"],"0630":["SQ","1","ReferencedRTRadiationSequence"],"0631":["SQ","1","ReferencedRTInstanceSequence"],"0632":["SQ","1","ReferencedRTPatientSetupSequence"],"0634":["FD","1","SourceToPatientSurfaceDistance"],"0635":["SQ","1","TreatmentMachineSpecialModeCodeSequence"],"0636":["US","1","IntendedNumberOfFractions"],"0637":["CS","1","RTRadiationSetIntent"],"0638":["CS","1","RTRadiationPhysicalAndGeometricContentDetailFlag"],"0639":["CS","1","RTRecordFlag"],"063A":["SQ","1","TreatmentDeviceIdentificationSequence"],"063B":["SQ","1","ReferencedRTPhysicianIntentSequence"],"063C":["FD","1","CumulativeMeterset"],"063D":["FD","1","DeliveryRate"],"063E":["SQ","1","DeliveryRateUnitSequence"],"063F":["SQ","1","TreatmentPositionSequence"],"0640":["FD","1","RadiationSourceAxisDistance"],"0641":["US","1","NumberOfRTBeamLimitingDevices"],"0642":["FD","1","RTBeamLimitingDeviceProximalDistance"],"0643":["FD","1","RTBeamLimitingDeviceDistalDistance"],"0644":["SQ","1","ParallelRTBeamDelimiterDeviceOrientationLabelCodeSequence"],"0645":["FD","1","BeamModifierOrientationAngle"],"0646":["SQ","1","FixedRTBeamDelimiterDeviceSequence"],"0647":["SQ","1","ParallelRTBeamDelimiterDeviceSequence"],"0648":["US","1","NumberOfParallelRTBeamDelimiters"],"0649":["FD","2-n","ParallelRTBeamDelimiterBoundaries"],"064A":["FD","2-n","ParallelRTBeamDelimiterPositions"],"064B":["FD","2","RTBeamLimitingDeviceOffset"],"064C":["SQ","1","RTBeamDelimiterGeometrySequence"],"064D":["SQ","1","RTBeamLimitingDeviceDefinitionSequence"],"064E":["CS","1","ParallelRTBeamDelimiterOpeningMode"],"064F":["CS","1-n","ParallelRTBeamDelimiterLeafMountingSide"],"0650":["UI","1","PatientSetupUID"],"0651":["SQ","1","WedgeDefinitionSequence"],"0652":["FD","1","RadiationBeamWedgeAngle"],"0653":["FD","1","RadiationBeamWedgeThinEdgeDistance"],"0654":["FD","1","RadiationBeamEffectiveWedgeAngle"],"0655":["US","1","NumberOfWedgePositions"],"0656":["SQ","1","RTBeamLimitingDeviceOpeningSequence"],"0657":["US","1","NumberOfRTBeamLimitingDeviceOpenings"],"0658":["SQ","1","RadiationDosimeterUnitSequence"],"0659":["SQ","1","RTDeviceDistanceReferenceLocationCodeSequence"],"065A":["SQ","1","RadiationDeviceConfigurationAndCommissioningKeySequence"],"065B":["SQ","1","PatientSupportPositionParameterSequence"],"065C":["CS","1","PatientSupportPositionSpecificationMethod"],"065D":["SQ","1","PatientSupportPositionDeviceParameterSequence"],"065E":["US","1","DeviceOrderIndex"],"065F":["US","1","PatientSupportPositionParameterOrderIndex"],"0660":["SQ","1","PatientSupportPositionDeviceToleranceSequence"],"0661":["US","1","PatientSupportPositionToleranceOrderIndex"],"0662":["SQ","1","CompensatorDefinitionSequence"],"0663":["CS","1","CompensatorMapOrientation"],"0664":["OF","1","CompensatorProximalThicknessMap"],"0665":["OF","1","CompensatorDistalThicknessMap"],"0666":["FD","1","CompensatorBasePlaneOffset"],"0667":["SQ","1","CompensatorShapeFabricationCodeSequence"],"0668":["SQ","1","CompensatorShapeSequence"],"0669":["FD","1","RadiationBeamCompensatorMillingToolDiameter"],"066A":["SQ","1","BlockDefinitionSequence"],"066B":["OF","1","BlockEdgeData"],"066C":["CS","1","BlockOrientation"],"066D":["FD","1","RadiationBeamBlockThickness"],"066E":["FD","1","RadiationBeamBlockSlabThickness"],"066F":["SQ","1","BlockEdgeDataSequence"],"0670":["US","1","NumberOfRTAccessoryHolders"],"0671":["SQ","1","GeneralAccessoryDefinitionSequence"],"0672":["US","1","NumberOfGeneralAccessories"],"0673":["SQ","1","BolusDefinitionSequence"],"0674":["US","1","NumberOfBoluses"],"0675":["UI","1","EquipmentFrameOfReferenceUID"],"0676":["ST","1","EquipmentFrameOfReferenceDescription"],"0677":["SQ","1","EquipmentReferencePointCoordinatesSequence"],"0678":["SQ","1","EquipmentReferencePointCodeSequence"],"0679":["FD","1","RTBeamLimitingDeviceAngle"],"067A":["FD","1","SourceRollAngle"],"067B":["SQ","1","RadiationGenerationModeSequence"],"067C":["SH","1","RadiationGenerationModeLabel"],"067D":["ST","1","RadiationGenerationModeDescription"],"067E":["SQ","1","RadiationGenerationModeMachineCodeSequence"],"067F":["SQ","1","RadiationTypeCodeSequence"],"0680":["DS","1","NominalEnergy"],"0681":["DS","1","MinimumNominalEnergy"],"0682":["DS","1","MaximumNominalEnergy"],"0683":["SQ","1","RadiationFluenceModifierCodeSequence"],"0684":["SQ","1","EnergyUnitCodeSequence"],"0685":["US","1","NumberOfRadiationGenerationModes"],"0686":["SQ","1","PatientSupportDevicesSequence"],"0687":["US","1","NumberOfPatientSupportDevices"],"0688":["FD","1","RTBeamModifierDefinitionDistance"],"0689":["SQ","1","BeamAreaLimitSequence"],"068A":["SQ","1","ReferencedRTPrescriptionSequence"],"0700":["UI","1","TreatmentSessionUID"],"0701":["CS","1","RTRadiationUsage"],"0702":["SQ","1","ReferencedRTRadiationSetSequence"],"0703":["SQ","1","ReferencedRTRadiationRecordSequence"],"0704":["US","1","RTRadiationSetDeliveryNumber"],"0705":["US","1","ClinicalFractionNumber"],"0706":["CS","1","RTTreatmentFractionCompletionStatus"],"0707":["CS","1","RTRadiationSetUsage"],"0708":["CS","1","TreatmentDeliveryContinuationFlag"],"0709":["CS","1","TreatmentRecordContentOrigin"],"0714":["CS","1","RTTreatmentTerminationStatus"],"0715":["SQ","1","RTTreatmentTerminationReasonCodeSequence"],"0716":["SQ","1","MachineSpecificTreatmentTerminationCodeSequence"],"0722":["SQ","1","RTRadiationSalvageRecordControlPointSequence"],"0723":["CS","1","StartingMetersetValueKnownFlag"],"0730":["ST","1","TreatmentTerminationDescription"],"0731":["SQ","1","TreatmentToleranceViolationSequence"],"0732":["CS","1","TreatmentToleranceViolationCategory"],"0733":["SQ","1","TreatmentToleranceViolationAttributeSequence"],"0734":["ST","1","TreatmentToleranceViolationDescription"],"0735":["ST","1","TreatmentToleranceViolationIdentification"],"0736":["DT","1","TreatmentToleranceViolationDateTime"],"073A":["DT","1","RecordedRTControlPointDateTime"],"073B":["US","1","ReferencedRadiationRTControlPointIndex"],"073E":["SQ","1","AlternateValueSequence"],"073F":["SQ","1","ConfirmationSequence"],"0740":["SQ","1","InterlockSequence"],"0741":["DT","1","InterlockDateTime"],"0742":["ST","1","InterlockDescription"],"0743":["SQ","1","InterlockOriginatingDeviceSequence"],"0744":["SQ","1","InterlockCodeSequence"],"0745":["SQ","1","InterlockResolutionCodeSequence"],"0746":["SQ","1","InterlockResolutionUserSequence"],"0760":["DT","1","OverrideDateTime"],"0761":["SQ","1","TreatmentToleranceViolationTypeCodeSequence"],"0762":["SQ","1","TreatmentToleranceViolationCauseCodeSequence"],"0772":["SQ","1","MeasuredMetersetToDoseMappingSequence"],"0773":["US","1","ReferencedExpectedInVivoMeasurementValueIndex"],"0774":["SQ","1","DoseMeasurementDeviceCodeSequence"],"0780":["SQ","1","AdditionalParameterRecordingInstanceSequence"],"0782":["US","1",""],"0783":["ST","1","InterlockOriginDescription"],"0784":["SQ","1","RTPatientPositionScopeSequence"],"0785":["UI","1","ReferencedTreatmentPositionGroupUID"],"0786":["US","1","RadiationOrderIndex"],"0787":["SQ","1","OmittedRadiationSequence"],"0788":["SQ","1","ReasonForOmissionCodeSequence"],"0789":["SQ","1","RTDeliveryStartPatientPositionSequence"],"078A":["SQ","1","RTTreatmentPreparationPatientPositionSequence"],"078B":["SQ","1","ReferencedRTTreatmentPreparationSequence"],"078C":["SQ","1","ReferencedPatientSetupPhotoSequence"],"078D":["SQ","1","PatientTreatmentPreparationMethodCodeSequence"],"078E":["LT","1","PatientTreatmentPreparationProcedureParameterDescription"],"078F":["SQ","1","PatientTreatmentPreparationDeviceSequence"],"0790":["SQ","1","PatientTreatmentPreparationProcedureSequence"],"0791":["SQ","1","PatientTreatmentPreparationProcedureCodeSequence"],"0792":["LT","1","PatientTreatmentPreparationMethodDescription"],"0793":["SQ","1","PatientTreatmentPreparationProcedureParameterSequence"],"0794":["LT","1","PatientSetupPhotoDescription"],"0795":["US","1","PatientTreatmentPreparationProcedureIndex"],"0796":["US","1","ReferencedPatientSetupProcedureIndex"],"0797":["SQ","1","RTRadiationTaskSequence"],"0798":["SQ","1","RTPatientPositionDisplacementSequence"],"0799":["SQ","1","RTPatientPositionSequence"],"079A":["LO","1","DisplacementReferenceLabel"],"079B":["FD","16","DisplacementMatrix"],"079C":["SQ","1","PatientSupportDisplacementSequence"],"079D":["SQ","1","DisplacementReferenceLocationCodeSequence"],"079E":["CS","1","RTRadiationSetDeliveryUsage"]},"300C":{"0000":["UL","1","GenericGroupLength"],"0002":["SQ","1","ReferencedRTPlanSequence"],"0004":["SQ","1","ReferencedBeamSequence"],"0006":["IS","1","ReferencedBeamNumber"],"0007":["IS","1","ReferencedReferenceImageNumber"],"0008":["DS","1","StartCumulativeMetersetWeight"],"0009":["DS","1","EndCumulativeMetersetWeight"],"000A":["SQ","1","ReferencedBrachyApplicationSetupSequence"],"000C":["IS","1","ReferencedBrachyApplicationSetupNumber"],"000E":["IS","1","ReferencedSourceNumber"],"0020":["SQ","1","ReferencedFractionGroupSequence"],"0022":["IS","1","ReferencedFractionGroupNumber"],"0040":["SQ","1","ReferencedVerificationImageSequence"],"0042":["SQ","1","ReferencedReferenceImageSequence"],"0050":["SQ","1","ReferencedDoseReferenceSequence"],"0051":["IS","1","ReferencedDoseReferenceNumber"],"0055":["SQ","1","BrachyReferencedDoseReferenceSequence"],"0060":["SQ","1","ReferencedStructureSetSequence"],"006A":["IS","1","ReferencedPatientSetupNumber"],"0080":["SQ","1","ReferencedDoseSequence"],"00A0":["IS","1","ReferencedToleranceTableNumber"],"00B0":["SQ","1","ReferencedBolusSequence"],"00C0":["IS","1","ReferencedWedgeNumber"],"00D0":["IS","1","ReferencedCompensatorNumber"],"00E0":["IS","1","ReferencedBlockNumber"],"00F0":["IS","1","ReferencedControlPointIndex"],"00F2":["SQ","1","ReferencedControlPointSequence"],"00F4":["IS","1","ReferencedStartControlPointIndex"],"00F6":["IS","1","ReferencedStopControlPointIndex"],"0100":["IS","1","ReferencedRangeShifterNumber"],"0102":["IS","1","ReferencedLateralSpreadingDeviceNumber"],"0104":["IS","1","ReferencedRangeModulatorNumber"],"0111":["SQ","1","OmittedBeamTaskSequence"],"0112":["CS","1","ReasonForOmission"],"0113":["LO","1","ReasonForOmissionDescription"],"0114":["SQ","1","PrescriptionOverviewSequence"],"0115":["FL","1","TotalPrescriptionDose"],"0116":["SQ","1","PlanOverviewSequence"],"0117":["US","1","PlanOverviewIndex"],"0118":["US","1","ReferencedPlanOverviewIndex"],"0119":["US","1","NumberOfFractionsIncluded"],"0120":["SQ","1","DoseCalibrationConditionsSequence"],"0121":["FD","1","AbsorbedDoseToMetersetRatio"],"0122":["FD","2","DelineatedRadiationFieldSize"],"0123":["CS","1","DoseCalibrationConditionsVerifiedFlag"],"0124":["FD","1","CalibrationReferencePointDepth"],"0125":["SQ","1","GatingBeamHoldTransitionSequence"],"0126":["CS","1","BeamHoldTransition"],"0127":["DT","1","BeamHoldTransitionDateTime"],"0128":["SQ","1","BeamHoldOriginatingDeviceSequence"]},"300E":{"0000":["UL","1","GenericGroupLength"],"0002":["CS","1","ApprovalStatus"],"0004":["DA","1","ReviewDate"],"0005":["TM","1","ReviewTime"],"0008":["PN","1","ReviewerName"]},3010:{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","RadiobiologicalDoseEffectSequence"],"0002":["CS","1","RadiobiologicalDoseEffectFlag"],"0003":["SQ","1","EffectiveDoseCalculationMethodCategoryCodeSequence"],"0004":["SQ","1","EffectiveDoseCalculationMethodCodeSequence"],"0005":["LO","1","EffectiveDoseCalculationMethodDescription"],"0006":["UI","1","ConceptualVolumeUID"],"0007":["SQ","1","OriginatingSOPInstanceReferenceSequence"],"0008":["SQ","1","ConceptualVolumeConstituentSequence"],"0009":["SQ","1","EquivalentConceptualVolumeInstanceReferenceSequence"],"000A":["SQ","1","EquivalentConceptualVolumesSequence"],"000B":["UI","1","ReferencedConceptualVolumeUID"],"000C":["UT","1","ConceptualVolumeCombinationExpression"],"000D":["US","1","ConceptualVolumeConstituentIndex"],"000E":["CS","1","ConceptualVolumeCombinationFlag"],"000F":["ST","1","ConceptualVolumeCombinationDescription"],"0010":["CS","1","ConceptualVolumeSegmentationDefinedFlag"],"0011":["SQ","1","ConceptualVolumeSegmentationReferenceSequence"],"0012":["SQ","1","ConceptualVolumeConstituentSegmentationReferenceSequence"],"0013":["UI","1","ConstituentConceptualVolumeUID"],"0014":["SQ","1","DerivationConceptualVolumeSequence"],"0015":["UI","1","SourceConceptualVolumeUID"],"0016":["SQ","1","ConceptualVolumeDerivationAlgorithmSequence"],"0017":["ST","1","ConceptualVolumeDescription"],"0018":["SQ","1","SourceConceptualVolumeSequence"],"0019":["SQ","1","AuthorIdentificationSequence"],"001A":["LO","1","ManufacturerModelVersion"],"001B":["UC","1","DeviceAlternateIdentifier"],"001C":["CS","1","DeviceAlternateIdentifierType"],"001D":["LT","1","DeviceAlternateIdentifierFormat"],"001E":["LO","1","SegmentationCreationTemplateLabel"],"001F":["UI","1","SegmentationTemplateUID"],"0020":["US","1","ReferencedSegmentReferenceIndex"],"0021":["SQ","1","SegmentReferenceSequence"],"0022":["US","1","SegmentReferenceIndex"],"0023":["SQ","1","DirectSegmentReferenceSequence"],"0024":["SQ","1","CombinationSegmentReferenceSequence"],"0025":["SQ","1","ConceptualVolumeSequence"],"0026":["SQ","1","SegmentedRTAccessoryDeviceSequence"],"0027":["SQ","1","SegmentCharacteristicsSequence"],"0028":["SQ","1","RelatedSegmentCharacteristicsSequence"],"0029":["US","1","SegmentCharacteristicsPrecedence"],"002A":["SQ","1","RTSegmentAnnotationSequence"],"002B":["SQ","1","SegmentAnnotationCategoryCodeSequence"],"002C":["SQ","1","SegmentAnnotationTypeCodeSequence"],"002D":["LO","1","DeviceLabel"],"002E":["SQ","1","DeviceTypeCodeSequence"],"002F":["SQ","1","SegmentAnnotationTypeModifierCodeSequence"],"0030":["SQ","1","PatientEquipmentRelationshipCodeSequence"],"0031":["UI","1","ReferencedFiducialsUID"],"0032":["SQ","1","PatientTreatmentOrientationSequence"],"0033":["SH","1","UserContentLabel"],"0034":["LO","1","UserContentLongLabel"],"0035":["SH","1","EntityLabel"],"0036":["LO","1","EntityName"],"0037":["ST","1","EntityDescription"],"0038":["LO","1","EntityLongLabel"],"0039":["US","1","DeviceIndex"],"003A":["US","1","RTTreatmentPhaseIndex"],"003B":["UI","1","RTTreatmentPhaseUID"],"003C":["US","1","RTPrescriptionIndex"],"003D":["US","1","RTSegmentAnnotationIndex"],"003E":["US","1","BasisRTTreatmentPhaseIndex"],"003F":["US","1","RelatedRTTreatmentPhaseIndex"],"0040":["US","1","ReferencedRTTreatmentPhaseIndex"],"0041":["US","1","ReferencedRTPrescriptionIndex"],"0042":["US","1","ReferencedParentRTPrescriptionIndex"],"0043":["ST","1","ManufacturerDeviceIdentifier"],"0044":["SQ","1","InstanceLevelReferencedPerformedProcedureStepSequence"],"0045":["CS","1","RTTreatmentPhaseIntentPresenceFlag"],"0046":["CS","1","RadiotherapyTreatmentType"],"0047":["CS","1-n","TeletherapyRadiationType"],"0048":["CS","1-n","BrachytherapySourceType"],"0049":["SQ","1","ReferencedRTTreatmentPhaseSequence"],"004A":["SQ","1","ReferencedDirectSegmentInstanceSequence"],"004B":["SQ","1","IntendedRTTreatmentPhaseSequence"],"004C":["DA","1","IntendedPhaseStartDate"],"004D":["DA","1","IntendedPhaseEndDate"],"004E":["SQ","1","RTTreatmentPhaseIntervalSequence"],"004F":["CS","1","TemporalRelationshipIntervalAnchor"],"0050":["FD","1","MinimumNumberOfIntervalDays"],"0051":["FD","1","MaximumNumberOfIntervalDays"],"0052":["UI","1-n","PertinentSOPClassesInStudy"],"0053":["UI","1-n","PertinentSOPClassesInSeries"],"0054":["LO","1","RTPrescriptionLabel"],"0055":["SQ","1","RTPhysicianIntentPredecessorSequence"],"0056":["LO","1","RTTreatmentApproachLabel"],"0057":["SQ","1","RTPhysicianIntentSequence"],"0058":["US","1","RTPhysicianIntentIndex"],"0059":["CS","1","RTTreatmentIntentType"],"005A":["UT","1","RTPhysicianIntentNarrative"],"005B":["SQ","1","RTProtocolCodeSequence"],"005C":["ST","1","ReasonForSuperseding"],"005D":["SQ","1","RTDiagnosisCodeSequence"],"005E":["US","1","ReferencedRTPhysicianIntentIndex"],"005F":["SQ","1","RTPhysicianIntentInputInstanceSequence"],"0060":["SQ","1","RTAnatomicPrescriptionSequence"],"0061":["UT","1","PriorTreatmentDoseDescription"],"0062":["SQ","1","PriorTreatmentReferenceSequence"],"0063":["CS","1","DosimetricObjectiveEvaluationScope"],"0064":["SQ","1","TherapeuticRoleCategoryCodeSequence"],"0065":["SQ","1","TherapeuticRoleTypeCodeSequence"],"0066":["US","1","ConceptualVolumeOptimizationPrecedence"],"0067":["SQ","1","ConceptualVolumeCategoryCodeSequence"],"0068":["CS","1","ConceptualVolumeBlockingConstraint"],"0069":["SQ","1","ConceptualVolumeTypeCodeSequence"],"006A":["SQ","1","ConceptualVolumeTypeModifierCodeSequence"],"006B":["SQ","1","RTPrescriptionSequence"],"006C":["SQ","1","DosimetricObjectiveSequence"],"006D":["SQ","1","DosimetricObjectiveTypeCodeSequence"],"006E":["UI","1","DosimetricObjectiveUID"],"006F":["UI","1","ReferencedDosimetricObjectiveUID"],"0070":["SQ","1","DosimetricObjectiveParameterSequence"],"0071":["SQ","1","ReferencedDosimetricObjectivesSequence"],"0073":["CS","1","AbsoluteDosimetricObjectiveFlag"],"0074":["FD","1","DosimetricObjectiveWeight"],"0075":["CS","1","DosimetricObjectivePurpose"],"0076":["SQ","1","PlanningInputInformationSequence"],"0077":["LO","1","TreatmentSite"],"0078":["SQ","1","TreatmentSiteCodeSequence"],"0079":["SQ","1","FractionPatternSequence"],"007A":["UT","1","TreatmentTechniqueNotes"],"007B":["UT","1","PrescriptionNotes"],"007C":["IS","1","NumberOfIntervalFractions"],"007D":["US","1","NumberOfFractions"],"007E":["US","1","IntendedDeliveryDuration"],"007F":["UT","1","FractionationNotes"],"0080":["SQ","1","RTTreatmentTechniqueCodeSequence"],"0081":["SQ","1","PrescriptionNotesSequence"],"0082":["SQ","1","FractionBasedRelationshipSequence"],"0083":["CS","1","FractionBasedRelationshipIntervalAnchor"],"0084":["FD","1","MinimumHoursBetweenFractions"],"0085":["TM","1-n","IntendedFractionStartTime"],"0086":["LT","1","IntendedStartDayOfWeek"],"0087":["SQ","1","WeekdayFractionPatternSequence"],"0088":["SQ","1","DeliveryTimeStructureCodeSequence"],"0089":["SQ","1","TreatmentSiteModifierCodeSequence"],"0090":["CS","1","RoboticBaseLocationIndicator"],"0091":["SQ","1","RoboticPathNodeSetCodeSequence"],"0092":["UL","1","RoboticNodeIdentifier"],"0093":["FD","3","RTTreatmentSourceCoordinates"],"0094":["FD","1","RadiationSourceCoordinateSystemYawAngle"],"0095":["FD","1","RadiationSourceCoordinateSystemRollAngle"],"0096":["FD","1","RadiationSourceCoordinateSystemPitchAngle"],"0097":["SQ","1","RoboticPathControlPointSequence"],"0098":["SQ","1","TomotherapeuticControlPointSequence"],"0099":["FD","1-n","TomotherapeuticLeafOpenDurations"],"009A":["FD","1-n","TomotherapeuticLeafInitialClosedDurations"]},4e3:{"0000":["UL","1","GenericGroupLength"],"0010":["LT","1","Arbitrary"],4e3:["LT","1","TextComments"]},4008:{"0000":["UL","1","GenericGroupLength"],"0040":["SH","1","ResultsID"],"0042":["LO","1","ResultsIDIssuer"],"0050":["SQ","1","ReferencedInterpretationSequence"],"00FF":["CS","1","ReportProductionStatusTrial"],"0100":["DA","1","InterpretationRecordedDate"],"0101":["TM","1","InterpretationRecordedTime"],"0102":["PN","1","InterpretationRecorder"],"0103":["LO","1","ReferenceToRecordedSound"],"0108":["DA","1","InterpretationTranscriptionDate"],"0109":["TM","1","InterpretationTranscriptionTime"],"010A":["PN","1","InterpretationTranscriber"],"010B":["ST","1","InterpretationText"],"010C":["PN","1","InterpretationAuthor"],"0111":["SQ","1","InterpretationApproverSequence"],"0112":["DA","1","InterpretationApprovalDate"],"0113":["TM","1","InterpretationApprovalTime"],"0114":["PN","1","PhysicianApprovingInterpretation"],"0115":["LT","1","InterpretationDiagnosisDescription"],"0117":["SQ","1","InterpretationDiagnosisCodeSequence"],"0118":["SQ","1","ResultsDistributionListSequence"],"0119":["PN","1","DistributionName"],"011A":["LO","1","DistributionAddress"],"0200":["SH","1","InterpretationID"],"0202":["LO","1","InterpretationIDIssuer"],"0210":["CS","1","InterpretationTypeID"],"0212":["CS","1","InterpretationStatusID"],"0300":["ST","1","Impressions"],4e3:["ST","1","ResultsComments"]},4010:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","LowEnergyDetectors"],"0002":["CS","1","HighEnergyDetectors"],"0004":["SQ","1","DetectorGeometrySequence"],1001:["SQ","1","ThreatROIVoxelSequence"],1004:["FL","3","ThreatROIBase"],1005:["FL","3","ThreatROIExtents"],1006:["OB","1","ThreatROIBitmap"],1007:["SH","1","RouteSegmentID"],1008:["CS","1","GantryType"],1009:["CS","1","OOIOwnerType"],"100A":["SQ","1","RouteSegmentSequence"],1010:["US","1","PotentialThreatObjectID"],1011:["SQ","1","ThreatSequence"],1012:["CS","1","ThreatCategory"],1013:["LT","1","ThreatCategoryDescription"],1014:["CS","1","ATDAbilityAssessment"],1015:["CS","1","ATDAssessmentFlag"],1016:["FL","1","ATDAssessmentProbability"],1017:["FL","1","Mass"],1018:["FL","1","Density"],1019:["FL","1","ZEffective"],"101A":["SH","1","BoardingPassID"],"101B":["FL","3","CenterOfMass"],"101C":["FL","3","CenterOfPTO"],"101D":["FL","6-n","BoundingPolygon"],"101E":["SH","1","RouteSegmentStartLocationID"],"101F":["SH","1","RouteSegmentEndLocationID"],1020:["CS","1","RouteSegmentLocationIDType"],1021:["CS","1-n","AbortReason"],1023:["FL","1","VolumeOfPTO"],1024:["CS","1","AbortFlag"],1025:["DT","1","RouteSegmentStartTime"],1026:["DT","1","RouteSegmentEndTime"],1027:["CS","1","TDRType"],1028:["CS","1","InternationalRouteSegment"],1029:["LO","1-n","ThreatDetectionAlgorithmAndVersion"],"102A":["SH","1","AssignedLocation"],"102B":["DT","1","AlarmDecisionTime"],1031:["CS","1","AlarmDecision"],1033:["US","1","NumberOfTotalObjects"],1034:["US","1","NumberOfAlarmObjects"],1037:["SQ","1","PTORepresentationSequence"],1038:["SQ","1","ATDAssessmentSequence"],1039:["CS","1","TIPType"],"103A":["CS","1","DICOSVersion"],1041:["DT","1","OOIOwnerCreationTime"],1042:["CS","1","OOIType"],1043:["FL","3","OOISize"],1044:["CS","1","AcquisitionStatus"],1045:["SQ","1","BasisMaterialsCodeSequence"],1046:["CS","1","PhantomType"],1047:["SQ","1","OOIOwnerSequence"],1048:["CS","1","ScanType"],1051:["LO","1","ItineraryID"],1052:["SH","1","ItineraryIDType"],1053:["LO","1","ItineraryIDAssigningAuthority"],1054:["SH","1","RouteID"],1055:["SH","1","RouteIDAssigningAuthority"],1056:["CS","1","InboundArrivalType"],1058:["SH","1","CarrierID"],1059:["CS","1","CarrierIDAssigningAuthority"],1060:["FL","3","SourceOrientation"],1061:["FL","3","SourcePosition"],1062:["FL","1","BeltHeight"],1064:["SQ","1","AlgorithmRoutingCodeSequence"],1067:["CS","1","TransportClassification"],1068:["LT","1","OOITypeDescriptor"],1069:["FL","1","TotalProcessingTime"],"106C":["OB","1","DetectorCalibrationData"],"106D":["CS","1","AdditionalScreeningPerformed"],"106E":["CS","1","AdditionalInspectionSelectionCriteria"],"106F":["SQ","1","AdditionalInspectionMethodSequence"],1070:["CS","1","AITDeviceType"],1071:["SQ","1","QRMeasurementsSequence"],1072:["SQ","1","TargetMaterialSequence"],1073:["FD","1","SNRThreshold"],1075:["DS","1","ImageScaleRepresentation"],1076:["SQ","1","ReferencedPTOSequence"],1077:["SQ","1","ReferencedTDRInstanceSequence"],1078:["ST","1","PTOLocationDescription"],1079:["SQ","1","AnomalyLocatorIndicatorSequence"],"107A":["FL","3","AnomalyLocatorIndicator"],"107B":["SQ","1","PTORegionSequence"],"107C":["CS","1","InspectionSelectionCriteria"],"107D":["SQ","1","SecondaryInspectionMethodSequence"],"107E":["DS","6","PRCSToRCSOrientation"]},"4FFE":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","MACParametersSequence"]},5e3:{"0000":["UL","1","GenericGroupLength"],"0005":["US","1","CurveDimensions"],"0010":["US","1","NumberOfPoints"],"0020":["CS","1","TypeOfData"],"0022":["LO","1","CurveDescription"],"0030":["SH","1-n","AxisUnits"],"0040":["SH","1-n","AxisLabels"],"0103":["US","1","DataValueRepresentation"],"0104":["US","1-n","MinimumCoordinateValue"],"0105":["US","1-n","MaximumCoordinateValue"],"0106":["SH","1-n","CurveRange"],"0110":["US","1-n","CurveDataDescriptor"],"0112":["US","1-n","CoordinateStartValue"],"0114":["US","1-n","CoordinateStepValue"],1001:["CS","1","CurveActivationLayer"],2e3:["US","1","AudioType"],2002:["US","1","AudioSampleFormat"],2004:["US","1","NumberOfChannels"],2006:["UL","1","NumberOfSamples"],2008:["UL","1","SampleRate"],"200A":["UL","1","TotalTime"],"200C":["ox","1","AudioSampleData"],"200E":["LT","1","AudioComments"],2500:["LO","1","CurveLabel"],2600:["SQ","1","CurveReferencedOverlaySequence"],2610:["US","1","CurveReferencedOverlayGroup"],3e3:["ox","1","CurveData"]},5200:{"0000":["UL","1","GenericGroupLength"],9229:["SQ","1","SharedFunctionalGroupsSequence"],9230:["SQ","1","PerFrameFunctionalGroupsSequence"]},5400:{"0000":["UL","1","GenericGroupLength"],"0100":["SQ","1","WaveformSequence"],"0110":["ox","1","ChannelMinimumValue"],"0112":["ox","1","ChannelMaximumValue"],1004:["US","1","WaveformBitsAllocated"],1006:["CS","1","WaveformSampleInterpretation"],"100A":["ox","1","WaveformPaddingValue"],1010:["ox","1","WaveformData"]},5600:{"0000":["UL","1","GenericGroupLength"],"0010":["OF","1","FirstOrderPhaseCorrectionAngle"],"0020":["OF","1","SpectroscopyData"]},6e3:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","OverlayRows"],"0011":["US","1","OverlayColumns"],"0012":["US","1","OverlayPlanes"],"0015":["IS","1","NumberOfFramesInOverlay"],"0022":["LO","1","OverlayDescription"],"0040":["CS","1","OverlayType"],"0045":["LO","1","OverlaySubtype"],"0050":["SS","2","OverlayOrigin"],"0051":["US","1","ImageFrameOrigin"],"0052":["US","1","OverlayPlaneOrigin"],"0060":["CS","1","OverlayCompressionCode"],"0061":["SH","1","OverlayCompressionOriginator"],"0062":["SH","1","OverlayCompressionLabel"],"0063":["CS","1","OverlayCompressionDescription"],"0066":["AT","1-n","OverlayCompressionStepPointers"],"0068":["US","1","OverlayRepeatInterval"],"0069":["US","1","OverlayBitsGrouped"],"0100":["US","1","OverlayBitsAllocated"],"0102":["US","1","OverlayBitPosition"],"0110":["CS","1","OverlayFormat"],"0200":["US","1","OverlayLocation"],"0800":["CS","1-n","OverlayCodeLabel"],"0802":["US","1","OverlayNumberOfTables"],"0803":["AT","1-n","OverlayCodeTableLocation"],"0804":["US","1","OverlayBitsForCodeWord"],1001:["CS","1","OverlayActivationLayer"],1100:["US","1","OverlayDescriptorGray"],1101:["US","1","OverlayDescriptorRed"],1102:["US","1","OverlayDescriptorGreen"],1103:["US","1","OverlayDescriptorBlue"],1200:["US","1-n","OverlaysGray"],1201:["US","1-n","OverlaysRed"],1202:["US","1-n","OverlaysGreen"],1203:["US","1-n","OverlaysBlue"],1301:["IS","1","ROIArea"],1302:["DS","1","ROIMean"],1303:["DS","1","ROIStandardDeviation"],1500:["LO","1","OverlayLabel"],3e3:["ox","1","OverlayData"],4e3:["LT","1","OverlayComments"]},"7F00":{"0000":["UL","1","GenericGroupLength"],"0010":["ox","1","VariablePixelData"],"0011":["US","1","VariableNextDataGroup"],"0020":["OW","1","VariableCoefficientsSDVN"],"0030":["OW","1","VariableCoefficientsSDHN"],"0040":["OW","1","VariableCoefficientsSDDN"]},"7FE0":{"0000":["UL","1","GenericGroupLength"],"0001":["OV","1","ExtendedOffsetTable"],"0002":["OV","1","ExtendedOffsetTableLengths"],"0008":["OF","1","FloatPixelData"],"0009":["OD","1","DoubleFloatPixelData"],"0010":["ox","1","PixelData"],"0020":["OW","1","CoefficientsSDVN"],"0030":["OW","1","CoefficientsSDHN"],"0040":["OW","1","CoefficientsSDDN"]},FFFA:{"0000":["UL","1","GenericGroupLength"],FFFA:["SQ","1","DigitalSignaturesSequence"]},FFFC:{"0000":["UL","1","GenericGroupLength"],FFFC:["OB","1","DataSetTrailingPadding"]},FFFE:{"0000":["UL","1","GenericGroupLength"],E000:["NONE","1","Item"],E00D:["NONE","1","ItemDelimitationItem"],E0DD:["NONE","1","SequenceDelimitationItem"]}};function L(e,t){A[e]=t}const O={"0000":"Command","0002":"Meta Element","0004":"File Set","0008":"Identifying","0009":"SPI Identifying","0010":"Patient","0012":"Clinical Trial","0018":"Acquisition","0019":"SPI Acquisition","0020":"Image","0021":"SPI Image","0022":"Ophtalmology","0028":"Image Presentation","0032":"Study","0038":"Visit","003A":"Waveform","0040":"Procedure","0042":"Encapsulated Document","0050":"Device Informations","0054":"Nuclear Medicine","0060":"Histogram","0070":"Presentation State","0072":"Hanging Protocol","0088":"Storage","0100":"Authorization","0400":"Digital Signature",1e3:"Code Table",1010:"Zonal Map",2e3:"Film Session",2010:"Film Box",2020:"Image Box",2030:"Annotation",2040:"Overlay Box",2050:"Presentation LUT",2100:"Print Job",2110:"Printer",2120:"Queue",2130:"Print Content",2200:"Media Creation",3002:"RT Image",3004:"RT Dose",3006:"RT StructureSet",3008:"RT Treatment","300A":"RT Plan","300C":"RT Relationship","300E":"RT Approval",4e3:"Text",4008:"Results","4FFE":"MAC Parameters",5e3:"Curve",5002:"Curve",5004:"Curve",5006:"Curve",5008:"Curve","500A":"Curve","500C":"Curve","500E":"Curve",5400:"Waveform Data",6e3:"Overlays",6002:"Overlays",6004:"Overlays",6008:"Overlays","600A":"Overlays","600C":"Overlays","600E":"Overlays",FFFC:"Generic","7FE0":"Pixel Data",FFFF:"Unknown"},_={OB:!0,OD:!0,OF:!0,OL:!0,OV:!0,OW:!0,SQ:!0,SV:!0,UC:!0,UN:!0,UR:!0,UT:!0,UV:!0,ox:!0};function E(e){return void 0!==_[e]}const R={SH:!0,LO:!0,UC:!0,ST:!0,LT:!0,UT:!0,PN:!0};function F(e){return void 0!==R[e]}const k={AE:"string",AS:"string",AT:void 0,CS:"string",DA:"string",DS:"string",DT:"string",FL:"Float32",FD:"Float64",IS:"string",LO:"string",LT:"string",OB:"Uint8",OD:"Uint64",OF:"Uint32",OL:"Uint32",OV:"Uint64",OW:"Uint16",PN:"string",SH:"string",SL:"Int32",SQ:void 0,SS:"Int16",ST:"string",SV:"Int64",TM:"string",UC:"string",UI:"string",UL:"Uint32",UN:"Uint8",UR:"string",US:"Uint16",UT:"string",UV:"Uint64"};class M{#x;#D;constructor(e,t){if(!e||void 0===e)throw new Error("Cannot create tag with no group.");if(4!==e.length)throw new Error("Cannot create tag with badly sized group.");if(!t||void 0===t)throw new Error("Cannot create tag with no element.");if(4!==t.length)throw new Error("Cannot create tag with badly sized element.");this.#x=e,this.#D=t}getGroup(){return this.#x}getElement(){return this.#D}toString(){return this.getKey()+": "+this.getNameFromDictionary()}equals(e){return null!=e&&this.#x===e.getGroup()&&this.#D===e.getElement()}getKey(){return this.#x+this.#D}getGroupName(){return O[this.#x]}isWithVR(){return!("FFFE"===this.#x&&("E000"===this.#D||"E00D"===this.#D||"E0DD"===this.#D))}isPrivate(){return parseInt(this.#x,16)%2==1}getInfoFromDictionary(){let e;return void 0!==A[this.#x]&&void 0!==A[this.#x][this.#D]&&(e=A[this.#x][this.#D]),e}getVrFromDictionary(){let e;const t=this.getInfoFromDictionary();return void 0!==t&&(e=t[0]),e}getNameFromDictionary(){let e;const t=this.getInfoFromDictionary();return void 0!==t&&(e=t[2]),e}}function q(e){if(!e||void 0===e)throw new Error("Cannot create tag with no key.");if(8!==e.length)throw new Error("Cannot create tag with badly sized key.");return new M(e.substring(0,4),e.substring(4,8))}function U(){return new M("FFFE","E000")}function B(e){return"FFFEE000"===e.getKey()}function N(e){return"FFFEE0DD"===e.getKey()}function Q(){return new M("7FE0","0010")}function G(e){return"7FE00010"===e.getKey()}function z(e){if(null==e)return null;let t=null,n=null;const r=A,i=Object.keys(r);let a,o=null,s=!1;for(let a=0,l=i.length;a<l;++a){t=i[a],o=Object.keys(r[t]);for(let i=0,a=o.length;i<a;++i)if(n=o[i],r[t][n][2]===e){s=!0;break}if(s)break}return s&&(a=new M(t,n)),a}function V(e){const t=e.byteLength,n=new Uint8Array(e.buffer,e.byteOffset,t),r=e.BYTES_PER_ELEMENT;let i;for(let e=0;e<t;e+=r)for(let t=e+r-1,a=e;t>a;t--,a++)i=n[a],n[a]=n[t],n[t]=i}class j{#T;#P=!0;#I=function(){return new Int8Array(new Int16Array([1]).buffer)[0]>0}();#A;#L;constructor(e,t){this.#T=e,void 0!==t&&(this.#P=t),this.#A=this.#P!==this.#I,this.#L=new DataView(e)}readUint16(e){return this.#L.getUint16(e,this.#P)}readInt16(e){return this.#L.getInt16(e,this.#P)}readUint32(e){return this.#L.getUint32(e,this.#P)}readBigUint64(e){return this.#L.getBigUint64(e,this.#P)}readInt32(e){return this.#L.getInt32(e,this.#P)}readBigInt64(e){return this.#L.getBigInt64(e,this.#P)}readFloat32(e){return this.#L.getFloat32(e,this.#P)}readFloat64(e){return this.#L.getFloat64(e,this.#P)}readBinaryArray(e,t){const n=new Uint8Array(this.#T,e,t),r=8*n.length,i=new Uint8Array(r);let a=0,o=0;for(let e=0;e<r;++e)a=e%8,o=Math.floor(e/8),i[e]=255*(0!=(n[o]&1<<a));return i}readUint8Array(e,t){return new Uint8Array(this.#T,e,t)}readInt8Array(e,t){return new Int8Array(this.#T,e,t)}readUint16Array(e,t){const n=Uint16Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new Uint16Array(this.#T,e,r),this.#A&&V(i);else{i=new Uint16Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readUint16(t),t+=n}return i}readInt16Array(e,t){const n=Int16Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new Int16Array(this.#T,e,r),this.#A&&V(i);else{i=new Int16Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readInt16(t),t+=n}return i}readUint32Array(e,t){const n=Uint32Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new Uint32Array(this.#T,e,r),this.#A&&V(i);else{i=new Uint32Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readUint32(t),t+=n}return i}readUint64Array(e,t){const n=BigUint64Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new BigUint64Array(this.#T,e,r),this.#A&&V(i);else{i=new BigUint64Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readBigUint64(t),t+=n}return i}readInt32Array(e,t){const n=Int32Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new Int32Array(this.#T,e,r),this.#A&&V(i);else{i=new Int32Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readInt32(t),t+=n}return i}readInt64Array(e,t){const n=BigInt64Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new BigInt64Array(this.#T,e,r),this.#A&&V(i);else{i=new BigInt64Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readBigInt64(t),t+=n}return i}readFloat32Array(e,t){const n=Float32Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new Float32Array(this.#T,e,r),this.#A&&V(i);else{i=new Float32Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readFloat32(t),t+=n}return i}readFloat64Array(e,t){const n=Float64Array.BYTES_PER_ELEMENT,r=t/n;let i=null;if(e%n==0)i=new Float64Array(this.#T,e,r),this.#A&&V(i);else{i=new Float64Array(r);let t=e;for(let e=0;e<r;++e)i[e]=this.readFloat64(t),t+=n}return i}readHex(e){const t=this.readUint16(e).toString(16);return"0000".substring(0,4-t.length)+t.toUpperCase()}}function W(e,t,n){if(null==e||null==t)return!1;const r=n>0?0|n:0;return e.substring(r,r+t.length)===t}function H(e,t){return null!=e&&null!=t&&e.substring(e.length-t.length)===t}function Y(e){const t=[];if(null==e)return t;const n=/{(\w+)}/g;let r=n.exec(e);for(;r;)t.push(r[1]),r=n.exec(e);return t}function X(e,t){let n="";if(null==e)return n;if(n=e,null==t)return n;const r=Y(e);for(let e=0;e<r.length;++e){const i=t[r[e]];if(null!=i&&null!==i.value&&void 0!==i.value){let t=i.value.toPrecision(4);null!==i.unit&&void 0!==i.unit&&0!==i.unit.length&&("degree"!==i.unit&&(t+=" "),t+=i.unit);const a="{"+r[e]+"}";n=n.replace(a,t)}}return n}function Z(e){let t=null;if(null!=e&&"."!==e[0]){const n=e.toLowerCase().split(".");1!==n.length&&(t=n.pop(),/[a-z]/.test(t)&&!t.includes("/")||(t=null))}return t}function $(e){const t=new Uint8Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}function K(e,t){const n=Math.pow(10,t),r=.01/n;return Math.round(e*n+r)/n}function J(e,t){return null!==e&&null!==t&&void 0!==e&&void 0!==t&&ee(e.slice().sort(),t.slice().sort())}function ee(e,t){return null!==e&&null!==t&&void 0!==e&&void 0!==t&&e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function te(e){return String.fromCharCode.apply(String,e)}function ne(e,t,n,r){(void 0===n||n<0||n>=e.length)&&(n=0),(void 0===r||r<=n||r>e.length)&&(r=e.length);for(let i=n;i<r;++i)if(t(e[i],i,e))return i}function re(e){return function(t,n,r){for(let t=0;t<e.length;++t)if(r[n+t]!==e[t])return!1;return!0}}function ie(e,t){const n="\r\n";let r=0;const i=[];for(let a=0;a<e.length;++a){let o="";0!==a&&(o+=n),o+="--"+t+n;const s=Object.keys(e[a]);for(let t=0;t<s.length;++t){const r=s[t];"data"!==r&&(o+=r+": "+e[a][r]+n)}o+=n;const l=$(o);i.push(l),r+=l.byteLength+e[a].data.byteLength}const a=$("\r\n--"+t+"--"+n),o=new Uint8Array(r+a.byteLength);let s=0;for(let t=0;t<e.length;++t)o.set(i[t],s),s+=i[t].byteLength,o.set(new Uint8Array(e[t].data),s),s+=e[t].data.byteLength;return o.set(a,s),o}class ae{vr;value;tag;vl;undefinedLength;startOffset;endOffset;items;constructor(e){this.vr=e}}function oe(){return"0.32.3"}function se(e){return"DICM"===new Uint8Array(e,128,4).reduce((function(e,t){return e+String.fromCharCode(t)}),"")}const le=String.fromCharCode("u200B");class ce{decode(e){let t="";for(let n=0,r=e.length;n<r;++n)t+=String.fromCharCode(e[n]);return t}}function ue(e){if(!e)return null;const t={L:"R",R:"L",A:"P",P:"A",H:"F",F:"H"};let n="";for(let r=0;r<e.length;r++){const i=t[e.substring(r,r+1)];i&&(n+=i)}return n}function he(e){let t;return ee(e,[1,0,0,0,1,0])?t="axial":ee(e,[1,0,0,0,0,-1])?t="coronal":ee(e,[0,1,0,0,0,-1])&&(t="sagittal"),t}function de(e){return"1.2.840.10008.1.2"===e}function fe(e){return"1.2.840.10008.1.2.2"===e}function ge(e){return"1.2.840.10008.1.2.4.50"===e||"1.2.840.10008.1.2.4.51"===e}function pe(e){return"1.2.840.10008.1.2.4.57"===e||"1.2.840.10008.1.2.4.70"===e}function me(e){return null!==e.match(/1.2.840.10008.1.2.4.9/)}function Se(e){return null!==e.match(/1.2.840.10008.1.2.5/)}function ye(e,t,n){let r=null;try{8===e?r=0===t?new Uint8Array(n):new Int8Array(n):16===e?r=0===t?new Uint16Array(n):new Int16Array(n):32===e&&(r=0===t?new Uint32Array(n):new Int32Array(n))}catch(e){if(e instanceof RangeError){const e=Math.floor(Math.log(n)/Math.log(2));g.error("Cannot allocate array of size: "+n+" (>2^"+e+").")}}return r}function ve(e,t){return t?8:E(e)?12:8}class be{#O={};#_;#E=new ce;#R=this.#E;#F(e){return this.#E.decode(e)}#k(e){return this.#R.decode(e)}getDefaultCharacterSet(){return this.#_}setDefaultCharacterSet(e){this.#_=e}setDecoderCharacterSet(e){this.#R=new TextDecoder(e)}getDicomElements(){return this.#O}#M(e,t){const n=e.readHex(t);t+=Uint16Array.BYTES_PER_ELEMENT;const r=e.readHex(t);return t+=Uint16Array.BYTES_PER_ELEMENT,{tag:new M(n,r),endOffset:t}}#q(e,t,n){const r={};let i=this.#U(e,t,n);if(t=i.endOffset,N(i.tag))return{data:r,endOffset:i.endOffset,isSeqDelim:!0};if(r[i.tag.getKey()]={tag:i.tag,vr:"NONE",vl:i.vl,undefinedLength:i.undefinedLength},i.undefinedLength){let a=!1;for(;!a;)i=this.#U(e,t,n),t=i.endOffset,a="FFFEE00D"===i.tag.getKey(),a||(r[i.tag.getKey()]=i)}else{const a=t;for(t-=i.vl;t<a;)i=this.#U(e,t,n),t=i.endOffset,r[i.tag.getKey()]=i}return{data:r,endOffset:t,isSeqDelim:!1}}#B(e,t,n){const r=[];let i=this.#U(e,t,n);const a=i.vl;t=i.endOffset;let o=!1;for(;!o;)i=this.#U(e,t,n),t=i.endOffset,o=N(i.tag),o||(i.vr="OB",r.push(i));return{data:r,endOffset:t,offsetTableVl:a}}#U(e,t,n){const r=this.#M(e,t),i=r.tag;t=r.endOffset;let a=null,o=!1;i.isWithVR()?n?(a=i.getVrFromDictionary(),void 0===a&&(a="UN"),o=!0):(a=this.#F(e.readUint8Array(t,2)),t+=2*Uint8Array.BYTES_PER_ELEMENT,o=E(a),o&&(t+=2*Uint8Array.BYTES_PER_ELEMENT)):(a="NONE",o=!0),function(e){return Object.keys(k).concat(["NONE","ox","xx","xs"]).includes(e)}(a)||(g.warn("Unknown VR: "+a+" (for tag "+i.getKey()+"), treating as 'UN'"),a="UN");let s=0;o?(s=e.readUint32(t),t+=Uint32Array.BYTES_PER_ELEMENT):(s=e.readUint16(t),t+=Uint16Array.BYTES_PER_ELEMENT);let l=!1;4294967295===s&&(l=!0,s=0),i.isPrivate()&&"UN"===a&&0===s&&(a="SQ");let c,u=t,h=u+s;if(G(i)&&l){const r=this.#B(e,t,n);t=r.endOffset,u+=r.offsetTableVl,c=r.data,h=t,s=t-u}else if("SQ"===a){let r;if(c=[],l){let i=!1;for(;!i;)r=this.#q(e,t,n),i=r.isSeqDelim,t=r.endOffset,i||c.push(r.data);h=t,s=t-u}else if(0!==s){const i=t+s;for(;t<i;)r=this.#q(e,t,n),c.push(r.data),t=r.endOffset;h=t,s=t-u}}const d=new ae(a);return d.tag=i,d.vl=s,d.startOffset=u,d.endOffset=h,l&&(d.undefinedLength=l),c&&(d.items=c),d}#N(e,t,n,r){const i=e.tag,a=e.vl,o=e.vr,s=e.startOffset;let l=null;const c=k[o];if(G(i))if(e.undefinedLength){l=[];for(let i=0;i<e.items.length;++i)l.push(this.#N(e.items[i],t,n,r));delete e.items}else if(r>8&&"OB"===o&&g.warn("Reading DICOM pixel data with bitsAllocated>8 and OB VR."),l=[],1===r)l.push(t.readBinaryArray(s,a));else if(8===r)0===n?l.push(t.readUint8Array(s,a)):l.push(t.readInt8Array(s,a));else{if(16!==r)throw new Error("Unsupported bits allocated: "+r);0===n?l.push(t.readUint16Array(s,a)):l.push(t.readInt16Array(s,a))}else if(void 0!==c)if("Uint8"===c)l=t.readUint8Array(s,a);else if("Uint16"===c)l=t.readUint16Array(s,a),"O"!==o[0]&&(l=Array.from(l));else if("Uint32"===c)l=t.readUint32Array(s,a),"O"!==o[0]&&(l=Array.from(l));else if("Uint64"===c)l=t.readUint64Array(s,a);else if("Int16"===c)l=Array.from(t.readInt16Array(s,a));else if("Int32"===c)l=Array.from(t.readInt32Array(s,a));else if("Int64"===c)l=t.readInt64Array(s,a);else if("Float32"===c)l=Array.from(t.readFloat32Array(s,a));else if("Float64"===c)l=Array.from(t.readFloat64Array(s,a));else{if("string"!==c)throw Error("Unknown VR type: "+c);{const e=t.readUint8Array(s,a);l=F(o)?this.#k(e):this.#F(e),l=function(e){let t=e;const n=e.length-1;return e[n]===le&&(t=e.substring(0,n)),t=t.trim(),t}(l).split("\\")}}else if("xx"===o)l=Array.from(t.readUint16Array(s,a));else if("ox"===o)l=8===r?Array.from(t.readUint8Array(s,a)):Array.from(t.readUint16Array(s,a));else if("xs"===o)l=0===n?Array.from(t.readUint16Array(s,a)):Array.from(t.readInt16Array(s,a));else if("AT"===o){const e=t.readUint16Array(s,a);l=[];for(let t=0,n=e.length;t<n;t+=2){const n=e[t].toString(16),r=e[t+1].toString(16);let i="(";i+="0000".substring(0,4-n.length)+n.toUpperCase(),i+=",",i+="0000".substring(0,4-r.length)+r.toUpperCase(),i+=")",l.push(i)}}else if("SQ"===o){l=[];for(let i=0;i<e.items.length;++i){const a=e.items[i],o={},s=Object.keys(a);for(let e=0;e<s.length;++e){const i=a[s[e]];i.value=this.#N(i,t,n,r),delete i.tag,delete i.vl,delete i.startOffset,delete i.endOffset,o[s[e]]=i}l.push(o)}delete e.items}else"NONE"===o||g.warn("Unknown VR: "+o+" (for tag "+e.tag.getKey()+")"),l=[];return l}#Q(e,t,n,r){const i=Object.keys(e);for(let a=0;a<i.length;++a){const o=e[i[a]];void 0===o.value&&(o.value=this.#N(o,t,n,r)),delete o.tag,delete o.vl,delete o.startOffset,delete o.endOffset}}parse(e){let t=0,n="",r=null;const i=new j(e);let a=new j(e);t=128;const o=this.#F(i.readUint8Array(t,4));if(t+=4*Uint8Array.BYTES_PER_ELEMENT,"DICM"===o){r=this.#U(i,t,!1),r.value=this.#N(r,i),t=r.endOffset,this.#O[r.tag.getKey()]=r;const e=t+r.value[0];for(;t<e;)r=this.#U(i,t,!1),t=r.endOffset,this.#O[r.tag.getKey()]=r;if(r=this.#O["00020010"],void 0===r)throw new Error("Not a valid DICOM file (no TransferSyntaxUID found)");r.value=this.#N(r,i),n=r.value[0]}else{g.warn("No DICM prefix, trying to guess tansfer syntax."),r=this.#U(a,0,!1);const e=function(e){const t="0008",n=e.tag.getGroup();if("0800"!==n&&n!==t)throw new Error("Not a valid DICOM file (no magic DICM word found and first element not in 0008 group)");const r=e.vr,i=r.charCodeAt(0),a=r.charCodeAt(1),o=!(i>=65&&i<=90&&a>=65&&a<=90);let s=null;if(n===t)s=o?"1.2.840.10008.1.2":"1.2.840.10008.1.2.1";else{if(o)throw new Error("Not a valid DICOM file (no magic DICM word foundand implicit VR big endian detected)");s="1.2.840.10008.1.2.2"}const l=new ae("UI");return l.tag=new M("0002","0010"),l.value=[s+" "],l.vl=l.value[0].length,l.startOffset=e.startOffset,l.endOffset=l.startOffset+l.vl,l}(r);this.#O[e.tag.getKey()]=e,n=e.value[0],t=0}if(!function(e){return"1.2.840.10008.1.2"===e||"1.2.840.10008.1.2.1"===e||"1.2.840.10008.1.2.2"===e||ge(e)||pe(e)||me(e)||Se(e)}(n))throw new Error("Unsupported DICOM transfer syntax: '"+n+"' ("+function(e){let t="Unknown";return"1.2.840.10008.1.2"===e?t="Little Endian Implicit":"1.2.840.10008.1.2.1"===e?t="Little Endian Explicit":"1.2.840.10008.1.2.1.99"===e?t="Little Endian Deflated Explicit":"1.2.840.10008.1.2.2"===e?t="Big Endian Explicit":ge(e)?t="1.2.840.10008.1.2.4.50"===e?"JPEG Baseline":"JPEG Extended, Process 2+4":pe(e)?t="1.2.840.10008.1.2.4.57"===e?"JPEG Lossless, Nonhierarchical (Processes 14)":"JPEG Lossless, Non-hierarchical, 1st Order Prediction":function(e){return null!==e.match(/1.2.840.10008.1.2.4.5/)&&!ge(e)&&!pe(e)||null!==e.match(/1.2.840.10008.1.2.4.6/)}(e)?t="Retired JPEG":function(e){return null!==e.match(/1.2.840.10008.1.2.4.8/)}(e)?t="JPEG-LS":me(e)?t="1.2.840.10008.1.2.4.91"===e?"JPEG 2000 (Lossless or Lossy)":"JPEG 2000 (Lossless only)":"1.2.840.10008.1.2.4.100"===e?t="MPEG2":Se(e)&&(t="RLE"),t}(n)+")");let s=!1;for(de(n)&&(s=!0),fe(n)&&(a=new j(e,!1));t<e.byteLength;){r=this.#U(a,t,s),t=r.endOffset;const e=r.tag.getKey();void 0===this.#O[e]?this.#O[e]=r:g.warn("Not saving duplicate tag: "+e)}if(isNaN(t))throw new Error("Problem while parsing, bad offset");e.byteLength!==t&&g.warn("Did not reach the end of the buffer: "+t+" != "+e.byteLength);let l=0,c=16;if(void 0!==this.#O["7FE00010"]&&(r=this.#O["00280103"],void 0!==r?(r.value=this.#N(r,a),l=r.value[0]):g.warn("Reading DICOM pixel data with default pixelRepresentation."),r=this.#O["00280100"],void 0!==r?(r.value=this.#N(r,a),c=r.value[0]):g.warn("Reading DICOM pixel data with default bitsAllocated.")),void 0!==this.#_&&this.setDecoderCharacterSet(this.#_),r=this.#O["00080005"],void 0!==r){let e;r.value=this.#N(r,a),1===r.value.length?e=r.value[0]:(e=r.value[1],g.warn("Unsupported character set with code extensions: '"+e+"'.")),this.setDecoderCharacterSet(function(e){let t="utf-8";return"ISO_IR 100"===e?t="iso-8859-1":"ISO_IR 101"===e?t="iso-8859-2":"ISO_IR 109"===e?t="iso-8859-3":"ISO_IR 110"===e?t="iso-8859-4":"ISO_IR 144"===e?t="iso-8859-5":"ISO_IR 127"===e?t="iso-8859-6":"ISO_IR 126"===e?t="iso-8859-7":"ISO_IR 138"===e?t="iso-8859-8":"ISO_IR 148"===e?t="iso-8859-9":"ISO_IR 13"===e?t="shift-jis":"ISO_IR 166"===e?t="iso-8859-11":"ISO 2022 IR 87"===e?t="iso-2022-jp":"ISO 2022 IR 149"===e||"ISO 2022 IR 58"===e||("ISO_IR 192"===e?t="utf-8":"GB18030"===e?t="gb18030":"GB2312"===e?t="gb2312":"GBK"===e&&(t="chinese")),t}(e))}if(this.#Q(this.#O,a,l,c),r=this.#O["7FE00010"],void 0!==r&&r.undefinedLength){let e=1;void 0!==this.#O["00280008"]&&(e=Number(this.#O["00280008"].value[0]));const t=r.value;if(t.length>1&&t.length>e){const n=t.length/e,i=[];let a=0;for(let r=0;r<e;++r){a=r*n;let e=0;for(let r=0;r<n;++r)e+=t[a+r].length;const o=new t[0].constructor(e);let s=0;for(let e=0;e<n;++e)o.set(t[a+e],s),s+=t[a+e].length;i[r]=o}r.value=i}}}}class Ce{#G={};add(e,t){void 0===this.#G[e]&&(this.#G[e]=[]),this.#G[e].push(t)}remove(e,t){if(void 0!==this.#G[e])for(let n=0;n<this.#G[e].length;++n)this.#G[e][n]===t&&this.#G[e].splice(n,1)}fireEvent=e=>{if(void 0===this.#G[e.type])return;const t=this.#G[e.type].slice();for(let n=0;n<t.length;++n)t[n](e)}}function we(e,t,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s=!1);let l=t;o?(a*=-1,s?l-=(i-1)*r:r*=-1):s&&(l+=(i-1)*r,r*=-1);const c=a-i*r;let u=0,h=0;return{next:function(){if(u<n){const t={value:e(l),done:!1,index:l};return l+=r,++u,++h,h===i&&(h=0,l+=c),t}return{done:!0,index:l}}}}function xe(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}function De(t,n,r,i){const a=t.getGeometry().getSize();let o=2;i&&void 0!==i&&(o=i.getColAbsMax(2).index);const s=n.getValues(),l=new e(s.map((function(e,t){return t===o||t>2?e:0})));let c=a.indexToOffset(l);void 0===r&&(r=!1);let u=null;u=r?function(e){return t.getRescaledValueAtOffset(e)}:function(e){return t.getValueAtOffset(e)};const h=a.get(0),d=a.get(1),f=a.get(2);let g=a.getDimSize(2);const p=t.getNumberOfComponents(),m=1===t.getPlanarConfiguration(),S=function(e,t,n,r,i,a,o,s){return 1===p?we(e,t,n,r,i,a,o,s):3===p?function(e,t,n,r,i,a,o,s,l){const c=[];return l?(c.push(we(e,t,n,r,i,a,o,s)),c.push(we(e,t+n*r,n,r,i,a,o,s)),c.push(we(e,t+2*n*r,n,r,i,a,o,s))):(r*=3,a*=3,c.push(we(e,t,n,r,i,a,o,s)),c.push(we(e,t+1,n,r,i,a,o,s)),c.push(we(e,t+2,n,r,i,a,o,s))),{next:function(){const e=c[0].next(),t=c[1].next(),n=c[2].next();return e.done?{done:!0,index:n.index}:{value:[e.value,t.value,n.value],done:!1,index:[e.index,t.index,n.index]}}}}(e,3*t,n,r,i,a,o,s,m):void 0};let y=null;if(i&&void 0!==i){const e=i.getColAbsMax(0),t=i.getColAbsMax(2),n=!1,r=!1;let a=null;if(2===t.index)a=h*d,y=0===e.index?S(u,c,a,1,h,h,n,r):S(u,c,a,h,d,1,n,r);else if(0===t.index)a=f*d,y=1===e.index?S(u,c,a,h,d,g,n,r):S(u,c,a,g,f,h,n,r);else{if(1!==t.index)throw new Error("Unknown direction: "+t.index);a=f*h,y=0===e.index?S(u,c,a,1,h,g,n,r):S(u,c,a,g,f,1,n,r)}}else if(1===t.getNumberOfComponents())y=function(e,t,n,r){void 0===r&&(r=1);let i=t;return{next:function(){if(i<n){const t={value:e(i),done:!1,index:i};return i+=r,t}return{done:!0,index:n}}}}(u,c,c+g);else{if(3!==t.getNumberOfComponents())throw new Error("Unsupported number of components: "+t.getNumberOfComponents());c*=3,g*=3,y=function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);let a=t,o=1;i?o=(n-t)/3:r*=3;let s=a+o,l=a+2*o;return{next:function(){if(a<n){const t={value:[e(a),e(s),e(l)],done:!1,index:[a,s,l]};return a+=r,s+=r,l+=r,t}return{done:!0,index:[n]}}}}(u,c,c+g,1,m)}return y}function Te(e,t){let n=0,r=0;return{next:function(){if(n<t){r+1<e.length&&n>=e[r+1].index&&++r;const t={value:e[r].colour,done:!1,index:n};return++n,t}return{done:!0,index:t}}}}class Pe{#f;#z;constructor(e,t){this.#f=e,this.#z=t}getSlope(){return this.#f}getIntercept(){return this.#z}apply(e){return e*this.#f+this.#z}equals(e){return null!==e&&this.getSlope()===e.getSlope()&&this.getIntercept()===e.getIntercept()}toString(){return this.getSlope()+", "+this.getIntercept()}isID(){return 1===this.getSlope()&&0===this.getIntercept()}}class Ie{#e;constructor(e){if(!e||void 0===e)throw new Error("Cannot create size with no values.");if(0===e.length)throw new Error("Cannot create size with empty values.");if(!e.every((function(e){return!isNaN(e)&&0!==e})))throw new Error("Cannot create size with non number or zero values.");this.#e=e}get(e){return this.#e[e]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}moreThanOne(e){return this.length()>=e+1&&1!==this.get(e)}canScroll3D(e){let t=2;return void 0!==e&&(t=e.getThirdColMajorDirection()),this.moreThanOne(t)}canScroll(e){let t=this.canScroll3D(e);for(let e=3;e<this.length();++e)t=t||this.moreThanOne(e);return t}getDimSize(e,t){if(e>this.length())return null;if(void 0===t)t=0;else if(t<0||t>e)throw new Error("Invalid start value for getDimSize");let n=1;for(let r=t;r<e;++r)n*=this.get(r);return n}getTotalSize(e){return this.getDimSize(this.length(),e)}equals(e){if(!e)return!1;const t=this.length();if(t!==e.length())return!1;for(let n=0;n<t;++n)if(this.get(n)!==e.get(n))return!1;return!0}isInBounds(e,t){if(!e)return!1;const n=this.length();if(n!==e.length())return!1;if(void 0===t){t=[];for(let e=0;e<n;++e)t.push(e)}else for(let e=0;e<n;++e)if(t[e]>n-1)throw new Error("Wrong input dir value: "+t[e]);for(let n=0;n<t.length;++n)if(r=e.get(t[n]),i=this.get(t[n]),!(r>=0&&r<i))return!1;var r,i;return!0}indexToOffset(e,t){if(e.length()<this.length())throw new Error("Incompatible index and size length");if(void 0===t)t=0;else if(t<0||t>this.length()-1)throw new Error("Invalid start value for indexToOffset");let n=0;for(let r=t;r<this.length();++r)n+=e.get(r)*this.getDimSize(r,t);return n}offsetToIndex(t){const n=new Array(this.length());let r=t,i=0;for(let e=this.length()-1;e>0;--e)i=this.getDimSize(e),n[e]=Math.floor(r/i),r-=n[e]*i;return n[0]=r,new e(n)}get2D(){return{x:this.get(0),y:this.get(1)}}}class Ae{#e;constructor(e){if(!e||void 0===e)throw new Error("Cannot create spacing with no values.");if(0===e.length)throw new Error("Cannot create spacing with empty values.");if(!e.every((function(e){return!isNaN(e)&&0!==e})))throw new Error("Cannot create spacing with non number or zero values.");this.#e=e}get(e){return this.#e[e]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}equals(e){if(!e)return!1;const t=this.length();if(t!==e.length())return!1;for(let n=0;n<t;++n)if(this.get(n)!==e.get(n))return!1;return!0}get2D(){return{x:this.get(0),y:this.get(1)}}}class Le{#V;#j;#W;#H={};#Y;#X=w();#Z=!1;constructor(e,t,n,r,i){this.#V=[e],this.#j=t,this.#W=n,void 0!==i&&(this.#Y=i,this.#H[i]=[e]),void 0!==r&&(this.#X=r)}getInitialTime(){return this.#Y}getCurrentTotalNumberOfSlices(){const e=Object.keys(this.#H);if(0===e.length)return this.#V.length;let t=0;for(let n=0;n<e.length;++n)t+=this.#H[e[n]].length;return t}hasSlicesAtTime(e){return void 0!==this.#H[e]}getCurrentNumberOfSlicesBeforeTime(e){const t=Object.keys(this.#H);if(0===t.length)return;let n=0;for(let r=0;r<t.length;++r){const i=t[r];if(parseInt(i,10)===e)break;n+=this.#H[i].length}return n}getOrigin(){return this.#V[0]}getOrigins(){return this.#V}includesOrigin(e,t){for(let n=0;n<this.#V.length;++n)if(this.#V[n].isSimilar(e,t))return!0;return!1}getSize(e){let t=this.#j;if(e&&void 0!==e){let n=Oe([this.#j.get(0),this.#j.get(1),this.#j.get(2)],e);n=n.map(Math.abs),t=new Ie(n.concat(this.#j.getValues().slice(3)))}return t}#$(){const e=Ee(this.#V,this.#X);if(void 0!==e&&this.#W.get(2)!==e){g.trace("Updating slice spacing.");const t=this.#W.getValues();t[2]=e,this.#W=new Ae(t)}}getSpacing(e){this.#Z&&(this.#$(),this.#Z=!1);let t=this.#W;if(e&&void 0!==e){let n=Oe([this.#W.get(0),this.#W.get(1),this.#W.get(2)],e);n=n.map(Math.abs),t=new Ae(n)}return t}getRealSpacing(){return this.getSpacing(this.#X.getInverse().asOneAndZeros())}getOrientation(){return this.#X}getSliceIndex(e,t){let n=this.#V;void 0!==t&&(n=this.#H[t]);let r=0,i=e.getDistance(n[0]),a=0;for(let t=0;t<n.length;++t)a=e.getDistance(n[t]),a<i&&(i=a,r=t);const o=n[r],s=e.minus(o);return new y(this.#X.get(0,2),this.#X.get(1,2),this.#X.get(2,2)).dotProduct(s)>0?r+1:r}appendOrigin(e,t,n){if(void 0!==n&&this.#H[n].splice(t,0,e),void 0===n||n===this.#Y){this.#Z=!0,this.#V.splice(t,0,e);const n=this.#j.getValues();n[2]+=1,this.#j=new Ie(n)}}appendFrame(e,t){this.#H[t]=[e];const n=this.#j.getValues(),r=this.#W.getValues();4===n.length?n[3]+=1:(n.push(2),r.push(1)),this.#j=new Ie(n),this.#W=new Ae(r)}toString(){return"Origin: "+this.getOrigin()+", Size: "+this.getSize()+", Spacing: "+this.getSpacing()+", Orientation: "+this.getOrientation()}equals(e){return null!==e&&this.getOrigin().equals(e.getOrigin())&&this.getSize().equals(e.getSize())&&this.getSpacing().equals(e.getSpacing())}isInBounds(e){return this.isIndexInBounds(this.worldToIndex(e))}isIndexInBounds(e,t){return this.getSize().isInBounds(e,t)}indexToWorld(e){const t=this.getSpacing(),n=new P(e.get(0)*t.get(0),e.get(1)*t.get(1),e.get(2)*t.get(2)),r=this.getOrientation().multiplyPoint3D(n),i=e.getValues(),a=this.getOrigin();return i[0]=a.getX()+r.getX(),i[1]=a.getY()+r.getY(),i[2]=a.getZ()+r.getZ(),new I(i)}pointToWorld(e){const t=this.getSpacing(),n=new P(e.getX()*t.get(0),e.getY()*t.get(1),e.getZ()*t.get(2)),r=this.getOrientation().multiplyPoint3D(n),i=this.getOrigin();return new P(i.getX()+r.getX(),i.getY()+r.getY(),i.getZ()+r.getZ())}worldToIndex(t){const n=this.getOrigin(),r=new P(t.get(0)-n.getX(),t.get(1)-n.getY(),t.get(2)-n.getZ()),i=this.getOrientation().getInverse().multiplyPoint3D(r),a=t.getValues(),o=this.getSpacing();return a[0]=Math.round(i.getX()/o.get(0)),a[1]=Math.round(i.getY()/o.get(1)),a[2]=Math.round(i.getZ()/o.get(2)),new e(a)}worldToPoint(e){const t=this.getOrigin(),n=new P(e.get(0)-t.getX(),e.get(1)-t.getY(),e.get(2)-t.getZ()),r=this.getOrientation().getInverse().multiplyPoint3D(n),i=e.getValues(),a=this.getSpacing();return i[0]=r.getX()/a.get(0),i[1]=r.getY()/a.get(1),i[2]=r.getZ()/a.get(2),new P(i[0],i[1],i[2])}}function Oe(e,t){return t.getInverse().multiplyArray3D(e)}function _e(e,t){return t.multiplyArray3D(e)}function Ee(e,t,n){if(void 0===n&&(n=!0),e.length<=1)return;const r=t.getInverse();let i=r.multiplyVector3D(e[0]),a=r.multiplyVector3D(e[1]),o=Math.abs(i.getZ()-a.getZ());const s=[];for(let t=0;t<e.length-1;++t){i=r.multiplyVector3D(e[t]),a=r.multiplyVector3D(e[t+1]);const l=Math.abs(i.getZ()-a.getZ());if(0===l)throw new Error("Zero slice spacing."+i.toString()+" "+a.toString());l<o&&(o=l),n&&(b(o,l,v)||s.push(Math.abs(o-l)))}if(n&&0!==s.length){const e=function(e,t){return e+t},t=s.reduce(e)/s.length;t>1e-4&&g.warn("Varying slice spacing, mean delta: "+t.toFixed(3)+" ("+s.length+" case(s))")}return o}function Re(e){const t=e["00280010"];if(void 0===t)throw new Error("Missing DICOM image number of rows");if(0===t.value.length)throw new Error("Empty DICOM image number of rows");const n=e["00280011"];if(void 0===n)throw new Error("Missing DICOM image number of columns");if(0===n.value.length)throw new Error("Empty DICOM image number of columns");return[n.value[0],t.value[0]]}class Fe{getTime(e){}}class ke{checkElements(e){Re(e)}create(e,t,n){const r=Re(e),i=[r[0],r[1],1],o=e["00280008"];o&&i.push(o.value[0]);const s=new Ie(i),l=function(e){let t=1,n=1;const r=["00280030","00181164","00182010","00280034"];for(let i=0;i<r.length;++i){const a=e[r[i]];if(a&&2===a.value.length){t=parseFloat(a.value[0]),n=parseFloat(a.value[1]);break}}return 0===n&&(g.warn("Zero column spacing."),n=1),0===t&&(g.warn("Zero row spacing."),t=1),new Ae([n,t,1])}(e),c=e["00020010"].value[0],u=me(c),h=ge(c),d=pe(c),f=e["00200032"];let p=new Array(0,0,0);void 0!==f&&(p=[parseFloat(f.value[0]),parseFloat(f.value[1]),parseFloat(f.value[2])]);const m=e["00200037"];let S;if(void 0!==m){const e=new y(parseFloat(m.value[0]),parseFloat(m.value[1]),parseFloat(m.value[2])),t=new y(parseFloat(m.value[3]),parseFloat(m.value[4]),parseFloat(m.value[5])),n=e.crossProduct(t);S=new C([e.getX(),t.getX(),n.getX(),e.getY(),t.getY(),n.getY(),e.getZ(),t.getZ(),n.getZ()])}const v=new P(p[0],p[1],p[2]),b=(new Fe).getTime(e),w=new Le(v,s,l,S,b);let x;const D=e["00080018"];void 0!==D&&(x=D.value[0]);let T=1;const I=e["00280002"];void 0!==I&&(T=I.value[0]);const A=s.getTotalSize()*T;if(A!==t.length){if(g.warn("Badly sized pixel buffer: "+t.length+" != "+A),!(A<t.length))throw new Error("Underestimated buffer size, can't fix it...");t=t.slice(0,s.getTotalSize())}const L=new We(w,t,[x]),O=e["00280004"];if(void 0!==O){let e=O.value[0].toUpperCase();(u||h||d)&&"MONOCHROME1"!==e&&"MONOCHROME2"!==e&&(e="RGB"),"RGB"===e&&1===T&&(e="PALETTE COLOR"),L.setPhotometricInterpretation(e)}const _=e["00280006"];void 0!==_&&L.setPlanarConfiguration(_.value[0]);let E=1;const R=e["00281053"];if(void 0!==R){const e=parseFloat(R.value[0]);isNaN(e)||(E=e)}let F=0;const k=e["00281052"];if(void 0!==k){const e=parseFloat(k.value[0]);isNaN(e)||(F=e)}const M=new Pe(E,F);L.setRescaleSlopeAndIntercept(M);const q={numberOfFiles:n},U=e["00080060"];void 0!==U&&(q.Modality=U.value[0]);const B=e["00080016"];void 0!==B&&(q.SOPClassUID=B.value[0]);const N=e["0020000D"];void 0!==N&&(q.StudyInstanceUID=N.value[0]);const Q=e["0020000E"];void 0!==Q&&(q.SeriesInstanceUID=Q.value[0]);const G=e["00280101"];void 0!==G&&(q.BitsStored=G.value[0]);const z=e["00280103"];void 0!==z&&(q.PixelRepresentation=z.value[0]),q.IsSigned=1===q.PixelRepresentation;const V=function(e){let t;const n=["00281054","00541001"];for(let r=0;r<n.length;++r){const i=e[n[r]];void 0!==i&&(t=i.value[0])}return void 0!==t&&"CT"===e["00080060"].value[0]&&(t="HU"),t}(e);void 0!==V&&(q.pixelUnit=V);const j=e["00200052"];void 0!==j&&(q.FrameOfReferenceUID=j.value[0]);const W={},H=e["00281050"],Y=e["00281051"],X=e["00281055"];if(void 0!==H&&void 0!==Y){let e;for(let t=0;t<H.value.length;++t){const n=parseFloat(H.value[t]),r=parseFloat(Y.value[t]);n&&r&&0!==r&&(e="",void 0!==X&&(e=X.value[t]),""===e&&(e="Default"+t),W[e]={wl:[new a(n,r)],name:e}),0===r&&g.warn("Zero window width found in DICOM.")}}if(q.windowPresets=W,"PALETTE COLOR"===L.getPhotometricInterpretation()){const t=e["00281201"],n=e["00281202"],r=e["00281203"];let i,a,o;const s=e["00281101"];if(void 0!==s&&3===s.value.length)if(16===s.value[2]){let l=!1,c=s.value[0];0===c&&(c=65536);const u=t.vl;if(u!==2*c&&(l=!0,g.info("16bits lut but size is not double. desc: "+c+" vl: "+u)),8===parseInt(e["00280100"].value[0],10)&&(l=!0,g.info("Scaling 16bits color lut since bits allocated is 8.")),l){const e=function(e){return e>>8};i=t.value.map(e),a=n.value.map(e),o=r.value.map(e)}}else if(8===s.value[2]){g.info("Scaling 16bits color lut since the lut descriptor is 8.");let e=t.value.slice(0);i=new Uint8Array(e.buffer),e=n.value.slice(0),a=new Uint8Array(e.buffer),e=r.value.slice(0),o=new Uint8Array(e.buffer)}q.paletteLut={red:i,green:a,blue:o}}const Z=e["00082144"];return void 0!==Z&&(q.RecommendedDisplayFrameRate=parseInt(Z.value[0],10)),L.setMeta(q),L}}function Me(e,t){return JSON.stringify(e)===JSON.stringify(t)}function qe(e,t){const n=e[t.tag];if(1===t.type||2===t.type){if(void 0===n)throw new Error("Missing or empty "+t.name)}else if(void 0===n)return;let r,i=!1;if(r=1===n.value.length?n.value[0]:n.value,Array.isArray(r))for(let e=0;e<t.enum.length;++e){if(!Array.isArray(t.enum[e]))throw new Error("Cannot compare array and non array tag value.");if(J(t.enum[e],r)){i=!0;break}}else i=t.enum.includes(r);if(!i)throw new Error("Unsupported "+t.name+" value: "+r)}const Ue=[{name:"TransferSyntaxUID",tag:"x00020010",type:"1",enum:["1.2.840.10008.1.2.1"]},{name:"MediaStorageSOPClassUID",tag:"x00020002",type:"1",enum:["1.2.840.10008.5.1.4.1.1.66.4"]},{name:"SOPClassUID",tag:"x00020002",type:"1",enum:["1.2.840.10008.5.1.4.1.1.66.4"]},{name:"Modality",tag:"x00080060",type:"1",enum:["SEG"]},{name:"SegmentationType",tag:"x00620001",type:"1",enum:["BINARY"]},{name:"DimensionOrganizationType",tag:"x00209311",type:"3",enum:["3D"]},{name:"ImageType",tag:"x00080008",type:"1",enum:[["DERIVED","PRIMARY"]]},{name:"SamplesPerPixel",tag:"x00280002",type:"1",enum:[1]},{name:"PhotometricInterpretation",tag:"x00280004",type:"1",enum:["MONOCHROME2"]},{name:"PixelRepresentation",tag:"x00280103",type:"1",enum:[0]},{name:"BitsAllocated",tag:"x00280100",type:"1",enum:[1]},{name:"BitsStored",tag:"x00280101",type:"1",enum:[1]},{name:"HighBit",tag:"x00280102",type:"1",enum:[0]}];function Be(e){const t={meaning:e["00080104"].value[0]};if(e["00080100"])t.value=e["00080100"].value[0];else if(e["00080119"])t.longValue=e["00080119"].value[0];else{if(!e["00080120"])throw Error("Invalid code with no value, no long value and no urn value.");t.urnValue=e["00080120"].value[0]}if(void 0!==t.value||void 0!==t.longValue){if(!e["00080102"])throw Error("No coding sheme designator when code value or long value is present");t.schemeDesignator=e["00080102"].value[0]}return t}function Ne(e){const t={number:e["00620004"].value[0],label:e["00620005"].value[0],algorithmType:e["00620008"].value[0]};if(e["00620009"]&&(t.algorithmName=e["00620009"].value[0]),void 0!==e["0062000C"])t.displayValue=e["006200C"].value;else if(void 0!==e["0062000D"]){const r=e["0062000D"].value,i=function(e){return function(e){function t(e){let t=null;return t=e<=.0031308?12.92*e:1.055*Math.pow(e,.416666667)-.055,Math.min(1,Math.max(0,t))}const n=e.x/100,r=e.y/100,i=e.z/100;return{r:Math.round(255*t(3.2406*n-1.5372*r-.4986*i)),g:Math.round(255*t(-.9689*n+1.8758*r+.0415*i)),b:Math.round(255*t(.0557*n-.204*r+1.057*i))}}(function(e){function t(e){let t=null;return t=e>.206896552?Math.pow(e,3):.128418549*e-.017712903,t}const n=m,r=(e.l+16)/116;return{x:n.x*t(r+e.a/500),y:n.y*t(r),z:n.z*t(r-e.b/200)}}(e))}({l:.001525902*(n={l:r[0],a:r[1],b:r[2]}).l,a:.003891051*n.a-128,b:.003891051*n.b-128});t.displayValue=i}var n;if(void 0===e["00620003"])throw Error("Missing Segmented Property Category Code Sequence.");if(t.propertyCategoryCode=Be(e["00620003"].value[0]),void 0===e["0062000F"])throw Error("Missing Segmented Property Type Code Sequence.");return t.propertyTypeCode=Be(e["0062000F"].value[0]),void 0!==e["00620020"]&&(t.trackingId=e["00620020"].value[0],t.trackingUid=e["00620021"].value[0]),t}function Qe(e){if(void 0===e["00280030"])return null;const t=e["00280030"],n=[parseFloat(t.value[0]),parseFloat(t.value[1])];return void 0!==e["00180050"]?n.push(parseFloat(e["00180050"].value[0])):void 0!==e["00180088"]&&n.push(parseFloat(e["00180088"].value[0])),new Ae(n)}function Ge(e){const t=[];if(void 0!==e["00089124"]){const n=e["00089124"].value;for(let e=0;e<n.length;++e){const r=[];if(void 0!==n[e]["00082112"]){const t=n[e]["00082112"].value;for(let e=0;e<t.length;++e){const n={};void 0!==t[e]["00081150"]&&(n.referencedSOPClassUID=t[e]["00081150"].value[0]),void 0!==t[e]["00081155"]&&(n.referencedSOPInstanceUID=t[e]["00081155"].value[0]),r.push(n)}}t.push(r)}}const n=e["00209111"].value[0]["00209157"].value,r=e["0062000A"].value[0]["0062000B"].value[0],i=e["00209113"].value[0]["00200032"].value;for(let e=0;e<i.length;++e)i[e]=parseFloat(i[e]);const a={dimIndex:n,imagePosPat:i,derivationImages:t,refSegmentNumber:r};if(void 0!==e["00209116"]){const t=e["00209116"];if(0!==t.value.length){const e=t.value[0]["00200037"].value;void 0!==e&&(a.imageOrientationPatient=e)}}if(void 0!==e["00289110"]){const t=e["00289110"];if(0!==t.value.length){const e=Qe(t.value[0]);void 0!==e&&(a.spacing=e)}else g.warn("No shared functional group pixel measure sequence items.")}return a}class ze{checkElements(e){}create(t,n){for(let e=0;e<Ue.length;++e)qe(t,Ue[e]);const r=Re(t),i=new Ie([r[0],r[1],1]),a=i.getTotalSize();let o=1;const s=t["00280008"];if(void 0!==s&&(o=parseInt(s.value[0],10)),o!==n.length/a)throw new Error("Buffer and numberOfFrames meta are not equal."+o+" "+n.length/a);const l=function(e){const t=e["00209221"];if(void 0===t||1!==t.value.length)throw new Error("Unsupported dimension organization sequence length");const n=t.value[0]["00209164"].value[0],r=[],i=e["00209222"];if(void 0!==i){const e=i.value;if(2!==e.length)throw new Error("Unsupported dimension index sequence length");let t;for(let i=0;i<e.length;++i){const a=e[i]["00209164"].value[0];if(a!==n)throw new Error("Dimension Index Sequence contains a unknown Dimension Organization");t=e[i]["00209165"].value[0];const o={DimensionOrganizationUID:a,DimensionIndexPointer:t};void 0!==e[i]["00209421"]&&(o.DimensionDescriptionLabel=e[i]["00209421"].value[0]),r.push(o)}if("(0020,0032)"!==t)throw new Error("Unsupported non image position as last index")}return{organizations:{value:[{DimensionOrganizationUID:n}]},indices:{value:r}}}(t),c=t["00620002"];if(void 0===c)throw new Error("Missing or empty segmentation sequence");const u=[];let h,d,f=!1;for(let e=0;e<c.value.length;++e){const t=Ne(c.value[e]);void 0!==t.displayValue.r&&void 0!==t.displayValue.g&&void 0!==t.displayValue.b&&(f=!0),u.push(t)}const p=t[52009229];if(void 0!==p){const e=p.value[0];if(void 0!==e["00209116"]){const t=e["00209116"];0!==t.value.length?d=t.value[0]["00200037"].value:g.warn("No shared functional group plane orientation sequence items.")}if(void 0!==e["00289110"]){const t=e["00289110"];0!==t.value.length?h=Qe(t.value[0]):g.warn("No shared functional group pixel measure sequence items.")}}const m=function(e,t){return e.some((function(e){return Me(t,e)}))},S=function(e,t){return e.findIndex((function(e){return Me(t,e)}))},v=t[52009230];if(void 0===v)throw new Error("Missing or empty per frame functional sequence");if(o!==v.value.length)throw new Error("perFrameFuncGroupSequence meta and numberOfFrames are not equal.");const b=[];for(let e=0;e<v.value.length;++e)b.push(Ge(v.value[e]));const w=[];for(let e=0;e<b.length;++e){if(m(w,b[e].imagePosPat)||w.push(b[e].imagePosPat),void 0!==b[e].imageOrientationPatient)if(void 0===d)d=b[e].imageOrientationPatient;else if(!J(d,b[e].imageOrientationPatient))throw new Error("Unsupported multi orientation dicom seg.");if(void 0!==b[e].spacing)if(void 0===h)h=b[e].spacing;else if(!h.equals(b[e].spacing))throw new Error("Unsupported multi resolution dicom seg.")}if(void 0===h)throw new Error("No spacing found for DICOM SEG");if(void 0===d)throw new Error("No imageOrientationPatient found for DICOM SEG");const x=new y(parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2])),D=new y(parseFloat(d[3]),parseFloat(d[4]),parseFloat(d[5])),T=x.crossProduct(D),I=new C([x.getX(),D.getX(),T.getX(),x.getY(),D.getY(),T.getY(),x.getZ(),D.getZ(),T.getZ()]);w.sort(function(e){const t=e.getInverse();return function(e,n){const r=t.multiplyArray3D(e),i=t.multiplyArray3D(n);return r[2]-i[2]}}(I));const A=function(e){return new P(e[0],e[1],e[2])},L=[];for(let e=0;e<w.length;++e)L.push(A(w[e]));let O=h;const _=Ee(L,I,!1),E=h.getValues();void 0!==_&&_!==E[2]&&(E[2]=_,O=new Ae(E));const R=new Le(L[0],i,O,I),F=function(e){let t=e>1e-4;return t&&(t=e>.001,t?(t=e>.01,t||g.warn("Using larger+ real world epsilon in SEG pos pat adding")):g.warn("Using larger real world epsilon in SEG pos pat adding")),t},k=[];k.push(w[0]);let M=0;for(let t=1;t<w.length;++t){++M;let n=new e([0,0,M]),r=R.indexToWorld(n).get3D();const i=L[t];let a=i.getDistance(r);const o=a;for(;F(a);)if(g.debug("Adding intermediate pos pats for DICOM seg at "+r.toString()),k.push([r.getX(),r.getY(),r.getZ()]),++M,n=new e([0,0,M]),r=R.indexToWorld(n).get3D(),a=i.getDistance(r),a>o)throw new Error("Test distance is increasing when adding intermediate pos pats");k.push(w[t])}const q=k.length,U=new Le(L[0],i,O,I),B=[0];for(let e=1;e<q;++e)U.appendOrigin(A(k[e]),e),B.push(e);const N=function(e){return function(t){return t.number===e}},Q=f?3:1,G=new n.constructor(Q*a*q);G.fill(0);let z=null,V=null;for(let e=0;e<b.length;++e){M=S(k,b[e].imagePosPat),V=a*e,z=a*M;const t=u.find(N(b[e].refSegmentNumber)).displayValue;for(let e=0;e<a;++e)if(0!==n[V+e]){const n=Q*(z+e);f?(G[n]=t.r,G[n+1]=t.g,G[n+2]=t.b):G[n]=t}}const j=new We(U,G,B);f&&j.setPhotometricInterpretation("RGB");const W=function(){const e={};for(let t=0;t<Ue.length;++t){const n=Ue[t];e[n.name]=n.enum[0]}return e}();W.StudyDate=t["00080020"].value[0],W.StudyTime=t["00080030"].value[0],W.StudyInstanceUID=t["0020000D"].value[0],W.StudyID=t["00200010"].value[0],W.SeriesInstanceUID=t["0020000E"].value[0],W.SeriesNumber=t["00200011"].value[0],W.ReferringPhysicianName=t["00080090"].value[0],W.PatientName=t["00100010"].value[0],W.PatientID=t["00100020"].value[0],W.PatientBirthDate=t["00100030"].value[0],W.PatientSex=t["00100040"].value[0],W.Manufacturer=t["00080070"].value[0],W.ManufacturerModelName=t["00081090"].value[0],W.DeviceSerialNumber=t["00181000"].value[0],W.SoftwareVersions=t["00181020"].value[0],W.DimensionOrganizationSequence=l.organizations,W.DimensionIndexSequence=l.indices,W.custom={segments:u,frameInfos:b,SOPInstanceUID:t["00080018"].value[0]},W.numberOfFiles=q;const H=t["00200052"];H&&(W.FrameOfReferenceUID=H.value[0]);const Y=t["00282110"];return Y&&(W.LossyImageCompression=Y.value[0]),j.setMeta(W),j}}function Ve(e){return(new ke).create(e,e["7FE00010"].value[0],1)}function je(e){return(new ze).create(e,e["7FE00010"].value[0])}class We{#K;#T;#J;#t=new Pe(1,0);#ee=null;#te=!0;#ne=!0;#re="MONOCHROME2";#ie=0;#ae;#oe={};#se=null;#le=null;#ce=null;#ue=new Ce;constructor(e,t,n){this.#K=e,this.#T=t,this.#J=n,this.#ae=this.#T.length/this.#K.getSize().getTotalSize()}getImageUid(e){let t=this.#J[0];return 1!==this.#J.length&&void 0!==e&&(t=this.#J[this.getSecondaryOffset(e)]),t}getGeometry(){return this.#K}getBuffer(){return this.#T}canQuantify(){return 1===this.getNumberOfComponents()}canWindowLevel(){return null!==this.getPhotometricInterpretation().match(/MONOCHROME/)}canScroll(e){const t=this.getGeometry().getSize();let n=1;return void 0!==this.#oe.numberOfFiles&&(n=this.#oe.numberOfFiles),t.canScroll(e)||1!==n}#he(){return this.#K.getSize().getTotalSize(2)}getSecondaryOffset(e){return this.#K.getSize().indexToOffset(e,2)}getRescaleSlopeAndIntercept(e){let t=this.#t;if(!this.isConstantRSI()){if(void 0===e)throw new Error("Cannot get non constant RSI with empty slice index.");const n=this.getSecondaryOffset(e);void 0!==this.#ee[n]?t=this.#ee[n]:g.warn("undefined non constant rsi at "+n)}return t}#de(e){return this.#ee[e]}setRescaleSlopeAndIntercept(e,t){if(this.#te=this.#te&&e.isID(),this.#ne){if(!this.#t.equals(e))if(void 0===t)this.#t=e;else{this.#ne=!1,this.#ee=[];for(let e=0,t=this.#he();e<t;++e)this.#ee.push(e);this.#t=null,this.#ee.splice(t,0,e)}}else{if(void 0===t)throw new Error("Cannot store non constant RSI with empty slice index.");this.#ee.splice(t,0,e)}}isIdentityRSI(){return this.#te}isConstantRSI(){return this.#ne}getPhotometricInterpretation(){return this.#re}setPhotometricInterpretation(e){this.#re=e}getPlanarConfiguration(){return this.#ie}setPlanarConfiguration(e){this.#ie=e}getNumberOfComponents(){return this.#ae}getMeta(){return this.#oe}setMeta(e){this.#oe=e}getValueAtOffset(e){return this.#T[e]}getOffsets(e){1===this.#ae?e=[e]:3===this.#ae&&void 0!==e.r&&(e=[e.r,e.g,e.b]);const t=[];let n;for(let r=0;r<this.#T.length;r+=this.#ae){n=!0;for(let t=0;t<this.#ae;++t)if(this.#T[r+t]!==e[t]){n=!1;break}n&&t.push(r)}return t}hasValues(e){if(void 0===e||0===e.length)return[];const t=[];for(let n=0;n<e.length;++n)1===this.#ae?t.push([e[n]]):3===this.#ae&&t.push([e[n].r,e[n].g,e[n].b]);let n;1===this.#ae?n=function(e,t){return e[0]===t[0]}:3===this.#ae&&(n=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]});const r=function(e){return function(t){return n(t,e)}},i=new Array(e.length);i.fill(!1);const a=t.slice();let o,s;for(let e=0,n=this.#T.length;e<n;e+=this.#ae){s=[];for(let n=0;n<a.length;++n){o=!0;for(let t=0;t<this.#ae;++t)if(this.#T[e+t]!==a[n][t]){o=!1;break}o&&(i[t.findIndex(r(a[n]))]=!0,s.push(n))}for(let e=0;e<s.length;++e)a.splice(s[e],1);if(0===a.length)break}return i}clone(){const e=this.#T.slice(0),t=new We(this.getGeometry(),e,this.#J);if(this.isConstantRSI())t.setRescaleSlopeAndIntercept(this.getRescaleSlopeAndIntercept());else for(let e=0;e<this.#he();++e)t.setRescaleSlopeAndIntercept(this.#de(e),e);return t.setPhotometricInterpretation(this.getPhotometricInterpretation()),t.setPlanarConfiguration(this.getPlanarConfiguration()),t.setMeta(this.getMeta()),t}#fe(e){let t=this.#T;if(this.#T=ye(8*this.#T.BYTES_PER_ELEMENT,this.#oe.IsSigned?1:0,e),null===this.#T)throw new Error("Cannot reallocate data for image.");this.#T.set(t),t=null}appendSlice(t){if(null===t)throw new Error("Cannot append null slice");const n=t.getGeometry().getSize();let r=this.#K.getSize();if(1!==n.get(2))throw new Error("Cannot append more than one slice");if(r.get(0)!==n.get(0))throw new Error("Cannot append a slice with different number of columns");if(r.get(1)!==n.get(1))throw new Error("Cannot append a slice with different number of rows");if(!this.#K.getOrientation().equals(t.getGeometry().getOrientation(),1e-4))throw new Error("Cannot append a slice with different orientation");if(this.#re!==t.getPhotometricInterpretation())throw new Error("Cannot append a slice with different photometric interpretation");for(const e in this.#oe)if("windowPresets"!==e&&"numberOfFiles"!==e&&"custom"!==e&&this.#oe[e]!==t.getMeta()[e])throw new Error("Cannot append a slice with different "+e);const i=t.getGeometry().getInitialTime();let a=!1;void 0===i||this.#K.hasSlicesAtTime(i)||(this.appendFrame(i,t.getGeometry().getOrigin()),r=this.#K.getSize(),a=!0);const o=function(t,n){const r=n.getInitialTime(),i=[];return i.push(0),i.push(0),i.push(t.getSliceIndex(n.getOrigin(),r)),void 0!==r&&i.push(r),new e(i)}(this.#K,t.getGeometry()),s=this.#ae*r.getDimSize(2);if(void 0===this.#oe.numberOfFiles)throw new Error("Missing number of files for buffer manipulation.");const l=s*this.#oe.numberOfFiles;this.#T.length!==l&&this.#fe(l);const c=o.get(2);let u=c;void 0!==i&&(u+=this.#K.getCurrentNumberOfSlicesBeforeTime(i));const h=u*s,d=this.#K.getCurrentTotalNumberOfSlices()*s;h<d&&this.#T.set(this.#T.subarray(h,d),h+s),this.#T.set(t.getBuffer(),h),a||this.#K.appendOrigin(t.getGeometry().getOrigin(),c,i),this.setRescaleSlopeAndIntercept(t.getRescaleSlopeAndIntercept(),u);const f=this.#J.length;if(this.#J.splice(u,0,t.getImageUid()),void 0!==this.#oe.windowPresets){const e=this.#oe.windowPresets,n=t.getMeta().windowPresets,r=Object.keys(n);let i=null;for(let t=0;t<r.length;++t){i=r[t];const a=n[i],o=e[i];if(void 0!==o){if((void 0===o.perslice||!1===o.perslice)&&!o.wl[0].equals(a.wl[0])){o.perslice=!0;for(let e=0;e<f-1;++e)o.wl.push(o.wl[0])}void 0!==o.perslice&&!0===o.perslice&&e[i].wl.splice(u,0,a.wl[0])}else e[i]=n[i]}}}appendFrameBuffer(e,t){const n=this.#K.getSize(),r=this.#ae*n.getDimSize(2);if(void 0===this.#oe.numberOfFiles)throw new Error("Missing number of files for frame buffer manipulation.");const i=r*this.#oe.numberOfFiles;this.#T.length!==i&&this.#fe(i),t>=this.#oe.numberOfFiles?g.warn("Ignoring frame at index "+t+" (size: "+this.#oe.numberOfFiles+")"):(this.#T.set(e,r*t),this.appendFrame(t,new P(0,0,0)))}appendFrame(e,t){this.#K.appendFrame(t,e),this.#ge({type:"appendframe"})}getDataRange(){return this.#se||(this.#se=this.calculateDataRange()),this.#se}getRescaledDataRange(){return this.#le||(this.#le=this.calculateRescaledDataRange()),this.#le}getHistogram(){if(!this.#ce){const e=this.calculateHistogram();this.#se=e.dataRange,this.#le=e.rescaledDataRange,this.#ce=e.histogram}return this.#ce}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)};setAtOffsets(e,t){let n;for(let r=0,i=e.length;r<i;++r)n=e[r],this.#T[n]=t.r,this.#T[n+1]=t.g,this.#T[n+2]=t.b;this.#ge({type:"imagechange"})}setAtOffsetsAndGetOriginals(e,t){const n=[];for(let r=0;r<e.length;++r){const i=e[r];let a=3*i[0],o={r:this.#T[a],g:this.#T[a+1],b:this.#T[a+2]};const s=[];s.push({index:0,colour:o});for(let e=0;e<i.length;++e){a=3*i[e];const n={r:this.#T[a],g:this.#T[a+1],b:this.#T[a+2]};o.r===n.r&&o.g===n.g&&o.b===n.b||(s.push({index:e,colour:n}),o=n),this.#T[a]=t.r,this.#T[a+1]=t.g,this.#T[a+2]=t.b}n.push(s)}return this.#ge({type:"imagechange"}),n}setAtOffsetsWithIterator(e,t){for(let n=0;n<e.length;++n){const r=e[n];let i;i=void 0!==t&&void 0!==t.r?Te([{index:0,colour:t}],r.length):Te(t[n],r.length);let a=i.next();for(;!a.done;){const e=3*r[a.index];this.#T[e]=a.value.r,this.#T[e+1]=a.value.g,this.#T[e+2]=a.value.b,a=i.next()}}this.#ge({type:"imagechange"})}getValue(t,n,r,i){const a=new e([t,n,r,i||0]);return this.getValueAtOffset(this.getGeometry().getSize().indexToOffset(a))}getValueAtIndex(e){return this.getValueAtOffset(this.getGeometry().getSize().indexToOffset(e))}getRescaledValue(t,n,r,i){void 0===i&&(i=0);let a=this.getValue(t,n,r,i);if(!this.isIdentityRSI())if(this.isConstantRSI())a=this.getRescaleSlopeAndIntercept().apply(a);else{const o=new e([t,n,r,i]);a=this.getRescaleSlopeAndIntercept(o).apply(a)}return a}getRescaledValueAtIndex(e){return this.getRescaledValueAtOffset(this.getGeometry().getSize().indexToOffset(e))}getRescaledValueAtOffset(e){let t=this.getValueAtOffset(e);if(!this.isIdentityRSI())if(this.isConstantRSI())t=this.getRescaleSlopeAndIntercept().apply(t);else{const n=this.getGeometry().getSize().offsetToIndex(e);t=this.getRescaleSlopeAndIntercept(n).apply(t)}return t}calculateDataRange(){let e=this.getValueAtOffset(0),t=e,n=0;const r=this.getGeometry().getSize();let i=r.getTotalSize();r.length()>=3&&(i=r.getDimSize(3));for(let r=0;r<i;++r)n=this.getValueAtOffset(r),n>t&&(t=n),n<e&&(e=n);return{min:e,max:t}}calculateRescaledDataRange(){if(this.isIdentityRSI())return this.getDataRange();if(this.isConstantRSI()){const e=this.getDataRange(),t=this.getRescaleSlopeAndIntercept().apply(e.min),n=this.getRescaleSlopeAndIntercept().apply(e.max);return{min:t<n?t:n,max:t>n?t:n}}{let e=this.getRescaledValueAtOffset(0),t=e,n=0;const r=this.getGeometry().getSize();let i=r.getTotalSize();3===r.length()&&(i=r.getDimSize(3));for(let r=0;r<i;++r)n=this.getRescaledValueAtOffset(r),n>t&&(t=n),n<e&&(e=n);return{min:e,max:t}}}calculateHistogram(){const e=this.getGeometry().getSize(),t=[];let n=this.getValueAtOffset(0),r=n,i=0,a=this.getRescaledValueAtOffset(0),o=a,s=0;for(let l=0,c=e.getTotalSize();l<c;++l)i=this.getValueAtOffset(l),i>r&&(r=i),i<n&&(n=i),s=this.getRescaledValueAtOffset(l),s>o&&(o=s),s<a&&(a=s),t[s]=(t[s]||0)+1;const l={min:n,max:r},c={min:a,max:o},u=[];for(let e=a;e<=o;++e)u.push([e,t[e]||0]);return{dataRange:l,rescaledDataRange:c,histogram:u}}convolute2D(e){if(9!==e.length)throw new Error("The convolution matrix does not have a length of 9; it has "+e.length);const t=this.clone(),n=t.getBuffer(),r=this.getGeometry().getSize(),i=r.getDimSize(2)*this.getNumberOfComponents();for(let t=0;t<r.get(2);++t)this.convoluteBuffer(e,n,t*i);return t}convoluteBuffer(e,t,n){const r=this.getGeometry().getSize(),i=r.get(0),a=r.get(1),o=this.getNumberOfComponents();let s=1,l=1;3===o&&(0===this.getPlanarConfiguration()?s=3:l=r.getDimSize(2));const c=[];c[0]=(-i-1)*s,c[1]=-i*s,c[2]=(1-i)*s,c[3]=-s,c[4]=0,c[5]=1*s,c[6]=(i-1)*s,c[7]=i*s,c[8]=(i+1)*s;const u=[];u[0]=c[4],u[1]=c[4],u[2]=c[5],u[3]=c[4],u[4]=c[4],u[5]=c[5],u[6]=c[7],u[7]=c[7],u[8]=c[8];const h=[];h[0]=c[1],h[1]=c[1],h[2]=c[2],h[3]=c[4],h[4]=c[4],h[5]=c[5],h[6]=c[7],h[7]=c[7],h[8]=c[8];const d=[];d[0]=c[1],d[1]=c[1],d[2]=c[2],d[3]=c[4],d[4]=c[4],d[5]=c[5],d[6]=c[4],d[7]=c[4],d[8]=c[5];const f=[];f[0]=c[3],f[1]=c[4],f[2]=c[5],f[3]=c[3],f[4]=c[4],f[5]=c[5],f[6]=c[6],f[7]=c[7],f[8]=c[8];const g=[];g[0]=c[0],g[1]=c[1],g[2]=c[2],g[3]=c[3],g[4]=c[4],g[5]=c[5],g[6]=c[3],g[7]=c[4],g[8]=c[5];const p=[];p[0]=c[3],p[1]=c[4],p[2]=c[4],p[3]=c[3],p[4]=c[4],p[5]=c[4],p[6]=c[6],p[7]=c[7],p[8]=c[7];const m=[];m[0]=c[0],m[1]=c[1],m[2]=c[1],m[3]=c[3],m[4]=c[4],m[5]=c[4],m[6]=c[6],m[7]=c[7],m[8]=c[7];const S=[];S[0]=c[0],S[1]=c[1],S[2]=c[1],S[3]=c[3],S[4]=c[4],S[5]=c[4],S[6]=c[3],S[7]=c[4],S[8]=c[4];let y=n,v=0,b=[];for(let n=0;n<o;++n){y+=n*l;for(let n=0;n<a;++n)for(let r=0;r<i;++r){b=c,0===r&&0===n?b=u:0===r&&n===a-1?b=d:r===i-1&&0===n?b=p:r===i-1&&n===a-1?b=S:0===r&&n!==a-1&&0!==n?b=h:r===i-1&&n!==a-1&&0!==n?b=m:0!==r&&r!==i-1&&0===n?b=f:0!==r&&r!==i-1&&n===a-1&&(b=g),v=0;for(let t=0;t<9;++t)v+=this.getValueAtOffset(y+b[t])*e[t];t[y]=v,y+=s}}}transform(e){const t=this.clone(),n=t.getBuffer();for(let r=0,i=n.length;r<i;++r)n[r]=e(t.getValueAtOffset(r));return t}compose(e,t){const n=this.clone(),r=n.getBuffer();for(let n=0,i=r.length;n<i;++n)r[n]=Math.floor(t(this.getValueAtOffset(n),e.getValueAtOffset(n)));return n}}class He{create(e,t){const n=new Ze(t);if("MONOCHROME1"===t.getPhotometricInterpretation())n.setDefaultColourMap(f.invPlain);else if("PALETTE COLOR"===t.getPhotometricInterpretation()){const e=t.getMeta().paletteLut;void 0!==e&&n.setDefaultColourMap(e)}let r={};if(void 0!==t.getMeta().windowPresets&&(r=t.getMeta().windowPresets),r.minmax={name:"minmax"},void 0!==i){const e=t.getMeta().Modality;for(const t in i[e]){const n=i[e][t];r[t]={wl:[new a(n.center,n.width)],name:t}}}return n.setWindowPresets(r),n.init(),n}}const Ye=["wlchange","wlpresetadd","colourchange","positionchange","opacitychange","alphafuncchange"];function Xe(e,t){return(new He).create(e,t)}class Ze{#pe;#me={};#Se={minmax:{name:"minmax"}};#ye=null;#ve=null;#be=f.plain;#Ce=null;#X;#ue=new Ce;constructor(t){this.#pe=t,this.#pe.addEventListener("appendframe",(()=>{const t=this.getCurrentIndex();if(3===t.length()){const n=t.getValues();n.push(0),this.setCurrentIndex(new e(n))}}))}getImage(){return this.#pe}setImage(e){this.#pe=e}getOrientation(){return this.#X}setOrientation(e){this.#X=e}init(){this.setInitialIndex()}setInitialIndex(){const t=this.#pe.getGeometry().getSize(),n=new Array(t.length());n.fill(0),n[0]=Math.floor(t.get(0)/2),n[1]=Math.floor(t.get(1)/2),n[2]=Math.floor(t.get(2)/2),this.setCurrentIndex(new e(n),!0)}getPlaybackMilliseconds(e){return e||(e=10),Math.round(1e3/e)}#we=function(e,t){return 255};getAlphaFunction(){return this.#we}setAlphaFunction(e){this.#we=e,this.#ge({type:"alphafuncchange"})}getCurrentWindowLut(e){this.getCurrentIndex()||this.setInitialIndex();const t=this.getCurrentIndex();void 0===e&&(e=this.#pe.getRescaleSlopeAndIntercept(t));let n=null;if(this.#ye&&void 0!==this.#Se[this.#ye]&&void 0!==this.#Se[this.#ye].perslice&&!0===this.#Se[this.#ye].perslice){const e=this.#pe.getSecondaryOffset(t);n=this.#Se[this.#ye].wl[e]}n||(this.#ve||this.setWindowLevelPresetById(0,!0),n=this.#ve);let i=this.#me[e.toString()];if(void 0===i){const e=new r(this.#pe.getRescaleSlopeAndIntercept(),this.#pe.getMeta().BitsStored),t=new s(e,this.#pe.getMeta().IsSigned);this.addWindowLut(t),i=t}const a=i.getWindowLevel();return n.equals(a)||(i.setWindowLevel(n),i.update(),a&&a.getWidth()===n.getWidth()&&a.getCenter()===n.getCenter()||this.#ge({type:"wlchange",value:[n.getCenter(),n.getWidth()],wc:n.getCenter(),ww:n.getWidth(),skipGenerate:!0})),i}addWindowLut(e){const t=e.getRescaleLut().getRSI();this.#me[t.toString()]=e}getWindowPresets(){return this.#Se}getWindowPresetsNames(){return Object.keys(this.#Se)}setWindowPresets(e){this.#Se=e}setDefaultColourMap(e){this.#be=e}addWindowPresets(e){const t=Object.keys(e);let n=null;for(let r=0;r<t.length;++r)if(n=t[r],void 0!==this.#Se[n]){if(void 0!==this.#Se[n].perslice&&!0===this.#Se[n].perslice)throw new Error("Cannot add perslice preset");this.#Se[n]=e[n]}else this.#Se[n]=e[n],this.#ge({type:"wlpresetadd",name:n})}getColourMap(){return this.#be}setColourMap(e){this.#be=e,this.#ge({type:"colourchange",wc:this.getCurrentWindowLut().getWindowLevel().getCenter(),ww:this.getCurrentWindowLut().getWindowLevel().getWidth()})}getCurrentPosition(){return this.#Ce}getCurrentIndex(){const e=this.getCurrentPosition();return e?this.getImage().getGeometry().worldToIndex(e):null}canSetPosition(e){const t=this.#pe.getGeometry(),n=t.worldToIndex(e),r=[this.getScrollIndex()];return 4===n.length()&&r.push(3),t.isIndexInBounds(n,r)}getOrigin(e){const t=this.#pe.getGeometry();let n=0;return void 0!==e&&(n=t.worldToIndex(e).get(2)),t.getOrigins()[n]}setCurrentPosition(e,t){const n=this.#pe.getGeometry(),r=n.worldToIndex(e),i=[this.getScrollIndex()];return 4===r.length()&&i.push(3),n.isIndexInBounds(r,i)?this.setCurrentIndex(r,t):(t||this.#ge({type:"positionchange",value:[r.getValues(),e.getValues()],valid:!1}),!1)}setCurrentIndex(e,t){void 0===t&&(t=!1);const n=this.#pe.getGeometry(),r=n.indexToWorld(e),i=[this.getScrollIndex()];if(4===e.length()&&i.push(3),!n.isIndexInBounds(e,i))return!1;let a=null,o=null;if(this.getCurrentPosition()&&(o=this.getCurrentIndex()),o)if(o.canCompare(e))a=o.compare(e);else{a=[];const t=Math.min(o.length(),e.length());for(let n=0;n<t;++n)o.get(n)!==e.get(n)&&a.push(n);const n=Math.max(o.length(),e.length());for(let e=t;e<n;++e)a.push(e)}else{a=[];for(let t=0;t<e.length();++t)a.push(t)}if(this.#Ce=r,!t){const t={type:"positionchange",value:[e.getValues(),r.getValues()],diffDims:a,data:{imageUid:this.#pe.getImageUid(e)}};if(this.#pe.canQuantify()){const n=this.#pe.getRescaledValueAtIndex(e);t.value.push(n)}this.#ge(t)}return!0}setWindowLevel(e,t,n,r){if(t<1)return;void 0===n&&(n="manual"),void 0===r&&(r=!1);const i=new a(e,t);if(!i.equals(this.#ve)){const a=!this.#ve||this.#ve.getWidth()!==t,o=!this.#ve||this.#ve.getCenter()!==e;this.#ve=i,this.#ye=n,(a||o)&&this.#ge({type:"wlchange",value:[e,t],wc:e,ww:t,skipGenerate:r})}}setWindowLevelPreset(e,t){const n=this.getWindowPresets()[e];if(void 0===n)throw new Error("Unknown window level preset: '"+e+"'");"minmax"===e&&void 0===n.wl&&(n.wl=[this.getWindowLevelMinMax()]);let r=n.wl[0];if(void 0!==n.perslice&&!0===n.perslice){const e=this.#pe.getSecondaryOffset(this.getCurrentIndex());r=n.wl[e]}this.setWindowLevel(r.getCenter(),r.getWidth(),e,t)}setWindowLevelPresetById(e,t){const n=Object.keys(this.getWindowPresets());this.setWindowLevelPreset(n[e],t)}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)};getWindowLevelMinMax(){const e=this.getImage().getRescaledDataRange(),t=e.min;let n=e.max-t;return n<1&&(g.warn("Zero or negative window width, defaulting to one."),n=1),new a(t+n/2,n)}setWindowLevelMinMax(){const e=this.getWindowLevelMinMax();this.setWindowLevel(e.getCenter(),e.getWidth(),"minmax")}generateImageData(e,t){void 0===t&&(this.getCurrentIndex()||this.setInitialIndex(),t=this.getCurrentIndex());const n=this.getImage(),r=De(n,t,!1,this.getOrientation()),i=n.getPhotometricInterpretation();switch(i){case"MONOCHROME1":case"MONOCHROME2":!function(e,t,n,r,i){let a=0,o=0,s=t.next();for(;!s.done;)o=r.getValue(s.value),e.data[a]=i.red[o],e.data[a+1]=i.green[o],e.data[a+2]=i.blue[o],e.data[a+3]=n(s.value,s.index),a+=4,s=t.next()}(e,r,this.getAlphaFunction(),this.getCurrentWindowLut(),this.getColourMap());break;case"PALETTE COLOR":!function(e,t,n,r,i){const a=function(e){return e>>8};i&&g.info("Scaling 16bits data to 8bits.");let o=0,s=0,l=t.next();for(;!l.done;)s=l.value,i?(e.data[o]=a(r.red[s]),e.data[o+1]=a(r.green[s]),e.data[o+2]=a(r.blue[s])):(e.data[o]=r.red[s],e.data[o+1]=r.green[s],e.data[o+2]=r.blue[s]),e.data[o+3]=n(s,l.index),o+=4,l=t.next()}(e,r,this.getAlphaFunction(),this.getColourMap(),16===n.getMeta().BitsStored);break;case"RGB":!function(e,t,n){let r=0,i=t.next();for(;!i.done;)e.data[r]=i.value[0],e.data[r+1]=i.value[1],e.data[r+2]=i.value[2],e.data[r+3]=n(i.value,i.index),r+=4,i=t.next()}(e,r,this.getAlphaFunction());break;case"YBR_FULL":!function(e,t,n){let r=0,i=null,a=t.next();for(;!a.done;)o=a.value[0],s=a.value[1],i={r:o+1.402*((l=a.value[2])-128),g:o-.34414*(s-128)-.71414*(l-128),b:o+1.772*(s-128)},e.data[r]=i.r,e.data[r+1]=i.g,e.data[r+2]=i.b,e.data[r+3]=n(a.value,a.index),r+=4,a=t.next();var o,s,l}(e,r,this.getAlphaFunction());break;default:throw new Error("Unsupported photometric interpretation: "+i)}}incrementIndex(t,n){const r=this.getCurrentIndex(),i=new Array(r.length());i.fill(0),t<i.length?i[t]=1:console.warn("Cannot increment given index: ",t,i.length);const a=new e(i),o=r.add(a);return this.setCurrentIndex(o,n)}decrementIndex(t,n){const r=this.getCurrentIndex(),i=new Array(r.length());i.fill(0),t<i.length?i[t]=-1:console.warn("Cannot decrement given index: ",t,i.length);const a=new e(i),o=r.add(a);return this.setCurrentIndex(o,n)}getScrollIndex(){let e=null;const t=this.getOrientation();return e=void 0!==t?t.getThirdColMajorDirection():2,e}decrementScrollIndex(e){return this.decrementIndex(this.getScrollIndex(),e)}incrementScrollIndex(e){return this.incrementIndex(this.getScrollIndex(),e)}}class $e{#W;#xe;#De;#Te;constructor(e,t,n){this.#W=e,this.#xe=t,this.#De=n,this.#Te=function(e,t){let n=e.asOneAndZeros().multiply(t);return e.asOneAndZeros().getAbs().equals(x().getAbs())&&(n=n.getAbs()),n}(t,n)}getOffset3DFromPlaneOffset(e){const t=new y(e.x,e.y,0),n=this.getTargetDeOrientedVector3D(t);return new y(n.getX()*this.#W.get(0),n.getY()*this.#W.get(1),n.getZ()*this.#W.get(2))}getPlaneOffsetFromOffset3D(e){const t=new y(e.x/this.#W.get(0),e.y/this.#W.get(1),e.z/this.#W.get(2)),n=this.getTargetOrientedVector3D(t);return{x:n.getX(),y:n.getY()}}getTargetOrientedVector3D(e){let t=e;return void 0!==this.#Te&&(t=this.#Te.getInverse().multiplyVector3D(e)),t}getTargetDeOrientedVector3D(e){let t=e;return void 0!==this.#Te&&(t=this.#Te.multiplyVector3D(e)),t}getTargetDeOrientedPoint3D(e){let t=e;return void 0!==this.#Te&&(t=this.#Te.multiplyPoint3D(e)),t}getImageOrientedVector3D(e){let t=e;if(void 0!==this.#De){const n=_e([e.getX(),e.getY(),e.getZ()],this.#De);t=new y(n[0],n[1],n[2])}return t}getImageOrientedPoint3D(e){let t=e;if(void 0!==this.#De){const n=_e([e.getX(),e.getY(),e.getZ()],this.#De);t=new P(n[0],n[1],n[2])}return t}getImageDeOrientedVector3D(e){let t=e;if(void 0!==this.#De){const n=Oe([e.getX(),e.getY(),e.getZ()],this.#De);t=new y(n[0],n[1],n[2])}return t}getImageDeOrientedPoint3D(e){let t=e;if(void 0!==this.#De){const n=Oe([e.getX(),e.getY(),e.getZ()],this.#De);t=new P(n[0],n[1],n[2])}return t}getTargetOrientedPositiveXYZ(e){const t=Oe([e.x,e.y,e.z],this.#Te);return{x:t[0],y:t[1],z:t[2]}}getScrollIndex(){let e=null;return e=void 0!==this.#De?this.#De.getThirdColMajorDirection():2,e}getNativeScrollIndex(){let e=null;return e=void 0!==this.#xe?this.#xe.getThirdColMajorDirection():2,e}}class Ke{#Pe;#Ie;#Ae=[];constructor(e){this.#Pe=e,this.#Ie=e.getMeta().custom.segments}hasSegment(e){return void 0!==this.getSegment(e)}maskHasSegments(e){const t=[],n=[];for(let r=0;r<e.length;++r){const i=this.getSegment(e[r]);void 0!==i?t.push(i.displayValue):(g.warn("Unknown segment in maskHasSegments: "+e[r]),n.push(r))}const r=this.#Pe.hasValues(t);for(let e=0;e<n.length;++e)r.splice(n[e],0,!1);return r}getSegment(e){return this.#Ie.find((function(t){return t.number===e}))}getSegments(){return this.#Ie}setSegments(e){this.#Ie=e}setHiddenSegments(e){this.#Ae=e}#Le(e){return this.#Ae.findIndex((function(t){return t===e}))}isHidden(e){return-1!==this.#Le(e)}addToHidden(e){this.isHidden(e)?g.warn("Segment is allready in the hidden list: "+e):this.#Ae.push(e)}removeFromHidden(e){const t=this.#Le(e);-1!==t?this.#Ae.splice(t,1):g.warn("Segment is not in the hidden list: "+e)}getAlphaFunc(){const e=[{r:0,g:0,b:0}];for(let t=0;t<this.#Ae.length;++t){const n=this.getSegment(this.#Ae[t]);void 0!==n&&e.push(n.displayValue)}return function(t){for(let n=0;n<e.length;++n)if(t[0]===e[n].r&&t[1]===e[n].g&&t[2]===e[n].b)return 0;return 255}}deleteSegment(e,t,n){const r=new Je(this.#Pe,this.getSegment(e));r.onExecute=t,r.onUndo=t,r.isValid()&&(r.execute(),n(r),this.isHidden(e)&&this.removeFromHidden(e))}}class Je{#Pe;#Oe;#_e;#Ee;constructor(e,t,n){this.#Pe=e,this.#Oe=t,this.#_e=void 0!==n&&n,this.#Ee=e.getOffsets(t.displayValue)}getName(){return"Delete-segment"}isValid(){return 0!==this.#Ee.length}execute(){this.#Pe.setAtOffsets(this.#Ee,{r:0,g:0,b:0}),this.#_e||this.onExecute({type:"masksegmentdelete",segmentnumber:this.#Oe.number})}undo(){this.#Pe.setAtOffsets(this.#Ee,this.#Oe.displayValue),this.onUndo({type:"masksegmentredraw",segmentnumber:this.#Oe.number})}onExecute(e){}onUndo(e){}}class et{#L;#Re;#Fe;#ke;#Me=null;#qe;constructor(e,t){if(void 0===e.getImage())throw new Error("View does not have an image, cannot setup controller");this.#L=e,this.#Re=t,this.#Fe=new $e(e.getImage().getGeometry().getRealSpacing(),e.getImage().getGeometry().getOrientation(),e.getOrientation()),"SEG"===e.getImage().getMeta().Modality&&(this.#ke=new Ke(e.getImage()))}#ue=new Ce;getPlaneHelper(){return this.#Fe}isMask(){return void 0!==this.#ke}getMaskSegmentHelper(){return this.#ke}applyHiddenSegments(){this.isMask&&this.setViewAlphaFunction(this.#ke.getAlphaFunc())}deleteSegment(e,t){this.isMask&&this.#ke.deleteSegment(e,this.#ge,t)}initialise(){this.setWindowLevelPresetById(0),this.setCurrentPosition(this.getPositionFromPlanePoint(0,0))}getWindowLevelPresetsNames(){return this.#L.getWindowPresetsNames()}addWindowLevelPresets(e){return this.#L.addWindowPresets(e)}setWindowLevelPreset(e){this.#L.setWindowLevelPreset(e)}setWindowLevelPresetById(e){this.#L.setWindowLevelPresetById(e)}isPlaying(){return null!==this.#Me}getCurrentPosition(){return this.#L.getCurrentPosition()}getCurrentIndex(){return this.#L.getCurrentIndex()}getCurrentOrientedIndex(){let t=this.#L.getCurrentIndex();if(void 0!==this.#L.getOrientation()){const n=this.#Fe.getImageDeOrientedVector3D(new y(t.get(0),t.get(1),t.get(2)));t=new e([n.getX(),n.getY(),n.getZ()])}return t}getScrollIndex(){return this.#L.getScrollIndex()}getCurrentScrollIndexValue(){return this.#L.getCurrentIndex().get(this.#L.getScrollIndex())}getOrigin(e){return this.#L.getOrigin(e)}getCurrentScrollPosition(){const e=this.#L.getScrollIndex();return this.#L.getCurrentPosition().get(e)}generateImageData(e,t){this.#L.generateImageData(e,t)}setImage(e,t){this.#L.setImage(e),this.#qe=t}get2DSpacing(){const e=this.#L.getImage().getGeometry().getSpacing();return[e.get(0),e.get(1)]}getRescaledImageValue(e){const t=this.#L.getImage();if(!t.canQuantify())return;const n=t.getGeometry(),r=n.worldToIndex(e);let i;return n.isIndexInBounds(r)&&(i=t.getRescaledValueAtIndex(r)),i}getPixelUnit(){return this.#L.getImage().getMeta().pixelUnit}getImageRegionValues(t,n){let r=this.#L.getImage();const i=this.#L.getOrientation();let a=this.getCurrentIndex(),o=!0;if(!i.equals(w())){const t=xe(De(r,a,o,i)),n=r.getGeometry().getSize(i).getValues();n[2]=1;const s=new Ie(n),l=r.getGeometry().getSpacing(i).getValues();l[2]=1;const c=new Ae(l),u=new P(0,0,0),h=new Le(u,s,c);r=new We(h,t),a=new e([0,0,0]),o=!1}const s=function(e,t,n,r,i){if(1!==e.getNumberOfComponents())throw new Error("Unsupported number of components for region iterator: "+e.getNumberOfComponents());void 0===n&&(n=!1);let a=null;a=n?function(t){return e.getRescaledValueAtOffset(t)}:function(t){return e.getValueAtOffset(t)};const o=e.getGeometry().getSize();void 0===r&&(r=new T(0,0)),void 0===i&&(i=new T(o.get(0)-1,o.get(1)));const s=o.indexToOffset(t.getWithNew2D(r.getX(),r.getY())),l=o.indexToOffset(t.getWithNew2D(i.getX(),i.getY()-1)),c=Math.max(1,i.getX()-r.getX());return function(e,t,n,r,i,a){let o=t,s=0;return{next:function(){if(o<n){const t={value:e(o),done:!1,index:o};return s+=1,o+=1,s===i&&(s=0,o+=a),t}return{done:!0,index:n}}}}(a,s,l+1,0,c,o.get(0)-c)}(r,a,o,t,n);let l=[];return s&&(l=xe(s)),l}getImageVariableRegionValues(e){const t=function(e,t,n,r){if(1!==e.getNumberOfComponents())throw new Error("Unsupported number of components for region iterator: "+e.getNumberOfComponents());void 0===n&&(n=!1);let i=null;i=n?function(t){return e.getRescaledValueAtOffset(t)}:function(t){return e.getValueAtOffset(t)};const a=e.getGeometry().getSize(),o=[];let s,l=null,c=null,u=null;for(let e=0;e<r.length;++e){s=r[e];const t=s[1][0]-s[0][0];0!==t&&(u=e,l||(l=s[0]),o.push([s[0][0],t,a.get(0)-s[1][0]]))}if(null!==u&&(c=r[u][1]),0!==o.length)return function(e,t,n,r,i){let a=t,o=0,s=0;return{next:function(){if(a<n){const t={value:e(a),done:!1,index:a};return s+=1,a+=1,s===i[o][1]&&(s=0,a+=i[o][2],o+=1,o<i.length&&(a+=i[o][0])),t}return{done:!0,index:n}}}}(i,a.indexToOffset(t.getWithNew2D(l[0],l[1])),a.indexToOffset(t.getWithNew2D(c[0],c[1]))+1,0,o)}(this.#L.getImage(),this.getCurrentIndex(),!0,e);let n=[];return t&&(n=xe(t)),n}canQuantifyImage(){return this.#L.getImage().canQuantify()}canWindowLevel(){return this.#L.getImage().canWindowLevel()}canScroll(){return this.#L.getImage().canScroll(this.#L.getOrientation())}getImageSize(){return this.#L.getImage().getGeometry().getSize(this.#L.getOrientation())}getImageWorldSize(){const e=this.#L.getImage().getGeometry(),t=e.getSize(this.#L.getOrientation()).get2D(),n=e.getSpacing(this.#L.getOrientation()).get2D();return{x:t.x*n.x,y:t.y*n.y}}getImageRescaledDataRange(){return this.#L.getImage().getRescaledDataRange()}equalImageMeta(e){const t=this.#L.getImage().getMeta(),n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];if(void 0===t[i])return!1;if(t[i]!==e[i])return!1}return!0}canSetPosition(e){return this.#L.canSetPosition(e)}setCurrentPosition(e,t){return this.#L.setCurrentPosition(e,t)}getPositionFromPlanePoint(e,t){const n=this.getCurrentScrollIndexValue(),r=new P(e,t,n),i=this.#Fe.getImageOrientedPoint3D(r),a=this.#L.getImage().getGeometry().pointToWorld(i);return this.getCurrentPosition().mergeWith3D(a)}getPlanePositionFromPosition(e){const t=this.#L.getImage().getGeometry().worldToPoint(e),n=this.#Fe.getImageDeOrientedPoint3D(t);return{x:n.getX(),y:n.getY()}}setCurrentIndex(e,t){return this.#L.setCurrentIndex(e,t)}getPlanePositionFromPlanePoint(e){const t=this.getCurrentScrollIndexValue(),n=new P(e.x,e.y,t),r=this.#Fe.getTargetDeOrientedPoint3D(n),i=this.#L.getImage().getGeometry().getRealSpacing();return new P(r.getX()*i.get(0),r.getY()*i.get(1),r.getZ()*i.get(2))}getOffset3DFromPlaneOffset(e){return this.#Fe.getOffset3DFromPlaneOffset(e)}incrementIndex(e,t){return this.#L.incrementIndex(e,t)}decrementIndex(e,t){return this.#L.decrementIndex(e,t)}decrementScrollIndex(e){return this.#L.decrementScrollIndex(e)}incrementScrollIndex(e){return this.#L.incrementScrollIndex(e)}play(){if(this.canScroll())if(null===this.#Me){const t=this.#L.getImage(),n=t.getMeta().RecommendedDisplayFrameRate,r=this.#L.getPlaybackMilliseconds(n),i=t.getGeometry().getSize().canScroll3D();this.#Me=setInterval((()=>{let t=!1;if(t=i?this.incrementScrollIndex():this.incrementIndex(3),!t){const t=this.getCurrentIndex().getValues(),n=this.#L.getOrientation();i?t[n.getThirdColMajorDirection()]=0:t[3]=0;const r=new e(t),a=this.#L.getImage().getGeometry();this.setCurrentPosition(a.indexToWorld(r))}}),r)}else this.stop()}stop(){null!==this.#Me&&(clearInterval(this.#Me),this.#Me=null)}getWindowLevel(){return{width:this.#L.getCurrentWindowLut().getWindowLevel().getWidth(),center:this.#L.getCurrentWindowLut().getWindowLevel().getCenter()}}setWindowLevel(e,t){this.#L.setWindowLevel(e,t)}getColourMap(){return this.#L.getColourMap()}setColourMap(e){this.#L.setColourMap(e)}setViewAlphaFunction(e){this.#L.setAlphaFunction(e)}setColourMapFromName(e){if(!f[e])throw new Error("Unknown colour map: '"+e+"'");this.setColourMap(f[e])}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{e.dataid=this.#qe,this.#ue.fireEvent(e)}}const tt=["mousedown","mousemove","mouseup","mouseout","wheel","dblclick","touchstart","touchmove","touchend"],nt={openRoiDialog(e,t){const n=prompt("Label",e.textExpr);null!==n&&(e.textExpr=n,t(e))}};function rt(e){let t=0,n=0;if(0!==e.length&&void 0!==e[0].target){let r=e[0].target.offsetParent;for(;r;)isNaN(r.offsetLeft)||(t+=r.offsetLeft),isNaN(r.offsetTop)||(n+=r.offsetTop),r=r.offsetParent}else g.debug("No touch target offset parent.");const r=[];for(let i=0;i<e.length;++i)r.push({x:e[i].pageX-t,y:e[i].pageY-n});return r}function it(e){let t=[];return void 0!==e.targetTouches&&0!==e.targetTouches.length?t=rt(e.targetTouches):void 0!==e.changedTouches&&0!==e.changedTouches.length?t=rt(e.changedTouches):t.push({x:e.offsetX,y:e.offsetY}),t}function at(e,t){const n=document.createElement("canvas");n.width=e,n.height=t;const r=document.createElement("canvas");r.width=1,r.height=1;const i=n.getContext("2d"),a=r.getContext("2d");return i&&(i.fillRect(e-1,t-1,1,1),a.drawImage(n,e-1,t-1,1,1,0,0,1,1)),a&&0!==a.getImageData(0,0,1,1).data[3]}class ot{#Ue;#Be=null;#Ne=null;#Qe=null;#Ge=null;#ze=!0;#Ve=null;#je;#We;#He=1;#Ye={x:1,y:1};#Xe={x:1,y:1};#Ze={x:0,y:0};#$e={x:0,y:0};#Ke={x:0,y:0};#Je={x:0,y:0};#et={x:0,y:0};#tt=null;#qe=null;#ue=new Ce;#nt=!1;constructor(e){this.#Ue=e,this.#Ue.className+=" viewLayer"}getDataIndex(){return this.#qe}enableImageSmoothing(e){this.#nt=e}setView(e,t){this.#qe=t,e.addEventListener("wlchange",this.#rt),e.addEventListener("colourchange",this.#it),e.addEventListener("positionchange",this.#at),e.addEventListener("alphafuncchange",this.#ot);for(let t=0;t<Ye.length;++t)e.addEventListener(Ye[t],this.#ge);this.#Be=new et(e,t)}getViewController(){return this.#Be}getImageData(){return this.#Ve}onimageset=e=>{this.#qe===e.dataid&&(this.#Be.setImage(e.value[0],this.#qe),this.#st(this.#Be.getImageSize().get2D()),this.#tt=!0)};onimagechange=e=>{this.#qe===e.dataid&&(this.#tt=!0)};getId(){return this.#Ue.id}getBaseSize(){return this.#je}getImageWorldSize(){return this.#Be.getImageWorldSize()}getOpacity(){return this.#He}setOpacity(e){if(e===this.#He)return;this.#He=Math.min(Math.max(e,0),1);const t={type:"opacitychange",value:[this.#He]};this.#ge(t)}addFlipOffsetX(){this.#et.x+=this.#Ne.width/this.#Ye.x,this.#Ze.x+=this.#et.x}addFlipOffsetY(){this.#et.y+=this.#Ne.height/this.#Ye.y,this.#Ze.y+=this.#et.y}setScale(e,t){const n=this.#Be.getPlaneHelper(),r=n.getTargetOrientedPositiveXYZ(e),i={x:this.#Xe.x*r.x,y:this.#Xe.y*r.y};if(1===Math.abs(e.x)&&1===Math.abs(e.y)&&1===Math.abs(e.z)){const e={x:this.#Ze.x-this.#Je.x,y:this.#Ze.y-this.#Je.y};this.#Je={x:0,y:0},this.#Ze=e}else if(void 0!==t){let e=n.getPlaneOffsetFromOffset3D({x:t.getX(),y:t.getY(),z:t.getZ()});e={x:e.x+this.#$e.x,y:e.y+this.#$e.y};const r=Dt(this.#Ze,this.#Ye,i,e),a={x:this.#Je.x+r.x-this.#Ze.x,y:this.#Je.y+r.y-this.#Ze.y};this.#Je=a,this.#Ze=r}this.#Ye=i}setBaseOffset(e,t){const n=this.#Be.getPlaneHelper(),r=n.getNativeScrollIndex(),i=n.getPlaneOffsetFromOffset3D({x:0===r?e.getX():t.getX(),y:1===r?e.getY():t.getY(),z:2===r?e.getZ():t.getZ()}),a=this.#$e.x!==i.x||this.#$e.y!==i.y;return a&&(this.#Ze={x:this.#Ze.x-this.#$e.x+i.x,y:this.#Ze.y-this.#$e.y+i.y},this.#$e=i),a}setOffset(e){const t=this.#Be.getPlaneHelper().getPlaneOffsetFromOffset3D(e);this.#Ze={x:t.x+this.#Ke.x+this.#$e.x+this.#Je.x+this.#et.x,y:t.y+this.#Ke.y+this.#$e.y+this.#Je.y+this.#et.y}}displayToPlaneIndex(t,n){const r=this.displayToPlanePos(t,n);return new e([Math.floor(r.x),Math.floor(r.y)])}displayToPlaneScale(e,t){return{x:e/this.#Ye.x,y:t/this.#Ye.y}}displayToPlanePos(e,t){const n=this.displayToPlaneScale(e,t);return{x:n.x+this.#Ze.x,y:n.y+this.#Ze.y}}planePosToDisplay(e,t){return{x:(e-this.#Ze.x+this.#$e.x)*this.#Ye.x,y:(t-this.#Ze.y+this.#$e.y)*this.#Ye.y}}displayToMainPlanePos(e,t){const n=this.displayToPlanePos(e,t);return{x:n.x-this.#$e.x,y:n.y-this.#$e.y}}display(e){this.#Ue.style.display=e?"":"none"}isVisible(){return""===this.#Ue.style.display}draw(){if(!this.#ze)return;let e={type:"renderstart",layerid:this.getId(),dataid:this.getDataIndex()};this.#ge(e),this.#tt&&this.#lt(),this.#Ge.globalAlpha=this.#He,this.clear(),this.#Ge.setTransform(this.#Ye.x,0,0,this.#Ye.y,-1*this.#Ze.x*this.#Ye.x,-1*this.#Ze.y*this.#Ye.y),this.#Ge.imageSmoothingEnabled=this.#nt,this.#Ge.drawImage(this.#Qe,0,0),e={type:"renderend",layerid:this.getId(),dataid:this.getDataIndex()},this.#ge(e)}initialise(e,t,n){this.#We=t,this.#He=Math.min(Math.max(n,0),1),this.#Ne=document.createElement("canvas"),this.#Ue.appendChild(this.#Ne),this.#Ne.getContext?(this.#Ge=this.#Ne.getContext("2d"),this.#Ge?(this.#Qe=document.createElement("canvas"),this.#st(e),this.#tt=!0):alert("Error: failed to get the 2D context.")):alert("Error: no canvas.getContext method.")}#st(e){if(!at(e.x,e.y))throw new Error("Cannot create canvas with size "+e.x+", "+e.y);this.#je=e,this.#Qe.width=this.#je.x,this.#Qe.height=this.#je.y,this.#Ge.clearRect(0,0,this.#je.x,this.#je.y),this.#Ve=this.#Ge.createImageData(this.#je.x,this.#je.y)}fitToContainer(e,t,n){let r=!1;if(this.#Ne.width!==t.x||this.#Ne.height!==t.y){if(!at(t.x,t.y))throw new Error("Cannot resize canvas "+t.x+", "+t.y);this.#Ne.width=t.x,this.#Ne.height=t.y,r=!0}const i=this.#Xe,a=this.#Ye.x/this.#Xe.x,o=this.#Ye.y/this.#Xe.y,s={x:e*this.#We.x,y:e*this.#We.y},l={x:a*s.x,y:o*s.y};a===l.x&&o===l.y||(this.#Xe=s,this.#Ye=l,r=!0);const c={x:n.x/s.x,y:n.y/s.y},u={x:this.#et.x*i.x/s.x,y:this.#et.y*i.y/s.y};this.#Ke.x===c.x&&this.#Ke.y===c.y&&this.#et.x===u.x&&this.#et.y===u.y||(this.#et=u,this.#Ke=c,this.#Ze={x:this.#Ke.x+this.#$e.x+this.#Je.x+this.#et.x,y:this.#Ke.y+this.#$e.y+this.#Je.y+this.#et.y},r=!0),r&&this.draw()}bindInteraction(){this.#Ue.style.pointerEvents="auto";const e=tt;for(let t=0;t<e.length;++t)this.#Ue.addEventListener(e[t],this.#ge,{passive:!0})}unbindInteraction(){this.#Ue.style.pointerEvents="none";const e=tt;for(let t=0;t<e.length;++t)this.#Ue.removeEventListener(e[t],this.#ge)}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{e.srclayerid=this.getId(),e.dataid=this.#qe,this.#ue.fireEvent(e)};#lt(){this.#Be.generateImageData(this.#Ve),this.#Qe.getContext("2d").putImageData(this.#Ve,0,0),this.#tt=!1}#rt=e=>{void 0!==e.skipGenerate&&!0===e.skipGenerate||(this.#tt=!0,this.draw())};#it=e=>{void 0!==e.skipGenerate&&!0===e.skipGenerate||(this.#tt=!0,this.draw())};#at=e=>{if(void 0===e.skipGenerate||!0!==e.skipGenerate){let t=!0;if(void 0!==e.valid&&(t=e.valid),t){const t=[0,1,2],n=t.indexOf(this.#Be.getScrollIndex());t.splice(n,1),0===e.diffDims.filter((function(e){return-1===t.indexOf(e)})).length&&this.#ze||(this.#ze=!0,this.#tt=!0,this.draw())}else this.#ze&&(this.#ze=!1,this.clear())}};#ot=e=>{void 0!==e.skipGenerate&&!0===e.skipGenerate||(this.#tt=!0,this.draw())};setCurrentPosition(e,t){return this.#Be.setCurrentPosition(e)}clear(){this.#Ge.save(),this.#Ge.setTransform(1,0,0,1,0,0),this.#Ge.clearRect(0,0,this.#Ne.width,this.#Ne.height),this.#Ge.restore()}}var st=n(436),lt=n.n(st);class ct{#ct=10;#ut="Verdana";#ht="#fff";#dt="#ffff80";#ft={x:1,y:1};#gt={x:1,y:1};#pt=2;#mt={x:.25,y:.25};#St=.2;#yt=3;getFontFamily(){return this.#ut}getFontSize(){return this.#ct}getStrokeWidth(){return this.#pt}getTextColour(){return this.#ht}getLineColour(){return this.#dt}setLineColour(e){this.#dt=e}setBaseScale(e){this.#ft=e}setZoomScale(e){this.#gt=e}getBaseScale(){return this.#ft}getZoomScale(){return this.#gt}scale(e){return e/this.#ft.x}applyZoomScale(e){return{x:2*e/this.#gt.x,y:2*e/this.#gt.y}}getShadowOffset(){return this.#mt}getTagOpacity(){return this.#St}getTextPadding(){return this.#yt}getFontStr(){return"normal "+this.getFontSize()+"px sans-serif"}getLineHeight(){return this.getFontSize()+this.getFontSize()/5}getScaledFontSize(){return this.scale(this.getFontSize())}getScaledStrokeWidth(){return this.scale(this.getStrokeWidth())}getShadowLineColour(){return p(this.getLineColour())}}function ut(e){let t="shape";return e instanceof lt().Line?t=4===e.points().length?"line":6===e.points().length?"protractor":"roi":e instanceof lt().Rect?t="rectangle":e instanceof lt().Ellipse&&(t="ellipse"),t}class ht{#x;#vt;#bt;#_e;#Ct;constructor(e,t,n,r){this.#x=e,this.#vt=t,this.#bt=n,this.#_e=void 0!==r&&r,this.#Ct=e.getParent()}getName(){return"Draw-"+this.#vt}execute(){this.#Ct.add(this.#x),this.#bt.draw(),this.#_e||this.onExecute({type:"drawcreate",id:this.#x.id()})}undo(){this.#x.remove(),this.#bt.draw(),this.onUndo({type:"drawdelete",id:this.#x.id()})}onExecute(e){}onUndo(e){}}class dt{#x;#vt;#wt;#bt;constructor(e,t,n,r){this.#x=e,this.#vt=t,this.#wt=n,this.#bt=r}getName(){return"Move-"+this.#vt}execute(){this.#x.move(this.#wt),this.#bt.draw(),this.onExecute({type:"drawmove",id:this.#x.id()})}undo(){const e={x:-this.#wt.x,y:-this.#wt.y};this.#x.move(e),this.#bt.draw(),this.onUndo({type:"drawmove",id:this.#x.id()})}onExecute(e){}onUndo(e){}}class ft{#vt;#xt;#Dt;#Tt;#bt;#Be;#Pt;constructor(e,t,n,r,i,a,o){this.#vt=e,this.#xt=t,this.#Dt=n,this.#Tt=r,this.#bt=i,this.#Be=a,this.#Pt=o}getName(){return"Change-"+this.#vt}execute(){this.#xt.update(this.#Tt,this.#Pt,this.#Be),this.#bt.draw(),this.onExecute({type:"drawchange",id:this.#Tt.getParent().id()})}undo(){this.#xt.update(this.#Dt,this.#Pt,this.#Be),this.#bt.draw(),this.onUndo({type:"drawchange",id:this.#Dt.getParent().id()})}onExecute(e){}onUndo(e){}}class gt{#x;#vt;#bt;#Ct;constructor(e,t,n){this.#x=e,this.#vt=t,this.#bt=n,this.#Ct=e.getParent()}getName(){return"Delete-"+this.#vt}execute(){this.#x.remove(),this.#bt.draw(),this.onExecute({type:"drawdelete",id:this.#x.id()})}undo(){this.#Ct.add(this.#x),this.#bt.draw(),this.onUndo({type:"drawcreate",id:this.#x.id()})}onExecute(e){}onUndo(e){}}function pt(e){return"shape"===e.name()}function mt(e){return e.name().startsWith("shape-")}function St(e){return"label"===e.name()}function yt(e){return"position-group"===e.name()}function vt(e){return function(t){return t.id()===e}}function bt(e){return"anchor"!==e.name()&&"label"!==e.name()}class Ct{#It;#At=null;constructor(e){this.#It=e}getCurrentPosGroup(){const e=this.#It.getChildren((e=>e.id()===this.#At));let t=null;return 1===e.length?t=e[0]:0===e.length?(t=new(lt().Group),t.name("position-group"),t.id(this.#At),t.visible(!0),this.#It.add(t)):g.warn("Unexpected number of draw position groups."),t}reset(){this.#It=null}getGroup(e){const t=this.#It.findOne("#"+e);return void 0===t&&g.warn("Cannot find node with id: "+e),t}activateDrawLayer(e,t){const n=[t];for(let t=3;t<e.length();++t)n.push(t);this.#At=e.toStringId(n);const r=this.#It.getChildren(yt);let i;for(let e=0,t=r.length;e<t;++e)i=!1,r[e].id()===this.#At&&(i=!0),r[e].visible(i);this.#It.draw()}getDrawDisplayDetails(){const e=[],n=this.#It.getChildren();for(let r=0,i=n.length;r<i;++r){const i=t(n[r].id()),a=n[r].getChildren();for(let t=0,n=a.length;t<n;++t){const n=a[t].getChildren(pt)[0],r=a[t].getChildren(St)[0].getChildren()[0];let o=n.className;if("Line"===o){const e=a[t].getChildren(mt);if(n.closed())o="Roi";else if(0!==e.length){const t=e[0].name();o=-1!==t.indexOf("triangle")?"Arrow":-1!==t.indexOf("arc")?"Protractor":"Ruler"}}"Rect"===o&&(o="Rectangle"),e.push({id:a[t].id(),position:i.toString(),type:o,color:n.stroke(),meta:r.meta})}}return e}getDrawStoreDetails(){const e={},t=this.#It.getChildren(yt);let n,r;for(let i=0,a=t.length;i<a;++i){n=t[i].getChildren();for(let t=0,i=n.length;t<i;++t){r=n[t];const i=r.find(".anchor");for(let e=0;e<i.length;++e)i[e].remove();const a=r.find(".text");1!==a.length&&g.warn("There should not be more than one text per shape."),e[r.id()]={meta:a[0].meta}}}return e}setDrawings(e,t,n,r){const i=lt().Node.create(e).getChildren(yt);for(let e=0,a=i.length;e<a;++e){const a=i[e];let o=this.#It.getChildren(vt(a.id()))[0];void 0===o&&(o=new(lt().Group)({id:a.id(),name:"position-group",visible:!1}),this.#It.add(o));const s=a.getChildren();for(let e=0,i=s.length;e<i;++e){const e=s[0];o.add(e);const i=e.getChildren(pt)[0],a=new ht(e,i.className,this.#It);if(a.onExecute=n,a.onUndo=n,t){const n=t[e.id()],r=e.getChildren(St)[0].getText();r.meta=n.meta,r.setText(X(r.meta.textExpr,r.meta.quantification))}a.execute(),r(a)}}}updateDraw(e){const t=this.#It.findOne("#"+e.id);if(void 0===t)return void g.warn("[updateDraw] Cannot find group with id: "+e.id);const n=t.getChildren(pt);for(let t=0;t<n.length;++t)n[t].stroke(e.color);const r=t.getChildren(mt);for(let t=0;t<r.length;++t)void 0!==r[t].stroke()?r[t].stroke(e.color):void 0!==r[t].fill()&&r[t].fill(e.color);const i=t.getChildren(St)[0],a=p(e.color),o=i.getChildren();for(let t=0;t<o.length;++t)if(o[t].fill(e.color),"Text"===o[t].className){const n=o[t];n.shadowColor(a),void 0!==e.meta&&(n.meta=e.meta,n.setText(X(n.meta.textExpr,n.meta.quantification)),i.setVisible(0!==n.meta.textExpr.length))}this.#It.draw()}deleteDrawGroup(e,t,n){const r=ut(e.getChildren(pt)[0]),i=new gt(e,r,this.#It);i.onExecute=t,i.onUndo=t,i.execute(),n(i)}deleteDraw(e,t,n){const r=this.getGroup(e);return void 0!==r&&(this.deleteDrawGroup(r,t,n),!0)}deleteDraws(e,t){const n=this.#It.getChildren();for(;n.length;)this.deleteDrawGroup(n[0],e,t)}}class wt{#Ue;#Lt=null;#je;#We;#Xe={x:1,y:1};#$e={x:0,y:0};#Ke={x:0,y:0};#Je={x:0,y:0};#et={x:0,y:0};#Ot=null;#Fe;#qe=null;constructor(e){this.#Ue=e,this.#Ue.className+=" drawLayer"}getDataIndex(){return this.#qe}#ue=new Ce;getKonvaStage(){return this.#Lt}getKonvaLayer(){return this.#Lt.getLayers()[0]}getDrawController(){return this.#Ot}setPlaneHelper(e){this.#Fe=e}getId(){return this.#Ue.id}getBaseSize(){return this.#je}getOpacity(){return this.#Lt.opacity()}setOpacity(e){this.#Lt.opacity(Math.min(Math.max(e,0),1))}addFlipOffsetX(){const e=this.#Lt.scale(),t=this.#Lt.size();this.#et.x+=t.width/e.x;const n=this.#Lt.offset();n.x+=this.#et.x,this.#Lt.offset(n)}addFlipOffsetY(){const e=this.#Lt.scale(),t=this.#Lt.size();this.#et.y+=t.height/e.y;const n=this.#Lt.offset();n.y+=this.#et.y,this.#Lt.offset(n)}setScale(e,t){const n=this.#Fe.getTargetOrientedPositiveXYZ(e),r={x:this.#Xe.x*n.x,y:this.#Xe.y*n.y},i=this.#Lt.offset();if(1===Math.abs(e.x)&&1===Math.abs(e.y)&&1===Math.abs(e.z)){const e={x:i.x-this.#Je.x,y:i.y-this.#Je.y};this.#Je={x:0,y:0},this.#Lt.offset(e)}else if(void 0!==t){let e=this.#Fe.getPlaneOffsetFromOffset3D({x:t.getX(),y:t.getY(),z:t.getZ()});e={x:e.x+this.#$e.x,y:e.y+this.#$e.y};const n=Dt(i,this.#Lt.scale(),r,e),a={x:this.#Je.x+n.x-i.x,y:this.#Je.y+n.y-i.y};this.#Je=a,this.#Lt.offset(n)}this.#Lt.scale(r),this.#_t(r)}setOffset(e){const t=this.#Fe.getPlaneOffsetFromOffset3D(e);this.#Lt.offset({x:t.x+this.#Ke.x+this.#$e.x+this.#Je.x+this.#et.x,y:t.y+this.#Ke.y+this.#$e.y+this.#Je.y+this.#et.y})}setBaseOffset(e,t){const n=this.#Fe.getNativeScrollIndex(),r=this.#Fe.getPlaneOffsetFromOffset3D({x:0===n?e.getX():t.getX(),y:1===n?e.getY():t.getY(),z:2===n?e.getZ():t.getZ()}),i=this.#$e.x!==r.x||this.#$e.y!==r.y;if(i){const e=this.#Lt.offset();this.#Lt.offset({x:e.x-this.#$e.x+r.x,y:e.y-this.#$e.y+r.y}),this.#$e=r}return i}display(e){this.#Ue.style.display=e?"":"none"}isVisible(){return""===this.#Ue.style.display}draw(){this.#Lt.draw()}initialise(e,t,n){this.#je=e,this.#We=t,this.#qe=n,this.#Lt=new(lt().Stage)({container:this.#Ue,width:this.#je.x,height:this.#je.y,listening:!1}),this.#Lt.getContent().setAttribute("style","");const r=new(lt().Layer)({listening:!1,visible:!0});this.#Lt.add(r),this.#Ot=new Ct(r)}fitToContainer(e,t,n){this.#Lt.width(t.x),this.#Lt.height(t.y);const r=this.#Lt.scale().x/this.#Xe.x,i=this.#Lt.scale().y/this.#Xe.y;this.#Xe={x:e*this.#We.x,y:e*this.#We.y},this.#Lt.scale({x:r*this.#Xe.x,y:i*this.#Xe.y}),this.#Ke={x:n.x/this.#Xe.x,y:n.y/this.#Xe.y},this.#Lt.offset({x:this.#Ke.x+this.#$e.x+this.#Je.x+this.#et.x,y:this.#Ke.y+this.#$e.y+this.#Je.y+this.#et.y})}isGroupVisible(e){const t=this.#Ot.getGroup(e);return void 0!==t&&t.isVisible()}toggleGroupVisibility(e){const t=this.#Ot.getGroup(e);return void 0!==t&&(t.visible(!t.isVisible()),this.draw(),!0)}deleteDraw(e,t){this.#Ot.deleteDraw(e,this.#ge,t)}deleteDraws(e){this.#Ot.deleteDraws(this.#ge,e)}bindInteraction(){this.#Lt.listening(!0),this.#Ue.style.pointerEvents="auto";const e=tt;for(let t=0;t<e.length;++t)this.#Ue.addEventListener(e[t],this.#ge)}unbindInteraction(){this.#Lt.listening(!1),this.#Ue.style.pointerEvents="none";const e=tt;for(let t=0;t<e.length;++t)this.#Ue.removeEventListener(e[t],this.#ge)}setCurrentPosition(e,t){return this.getDrawController().activateDrawLayer(t,this.#Fe.getScrollIndex()),!0}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{e.srclayerid=this.getId(),e.dataid=this.#qe,this.#ue.fireEvent(e)};#_t(e){const t=2/e.x,n=2/e.y,r=this.#Lt.find("Label");for(let e=0;e<r.length;++e)r[e].scale({x:t,y:n})}}function xt(e){let t=null;const n=e.target.closest(".layer");return n&&void 0!==n.id&&(t=function(e){const t=e.split("-layer-");return 2!==t.length&&g.warn("Not the expected layer div id format..."),{groupDivId:t[0],layerId:t[1]}}(n.id)),t}function Dt(e,t,n,r){const i=(r.x-e.x)*t.x,a=(r.y-e.y)*t.y;return{x:r.x-i/n.x,y:r.y-a/n.y}}class Tt{#Ue;#Et=[];#Ye={x:1,y:1,z:1};#ft={x:1,y:1,z:1};#Ze={x:0,y:0,z:0};#Rt=null;#Ft=null;#ue=new Ce;#Te;#kt=!1;#Ce;constructor(e){this.#Ue=e}getTargetOrientation(){return this.#Te}setTargetOrientation(e){this.#Te=e}getShowCrosshair(){return this.#kt}setShowCrosshair(e){this.#kt=e,e?(this.addEventListener("offsetchange",this.#Mt),this.addEventListener("zoomchange",this.#Mt),this.#qt()):(this.removeEventListener("offsetchange",this.#Mt),this.removeEventListener("zoomchange",this.#Mt),this.#Ut())}#Mt=e=>{this.#qt()};getDivId(){return this.#Ue.id}getScale(){return this.#Ye}getBaseScale(){return this.#ft}getAddedScale(){return{x:this.#Ye.x/this.#ft.x,y:this.#Ye.y/this.#ft.y,z:this.#Ye.z/this.#ft.z}}getOffset(){return this.#Ze}getNumberOfLayers(){return this.#Et.length}getActiveViewLayer(){return this.#Et[this.#Rt]}getViewLayersByDataIndex(e){const t=[];for(let n=0;n<this.#Et.length;++n)this.#Et[n]instanceof ot&&this.#Et[n].getDataIndex()===e&&t.push(this.#Et[n]);return t}searchViewLayers(e){const t=[];for(let n=0;n<this.#Et.length;++n)this.#Et[n]instanceof ot&&this.#Et[n].getViewController().equalImageMeta(e)&&t.push(this.#Et[n]);return t}getViewDataIndices(){const e=[];for(let t=0;t<this.#Et.length;++t)this.#Et[t]instanceof ot&&e.push(this.#Et[t].getDataIndex());return e}getActiveDrawLayer(){return this.#Et[this.#Ft]}getDrawLayersByDataIndex(e){const t=[];for(let n=0;n<this.#Et.length;++n)this.#Et[n]instanceof wt&&this.#Et[n].getDataIndex()===e&&t.push(this.#Et[n]);return t}setActiveViewLayer(e){this.#Rt=e}setActiveViewLayerByDataIndex(e){for(let t=0;t<this.#Et.length;++t)if(this.#Et[t]instanceof ot&&this.#Et[t].getDataIndex()===e){this.setActiveViewLayer(t);break}}setActiveDrawLayer(e){this.#Ft=e}setActiveDrawLayerByDataIndex(e){for(let t=0;t<this.#Et.length;++t)if(this.#Et[t]instanceof wt&&this.#Et[t].getDataIndex()===e){this.setActiveDrawLayer(t);break}}addViewLayer(){const e=this.#Et.length,t=this.#Bt();this.#Ue.append(t);const n=new ot(t);return this.#Et.push(n),this.setActiveViewLayer(e),this.#Nt(n),n}addDrawLayer(){this.#Ft=this.#Et.length;const e=this.#Bt();this.#Ue.append(e);const t=new wt(e);return this.#Et.push(t),this.#Qt(t),t}#Nt(e){e.addEventListener("positionchange",this.updateLayersToPositionChange);for(let t=0;t<Ye.length;++t)e.addEventListener(Ye[t],this.#ge);e.addEventListener("renderstart",this.#ge),e.addEventListener("renderend",this.#ge)}#Qt(e){e.addEventListener("drawcreate",this.#ge),e.addEventListener("drawdelete",this.#ge)}#Bt(){const e=document.createElement("div");return e.id=this.getDivId()+"-layer-"+this.#Et.length,e.className="layer",e.style.pointerEvents="none",e}empty(){this.#Et=[],this.#Rt=null,this.#Ft=null;const e=this.#Ue.getElementsByClassName("layer");if(e)for(;e.length>0;)e[0].remove()}#qt(e){void 0===e&&(e=this.#Ce),this.#Ut();const t=this.#Et[0],n=t.getViewController().getPlanePositionFromPosition(e),r=t.planePosToDisplay(n.x,n.y),i=document.createElement("hr");i.id=this.getDivId()+"-scroll-crosshair-horizontal",i.className="horizontal",i.style.width=this.#Ue.offsetWidth+"px",i.style.left="0px",i.style.top=r.y+"px";const a=document.createElement("hr");a.id=this.getDivId()+"-scroll-crosshair-vertical",a.className="vertical",a.style.width=this.#Ue.offsetHeight+"px",a.style.left=r.x+"px",a.style.top="0px",this.#Ue.appendChild(i),this.#Ue.appendChild(a)}#Ut(){let e=document.getElementById(this.getDivId()+"-scroll-crosshair-horizontal");e&&e.remove(),e=document.getElementById(this.getDivId()+"-scroll-crosshair-vertical"),e&&e.remove()}updateLayersToPositionChange=t=>{for(let e=0;e<this.#Et.length;++e)this.#Et[e]instanceof ot&&(this.#Et[e].removeEventListener("positionchange",this.updateLayersToPositionChange),this.#Et[e].removeEventListener("positionchange",this.#ge));const n=new e(t.value[0]),r=new I(t.value[1]);this.#Ce=r,this.#kt&&this.#qt(r);let i=null,a=null;for(let e=0;e<this.#Et.length;++e){let o=!1;if(this.#Et[e]instanceof ot){const t=this.#Et[e].getViewController(),n=t.getOrigin(),s=t.getOrigin(r);if(a){if(t.canSetPosition(r)&&void 0!==s){const t=i.minus(n),r=new y(t.getX(),t.getY(),t.getZ()),l=a.minus(s),c=new y(l.getX(),l.getY(),l.getZ());o=this.#Et[e].setBaseOffset(r,c)}}else i=n,a=s}let s=!1;this.#Et[e].getId()!==t.srclayerid&&(s=this.#Et[e].setCurrentPosition(r,n)),!s&&o&&this.#Et[e].draw()}for(let e=0;e<this.#Et.length;++e)this.#Et[e]instanceof ot&&(this.#Et[e].addEventListener("positionchange",this.updateLayersToPositionChange),this.#Et[e].addEventListener("positionchange",this.#ge))};calculateFitScale(){if(0===this.#Ue.offsetWidth&&0===this.#Ue.offsetHeight)throw new Error("Cannot fit to zero sized container.");const e=this.getMaxSize();if(void 0!==e)return Math.min(this.#Ue.offsetWidth/e.x,this.#Ue.offsetHeight/e.y)}setFitScale(e){const t=this.getMaxSize();if(void 0===t)return;const n={x:this.#Ue.offsetWidth,y:this.#Ue.offsetHeight},r={x:-.5*(n.x-Math.floor(t.x*e)),y:-.5*(n.y-Math.floor(t.y*e))};for(let t=0;t<this.#Et.length;++t)this.#Et[t].fitToContainer(e,n,r);this.#kt&&this.#qt()}getMaxSize(){let e={x:0,y:0};for(let t=0;t<this.#Et.length;++t)if(this.#Et[t]instanceof ot){const n=this.#Et[t].getImageWorldSize();n.x>e.x&&(e.x=n.x),n.y>e.y&&(e.y=n.y)}return 0===e.x&&0===e.y&&(e=void 0),e}flipScaleZ(){this.#ft.z*=-1,this.setScale(this.#ft)}addScale(e,t){const n={x:this.#Ye.x*(1+e),y:this.#Ye.y*(1+e),z:this.#Ye.z*(1+e)};this.setScale(n,t)}setScale(e,t){this.#Ye=e;for(let e=0;e<this.#Et.length;++e)this.#Et[e].setScale(this.#Ye,t);const n=[e.x,e.y,e.z];void 0!==t&&(n.push(t.getX()),n.push(t.getY()),n.push(t.getZ())),this.#ge({type:"zoomchange",value:n})}addTranslation(e){this.setOffset({x:this.#Ze.x-e.x,y:this.#Ze.y-e.y,z:this.#Ze.z-e.z})}setOffset(e){this.#Ze=e;for(let e=0;e<this.#Et.length;++e)this.#Et[e].setOffset(this.#Ze);this.#ge({type:"offsetchange",value:[this.#Ze.x,this.#Ze.y,this.#Ze.z]})}reset(){this.setScale(this.#ft),this.setOffset({x:0,y:0,z:0})}draw(){for(let e=0;e<this.#Et.length;++e)this.#Et[e].draw()}display(e){for(let t=0;t<this.#Et.length;++t)this.#Et[t].display(e)}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)}}const Pt={WindowLevelBinder:class{getEventType=function(){return"wlchange"};getCallback=function(e){return function(t){const n=e.getViewLayersByDataIndex(t.dataid);0!==n.length&&n[0].getViewController().setWindowLevel(t.value[0],t.value[1])}}},PositionBinder:class{getEventType=function(){return"positionchange"};getCallback=function(e){return function(t){const n=t.value[1],r=e.getActiveViewLayer().getViewController(),i=r.getCurrentPosition(),a=i.length(),o=n.length;o!==a&&(o===a-1?n.push(i.get(a-1)):o===a+1&&n.pop()),r.setCurrentPosition(new I(n))}}},ZoomBinder:class{getEventType=function(){return"zoomchange"};getCallback=function(e){return function(t){const n={x:t.value[0],y:t.value[1],z:t.value[2]};let r;6===t.value.length&&(r=new P(t.value[3],t.value[4],t.value[5])),e.setScale(n,r),e.draw()}}},OffsetBinder:class{getEventType=function(){return"offsetchange"};getCallback=function(e){return function(t){e.setOffset({x:t.value[0],y:t.value[1],z:t.value[2]}),e.draw()}}},OpacityBinder:class{getEventType=function(){return"opacitychange"};getCallback=function(e){return function(t){if(void 0===t.dataid)return;const n=e.getViewLayersByDataIndex(t.dataid);0!==n.length&&(n[0].setOpacity(t.value),n[0].draw())}}}};class It{#Gt=[];#zt=null;#Vt=[];#jt=null;getLayerGroup(e){return this.#Gt[e]}getNumberOfLayerGroups(){return this.#Gt.length}getActiveLayerGroup(){return this.getLayerGroup(this.#zt)}getViewLayersByDataIndex(e){let t=[];for(let n=0;n<this.#Gt.length;++n)t=t.concat(this.#Gt[n].getViewLayersByDataIndex(e));return t}getDrawLayersByDataIndex(e){let t=[];for(let n=0;n<this.#Gt.length;++n)t=t.concat(this.#Gt[n].getDrawLayersByDataIndex(e));return t}addLayerGroup(e){this.#zt=this.#Gt.length;const t=new Tt(e),n=this.#jt&&0!==this.#jt.length;return n&&this.unbindLayerGroups(),this.#Gt.push(t),n&&this.bindLayerGroups(),t}getLayerGroupByDivId(e){return this.#Gt.find((function(t){return t.getDivId()===e}))}setBinders(e){if(null==e)throw new Error("Cannot set null or undefined binders");0!==this.#Vt.length&&this.unbindLayerGroups(),this.#Vt=e.slice(),this.bindLayerGroups()}empty(){this.unbindLayerGroups();for(let e=0;e<this.#Gt.length;++e)this.#Gt[e].empty();this.#Gt=[],this.#zt=null}reset(){for(let e=0;e<this.#Gt.length;++e)this.#Gt[e].reset()}draw(){for(let e=0;e<this.#Gt.length;++e)this.#Gt[e].draw()}syncLayerGroupScale(){let e;const t=[];for(let n=0;n<this.#Gt.length;++n){const r=this.#Gt[n].calculateFitScale();void 0!==r&&(t.push(n),(void 0===e||r<e)&&(e=r))}if(void 0!==e)for(let n=0;n<this.#Gt.length;++n)t.includes(n)&&this.#Gt[n].setFitScale(e)}bindLayerGroups(){if(0!==this.#Gt.length&&1!==this.#Gt.length&&0!==this.#Vt.length){this.#jt=new Array(this.#Gt.length);for(let e=0;e<this.#Gt.length;++e)for(let t=0;t<this.#Vt.length;++t)this.#Wt(e,this.#Vt[t])}}unbindLayerGroups(){if(0!==this.#Gt.length&&1!==this.#Gt.length&&0!==this.#Vt.length&&this.#jt){for(let e=0;e<this.#Gt.length;++e)for(let t=0;t<this.#Vt.length;++t)this.#Ht(e,this.#Vt[t]);this.#jt=null}}#Yt(e,t){void 0===this.#jt[t]&&(this.#jt[t]=[]);let n=this.#jt[t].find((function(t){return t.binder===e}));return void 0===n&&(n={binder:e,callback:n=>{this.#Ht(t,e),e.getCallback(this.#Gt[t])(n),this.#Wt(t,e)}},this.#jt[t].push(n)),n.callback}#Wt(e,t){for(let n=0;n<this.#Gt.length;++n)n!==e&&this.#Gt[e].addEventListener(t.getEventType(),this.#Yt(t,n))}#Ht(e,t){for(let n=0;n<this.#Gt.length;++n)n!==e&&this.#Gt[e].removeEventListener(t.getEventType(),this.#Yt(t,n))}}class At{toJSON(e){const t=e.getActiveLayerGroup(),n=t.getActiveViewLayer().getViewController(),r=n.getCurrentIndex(),i=t.getActiveDrawLayer(),a=i.getDrawController();return JSON.stringify({version:"0.5","window-center":n.getWindowLevel().center,"window-width":n.getWindowLevel().width,position:r.getValues(),scale:e.getAddedScale(),offset:e.getOffset(),drawings:i.getKonvaLayer().toObject(),drawingsDetails:a.getDrawStoreDetails()})}fromJSON(e){const t=JSON.parse(e);let n=null;if("0.1"===t.version)n=this.#Xt(t);else if("0.2"===t.version)n=this.#Zt(t);else if("0.3"===t.version)n=this.#$t(t);else if("0.4"===t.version)n=this.#Kt(t);else{if("0.5"!==t.version)throw new Error("Unknown state file format version: '"+t.version+"'.");n=this.#Jt(t)}return n}apply(t,n){const r=t.getActiveLayerGroup().getActiveViewLayer().getViewController();r.setWindowLevel(n["window-center"],n["window-width"]),r.setCurrentIndex(new e(n.position));const i=t.getActiveLayerGroup().getBaseScale();let a=null,o=null;if(void 0!==n.scaleCenter){a={x:n.scale*i.x,y:n.scale*i.y,z:1};const e=n.scaleCenter.x-n.scaleCenter.x*n.scale,t=n.scaleCenter.y-n.scaleCenter.y*n.scale,r=e+n.translation.x*a.x,s=t+n.translation.y*a.y;o={x:-r/a.x,y:-s/a.y,z:0}}else a={x:n.scale.x*i.x,y:n.scale.y*i.y,z:i.z},o={x:n.offset.x,y:n.offset.y,z:0};t.getActiveLayerGroup().setScale(a),t.getActiveLayerGroup().setOffset(o),t.render(0),t.setDrawings(n.drawings,n.drawingsDetails)}#Xt(e){const t=function(e){const t=[],n={};let r,i;for(let a=0,o=e.length;a<o;++a){t[a]=[];for(let o=0,s=e[a].length;o<s;++o){r=e[a][o];const s=[];for(let e=0,t=r.length;e<t;++e){i=lt().Node.create(r[e]),i.visible(!0);let t={x:0,y:0};const a=i.getChildren((function(e){return"shape"===e.name()}))[0];if(a.stroke(S(a.stroke())),"line-group"===i.name()){i.name("ruler-group");const e=new(lt().Line)({points:[a.points()[0],a.points()[1],a.points()[0],a.points()[1]],name:"shape-tick0"});i.add(e);const t=new(lt().Line)({points:[a.points()[2],a.points()[3],a.points()[2],a.points()[3]],name:"shape-tick1"});i.add(t)}const o=i.getChildren((function(e){return"arc"===e.name()}));1===o.length&&o[0].name("shape-arc");const l=i.getChildren((function(e){return"text"===e.name()}));let c=new(lt().Text)({name:"text",text:""});1===l.length?(t.x=l[0].x(),t.y=l[0].y(),l[0].remove(),c=l[0]):0!==a.points().length&&(t={x:a.points()[0],y:a.points()[1]});const u=new(lt().Label)({x:t.x,y:t.y,name:"label"});u.add(c),u.add(new(lt().Tag)),i.add(u),s.push(JSON.stringify(i.toObject()));let h=c.text();const d=h.length;let f=null;"ruler-group"===i.name()?(f={length:{value:parseFloat(h.substring(0,d-2)),unit:h.substring(-2)}},h="{length}"):"ellipse-group"===i.name()||"rectangle-group"===i.name()?(f={surface:{value:parseFloat(h.substring(0,d-3)),unit:h.substring(-3)}},h="{surface}"):"protractor-group"!==i.name()&&"rectangle-group"!==i.name()||(f={angle:{value:parseFloat(h.substring(0,d-1)),unit:h.substring(-1)}},h="{angle}"),n[i.id()]={textExpr:h,longText:"",quant:f}}t[a].push(s)}}return{drawings:t,drawingsDetails:n}}(e.drawings);return e.drawings=Lt(t.drawings).toObject(),e.drawingsDetails=Ot(t.drawingsDetails),(e=_t(e)).drawings=Et(e.drawings),e}#Zt(e){return e.drawings=Lt(e.drawings).toObject(),e.drawingsDetails=Ot(function(e){const t={},n="string"==typeof e?JSON.parse(e):e;for(let e=0,r=n.length;e<r;++e)for(let r=0,i=n[e].length;r<i;++r)for(let i=0,a=n[e][r].length;i<a;++i){const a=n[e][r][i];t[a.id]={textExpr:a.textExpr,longText:a.longText,quant:a.quant}}return t}(e.drawingsDetails)),(e=_t(e)).drawings=Et(e.drawings),e}#$t(e){return e.drawingsDetails=Ot(e.drawingsDetails),(e=_t(e)).drawings=Et(e.drawings),e}#Kt(e){return(e=_t(e)).drawings=Et(e.drawings),e}#Jt(e){return e}}function Lt(t){let n,r,i;const a=new(lt().Layer)({listening:!1,visible:!0}),o="string"==typeof t?JSON.parse(t):t;for(let t=0,l=o.length;t<l;++t)for(let l=0,c=o[t].length;l<c;++l)if(r=o[t][l],0!==r.length){i=new(lt().Group)({id:(s=new e([1,1,t,l]),"slice-"+s.get(2)+"_frame-"+(4===s.length()?s.get(3):0)),name:"position-group",visible:!1});for(let e=0,t=r.length;e<t;++e)n=lt().Node.create(r[e]),n.draggable(!0),n.getChildren().forEach((function(e){e.draggable(!1)})),i.add(n);a.add(i)}var s;return a}function Ot(e){const t={},n=Object.keys(e);for(let r=0,i=n.length;r<i;++r){const i=e[n[r]];t[n[r]]={meta:{textExpr:i.textExpr,longText:i.longText,quantification:i.quant}}}return t}function _t(e){const t=e.position;return e.position=[t.i,t.j,t.k],e}function Et(e){const t=e.children;for(let e=0,n=t.length;e<n;++e){const n=t[e],r=n.attrs.id.split("_"),i=parseInt(r[0].substring(6),10),a=parseInt(r[1].substring(6),10);let o="#2-";o+=0===i&&0!==a?a:i,n.attrs.id=o}return e}function Rt(e){return new URL(e,window.location.origin)}function Ft(e){const t={};let n=null;if(e&&-1!==(n=e.indexOf("?"))){t.base=e.substring(0,n);let r=e.indexOf("#");-1===r&&(r=e.length);const i=e.substring(n+1,r);t.query=function(e){const t={};if(e){const n=e.split("&");for(let e=0;e<n.length;++e){const r=n[e].split("=");t[r[0]]?(t[r[0]]instanceof Array||(t[r[0]]=[t[r[0]]]),t[r[0]].push(r[1])):t[r[0]]=r[1]}}return t}(i)}return t}class kt{#en=[];#tn=0;#ue=new Ce;getStackSize(){return this.#en.length}getCurrentStackIndex(){return this.#tn}add(e){this.#en=this.#en.slice(0,this.#tn),this.#en.push(e),++this.#tn,this.#ge({type:"undoadd",command:e.getName()})}undo(){this.#tn>0&&(--this.#tn,this.#en[this.#tn].undo(),this.#ge({type:"undo",command:this.#en[this.#tn].getName()}))}redo(){this.#tn<this.#en.length&&(this.#en[this.#tn].execute(),this.#ge({type:"redo",command:this.#en[this.#tn].getName()}),++this.#tn)}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)}}class Mt{#nn;#rn=null;#jt=[];#in={};constructor(e){this.#nn=e}init(){for(const e in this.#nn)this.#nn[e].init();window.addEventListener("keydown",this.#an("window","keydown"),!0)}getToolList(){return this.#nn}hasTool(e){return void 0!==this.getToolList()[e]}getSelectedTool(){return this.#rn}getSelectedToolEventHandler(e){return this.getSelectedTool()[e]}setSelectedTool(e){if(!this.hasTool(e))throw new Error("Unknown tool: '"+e+"'");this.#rn&&this.#rn.activate(!1),this.#rn=this.#nn[e],this.#rn.activate(!0)}setToolFeatures(e){this.getSelectedTool()&&this.getSelectedTool().setFeatures(e)}bindLayer(e,t){void 0!==this.#in[t]&&this.#on(this.#in[t]),e.bindInteraction();const n=tt;for(let t=0;t<n.length;++t)e.addEventListener(n[t],this.#an(e.getId(),n[t]));this.#in[t]=e}#on(e){e.unbindInteraction();const t=tt;for(let n=0;n<t.length;++n)e.removeEventListener(t[n],this.#an(e.getId(),t[n]))}#an(e,t){const n=e=>{if(this.#rn){const t=this.#rn[e.type];t&&t(e)}};if(void 0===this.#jt[e]&&(this.#jt[e]=[]),void 0===this.#jt[e][t]){let r=null;r="keydown"===t||"touchend"===t?function(e){n(e)}:function(e){!function(e){const t=it(e);e._x=t[0].x,e._y=t[0].y,2===t.length&&(e._x1=t[1].x,e._y1=t[1].y)}(e),n(e)},this.#jt[e][t]=r}return this.#jt[e][t]}}class qt{#sn=[];#ln=2;#cn;constructor(e){this.#cn=e}setNumberOfDimensions(e){this.#ln=e}setNToLoad(e){for(let t=0;t<e;++t){this.#sn[t]=[];for(let e=0;e<this.#ln;++e)this.#sn[t][e]=0}}onprogress=e=>{if(!e.lengthComputable)return;if(void 0===e.subindex)return;if(void 0===e.index)return;const t=100*e.loaded/e.total;this.#sn[e.index][e.subindex]=t;let n=null;n=void 0!==e.item?e.item:{loaded:this.#un(e.index),total:100,source:e.source},this.#cn({lengthComputable:!0,loaded:this.#hn(),total:100,item:n})};#un(e){let t=0;for(let n=0;n<this.#ln;++n)t+=this.#sn[e][n];return t/this.#ln}#hn(){let e=0;const t=this.#sn.length;for(let n=0;n<t;++n)e+=this.#un(n);return Math.round(e/t)}getMonoProgressHandler(e,t){return n=>{n.index=e,n.subindex=t,this.onprogress(n)}}getUndefinedMonoProgressHandler(e){return t=>{t.subindex=e,this.onprogress(t)}}}class Ut{#dn=null;#fn=[];#gn=null;#pn=0;#mn=0;#Sn;#_;getDefaultCharacterSet(){return this.#_}setDefaultCharacterSet(e){this.#_=e}#yn(e){this.#dn=e,this.#pn=0,this.#mn=0,this.#Sn=!1,this.#vn(),this.#bn()}#Cn(e){this.#fn.push(e)}#vn(){this.#fn=[]}#wn(e){this.#gn=e}#bn(){this.#gn=null}#xn=e=>{this.#pn++,this.#pn===this.#dn.length&&this.onload({source:this.#dn})};#Dn=e=>{this.#mn++,this.#mn===2*this.#dn.length&&this.onloadend({source:this.#dn})};#Tn(e,t){return n=>{n.source=t,e(n)}}load(e,t){this.onloadstart({source:e}),1===e.length&&(H(e[0],"DICOMDIR")||H(e[0],".dcmdir"))?this.#Pn(e[0],t):this.#In(e,t)}#An(e,t,n){return r=>{const i=r.target.status;200!==i&&0!==i?(this.onerror({source:t,error:"GET "+r.target.responseURL+" "+r.target.status+" ("+r.target.statusText+")",target:r.target}),this.#Dn()):e.load(r.target.response,t,n)}}#In(e,t){if(void 0===e||0===e.length)return;this.#yn(e);const n=new qt(this.onprogress);n.setNToLoad(e.length);const r=[];for(let e=0;e<tn.length;++e)r.push(new tn[e]);let i=e[0],a=null,o=!1;for(let s=0;s<r.length;++s)if(a=r[s],a.canLoadUrl(i,t)){o=!0,a.setOptions({numberOfFiles:e.length,defaultCharacterSet:this.getDefaultCharacterSet()}),a.onprogress=n.getUndefinedMonoProgressHandler(1),a.onloaditem=this.onloaditem,a.onload=this.#xn,a.onloadend=this.#Dn,a.onerror=this.onerror,a.onabort=this.onabort,this.#wn(a);break}if(!o)throw new Error("No loader found for url: "+i);let s=0;const l=()=>{this.#Dn(),s<this.#fn.length-1&&!this.#Sn&&(++s,this.#fn[s].send(null))};for(let r=0;r<e.length;++r){if(i=e[r],!a.canLoadUrl(i,t))throw new Error("Input url of different type: "+i);const o=new XMLHttpRequest;if(o.open("GET",i,!0),void 0!==t){if(void 0!==t.requestHeaders){const e=t.requestHeaders;for(let t=0;t<e.length;++t)void 0!==e[t].name&&void 0!==e[t].value&&o.setRequestHeader(e[t].name,e[t].value)}void 0!==t.withCredentials&&(o.withCredentials=t.withCredentials)}o.onprogress=this.#Tn(n.getMonoProgressHandler(r,0),i),o.onload=this.#An(a,i,r),o.onloadend=l,o.onerror=this.#Tn(this.onerror,i),o.onabort=this.#Tn(this.onabort,i),1===a.loadUrlAs()&&(o.responseType="arraybuffer"),this.#Cn(o)}let c=this.#fn.length;void 0!==t&&void 0!==t.batchSize&&0!==c&&(c=Math.min(t.batchSize,this.#fn.length));for(let e=0;e<c;++e)this.#Sn||(s=e,this.#fn[s].send(null))}#Pn(e,t){const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=n=>{const r=n.target.status;if(200!==r&&0!==r)this.onerror({source:e,error:"GET "+n.target.responseURL+" "+n.target.status+" ("+n.target.statusText+")",target:n.target}),this.onloadend({});else{const r=function(e){const t=new be;t.parse(e);const n=t.getDicomElements();if(void 0===n["00041220"]||void 0===n["00041220"].value)return void g.warn("No Directory Record Sequence found in DICOMDIR.");const r=n["00041220"].value;if(0===r.length)return void g.warn("The Directory Record Sequence of the DICOMDIR is empty.");const i=[];let a=null,o=null;for(let e=0;e<r.length;++e){if(void 0===r[e]["00041430"]||void 0===r[e]["00041430"].value)continue;const t=r[e]["00041430"].value[0];if("STUDY"===t)o=[],i.push(o);else if("SERIES"===t)a=[],o.push(a);else if("IMAGE"===t){if(void 0===r[e]["00041500"]||void 0===r[e]["00041500"].value)continue;const t=r[e]["00041500"].value;a.push(t.join("/"))}}return i}(n.target.response)[0][0],i=e.split("/").slice(0,-1).join("/"),a=[];for(let e=0;e<r.length;++e)a.push(i+"/"+r[e]);this.#In(a,t)}},n.onerror=t=>{this.#Tn(this.onerror,e)(t),this.onloadend({})},n.onabort=t=>{this.#Tn(this.onabort,e)(t),this.onloadend({})},n.send(null)}abort(){this.#Sn=!0;for(let e=0;e<this.#fn.length;++e)4!==this.#fn[e].readyState&&this.#fn[e].abort();this.#gn&&this.#gn.isLoading()&&this.#gn.abort()}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}}class Bt{constructor(e){this.poolSize=e,this.taskQueue=[],this.freeThreads=[];for(let t=0;t<e;++t)this.freeThreads.push(new Nt(this));this.runningThreads=[]}addWorkerTask(e){if(this.freeThreads.length===this.poolSize&&this.onworkstart({type:"work-start"}),this.freeThreads.length>0){const t=this.freeThreads.shift();this.runningThreads.push(t),t.run(e)}else this.taskQueue.push(e)}abort(){this.#Ln(),this.onabort({type:"work-abort"}),this.onworkend({type:"work-end"})}onTaskEnd(e){if(this.taskQueue.length>0){const t=this.taskQueue.shift();e.run(t)}else{e.stop(),this.freeThreads.push(e);for(let t=0;t<this.runningThreads.length;++t)this.runningThreads[t].getId()===e.getId()&&this.runningThreads.splice(t,1);this.freeThreads.length===this.poolSize&&(this.onwork({type:"work"}),this.onworkend({type:"work-end"}))}}handleWorkerError=e=>{this.#Ln(),this.onerror({error:e}),this.onworkend({type:"work-end"})};#Ln(){this.taskQueue=[];for(let e=0;e<this.runningThreads.length;++e)this.runningThreads[e].stop();this.runningThreads=[]}onworkstart(e){}onworkitem(e){}onwork(e){}onworkend(e){}onerror(e){}onabort(e){}}class Nt{constructor(e){this.parentPool=e,this.id=Math.random().toString(36).substring(2,15),this.runningTask=null,this.worker}getId(){return this.id}run(e){this.runningTask=e,void 0===this.worker&&(this.worker=new Worker(this.runningTask.script),this.worker.onmessage=this.onmessage,this.worker.onerror=this.onerror),this.worker.postMessage(this.runningTask.startMessage)}stop(){void 0!==this.worker&&(this.worker.terminate(),this.worker=void 0)}onmessage=e=>{e.itemNumber=this.runningTask.info.itemNumber,e.numberOfItems=this.runningTask.info.numberOfItems,e.dataIndex=this.runningTask.info.dataIndex,this.parentPool.onworkitem(e),this.parentPool.onTaskEnd(this)};onerror=e=>{e.itemNumber=this.runningTask.info.itemNumber,e.numberOfItems=this.runningTask.info.numberOfItems,e.dataIndex=this.runningTask.info.dataIndex,this.parentPool.handleWorkerError(e),this.stop()}}class Qt{constructor(e,t,n){this.script=e,this.startMessage=t,this.info=n}}const Gt="undefined"!=typeof JpegImage,zt="undefined"!=typeof jpeg&&void 0!==jpeg.lossless,Vt="undefined"!=typeof JpxImage,jt={jpeg2000:"","jpeg-lossless":"","jpeg-baseline":"",rle:""};class Wt{#On;#_n=new Bt(10);#En=!1;constructor(e,t){this.#On=e}decode(e,t,n){this.#En||(this.#En=!0,this.#_n.onworkstart=this.ondecodestart,this.#_n.onworkitem=this.ondecodeditem,this.#_n.onwork=this.ondecoded,this.#_n.onworkend=this.ondecodeend,this.#_n.onerror=this.onerror,this.#_n.onabort=this.onabort);const r=new Qt(this.#On,{buffer:e,meta:t},n);this.#_n.addWorkerTask(r)}abort(){this.#_n.abort()}ondecodestart(e){}ondecodeditem(e){}ondecoded(e){}ondecodeend(e){}onerror(e){}onabort(e){}}class Ht{#Rn;#Fn;constructor(e,t){this.#Rn=e,this.#Fn=t}#kn=0;decode(e,t,n){++this.#kn;let r=null,i=null;if("jpeg-lossless"===this.#Rn){if(!zt)throw new Error("No JPEG Lossless decoder provided");const n=t.bitsAllocated/8,a=new Uint8Array(e);r=new jpeg.lossless.Decoder;const o=r.decode(a.buffer,0,a.buffer.byteLength,n);8===t.bitsAllocated?i=t.isSigned?new Int8Array(o.buffer):new Uint8Array(o.buffer):16===t.bitsAllocated&&(i=t.isSigned?new Int16Array(o.buffer):new Uint16Array(o.buffer))}else if("jpeg-baseline"===this.#Rn){if(!Gt)throw new Error("No JPEG Baseline decoder provided");r=new JpegImage,r.parse(e),i=r.getData(r.width,r.height)}else if("jpeg2000"===this.#Rn){if(!Vt)throw new Error("No JPEG 2000 decoder provided");r=new JpxImage,r.parse(e),i=r.tiles[0].items}else"rle"===this.#Rn&&(r=new dwvdecoder.RleDecoder,i=r.decode(e,t.bitsAllocated,t.isSigned,t.sliceSize,t.samplesPerPixel,t.planarConfiguration));this.ondecodeditem({data:[i],dataIndex:n.dataIndex,numberOfItems:n.numberOfItems,itemNumber:n.itemNumber}),this.#kn===this.#Fn&&(this.ondecoded({}),this.ondecodeend({}))}abort(){this.onabort({}),this.ondecodeend({})}ondecodestart(e){}ondecodeditem(e){}ondecoded(e){}ondecodeend(e){}onerror(e){}onabort(e){}}class Yt{#En=!1;#Mn=null;constructor(e,t){void 0!==jt&&void 0!==jt[e]?this.#Mn=new Wt(jt[e],t):this.#Mn=new Ht(e,t)}decode(e,t,n){this.#En||(this.#En=!0,this.#Mn.ondecodestart=this.ondecodestart,this.#Mn.ondecodeditem=this.ondecodeditem,this.#Mn.ondecoded=this.ondecoded,this.#Mn.ondecodeend=this.ondecodeend,this.#Mn.onerror=this.onerror,this.#Mn.onabort=this.onabort),this.#Mn.decode(e,t,n)}abort(){this.#Mn.abort()}ondecodestart(e){}ondecodeditem(e){}ondecoded(e){}ondecodeend(e){}onerror(e){}onabort(e){}}class Xt{#qn;setOptions(e){this.#qn=e}#Mn=null;#Un=[];#Bn=[];#Nn=[];#Qn=[];#Gn(e){let t;const n=e["00080060"];return void 0!==n&&"SEG"===n.value[0]&&(t=new ze),void 0===t&&(t=new ke),t}#zn(e,t){const n=this.#Un[e].getDicomElements(),r=this.#Gn(n);try{const i=r.create(n,this.#Bn[e],this.#qn.numberOfFiles);this.onloaditem({data:{image:i,info:n},source:t,warn:this.#Qn[e]})}catch(e){this.onerror({error:e,source:t}),this.onloadend({source:t})}}#Vn(e){this.onprogress({lengthComputable:!0,loaded:e.itemNumber+1,total:e.numberOfItems,index:e.dataIndex,source:origin});const t=e.dataIndex,n=e.data[0];if(1!==e.numberOfItems){if(void 0===this.#Nn[t]){this.#Nn[t]=n.length;const r=e.numberOfItems*this.#Nn[t];try{this.#Bn[t]=new n.constructor(r)}catch(e){if(e instanceof RangeError){const e=Math.floor(Math.log(r)/Math.log(2));g.error("Cannot allocate "+n.constructor.name+" of size: "+r+" (>2^"+e+") for decompressed data.")}return this.#Mn.abort(),this.onerror({error:e,source:origin}),void this.onloadend({source:origin})}}n.length!==this.#Nn[t]&&g.warn("Unsupported varying decompressed data size: "+n.length+" != "+this.#Nn[t]),this.#Bn[t].set(n,this.#Nn[t]*e.itemNumber)}else this.#Bn[t]=n;0===e.itemNumber&&this.#zn(t,origin)}convert(e,t,n){this.onloadstart({source:t,dataIndex:n});const r=new be;let i;void 0!==this.#qn.defaultCharacterSet&&r.setDefaultCharacterSet(this.#qn.defaultCharacterSet);try{r.parse(e),i=this.#Gn(r.getDicomElements()).checkElements(r.getDicomElements())}catch(e){return this.onerror({error:e,source:t}),void this.onloadend({source:t})}const a=r.getDicomElements()["7FE00010"].value;r.getDicomElements()["7FE00010"].value=[];const o=function(e){let t=null;return me(e)?t="jpeg2000":ge(e)?t="jpeg-baseline":pe(e)?t="jpeg-lossless":Se(e)&&(t="rle"),t}(r.getDicomElements()["00020010"].value[0]),s=null!==o;if(this.#Un[n]=r,this.#Bn[n]=a[0],this.#Qn[n]=i,s){const e={bitsAllocated:r.getDicomElements()["00280100"].value[0],isSigned:1===r.getDicomElements()["00280103"].value[0]},t=r.getDicomElements()["00280011"],i=r.getDicomElements()["00280010"];void 0!==t&&void 0!==i&&(e.sliceSize=t.value[0]*i.value[0]);const s=r.getDicomElements()["00280002"];void 0!==s&&(e.samplesPerPixel=s.value[0]);const l=r.getDicomElements()["00280006"];void 0!==l&&(e.planarConfiguration=l.value[0]);const c=a.length;null===this.#Mn&&(this.#Mn=new Yt(o,c),this.#Mn.ondecodeditem=e=>{this.#Vn(e),e.itemNumber+1===e.numberOfItems&&(this.onload(e),this.onloadend(e))},this.#Mn.onerror=this.onerror,this.#Mn.onabort=this.onabort);for(let t=0;t<c;++t)this.#Mn.decode(a[t],e,{itemNumber:t,numberOfItems:c,dataIndex:n})}else this.onprogress({lengthComputable:!0,loaded:100,total:100,index:n,source:t}),this.#zn(n,t),this.onload({source:t}),this.onloadend({source:t})}abort(){this.#Mn&&this.#Mn.abort()}onloadstart(e){}onloaditem(e){}onprogress(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}}class Zt{#dn=null;#gn=null;#pn=0;#mn=0;#_;getDefaultCharacterSet(){return this.#_}setDefaultCharacterSet(e){this.#_=e}#yn(e){this.#dn=e,this.#pn=0,this.#mn=0,this.#bn()}#wn(e){this.#gn=e}#bn(){this.#gn=null}#xn=e=>{this.#pn++,this.#pn===this.#dn.length&&this.onload({source:this.#dn})};#Dn=e=>{this.#mn++,this.#mn===this.#dn.length&&this.onloadend({source:this.#dn})};load(e){if(void 0===e||0===e.length)return;this.#yn(e),this.onloadstart({source:e});const t=new qt(this.onprogress);t.setNToLoad(e.length),t.setNumberOfDimensions(1);const n=[];for(let e=0;e<tn.length;++e)n.push(new tn[e]);let r=e[0],i=null,a=!1;for(let o=0;o<n.length;++o)if(i=n[o],i.canLoadMemory(r)){a=!0,i.setOptions({numberOfFiles:e.length,defaultCharacterSet:this.getDefaultCharacterSet()}),i.onprogress=t.getUndefinedMonoProgressHandler(0),i.onloaditem=this.onloaditem,i.onload=this.#xn,i.onloadend=this.#Dn,i.onerror=this.onerror,i.onabort=this.onabort,this.#wn(i);break}if(!a)throw new Error("No loader found for data: "+r.filename);for(let t=0;t<e.length;++t){if(r=e[t],!i.canLoadMemory(r))throw new Error("Input data of different type: "+r.filename);i.load(r.data,r.filename,t)}}abort(){this.#gn&&this.#gn.isLoading()&&this.#gn.abort()}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}}function $t(e){const t=e.data.length,n=new Uint8Array(t/4*3);let r=0;for(let i=0;i<t;i+=4)n[r]=e.data[i],n[r+1]=e.data[i+1],n[r+2]=e.data[i+2],r+=3;return n}function Kt(e,t,n,r,i,a){const o=new Ie([e,t,1]),s=new Ae([1,1,1]),l=new P(0,0,n),c=new Le(l,o,s),u=new We(c,r,[a]);u.setPhotometricInterpretation("RGB");const h={BitsStored:8};return void 0!==i&&(h.numberOfFiles=i),u.setMeta(h),u}var Jt=n(626),en=n.n(Jt);const tn=[class{#qn={};#jn=!1;setOptions(e){this.#qn=e}isLoading(){return this.#jn}#Wn=new Xt;load(e,t,n){this.#jn||(this.#Wn.setOptions(this.#qn),this.#Wn.onloadstart=this.onloadstart,this.#Wn.onprogress=this.onprogress,this.#Wn.onloaditem=this.onloaditem,this.#Wn.onload=this.onload,this.#Wn.onloadend=e=>{this.#jn=!1,this.onloadend(e)},this.#Wn.onerror=e=>{e.source=t,this.onerror(e)},this.#Wn.onabort=this.onabort),this.#jn=!0,this.#Wn.convert(e,t,n)}abort(){this.#jn=!1,this.#Wn.abort()}canLoadFile(e){const t=Z(e.name);return null===t||"dcm"===t}canLoadUrl(e,t){if(void 0!==t&&void 0!==t.requestHeaders){const e=function(e){return"Accept"===e.name&&W(e.value,"application/dicom")&&"+"!==e.value[18]};return void 0!==t.requestHeaders.find(e)}const n=Rt(e),r=Z(n.pathname),i=null===r,a="dcm"===r,o=n.searchParams.get("contentType");return null!=o?"application/dicom"===o:i||a}canLoadMemory(e){return void 0!==e["Content-Type"]&&"application/dicom"===e["Content-Type"]||void 0!==e.filename&&this.canLoadFile({name:e.filename})}loadFileAs(){return nn.ArrayBuffer}loadUrlAs(){return 1}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}},class{#jn=!1;setOptions(e){}isLoading(){return this.#jn}load(e,t,n){this.#jn=!0,this.onloadstart({source:t});try{this.onprogress({lengthComputable:!0,loaded:100,total:100,index:n,source:t});const r={data:e,source:t};this.onloaditem(r),this.onload(r)}catch(e){this.onerror({error:e,source:t})}finally{this.#jn=!1,this.onloadend({source:t})}}abort(){this.#jn=!1,this.onabort({}),this.onloadend({})}canLoadFile(e){return"json"===Z(e.name)}canLoadUrl(e,t){if(void 0!==t&&void 0!==t.requestHeaders){const e=function(e){return"Accept"===e.name&&W(e.value,"application/json")&&W(e.value,"application/dicom+json")};return void 0!==t.requestHeaders.find(e)}return"json"===Z(Rt(e).pathname)}canLoadMemory(e){return!(void 0===e["Content-Type"]||!e["Content-Type"].includes("json"))||void 0!==e.filename&&this.canLoadFile({name:e.filename})}loadFileAs(){return nn.Text}loadUrlAs(){return 0}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}},class{#jn=!1;setOptions(e){}isLoading(){return this.#jn}load(e,t,n){this.onloadstart({source:t}),this.#jn=!0;const r=new Zt;r.onprogress=e=>{e.loaded=50+e.loaded/2,e.index=n,this.onprogress(e)},r.onloaditem=this.onloaditem,r.onload=this.onload,r.onloadend=e=>{this.#jn=!1,this.onloadend(e)},r.onerror=this.onerror,r.onabort=this.onabort,r.load(function(e){const t=new Uint8Array(e),n=[];if(0===t.length)return n;const r=re(new Uint8Array([13,10,13,10]));let i=ne(t,r,0);if(void 0===i)throw new Error("Can't find the end of the first multipart header");const a=te(t.slice(0,i)).split("\r\n");let o;for(let e=0;e<a.length;++e)if("-"===a[e][0]&&"-"===a[e][1]){o=a[e];break}if(void 0===o)throw new Error("Can't find the boundary between multi-parts");const s=re($(o)),l=o.length;let c=ne(t,s,0);for(;void 0!==i;){const e={},a=te(t.slice(c+l,i)).split("\r\n");for(let t=0;t<a.length;++t){const n=a[t],r=n.indexOf(":");if(-1!==r){const t=n.substring(0,r).trim(),i=n.substring(r+1).trim();e[t]=i}}if(c=ne(t,s,i),void 0===c)break;const o=i+4,u=c-2;e.data=o<u?t.slice(o,u).buffer:new Uint8Array,n.push(e),i=ne(t,r,c+l)}return n}(e))}abort(){this.#jn=!1,this.onabort({}),this.onloadend({})}canLoadFile(e){return!1}canLoadUrl(e,t){if(void 0!==t&&void 0!==t.requestHeaders){const e=function(e){return"Accept"===e.name&&W(e.value,"multipart/related")};return void 0!==t.requestHeaders.find(e)}return!1}canLoadMemory(e){return!1}loadFileAs(){return nn.ArrayBuffer}loadUrlAs(){return 1}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}},class{#Hn=!1;setOptions(e){}isLoading(){return!0}#Yn(e,t){let n=t;n&&"jpg"!==n||(n="jpeg");const r=new Blob([e],{type:"image/"+n});return window.URL.createObjectURL(r)}load(e,t,n){this.#Hn=!1;const r=new Image;if(r.onload=()=>{try{if(!this.#Hn){this.onprogress({lengthComputable:!0,loaded:100,total:100,index:n,source:t});const e=function(e,t,n){const r=e.width,i=e.height,a=document.createElement("canvas");a.width=r,a.height=i;const o=a.getContext("2d");o.drawImage(e,0,0);const s=o.getImageData(0,0,r,i),l={};"string"==typeof t?l.origin={value:t}:(l.fileName={value:t.name},l.fileType={value:t.type},l.fileLastModifiedDate={value:t.lastModified}),l.imageWidth={value:r},l.imageHeight={value:i};const c=n||0;return l.imageUid={value:c},{data:{image:Kt(r,i,c,$t(s),1,c.toString()),info:l},source:t}}(r,t,n);this.onloaditem(e),this.onload(e)}}catch(e){this.onerror({error:e,source:t})}finally{this.onloadend({source:t})}},"string"==typeof e)r.src=e;else if("string"==typeof t){const n=t.split(".").pop().toLowerCase();r.src=this.#Yn(e,n)}}abort(){this.#Hn=!0,this.onabort({}),this.onloadend({})}canLoadFile(e){return void 0!==e.type&&e.type.match("image.*")}canLoadUrl(e,t){if(void 0!==t&&void 0!==t.requestHeaders){const e=function(e){return"Accept"===e.name&&W(e.value,"image/")};return void 0!==t.requestHeaders.find(e)}const n=Rt(e),r=Z(n.pathname),i="jpeg"===r||"jpg"===r||"png"===r||"gif"===r,a=n.searchParams.get("contentType");return null!=a?"image/jpeg"===a||"image/png"===a||"image/gif"===a:i}canLoadMemory(e){return void 0!==e.filename&&this.canLoadFile({name:e.filename})}loadFileAs(){return nn.DataURL}loadUrlAs(){return 1}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}},class{setOptions(e){}isLoading(){return!0}#Yn(e,t){const n=new Uint8Array(e);let r="";for(let e=0;e<n.byteLength;++e)r+=String.fromCharCode(n[e]);return"data:video/"+t+";base64,"+window.btoa(r)}load(e,t,n){const r=document.createElement("video");if("string"==typeof t){const n=t.split(".").pop().toLowerCase();r.src=this.#Yn(e,n)}else r.src=e;r.onloadedmetadata=e=>{try{!function(e,t,n,r,i,a,o){const s=e.videoWidth,l=e.videoHeight,c=Math.ceil(30*e.duration),u={};"string"==typeof a?u.origin={value:a}:(u.fileName={value:a.name},u.fileType={value:a.type},u.fileLastModifiedDate={value:a.lastModified}),u.imageWidth={value:s},u.imageHeight={value:l},u.numberOfFrames={value:c},u.imageUid={value:0};const h=document.createElement("canvas");h.width=s,h.height=l;const d=h.getContext("2d");e.addEventListener("seeked",(function h(m){(function(){r({lengthComputable:!0,loaded:f,total:c,index:o,source:a}),d.drawImage(e,0,0);const n=$t(d.getImageData(0,0,s,l));0===f?(g=Kt(s,l,1,n,c,o.toString()),t({data:{image:g,info:u},source:a})):g.appendFrameBuffer(n,f),++f})(),p+=1/30,p<=m.target.duration?this.currentTime=p:(n({source:a}),i({source:a}),e.removeEventListener("seeked",h))}),!1);let f=0,g=null,p=0;e.currentTime=p}(e.target,this.onloaditem,this.onload,this.onprogress,this.onloadend,t,n)}catch(e){this.onerror({error:e,source:t}),this.onloadend({source:t})}}}abort(){this.onabort({}),this.onloadend({})}canLoadFile(e){return void 0!==e.type&&e.type.match("video.*")}canLoadUrl(e,t){if(void 0!==t&&void 0!==t.requestHeaders){const e=function(e){return"Accept"===e.name&&W(e.value,"video/")};return void 0!==t.requestHeaders.find(e)}const n=Z(Rt(e).pathname);return"mp4"===n||"ogg"===n||"webm"===n}canLoadMemory(e){return void 0!==e.filename&&this.canLoadFile({name:e.filename})}loadFileAs(){return nn.DataURL}loadUrlAs(){return 1}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}},class{#jn=!1;setOptions(e){}isLoading(){return this.#jn}#Xn="";#Zn=[];#$n=null;#Kn(e,t,n){this.#Zn.push({filename:this.#Xn,data:e});const r=100*this.#Zn.length/this.#$n.length;if(this.onprogress({lengthComputable:!0,loaded:r/2,total:100,index:n,item:{loaded:r,total:100,source:t}}),this.#Zn.length<this.#$n.length){const e=this.#Zn.length;this.#Xn=this.#$n[e].name,this.#$n[e].async("arrayBuffer").then((e=>{this.#Kn(e,t,n)}))}else{const e=new Zt;e.onprogress=e=>{e.loaded=50+e.loaded/2,e.index=n,this.onprogress(e)},e.onloaditem=this.onloaditem,e.onload=this.onload,e.onloadend=e=>{this.#jn=!1,this.onloadend(e)},e.onerror=this.onerror,e.onabort=this.onabort,e.load(this.#Zn)}}load(e,t,n){this.onloadstart({source:t}),this.#jn=!0,en().loadAsync(e).then((e=>{this.#Zn=[],this.#$n=e.file(/.*\.dcm/);const r=this.#Zn.length;this.#Xn=this.#$n[r].name,this.#$n[r].async("arrayBuffer").then((e=>{this.#Kn(e,t,n)}))}))}abort(){this.#jn=!1,this.onabort({}),this.onloadend({})}canLoadFile(e){return"zip"===Z(e.name)}canLoadUrl(e,t){if(void 0!==t&&void 0!==t.requestHeaders){const e=function(e){return"Accept"===e.name&&W(e.value,"application/zip")};return void 0!==t.requestHeaders.find(e)}return"zip"===Z(Rt(e).pathname)}canLoadMemory(e){return!(void 0===e["Content-Type"]||!e["Content-Type"].includes("zip"))||void 0!==e.filename&&this.canLoadFile({name:e.filename})}loadFileAs(){return nn.ArrayBuffer}loadUrlAs(){return 1}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}}],nn={Text:0,ArrayBuffer:1,DataURL:2};class rn{#dn=null;#Jn=[];#gn=null;#pn=0;#mn=0;#_;getDefaultCharacterSet(){return this.#_}setDefaultCharacterSet(e){this.#_=e}#yn(e){this.#dn=e,this.#pn=0,this.#mn=0,this.#er(),this.#bn()}#tr(e){this.#Jn.push(e)}#er(){this.#Jn=[]}#wn(e){this.#gn=e}#bn(){this.#gn=null}#xn=e=>{this.#pn++,this.#pn===this.#dn.length&&this.onload({source:this.#dn})};#Dn=e=>{this.#mn++,this.#mn===2*this.#dn.length&&this.onloadend({source:this.#dn})};#Tn(e,t){return n=>{n.source=t,e(n)}}#An(e,t,n){return r=>{e.load(r.target.result,t,n)}}load(e){if(void 0===e||0===e.length)return;this.#yn(e),this.onloadstart({source:e});const t=new qt(this.onprogress);t.setNToLoad(e.length);const n=[];for(let e=0;e<tn.length;++e)n.push(new tn[e]);let r=e[0],i=null,a=!1;for(let o=0;o<n.length;++o)if(i=n[o],i.canLoadFile(r)){a=!0,i.setOptions({numberOfFiles:e.length,defaultCharacterSet:this.getDefaultCharacterSet()}),i.onprogress=t.getUndefinedMonoProgressHandler(1),i.onloaditem=this.onloaditem,i.onload=this.#xn,i.onloadend=this.#Dn,i.onerror=this.onerror,i.onabort=this.onabort,this.#wn(i);break}if(!a)throw new Error("No loader found for file: "+r.name);for(let n=0;n<e.length;++n){if(r=e[n],!i.canLoadFile(r))throw new Error("Input file of different type: "+r);const a=new FileReader;this.#tr(a),a.onprogress=this.#Tn(t.getMonoProgressHandler(n,0),r),a.onload=this.#An(i,r,n),a.onloadend=this.#Dn,a.onerror=this.#Tn(this.onerror,r),a.onabort=this.#Tn(this.onabort,r),i.loadFileAs()===nn.Text?a.readAsText(r):i.loadFileAs()===nn.DataURL?a.readAsDataURL(r):i.loadFileAs()===nn.ArrayBuffer&&a.readAsArrayBuffer(r)}}abort(){for(let e=0;e<this.#Jn.length;++e)1===this.#Jn[e].readyState&&this.#Jn[e].abort();this.#gn&&this.#gn.isLoading()&&this.#gn.abort()}onloadstart(e){}onprogress(e){}onloaditem(e){}onload(e){}onloadend(e){}onerror(e){}onabort(e){}}class an{#_;#nr={};#rr=-1;constructor(e){this.#_=e}#ir(){return++this.#rr,this.#rr}loadFiles(e){"json"===e[0].name.split(".").pop().toLowerCase()?this.#ar(e[0]):this.#or(e)}loadURLs(e,t){"json"===e[0].split(".").pop().toLowerCase()?this.#sr(e[0],t):this.#lr(e,t)}loadImageObject(e){const t=new Zt;this.#cr(e,t,"image")}abort(){const e=Object.keys(this.#nr);for(let t=0;t<e.length;++t)this.#nr[t].loader.abort(),delete this.#nr[t]}#or(e){const t=new rn;t.setDefaultCharacterSet(this.#_),this.#cr(e,t,"image")}#lr(e,t){const n=new Ut;n.setDefaultCharacterSet(this.#_),this.#cr(e,n,"image",t)}#ar(e){const t=new rn;this.#cr([e],t,"state")}#sr(e,t){const n=new Ut;this.#cr([e],n,"state",t)}#cr(e,t,n,r){const i={loadtype:n},a=this.#ir();i.loadid=a,t.onloadstart=e=>{this.#nr[a]={loader:t,isFirstItem:!0},this.#Tn(this.onloadstart,i)(e)},t.onprogress=this.#Tn(this.onprogress,i),t.onloaditem=e=>{const t={loadtype:n,loadid:a};void 0!==this.#nr[a]&&(t.isfirstitem=this.#nr[a].isFirstItem),this.#Tn(this.onloaditem,t)(e),void 0!==this.#nr[a]&&this.#nr[a].isFirstItem&&(this.#nr[a].isFirstItem=!1)},t.onload=this.#Tn(this.onload,i),t.onloadend=e=>{delete this.#nr[a],this.#Tn(this.onloadend,i)(e)},t.onerror=this.#Tn(this.onerror,i),t.onabort=this.#Tn(this.onabort,i);try{t.load(e,r)}catch(e){return this.onerror({error:e,loadid:a}),void this.onloadend({loadid:a})}}#Tn(e,t){return function(n){const r=Object.keys(t);for(let e=0;e<r.length;++e){const i=r[e];n[i]=t[i]}e(n)}}onloadstart(e){}onprogress(e){}onload(e){}onloaditem(e){}onloadend(e){}onerror(e){}onabort(e){}}class on{#ur={};#ue=new Ce;length(){return Object.keys(this.#ur).length}reset(){this.#ur=[]}get(e){return this.#ur[e]}setImage(e,t){this.#ur[e].image=t,this.#ge({type:"imageset",value:[t],dataid:e}),t.addEventListener("imagechange",this.#hr(e))}addNew(e,t,n){if(void 0!==this.#ur[e])throw new Error("Index already used in storage: "+e);this.#ur[e]={image:t,meta:n},t.addEventListener("imagechange",this.#hr(e))}update(e,t,n){const r=this.#ur[e];r.image.appendSlice(t);let i="";i=void 0!==n["00020010"]?"00200013":"imageUid",r.meta=function(e,t,n,r){const i={};if(!n)throw new Error("Cannot merge object with an undefined id key: "+n);if(!Object.prototype.hasOwnProperty.call(e,n))throw new Error("Id key not found in first object while merging: "+n+", obj: "+e);if(!Object.prototype.hasOwnProperty.call(t,n))throw new Error("Id key not found in second object while merging: "+n+", obj: "+t);let a=!1;if(Object.prototype.hasOwnProperty.call(e[n],"merged")&&e[n].merged&&(a=!0),!Object.prototype.hasOwnProperty.call(e[n],r))throw new Error("Id value not found in first object while merging: "+n+", valueKey: "+r+", ojb: "+e);if(!Object.prototype.hasOwnProperty.call(t[n],r))throw new Error("Id value not found in second object while merging: "+n+", valueKey: "+r+", ojb: "+t);let o=e[n][r];const s=t[n][r][0];if(i[n]=e[n],a){for(let e=0;e<o.length;++e)if(o[e]===s)throw new Error("The first object already contains id2: "+s+", id1: "+o);i[n][r].push(s)}else{if(o=o[0],o===s)throw new Error("Cannot merge object with same ids: "+o+", id2: "+s);i[n][r].push(s),i[n].merged=!0}const l=Object.keys(e),c=Object.keys(t).filter((function(e){return l.indexOf(e)<0})),u=l.concat(c);for(let l=0;l<u.length;++l){const c=u[l];if(c!==n){let n,l,u,h,d;if(Object.prototype.hasOwnProperty.call(e,c)&&(n=e[c],Object.prototype.hasOwnProperty.call(n,r)&&(l=n[r])),Object.prototype.hasOwnProperty.call(t,c)&&(u=t[c],Object.prototype.hasOwnProperty.call(u,r)&&(h=u[r])),void 0!==n?d=n:void 0!==u&&(d=u),!ee(l,h))if(a){if(Array.isArray(l)){d[r]={};for(let e=0;e<o.length;++e)d[r][o[e]]=l}else d[r]=l;d[r][s]=h}else{const e={};e[o]=l,e[s]=h,d[r]=e}i[c]=d}}return i}(r.meta,n,i,"value")}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)};#hr(e){return t=>{t.dataid=e,this.#ge(t)}}}class sn{#dr;#fr=0;constructor(e){this.#dr=e}wheel(e){let t=52;if(1===e.deltaMode&&(t=5.99),this.#fr+=e.deltaY,Math.abs(this.#fr)<t)return;this.#fr=0;const n=e.deltaY<0,r=xt(e),i=this.#dr.getLayerGroupByDivId(r.groupDivId).getActiveViewLayer().getViewController(),a=i.getImageSize();a.canScroll3D()?n?i.incrementScrollIndex():i.decrementScrollIndex():a.moreThanOne(3)&&(n?i.incrementIndex(3):i.decrementIndex(3))}}const ln={t(e){const t=e.split(".");if(2!==t.length)throw new Error("Unexpected translation key length.");if("unit"!==t[0])throw new Error("Unexpected translation key prefix.");return{mm:"mm",cm2:"cm",degree:""}[t[1]]}};class cn{#gr;#pr;constructor(e,t){this.#gr=e,this.#pr=t}getBegin(){return this.#gr}getEnd(){return this.#pr}equals(e){return null!==e&&this.getBegin().equals(e.getBegin())&&this.getEnd().equals(e.getEnd())}getDeltaX(){return this.getEnd().getX()-this.getBegin().getX()}getDeltaY(){return this.getEnd().getY()-this.getBegin().getY()}getLength(){return Math.sqrt(this.getDeltaX()*this.getDeltaX()+this.getDeltaY()*this.getDeltaY())}getWorldLength(e,t){let n=null;if(null!==e&&null!==t){const r=this.getDeltaX()*e,i=this.getDeltaY()*t;n=Math.sqrt(r*r+i*i)}return n}getMidpoint(){return new T((this.getBegin().getX()+this.getEnd().getX())/2,(this.getBegin().getY()+this.getEnd().getY())/2)}getSlope(){return this.getDeltaY()/this.getDeltaX()}getIntercept(){return(this.getEnd().getX()*this.getBegin().getY()-this.getBegin().getX()*this.getEnd().getY())/this.getDeltaX()}getInclination(){return 180-180*Math.atan2(this.getDeltaY(),this.getDeltaX())/Math.PI}quantify(e){const t={},n=e.get2DSpacing(),r=this.getWorldLength(n[0],n[1]);return null!==r&&(t.length={value:r,unit:ln.t("unit.mm")}),t}}function un(e,t){const n=e.getDeltaX(),r=e.getDeltaY(),i=t.getDeltaX(),a=t.getDeltaY(),o=n*i+r*a,s=n*a-r*i;return 360-(180-180*Math.atan2(s,o)/Math.PI)}function hn(e,t,n){let r=0,i=0,a=0,o=0;if(0!==e.getSlope()){const s=-1/e.getSlope(),l=t.getY()-s*t.getX(),c=n/(2*Math.sqrt(1+s*s));r=t.getX()-c,i=s*r+l,a=t.getX()+c,o=s*a+l}else r=t.getX(),i=t.getY()-n/2,a=t.getX(),o=t.getY()+n/2;return new cn(new T(r,i),new T(a,o))}function dn(e,t){return function(e){return null!=e&&(e.includes("median")||e.includes("p25")||e.includes("p75"))}(t)?function(e){const t=fn(e);return e.sort((function(e,t){return e-t})),t.median=gn(e,.5),t.p25=gn(e,.25),t.p75=gn(e,.75),t}(e):fn(e)}function fn(e){let t=e[0],n=t,r=0,i=0,a=0;const o=e.length;for(let s=0;s<o;++s)a=e[s],a<t?t=a:a>n&&(n=a),r+=a,i+=a*a;const s=r/o,l=i/o-s*s;return{min:t,max:n,mean:s,stdDev:Math.sqrt(l)}}function gn(e,t){if(0===e.length)throw new Error("Empty array provided for percentile calculation.");if(t<0||t>1)throw new Error("Invalid ratio provided for percentile calculation: "+t);if(0===t)return e[0];if(1===t)return e[e.length-1];const n=(e.length-1)*t,r=Math.floor(n),i=e[r];return i+(e[r+1]-i)*(n-r)}function pn(){return Math.random().toString(36).substring(2,15)}function mn(e,t,n,r){const i=r.applyZoomScale(3),a={x:Math.abs(i.x),y:Math.abs(i.y)};return new(lt().Ellipse)({x:e,y:t,stroke:"#999",fill:"rgba(100,100,100,0.7",strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,radius:a,radiusX:a.x,radiusY:a.y,name:"anchor",id:n.toString(),dragOnTop:!1,draggable:!0,visible:!1})}class Sn{#dr;constructor(e){this.#dr=e}#mr=null;#Sr=null;#yr=null;#Be=null;#vr=!1;#br=null;setFactoryList(e){this.#mr=e}setShape(e){if(this.#yr=e,this.#yr){this.#Cr();const e=this.#yr.getParent(),t=Object.keys(this.#mr);this.#Sr=null;for(let n=0;n<t.length;++n){const r=new this.#mr[t[n]];if(r.isFactoryGroup(e)){this.#Sr=r;break}}if(null===this.#Sr)throw new Error("Could not find a factory to update shape.");this.#wr()}}setViewController(e){this.#Be=e}getShape(){return this.#yr}isActive(){return this.#vr}setDrawEventCallback(e){this.#br=e}enable(){this.#vr=!0,this.#yr&&(this.#xr(!0),this.#yr.getLayer()&&this.#yr.getLayer().draw())}disable(){this.#vr=!1,this.#yr&&(this.#xr(!1),this.#yr.getLayer()&&this.#yr.getLayer().draw())}resetAnchors(){this.#Cr(),this.#wr(),this.#xr(!0)}#Dr(e){this.#yr&&this.#yr.getParent()&&this.#yr.getParent().find(".anchor").forEach(e)}#xr(e){this.#Dr((function(t){t.visible(e)}))}setAnchorsActive(e){let t=null;t=e?e=>{this.#Tr(e)}:e=>{this.#Pr(e)},this.#Dr(t)}#Cr(){this.#Dr((function(e){e.remove()}))}#wr(){if(!this.#yr||!this.#yr.getLayer())return;const e=this.#yr.getParent(),t=this.#Sr.getAnchors(this.#yr,this.#dr.getStyle());for(let n=0;n<t.length;++n)this.#Tr(t[n]),e.add(t[n])}#Ir(e){const t=e.getParent(),n=e.id(),r=e.x(),i=e.y();return{getParent:function(){return t},id:function(){return n},x:function(){return r},y:function(){return i}}}#Tr(e){let t=null;const n=ut(this.#yr);e.on("dragstart.edit",(e=>{const n=e.target;t=this.#Ir(n),e.cancelBubble=!0})),e.on("dragmove.edit",(e=>{const t=e.target,n=xt(e.evt);!function(e,t){const n=t.getParent();yn(t,{x:-n.x(),y:-n.y()},{x:e.x-n.x(),y:e.y-n.y()})}(this.#dr.getLayerGroupByDivId(n.groupDivId).getActiveDrawLayer().getBaseSize(),t),this.#Sr.update(t,this.#dr.getStyle(),this.#Be),t.getLayer()?t.getLayer().draw():g.warn("No layer to draw the anchor!"),e.cancelBubble=!0})),e.on("dragend.edit",(e=>{const r=e.target,i=this.#Ir(r),a=new ft(n,this.#Sr,t,i,r.getLayer(),this.#Be,this.#dr.getStyle());a.onExecute=this.#br,a.onUndo=this.#br,a.execute(),this.#dr.addToUndoStack(a),t=i,e.cancelBubble=!0})),e.on("mousedown touchstart",(e=>{e.target.moveToTop()})),e.on("mouseover.edit",(e=>{const t=e.target;t.stroke("#ddd"),t.getLayer()?t.getLayer().draw():g.warn("No layer to draw the anchor!")})),e.on("mouseout.edit",(e=>{const t=e.target;t.stroke("#999"),t.getLayer()?t.getLayer().draw():g.warn("No layer to draw the anchor!")}))}#Pr(e){e.off("dragstart.edit"),e.off("dragmove.edit"),e.off("dragend.edit"),e.off("mousedown touchstart"),e.off("mouseover.edit"),e.off("mouseout.edit")}}function yn(e,t,n){let r=!1;return e.x()<t.x?(e.x(t.x),r=!0):e.x()>n.x&&(e.x(n.x),r=!0),e.y()<t.y?(e.y(t.y),r=!0):e.y()>n.y&&(e.y(n.y),r=!0),r}class vn{#Ar=[];getPoint(e){return this.#Ar[e]}getLength(){return this.#Ar.length}addPoint(e){this.#Ar.push(e)}addPoints(e){this.#Ar=this.#Ar.concat(e)}}class bn{getGroupName(){return"roi-group"}getNPoints(){}getTimeout(){return 100}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=new vn;r.addPoints(e);const i=[];for(let e=0;e<r.getLength();++e)i.push(r.getPoint(e).getX()),i.push(r.getPoint(e).getY());const a=new(lt().Line)({points:i,stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape",closed:!0}),o=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),name:"text"});let s="";s="",o.setText(""),o.meta={textExpr:"",quantification:{}};const l=new(lt().Label)({x:r.getPoint(0).getX(),y:r.getPoint(0).getY()+t.scale(10),scale:t.applyZoomScale(1),visible:!1,name:"label"});l.add(o),l.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const c=new(lt().Group);return c.name(this.getGroupName()),c.add(l),c.add(a),c.visible(!0),c}getAnchors(e,t){const n=e.points(),r=[];for(let i=0;i<n.length;i+=2){const a=n[i]+e.x(),o=n[i+1]+e.y(),s=i.toString();r.push(mn(a,o,s,t))}return r}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"label"===e.name()}))[0],o=r.getChildren((function(t){return t.id()===e.id()}))[0];o.x(e.x()),o.y(e.y());const s=i.points();s[e.id()]=e.x()-i.x(),s[e.id()+1]=e.y()-i.y(),i.points(s);const l=a.getText();l.setText(l.meta.textExpr);const c={x:s[0]+i.x(),y:s[1]+i.y()+t.scale(10)};a.position(c)}}var Cn=n(812),wn=n.n(Cn);class xn{constructor(e,t){this.pointArray=e?e.slice():[],this.controlPointIndexArray=t?t.slice():[]}getPoint(e){return this.pointArray[e]}isControlPoint(e){const t=this.pointArray.indexOf(e);if(-1!==t)return-1!==this.controlPointIndexArray.indexOf(t);throw new Error("Error: isControlPoint called with not in list point.")}getLength(){return this.pointArray.length}addPoint(e){this.pointArray.push(e)}addControlPoint(e){const t=this.pointArray.indexOf(e);if(-1===t)throw new Error("Cannot mark a non registered point as control point.");this.controlPointIndexArray.push(t)}addPoints(e){this.pointArray=this.pointArray.concat(e)}appenPath(e){const t=this.pointArray.length;this.pointArray=this.pointArray.concat(e.pointArray);const n=[];for(let r=0;r<e.controlPointIndexArray.length;++r)n[r]=e.controlPointIndexArray[r]+t;this.controlPointIndexArray=this.controlPointIndexArray.concat(n)}}class Dn{constructor(e,t){this.bucketCount=1<<e,this.mask=this.bucketCount-1,this.size=0,this.loc=0,this.cost=void 0!==t?t:function(e){return e},this.buckets=this.buildArray(this.bucketCount)}push(e){const t=this.getBucket(e);e.next=this.buckets[t],this.buckets[t]=e,this.size++}pop(){if(0===this.size)throw new Error("Cannot pop, bucketQueue is empty.");for(;null===this.buckets[this.loc];)this.loc=(this.loc+1)%this.bucketCount;const e=this.buckets[this.loc];return this.buckets[this.loc]=e.next,e.next=null,this.size--,e}remove(e){if(!e)return!1;const t=this.getBucket(e);let n=this.buckets[t];for(;null!==n&&(null===n.next||e.x!==n.next.x||e.y!==n.next.y);)n=n.next;return null!==n&&(n.next=n.next.next,this.size--,!0)}isEmpty(){return 0===this.size}getBucket(e){return this.cost(e)&this.mask}buildArray(e){const t=new Array(e);for(let e=0;e<t.length;e++)t[e]=null;return t}}const Tn=2/(3*Math.PI);function Pn(e,t,n,r,i){const a=e[r][n],o=t[r][n];let s=Math.sqrt(a*a+o*o);s=Math.max(s,1e-100),i.x=a/s,i.y=o/s}class In{constructor(){this.width=-1,this.height=-1,this.curPoint=null,this.searchGranBits=8,this.searchGran=1<<this.searchGranBits,this.pointsPerPost=500,this.greyscale=null,this.laplace=null,this.gradient=null,this.gradX=null,this.gradY=null,this.parents=null,this.working=!1,this.trained=!1,this.trainingPoints=null,this.edgeWidth=2,this.trainingLength=32,this.edgeGran=256,this.edgeTraining=null,this.gradPointsNeeded=32,this.gradGran=1024,this.gradTraining=null,this.insideGran=256,this.insideTraining=null,this.outsideGran=256,this.outsideTraining=null}getTrainingIdx(e,t){return Math.round((e-1)*t)}getTrainedEdge(e){return this.edgeTraining[this.getTrainingIdx(this.edgeGran,e)]}getTrainedGrad(e){return this.gradTraining[this.getTrainingIdx(this.gradGran,e)]}getTrainedInside(e){return this.insideTraining[this.getTrainingIdx(this.insideGran,e)]}getTrainedOutside(e){return this.outsideTraining[this.getTrainingIdx(this.outsideGran,e)]}setWorking(e){this.working=e}setDimensions(e,t){this.width=e,this.height=t}setData(e){if(-1===this.width||-1===this.height)throw new Error("Dimensions have not been set.");this.greyscale=function(e,t,n){const r={data:[]};for(let i=0;i<n;i++){r.data[i]=[];for(let n=0;n<t;n++){const a=4*(i*t+n);r.data[i][n]=(e[a]+e[a+1]+e[a+2])/765}}return r.dx=function(e,t){return e+1===this.data[t].length&&e--,this.data[t][e+1]-this.data[t][e]},r.dy=function(e,t){return t+1===this.data.length&&t--,this.data[t][e]-this.data[t+1][e]},r.gradMagnitude=function(e,t){const n=this.dx(e,t),r=this.dy(e,t);return Math.sqrt(n*n+r*r)},r.laplace=function(e,t){let n=-16*this.data[t][e];return n+=this.data[t-2][e],n+=this.data[t-1][e-1]+2*this.data[t-1][e]+this.data[t-1][e+1],n+=this.data[t][e-2]+2*this.data[t][e-1]+2*this.data[t][e+1]+this.data[t][e+2],n+=this.data[t+1][e-1]+2*this.data[t+1][e]+this.data[t+1][e+1],n+=this.data[t+2][e],n},r}(e,this.width,this.height),this.laplace=function(e){const t=[];t[0]=[],t[1]=[];for(let n=1;n<e.data.length;n++)t[0][n]=1,t[1][n]=1;for(let n=2;n<e.data.length-2;n++){t[n]=[],t[n][0]=1,t[n][1]=1;for(let r=2;r<e.data[n].length-2;r++)t[n][r]=e.laplace(r,n)>.33?0:1;t[n][e.data[n].length-2]=1,t[n][e.data[n].length-1]=1}t[e.data.length-2]=[],t[e.data.length-1]=[];for(let n=1;n<e.data.length;n++)t[e.data.length-2][n]=1,t[e.data.length-1][n]=1;return t}(this.greyscale),this.gradient=function(e){const t=[];let n=0,r=0,i=0;for(i=0;i<e.data.length-1;i++){for(t[i]=[],r=0;r<e.data[i].length-1;r++)t[i][r]=e.gradMagnitude(r,i),n=Math.max(t[i][r],n);t[i][e.data[i].length-1]=t[i][e.data.length-2]}t[e.data.length-1]=[];for(let n=0;n<t[0].length;n++)t[e.data.length-1][n]=t[e.data.length-2][n];for(i=0;i<t.length;i++)for(r=0;r<t[i].length;r++)t[i][r]=1-t[i][r]/n;return t}(this.greyscale),this.gradX=function(e){const t=[];for(let n=0;n<e.data.length;n++){t[n]=[];for(let r=0;r<e.data[n].length-1;r++)t[n][r]=e.dx(r,n);t[n][e.data[n].length-1]=t[n][e.data[n].length-2]}return t}(this.greyscale),this.gradY=function(e){const t=[];for(let n=0;n<e.data.length-1;n++){t[n]=[];for(let r=0;r<e.data[n].length;r++)t[n][r]=e.dy(r,n)}t[e.data.length-1]=[];for(let n=0;n<e.data[0].length;n++)t[e.data.length-1][n]=t[e.data.length-2][n];return t}(this.greyscale);const t=function(e,t,n,r){const i={inside:[],outside:[]},a={x:-1,y:-1};for(let o=0;o<t.length;o++){i.inside[o]=[],i.outside[o]=[];for(let s=0;s<t[o].length;s++){Pn(t,n,s,o,a);let l=Math.round(s+e*a.y),c=Math.round(o-e*a.x),u=Math.round(s-e*a.y),h=Math.round(o+e*a.x);l=Math.max(Math.min(l,t[o].length-1),0),u=Math.max(Math.min(u,t[o].length-1),0),c=Math.max(Math.min(c,t.length-1),0),h=Math.max(Math.min(h,t.length-1),0),i.inside[o][s]=r.data[c][l],i.outside[o][s]=r.data[h][u]}}return i}(this.edgeWidth,this.gradX,this.gradY,this.greyscale);this.inside=t.inside,this.outside=t.outside,this.edgeTraining=[],this.gradTraining=[],this.insideTraining=[],this.outsideTraining=[]}findTrainingPoints(e){const t=[];if(null!==this.parents)for(let n=0;n<this.trainingLength&&e;n++)t.push(e),e=this.parents[e.y][e.x];return t}resetTraining(){this.trained=!1}doTraining(e){if(this.trainingPoints=this.findTrainingPoints(e),this.trainingPoints.length<8)return;const t=[];this.calculateTraining(t,this.edgeGran,this.greyscale,this.edgeTraining),this.calculateTraining(t,this.gradGran,this.gradient,this.gradTraining),this.calculateTraining(t,this.insideGran,this.inside,this.insideTraining),this.calculateTraining(t,this.outsideGran,this.outside,this.outsideTraining),this.trainingPoints.length<this.gradPointsNeeded&&this.addInStaticGrad(this.trainingPoints.length,this.gradPointsNeeded),this.trained=!0}calculateTraining(e,t,n,r){let i=0;for(e.length=t,i=0;i<t;i++)e[i]=0;let a=1;for(i=0;i<this.trainingPoints.length;i++){const r=this.trainingPoints[i],o=this.getTrainingIdx(t,n[r.y][r.x]);e[o]+=1,a=Math.max(a,e[o])}for(i=0;i<t;i++)e[i]=1-e[i]/a;!function(e,t){t[0]=.4*e[0]+.5*e[1]+.1*e[1],t[1]=.25*e[0]+.4*e[1]+.25*e[2]+.1*e[3];for(let n=2;n<e.length-2;n++)t[n]=.05*e[n-2]+.25*e[n-1]+.4*e[n]+.25*e[n+1]+.05*e[n+2];const n=e.length;t[n-2]=.25*e[n-1]+.4*e[n-2]+.25*e[n-3]+.1*e[n-4],t[n-1]=.4*e[n-1]+.5*e[n-2]+.1*e[n-3]}(e,r)}addInStaticGrad(e,t){for(let n=0;n<this.gradGran;n++)this.gradTraining[n]=Math.min(this.gradTraining[n],1-n*(t-e)/(t*this.gradGran))}gradDirection(e,t,n,r){return function(e,t,n,r,i,a){const o={x:-1,y:-1},s={x:-1,y:-1};Pn(e,t,n,r,o),Pn(e,t,i,a,s);let l=o.y*(i-n)-o.x*(a-r),c=s.y*(i-n)-s.x*(a-r);return l<0&&(l=-l,c=-c),n!==i&&r!==a&&(l*=Math.SQRT1_2,c*=Math.SQRT1_2),Tn*(Math.acos(l)+Math.acos(c))}(this.gradX,this.gradY,e,t,n,r)}dist(e,t,n,r){let i=this.gradient[r][n];e!==n&&t!==r||(i*=Math.SQRT1_2);const a=this.laplace[r][n],o=this.gradDirection(e,t,n,r);return this.trained?.3*this.getTrainedGrad(i)+.3*a+.1*(o+this.getTrainedEdge(this.greyscale.data[t][e])+this.getTrainedInside(this.inside[t][e])+this.getTrainedOutside(this.outside[t][e])):.43*i+.43*a+.11*o}adj(e){const t=[],n=Math.max(e.x-1,0),r=Math.max(e.y-1,0),i=Math.min(e.x+1,this.greyscale.data[0].length-1),a=Math.min(e.y+1,this.greyscale.data.length-1);let o=0;for(let s=r;s<=a;s++)for(let r=n;r<=i;r++)r===e.x&&s===e.y||(t[o++]={x:r,y:s});return t}#Lr=e=>Math.round(this.searchGran*this.cost[e.y][e.x]);setPoint(e){this.setWorking(!0),this.curPoint=e;let t=0,n=0;for(this.visited=[],n=0;n<this.height;n++)for(this.visited[n]=[],t=0;t<this.width;t++)this.visited[n][t]=!1;for(this.parents=[],n=0;n<this.height;n++)this.parents[n]=[];for(this.cost=[],n=0;n<this.height;n++)for(this.cost[n]=[],t=0;t<this.width;t++)this.cost[n][t]=Number.MAX_VALUE;this.cost[e.y][e.x]=0,this.pq=new Dn(this.searchGranBits,this.#Lr),this.pq.push(e)}doWork(){if(!this.working)return;this.timeout=null;let e=0;const t=[];for(;!this.pq.isEmpty()&&e<this.pointsPerPost;){const n=this.pq.pop();t.push(n),t.push(this.parents[n.y][n.x]),this.visited[n.y][n.x]=!0;const r=this.adj(n);for(let e=0;e<r.length;e++){const t=r[e],i=this.cost[n.y][n.x]+this.dist(n.x,n.y,t.x,t.y);i<this.cost[t.y][t.x]&&(this.cost[t.y][t.x]!==Number.MAX_VALUE&&this.pq.remove(t),this.cost[t.y][t.x]=i,this.parents[t.y][t.x]=n,this.pq.push(t))}e++}return t}}class An{#Or;#_r;constructor(e,t){this.#Or=e,this.#_r=t}getCenter(){return this.#Or}getRadius(){return this.#_r}equals(e){return null!==e&&this.getCenter().equals(e.getCenter())&&this.getRadius()===e.getRadius()}getSurface(){return Math.PI*this.getRadius()*this.getRadius()}getWorldSurface(e,t){return function(e,t,n){let r=null;return null!==t&&null!==n&&(r=e*t*n),r}(this.getSurface(),e,t)}getRound(){const e=this.getCenter().getX(),t=this.getCenter().getY(),n=this.getRadius(),r=Math.pow(n,2),i=t+n,a=[];for(let o=t-n;o<i;++o){const n=r-Math.pow(o-t,2);if(Math.abs(n)<1e-7)continue;const i=Math.sqrt(n);i<.5||a.push([[Math.round(e-i),Math.round(o)],[Math.round(e+i),Math.round(o)]])}return a}quantify(e,t){const n={},r=e.get2DSpacing(),i=this.getWorldSurface(r[0],r[1]);if(null!==i&&(n.surface={value:i/100,unit:ln.t("unit.cm2")}),e.canQuantifyImage()){const r=this.getRound();if(0!==r.length){const i=dn(e.getImageVariableRegionValues(r),t);n.min={value:i.min,unit:""},n.max={value:i.max,unit:""},n.mean={value:i.mean,unit:""},n.stdDev={value:i.stdDev,unit:""},void 0!==i.median&&(n.median={value:i.median,unit:""}),void 0!==i.p25&&(n.p25={value:i.p25,unit:""}),void 0!==i.p75&&(n.p75={value:i.p75,unit:""})}}return n}}class Ln{#Or;#Er;#Rr;constructor(e,t,n){this.#Or=e,this.#Er=t,this.#Rr=n}getCenter(){return this.#Or}getA(){return this.#Er}getB(){return this.#Rr}equals(e){return null!==e&&this.getCenter().equals(e.getCenter())&&this.getA()===e.getA()&&this.getB()===e.getB()}getSurface(){return Math.PI*this.getA()*this.getB()}getWorldSurface(e,t){return function(e,t,n){let r=null;return null!==t&&null!==n&&(r=e*t*n),r}(this.getSurface(),e,t)}getRound(){const e=this.getCenter().getX(),t=this.getCenter().getY(),n=this.getA(),r=this.getB(),i=n/r,a=Math.pow(r,2),o=t+r,s=[];for(let n=t-r;n<o;++n){const r=a-Math.pow(n-t,2);if(Math.abs(r)<1e-7)continue;const o=i*Math.sqrt(r);o<.5||s.push([[Math.round(e-o),Math.round(n)],[Math.round(e+o),Math.round(n)]])}return s}quantify(e,t){const n={},r=e.get2DSpacing(),i=this.getWorldSurface(r[0],r[1]);if(null!==i&&(n.surface={value:i/100,unit:ln.t("unit.cm2")}),e.canQuantifyImage()){const r=this.getRound();if(0!==r.length){const i=dn(e.getImageVariableRegionValues(r),t);n.min={value:i.min,unit:""},n.max={value:i.max,unit:""},n.mean={value:i.mean,unit:""},n.stdDev={value:i.stdDev,unit:""},void 0!==i.median&&(n.median={value:i.median,unit:""}),void 0!==i.p25&&(n.p25={value:i.p25,unit:""}),void 0!==i.p75&&(n.p75={value:i.p75,unit:""})}}return n}}class On{#gr;#pr;constructor(e,t){this.#gr=new T(Math.min(e.getX(),t.getX()),Math.min(e.getY(),t.getY())),this.#pr=new T(Math.max(e.getX(),t.getX()),Math.max(e.getY(),t.getY()))}getBegin(){return this.#gr}getEnd(){return this.#pr}equals(e){return null!==e&&this.getBegin().equals(e.getBegin())&&this.getEnd().equals(e.getEnd())}getSurface(){const e=this.getBegin(),t=this.getEnd();return Math.abs(t.getX()-e.getX())*Math.abs(t.getY()-e.getY())}getWorldSurface(e,t){return function(e,t,n){let r=null;return null!==t&&null!==n&&(r=e*t*n),r}(this.getSurface(),e,t)}getRealWidth(){return this.getEnd().getX()-this.getBegin().getX()}getRealHeight(){return this.getEnd().getY()-this.getBegin().getY()}getWidth(){return Math.abs(this.getRealWidth())}getHeight(){return Math.abs(this.getRealHeight())}getRound(){return{min:this.getBegin().getRound(),max:this.getEnd().getRound()}}quantify(e,t){const n={},r=e.get2DSpacing(),i=this.getWorldSurface(r[0],r[1]);if(null!==i&&(n.surface={value:i/100,unit:ln.t("unit.cm2")}),e.canQuantifyImage()){const r=this.getRound(),i=dn(e.getImageRegionValues(r.min,r.max),t);n.min={value:i.min,unit:""},n.max={value:i.max,unit:""},n.mean={value:i.mean,unit:""},n.stdDev={value:i.stdDev,unit:""},void 0!==i.median&&(n.median={value:i.median,unit:""}),void 0!==i.p25&&(n.p25={value:i.p25,unit:""}),void 0!==i.p75&&(n.p75={value:i.p75,unit:""})}return n}}class _n{#Fr=0;#kr=0;getMin(){return this.#Fr}setMin(e){this.#Fr=e}getMax(){return this.#kr}setMax(e){this.#kr=e}getName(){return"Threshold"}#Mr=null;setOriginalImage(e){this.#Mr=e}getOriginalImage(){return this.#Mr}update(){const e=this.getOriginalImage(),t=e.getDataRange().min;return e.transform((e=>e<this.getMin()||e>this.getMax()?t:e))}}class En{getName(){return"Sharpen"}#Mr=null;setOriginalImage(e){this.#Mr=e}getOriginalImage(){return this.#Mr}update(){return this.getOriginalImage().convolute2D([0,-1,0,-1,5,-1,0,-1,0])}}class Rn{getName(){return"Sobel"}#Mr=null;setOriginalImage(e){this.#Mr=e}getOriginalImage(){return this.#Mr}update(){const e=this.getOriginalImage(),t=e.convolute2D([1,0,-1,2,0,-2,1,0,-1]),n=e.convolute2D([1,2,1,0,0,0,-1,-2,-1]);return t.compose(n,(function(e,t){return Math.sqrt(e*e+t*t)}))}}class Fn{#qr;#dr;constructor(e,t){this.#qr=e,this.#dr=t}getName(){return"Filter-"+this.#qr.getName()}execute(){this.#dr.setLastImage(this.#qr.update()),this.#dr.render(0);const e={type:"filterrun",id:this.getName()};this.onExecute(e)}undo(){this.#dr.setLastImage(this.#qr.getOriginalImage()),this.#dr.render(0);const e={type:"filterundo",id:this.getName()};this.onUndo(e)}onExecute(e){}onUndo(e){}}const kn={WindowLevel:class{#dr;#Ur=!1;#Br;constructor(e){this.#dr=e,this.#Br=new sn(e)}mousedown=e=>{this.#Ur=!0,this.x0=e._x,this.y0=e._y};mousemove=e=>{if(!this.#Ur)return;const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId).getActiveViewLayer().getViewController(),r=e._x-this.x0,i=this.y0-e._y,o=n.getImageRescaledDataRange(),s=.01*(o.max-o.min),l=parseInt(n.getWindowLevel().center,10),c=parseInt(n.getWindowLevel().width,10),u=l+Math.round(i*s);let h=c+Math.round(r*s);var d;h=(d=h)<1?1:d,n.addWindowLevelPresets({manual:{wl:[new a(u,h)],name:"manual"}}),n.setWindowLevelPreset("manual"),this.x0=e._x,this.y0=e._y};mouseup=e=>{this.#Ur&&(this.#Ur=!1)};mouseout=e=>{this.mouseup(e)};touchstart=e=>{this.mousedown(e)};touchmove=e=>{this.mousemove(e)};touchend=e=>{this.mouseup(e)};dblclick=e=>{const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId).getActiveViewLayer(),r=n.displayToPlaneIndex(e._x,e._y),i=n.getViewController(),a=this.#dr.getImage(n.getDataIndex());i.setWindowLevel(a.getRescaledValueAtIndex(i.getCurrentIndex().getWithNew2D(r.get(0),r.get(1))),parseInt(i.getWindowLevel().width,10))};wheel=e=>{this.#Br.wheel(e)};keydown=e=>{e.context="WindowLevel",this.#dr.onKeydown(e)};activate(e){}init(){}},Scroll:class{#dr;#Ur=!1;#Br;#Nr;constructor(e){this.#dr=e,this.#Br=new sn(e)}#Qr=!1;mousedown=e=>{this.#Gr();const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId).getActiveViewLayer(),r=n.getViewController();r.isPlaying()&&r.stop(),this.#Ur=!0,this.x0=e._x,this.y0=e._y;const i=n.displayToPlanePos(e._x,e._y),a=r.getPositionFromPlanePoint(i.x,i.y);r.setCurrentPosition(a)};mousemove=e=>{if(!this.#Ur)return void(this.#Qr&&this.#zr(e));const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId).getActiveViewLayer().getViewController(),r=e._y-this.y0,i=Math.abs(r)>15;i&&n.canScroll()&&(r>0?n.decrementScrollIndex():n.incrementScrollIndex());const a=e._x-this.x0,o=Math.abs(a)>15,s=n.getImageSize();o&&s.moreThanOne(3)&&(a>0?n.incrementIndex(3):n.decrementIndex(3)),o&&(this.x0=e._x),i&&(this.y0=e._y)};mouseup=e=>{this.#Ur&&(this.#Ur=!1)};mouseout=e=>{this.mouseup(e),this.#Gr()};touchstart=e=>{this.#Nr=setTimeout(this.dblclick,500),this.mousedown(e)};touchmove=e=>{null!==this.#Nr&&(clearTimeout(this.#Nr),this.#Nr=null),this.mousemove(e)};touchend=e=>{null!==this.#Nr&&(clearTimeout(this.#Nr),this.#Nr=null),this.mouseup(e)};wheel=e=>{this.#Br.wheel(e)};keydown=e=>{e.context="Scroll",this.#dr.onKeydown(e)};dblclick=e=>{const t=xt(e);this.#dr.getLayerGroupByDivId(t.groupDivId).getActiveViewLayer().getViewController().play()};#zr(e){this.#Gr();const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId).getActiveViewLayer(),r=n.getViewController(),i=n.displayToPlanePos(e._x,e._y),a=r.getPositionFromPlanePoint(i.x,i.y),o=r.getRescaledImageValue(a);if(void 0!==o){const t=document.createElement("span");t.id="scroll-tooltip",document.getElementById(n.getId()).parentElement.appendChild(t),t.style.left=e._x+10+"px",t.style.top=e._y+10+"px";let i=K(o,3).toString();void 0!==r.getPixelUnit()&&(i+=" "+r.getPixelUnit()),t.appendChild(document.createTextNode(i))}}#Gr(){const e=document.getElementById("scroll-tooltip");e&&e.remove()}activate(e){e||this.#Gr()}setFeatures(e){void 0!==e.displayTooltip&&(this.#Qr=e.displayTooltip)}init(){}},ZoomAndPan:class{#dr;#Ur=!1;constructor(e){this.#dr=e}mousedown=e=>{this.#Ur=!0,this.x0=e._x,this.y0=e._y};twotouchdown=e=>{this.#Ur=!0,this.x0=e._x,this.y0=e._y;const t=new T(e._x,e._y),n=new T(e._x1,e._y1);this.line0=new cn(t,n),this.midPoint=this.line0.getMidpoint()};mousemove=e=>{if(!this.#Ur)return;const t=e._x-this.x0,n=e._y-this.y0,r=xt(e),i=this.#dr.getLayerGroupByDivId(r.groupDivId),a=i.getActiveViewLayer(),o=a.getViewController(),s=a.displayToPlaneScale(t,n),l=o.getOffset3DFromPlaneOffset(s);i.addTranslation({x:l.getX(),y:l.getY(),z:l.getZ()}),i.draw(),this.x0=e._x,this.y0=e._y};twotouchmove=e=>{if(!this.#Ur)return;const t=new T(e._x,e._y),n=new T(e._x1,e._y1),r=new cn(t,n).getLength()/this.line0.getLength(),i=xt(e),a=this.#dr.getLayerGroupByDivId(i.groupDivId),o=a.getActiveViewLayer(),s=o.getViewController();if(1===r){const t=e._y-this.y0;if(Math.abs(t)<15)return;s.canScroll()&&(t>0?s.incrementScrollIndex():s.decrementScrollIndex())}else{const e=(r-1)/10;if(Math.abs(e)%.1<=.05){const t=o.displayToMainPlanePos(this.midPoint.getX(),this.midPoint.getY()),n=s.getPlanePositionFromPlanePoint(t);a.addScale(e,n),a.draw()}}};mouseup=e=>{this.#Ur&&(this.#Ur=!1)};mouseout=e=>{this.mouseup(e)};touchstart=e=>{const t=e.targetTouches;1===t.length?this.mousedown(e):2===t.length&&this.twotouchdown(e)};touchmove=e=>{const t=e.targetTouches;1===t.length?this.mousemove(e):2===t.length&&this.twotouchmove(e)};touchend=e=>{this.mouseup(e)};wheel=e=>{const t=-e.deltaY/500,n=xt(e),r=this.#dr.getLayerGroupByDivId(n.groupDivId),i=r.getActiveViewLayer(),a=i.getViewController(),o=i.displayToMainPlanePos(e._x,e._y),s=a.getPlanePositionFromPlanePoint(o);r.addScale(t,s),r.draw()};keydown=e=>{e.context="ZoomAndPan",this.#dr.onKeydown(e)};activate(e){}init(){}},Opacity:class{#dr;#Ur=!1;#Br;constructor(e){this.#dr=e,this.#Br=new sn(e)}mousedown=e=>{this.#Ur=!0,this.x0=e._x,this.y0=e._y};mousemove=e=>{if(!this.#Ur)return;const t=e._x-this.x0;if(Math.abs(t)>15){const n=xt(e),r=this.#dr.getLayerGroupByDivId(n.groupDivId).getActiveViewLayer(),i=r.getOpacity();r.setOpacity(i+t/200),r.draw(),this.x0=e._x}};mouseup=e=>{this.#Ur&&(this.#Ur=!1)};mouseout=e=>{this.mouseup(e)};touchstart=e=>{this.mousedown(e)};touchmove=e=>{this.mousemove(e)};touchend=e=>{this.mouseup(e)};wheel=e=>{this.#Br.wheel(e)};keydown=e=>{e.context="Opacity",this.#dr.onKeydown(e)};activate(e){}init(){}},Draw:class{#dr;#Br;#Vr;#jr;#Pt;constructor(e){this.#dr=e,this.#Br=new sn(e),this.#Vr=new Sn(e),this.#Vr.setDrawEventCallback(this.#ge),this.#Pt=e.getStyle(),this.#jr=new(lt().Group);const t=new(lt().Line)({points:[-10,-10,10,10],stroke:"red"}),n=new(lt().Line)({points:[10,-10,-10,10],stroke:"red"});this.#jr.width(20),this.#jr.height(20),this.#jr.add(t),this.#jr.add(n)}#Ur=!1;#mr=null;#Sr=null;#Wr=null;#Hr=null;#Yr;#Ar=[];#Xr=null;#Zr;#$r;#Kr="pointer";#G={};mousedown=e=>{if(this.#Ur)return;const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId),r=n.getActiveDrawLayer().getKonvaStage(),i=r.getIntersection({x:e._x,y:e._y});if(this.#Pt.setZoomScale(r.scale()),i){const e=i.getParent().find(".shape")[0];if(e&&e!==this.#Vr.getShape()){this.#Vr.disable(),this.#Vr.setShape(e);const t=n.getActiveViewLayer().getViewController();this.#Vr.setViewController(t),this.#Vr.enable()}}else{this.#Vr.disable(),this.#Vr.setShape(null),this.#Vr.setViewController(null),this.#Ur=!0,this.#Sr=new this.#mr[this.#Yr],this.#Ar=[];const t=n.getActiveViewLayer().displayToPlanePos(e._x,e._y);this.#Xr=new T(t.x,t.y),this.#Ar.push(this.#Xr)}};mousemove=e=>{if(!this.#Ur)return;const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId),r=n.getActiveViewLayer().displayToPlanePos(e._x,e._y);(Math.abs(r.x-this.#Xr.getX())>0||Math.abs(r.y-this.#Xr.getY())>0)&&(1!==this.#Ar.length&&void 0!==this.#Ar[this.#Ar.length-1].tmp&&this.#Ar.pop(),this.#Xr=new T(r.x,r.y),this.#Xr.tmp=!0,this.#Ar.push(this.#Xr),this.#Jr(this.#Ar,n))};mouseup=e=>{if(this.#Ur)if(0!==this.#Ar.length)if(this.#Ar.length===this.#Sr.getNPoints()){const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId);this.#ei(this.#Ar,n),this.#Ur=!1}else void 0!==this.#Ar[this.#Ar.length-1].tmp&&delete this.#Ar[this.#Ar.length-1].tmp;else g.warn("Draw mouseup but no points...")};dblclick=e=>{if(void 0!==this.#Sr.getNPoints())return;if(!this.#Ur)return;if(0===this.#Ar.length)return void g.warn("Draw dblclick but no points...");const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId);this.#ei(this.#Ar,n),this.#Ur=!1};mouseout=e=>{this.mouseup(e)};touchstart=e=>{this.mousedown(e)};touchmove=e=>{if(!this.#Ur)return;const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId),r=n.getActiveViewLayer().displayToPlanePos(e._x,e._y);(Math.abs(r.x-this.#Xr.getX())>0||Math.abs(r.y-this.#Xr.getY())>0)&&(1!==this.#Ar.length&&this.#Ar.pop(),this.#Xr=new T(r.x,r.y),this.#Ar.push(this.#Xr),this.#Ar.length<this.#Sr.getNPoints()&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this.#Ar.push(this.#Xr)}),this.#Sr.getTimeout())),this.#Jr(this.#Ar,n))};touchend=e=>{this.dblclick(e)};wheel=e=>{this.#Br.wheel(e)};keydown=e=>{let t;if(this.#Ur||(e.context="Draw",this.#dr.onKeydown(e)),("Delete"===e.key||"Backspace"===e.key)&&this.#Vr.isActive()){const e=this.#Vr.getShape().getParent();t=e.getLayer();const n=ut(e.getChildren(pt)[0]),r=new gt(e,n,t);r.onExecute=this.#ge,r.onUndo=this.#ge,r.execute(),this.#dr.addToUndoStack(r)}"Escape"===e.key&&null!==this.#Hr&&(t=this.#Hr.getLayer(),this.#Hr.destroy(),this.#Hr=null,this.#Ur=!1,this.#Ar=[],t.draw())};#Jr(e,t){const n=t.getActiveDrawLayer().getKonvaLayer();this.#Hr&&(this.#Hr.destroy(),this.#Hr=null);const r=t.getActiveViewLayer().getViewController();this.#Hr=this.#Sr.create(e,this.#Pt,r),this.#Hr.getChildren(pt)[0].listening(!1),n.listening(!1),n.add(this.#Hr),n.draw()}#ei(e,t){const n=t.getActiveDrawLayer().getKonvaLayer();this.#Hr&&(this.#Hr.destroy(),this.#Hr=null);const r=t.getActiveViewLayer().getViewController(),i=t.getActiveDrawLayer().getDrawController(),a=this.#Sr.create(e,this.#Pt,r);a.id(pn()),i.getCurrentPosGroup().add(a),n.listening(!0),this.#Wr=new ht(a,this.#Yr,n),this.#Wr.onExecute=this.#ge,this.#Wr.onUndo=this.#ge,this.#Wr.execute(),this.#dr.addToUndoStack(this.#Wr),this.setShapeOn(a,t)}activate(e){this.#Vr.disable(),this.#Vr.setShape(null),this.#Vr.setViewController(null);const t=this.#dr.getActiveLayerGroup();this.#ti(e,t),e?(this.#$r=document.body.style.cursor,this.#dr.addEventListener("positionchange",(()=>{this.#ni(t)})),this.setFeatures({lineColour:this.#Pt.getLineColour()})):(this.#ri(),this.#$r=void 0,this.#dr.removeEventListener("positionchange",(()=>{this.#ni(t)})))}#ni(e){this.#ti(!0,e)}#ti(e,t){const n=t.getActiveDrawLayer().getDrawController().getCurrentPosGroup().getChildren();e?n.forEach((e=>{this.setShapeOn(e,t)})):n.forEach((e=>{this.#ii(e)}));const r=t.getActiveDrawLayer().getKonvaLayer();0!==n.length&&r.listening(!0),r.draw()}#ii(e){e.off("mouseover"),e.off("mouseout"),e.draggable(!1),e.off("dragstart.draw"),e.off("dragmove.draw"),e.off("dragend.draw"),e.off("dblclick")}#ai(e,t){const n=t.getActiveDrawLayer().getKonvaStage();return{x:n.offset().x+e.x/n.scale().x,y:n.offset().y+e.y/n.scale().y}}#ri(){if(void 0!==this.#$r&&(document.body.style.cursor=this.#$r),void 0!==this.#Zr){this.#Zr.opacity(1);const e=this.#Pt.getLineColour();this.#Zr.getChildren(bt).forEach((function(t){t.stroke(e)}))}}setShapeOn(e,t){const n=()=>{document.body.style.cursor=this.#Kr,e.opacity(.75)};e.on("mouseover",(()=>{this.#Zr=e,n()})),e.on("mouseout",(()=>{this.#ri(),this.#Zr=void 0}));const r=t.getActiveDrawLayer().getKonvaLayer();e.draggable(!0);let i={x:e.x(),y:e.y()};const a=ut(e.getChildren(pt)[0]);let o=null;e.on("dragstart.draw",(()=>{o=e.getChildren(pt)[0].stroke();const n=t.getActiveDrawLayer().getKonvaStage(),i=n.scale(),a={x:1/i.x,y:1/i.y};this.#jr.x(n.offset().x+n.width()/(2*i.x)),this.#jr.y(n.offset().y+n.height()/(15*i.y)),this.#jr.scale(a),r.add(this.#jr),this.#Vr.setAnchorsActive(!1),r.draw()})),e.on("dragmove.draw",(n=>{const i=n.target;let a;!function(e,t){const n=t.getChildren(pt)[0],r=function(e){const t=e.find(".anchor");if(0===t.length)return;let n=t[0].x(),r=t[0].y();for(let e=0;e<t.length;++e)n=Math.min(n,t[e].x()),r=Math.min(r,t[e].y());return{x:n,y:r}}(t);if(void 0===r)return null;yn(t,{x:-r.x,y:-r.y},{x:e.x-(r.x+Math.abs(n.width())),y:e.y-(r.y+Math.abs(n.height()))})}(t.getActiveDrawLayer().getBaseSize(),i);const s=Object.keys(this.#mr);for(let t=0;t<s.length&&(a=new this.#mr[s[t]],!a.isFactoryGroup(e));++t);if(void 0===a)throw new Error("Cannot find factory to update quantification.");if(void 0!==a.updateQuantification){const e=t.getActiveViewLayer().getViewController();a.updateQuantification(i,e)}const l=it(n.evt)[0],c=this.#ai(l,t),u=this.#jr.width()*this.#jr.scaleX()/2,h=this.#jr.height()*this.#jr.scaleY()/2;Math.abs(c.x-this.#jr.x())<u&&Math.abs(c.y-this.#jr.y())<h?(this.#jr.getChildren().forEach((function(e){e.stroke("orange")})),e.getChildren(bt).forEach((function(e){e.stroke("red")}))):(this.#jr.getChildren().forEach((function(e){e.stroke("red")})),e.getChildren(bt).forEach((function(e){void 0!==e.stroke&&e.stroke(o)}))),r.draw()})),e.on("dragend.draw",(n=>{const s=n.target;if(this.#jr.remove(),void 0===n||void 0===n.evt)return;const l=s.x(),c=s.y(),u=it(n.evt)[0],h=this.#ai(u,t),d=this.#jr.width()*this.#jr.scaleX()/2,f=this.#jr.height()*this.#jr.scaleY()/2;if(Math.abs(h.x-this.#jr.x())<d&&Math.abs(h.y-this.#jr.y())<f){s.x(i.x),s.y(i.y),this.#Vr.disable(),this.#Vr.setShape(null),this.#Vr.setViewController(null),e.getChildren(bt).forEach((function(e){e.stroke(o)})),document.body.style.cursor=this.#$r;const t=new gt(s,a,r);t.onExecute=this.#ge,t.onUndo=this.#ge,t.execute(),this.#dr.addToUndoStack(t)}else{const e={x:l-i.x,y:c-i.y};if(0!==e.x||0!==e.y){const t=new dt(s,a,e,r);t.onExecute=this.#ge,t.onUndo=this.#ge,this.#dr.addToUndoStack(t),this.#ge({type:"drawmove",id:s.id()})}this.#Vr.setAnchorsActive(!0),this.#Vr.resetAnchors()}r.draw(),i={x:s.x(),y:s.y()}})),e.on("dblclick",(e=>{const t=e.currentTarget,n=t.findOne("Label");if(void 0===n)throw new Error("Could not find the shape label.");const i=n.getText(),a=t.id();nt.openRoiDialog(i.meta,(e=>{i.meta=e,i.setText(X(i.meta.textExpr,i.meta.quantification)),n.setVisible(0!==i.meta.textExpr.length),this.#ge({type:"drawchange",id:a}),r.draw()}))}))}setOptions(e){this.#mr=e,this.#Vr.setFactoryList(e)}getOptionsType(){return"factory"}setFeatures(e){if(void 0!==e.shapeColour&&this.#Pt.setLineColour(e.shapeColour),void 0!==e.shapeName){if(!this.hasShape(e.shapeName))throw new Error("Unknown shape: '"+e.shapeName+"'");this.#Yr=e.shapeName}void 0!==e.mouseOverCursor&&(this.#Kr=e.mouseOverCursor)}init(){}getEventNames(){return["drawcreate","drawchange","drawmove","drawdelete","drawlabelchange"]}addEventListener(e,t){void 0===this.#G[e]&&(this.#G[e]=[]),this.#G[e].push(t)}removeEventListener(e,t){if(void 0!==this.#G[e])for(let n=0;n<this.#G[e].length;++n)this.#G[e][n]===t&&this.#G[e].splice(n,1)}#ge=e=>{if(void 0!==this.#G[e.type])for(let t=0;t<this.#G[e.type].length;++t)this.#G[e.type][t](e)};hasShape(e){return void 0!==this.#mr[e]}},Filter:class{#dr;constructor(e){this.#dr=e}#oi=null;#si=0;#ue=new Ce;activate(e){for(const t in this.#oi)e?(this.#oi[t].addEventListener("filterrun",this.#ge),this.#oi[t].addEventListener("filter-undo",this.#ge)):(this.#oi[t].removeEventListener("filterrun",this.#ge),this.#oi[t].removeEventListener("filter-undo",this.#ge))}setOptions(e){this.#oi={};for(const t in e)this.#oi[t]=new e[t](this.#dr)}getOptionsType(){return"instance"}init(){for(const e in this.#oi)this.#oi[e].init()}keydown=e=>{e.context="Filter",this.#dr.onKeydown(e)};getEventNames(){return["filterrun","filterundo"]}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)};getSelectedFilter(){return this.#si}setFeatures(e){if(void 0!==e.filterName){if(!this.hasFilter(e.filterName))throw new Error("Unknown filter: '"+e.filterName+"'");this.#si&&this.#si.activate(!1),this.#si=this.#oi[e.filterName],this.#si.activate(!0)}if(void 0!==e.run&&e.run){let t={};void 0!==e.runArgs&&(t=e.runArgs),this.getSelectedFilter().run(t)}}getFilterList(){return this.#oi}hasFilter(e){return this.#oi[e]}},Floodfill:class{#dr;constructor(e){this.#dr=e}#li=5;#ci=0;#ui=2e3;#hi=null;#Pe=null;#di=10;#fi=null;#Ur=!1;#Wr=null;#gi=null;#pi;#mi=null;#Si=[];#yi=!1;#vi;#Pt=new ct;#ue=new Ce;setExtend(e){this.#yi=e}getExtend(){return this.#yi}#bi=e=>{const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId).getActiveViewLayer().displayToPlaneIndex(e._x,e._y);return{x:n.get(0),y:n.get(1)}};#Ci(e,t,n){this.#Si=[];const r={data:this.#hi.data,width:this.#hi.width,height:this.#hi.height,bytes:4};this.#Pe=wn().floodFill(r,e.x,e.y,t),this.#Pe=wn().gaussBlurOnlyBorder(this.#Pe,this.#li);let i=wn().traceContours(this.#Pe);if(i=wn().simplifyContours(i,this.#ci,this.#ui),i.length>0&&i[0].points[0].x){if(n)return i[0].points;for(let e=0,t=i[0].points.length;e<t;e++)this.#Si.push(new T(i[0].points[e].x,i[0].points[e].y));return this.#Si}return[]}#wi(e,t,n){if(this.#mi=this.#Ci(e,t,!1),this.#mi){const e=new bn;this.#gi=e.create(this.#mi,this.#Pt),this.#gi.id(pn());const t=n.getActiveDrawLayer();return t.getDrawController().getCurrentPosGroup().add(this.#gi),this.#Wr=new ht(this.#gi,"floodfill",t.getKonvaLayer()),this.#Wr.onExecute=this.#ge,this.#Wr.onUndo=this.#ge,this.#Wr.execute(),this.#dr.addToUndoStack(this.#Wr),!0}return!1}extend(e,t,n){if(!this.#pi)throw"'initialpoint' not found. User must click before use extend!";this.#gi&&this.#gi.destroy();const r=n.getActiveViewLayer().getViewController(),i=r.getCurrentIndex(),a=r.getImageSize(),o=this.#fi||this.#di;for(let e=i.get(2),s=t||a.get(2);e<s&&this.#wi(this.#pi,o,n);e++)r.incrementIndex(2);r.setCurrentPosition(i);for(let t=i.get(2),a=e||0;t>a&&this.#wi(this.#pi,o,n);t--)r.decrementIndex(2);r.setCurrentPosition(i)}modifyThreshold(e,t){if(t||!this.#gi)throw"No shape found";t=this.#gi.getChildren((function(e){return"shape"===e.name()}))[0],clearTimeout(this.#vi),this.#vi=setTimeout((()=>{if(this.#mi=this.#Ci(this.#pi,e,!0),!this.#mi)return!1;const n=[];for(let e=0,t=this.#mi.length;e<t;++e)n.push(this.#mi[e].x),n.push(this.#mi[e].y);t.setPoints(n),t.getLayer().draw(),this.onThresholdChange(e)}),100)}onThresholdChange(e){}mousedown=e=>{const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId),r=n.getActiveViewLayer(),i=n.getActiveDrawLayer();this.#hi=r.getImageData(),this.#hi?(this.#Pt.setZoomScale(i.getKonvaLayer().getAbsoluteScale()),this.#Ur=!0,this.#pi=this.#bi(e),this.#wi(this.#pi,this.#di,n),this.onThresholdChange(this.#di)):g.error("No image found")};mousemove=e=>{if(!this.#Ur)return;const t=this.#bi(e);this.#fi=Math.round(Math.sqrt(Math.pow(this.#pi.x-t.x,2)+Math.pow(this.#pi.y-t.y,2))/2),this.#fi=this.#fi<this.#di?this.#di:this.#fi-this.#di,this.modifyThreshold(this.#fi)};mouseup=e=>{this.#Ur=!1};mouseout=e=>{this.mouseup(e)};touchstart=e=>{this.mousedown(e)};touchmove=e=>{this.mousemove(e)};touchend=e=>{this.mouseup(e)};keydown=e=>{e.context="Floodfill",this.#dr.onKeydown(e)};activate(e){e&&(this.#Pt.setBaseScale(this.#dr.getBaseScale()),this.setFeatures({shapeColour:this.#Pt.getLineColour()}))}init(){}getEventNames(){return["drawcreate","drawchange","drawmove","drawdelete"]}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)};setFeatures(e){void 0!==e.shapeColour&&this.#Pt.setLineColour(e.shapeColour)}},Livewire:class{#dr;constructor(e){this.#dr=e}#Ur=!1;#Wr=null;#gi=null;#Pt=new ct;#xi=new xn;#Di=new xn;#Si=[];#Ti=5;#ue=new Ce;#Pi(e){const t=e.get(1);for(let e=0;e<t;++e)this.#Si[e]=[]}#Ii(){this.#xi=new xn,this.#Di=new xn}#Ai=new In;#Li(){this.#ge({type:"drawcreate",id:this.#gi.id()}),this.#Wr.onExecute=this.#ge,this.#Wr.onUndo=this.#ge,this.#dr.addToUndoStack(this.#Wr),this.#Ur=!1}mousedown=e=>{const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId),r=n.getActiveViewLayer(),i=r.getViewController().getImageSize(),a=r.displayToPlaneIndex(e._x,e._y);if(this.#Ur)if(Math.abs(a.get(0)-this.x0)<this.#Ti&&Math.abs(a.get(1)-this.y0)<this.#Ti)this.#Li();else{this.#xi=this.#Di,this.#Pi(i);const e={x:a.get(0),y:a.get(1)};this.#Ai.doTraining(e),this.#xi.addControlPoint(this.#Di.getPoint(0))}else{this.#Ur=!0,this.x0=a.get(0),this.y0=a.get(1),this.#Ii(),this.#Pi(i),this.#gi=null;const e=n.getActiveDrawLayer();this.#Pt.setZoomScale(e.getKonvaLayer().getAbsoluteScale());const t={x:a.get(0),y:a.get(1)};this.#Ai.doTraining(t);const r=new T(a.get(0),a.get(1));this.#xi.addPoint(r),this.#xi.addControlPoint(r)}};mousemove=e=>{if(!this.#Ur)return;const t=xt(e),n=this.#dr.getLayerGroupByDivId(t.groupDivId),r=n.getActiveViewLayer().displayToPlaneIndex(e._x,e._y);let i={x:r.get(0),y:r.get(1)};this.#Ai.setPoint(i);let a=[],o=!1;for(;!this.#Si[i.y][i.x]&&!o;)if(a=this.#Ai.doWork(),0===a.length)o=!0;else for(let e=0;e<a.length-1;e+=2){const t=a[e],n=a[e+1];this.#Si[t.y][t.x]=n}for(this.#Di=new xn,o=!1;i&&!o;)this.#Di.addPoint(new T(i.x,i.y)),this.#Si[i.y]&&this.#Si[i.y][i.x]?i=this.#Si[i.y][i.x]:o=!0;this.#Di.appenPath(this.#xi),this.#gi&&this.#gi.destroy();const s=new bn;this.#gi=s.create(this.#Di.pointArray,this.#Pt),this.#gi.id(pn());const l=n.getActiveDrawLayer();l.getDrawController().getCurrentPosGroup().add(this.#gi),this.#Wr=new ht(this.#gi,"livewire",l.getKonvaLayer()),this.#Wr.execute()};mouseup(e){}mouseout=e=>{this.mouseup(e)};dblclick=e=>{this.#Li()};touchstart=e=>{this.mousedown(e)};touchmove=e=>{this.mousemove(e)};touchend=e=>{this.mouseup(e)};keydown=e=>{e.context="Livewire",this.#dr.onKeydown(e)};activate(e){if(e){const e=this.#dr.getActiveLayerGroup().getActiveViewLayer(),t=e.getViewController().getImageSize();this.#Ai.setDimensions(t.get(0),t.get(1)),this.#Ai.setData(e.getImageData().data),this.#Pt.setBaseScale(this.#dr.getBaseScale()),this.setFeatures({shapeColour:this.#Pt.getLineColour()})}}init(){}getEventNames(){return["drawcreate","drawchange","drawmove","drawdelete"]}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)};setFeatures(e){void 0!==e.shapeColour&&this.#Pt.setLineColour(e.shapeColour)}}},Mn={draw:{ArrowFactory:class{getGroupName(){return"line-group"}getNPoints(){return 2}getTimeout(){return 0}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=new cn(e[0],e[1]),i=new(lt().Line)({points:[r.getBegin().getX(),r.getBegin().getY(),r.getEnd().getX(),r.getEnd().getY()],stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),a=hn(r,e[0],t.scale(10)),o=hn(r,e[1],t.scale(10));i.hitFunc((function(e){e.beginPath(),e.moveTo(a.getBegin().getX(),a.getBegin().getY()),e.lineTo(a.getEnd().getX(),a.getEnd().getY()),e.lineTo(o.getEnd().getX(),o.getEnd().getY()),e.lineTo(o.getBegin().getX(),o.getBegin().getY()),e.closePath(),e.fillStrokeShape(i)}));const s=new T(r.getBegin().getX(),r.getBegin().getY()-10),l=new cn(r.getBegin(),s),c=un(r,l),u=c*Math.PI/180,h=5*t.getScaledStrokeWidth(),d=new(lt().RegularPolygon)({x:r.getBegin().getX()+h*Math.sin(u),y:r.getBegin().getY()+h*Math.cos(u),sides:3,radius:h,rotation:-c,fill:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape-triangle"}),f=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),padding:t.getTextPadding(),shadowColor:t.getShadowLineColour(),shadowOffset:t.getShadowOffset(),name:"text"});let g="";g="",f.setText(""),f.meta={textExpr:"",quantification:{}};const p=r.getBegin().getX()>r.getEnd().getX()?0:-1,m=r.getBegin().getY()>r.getEnd().getY()?-1:0,S=new(lt().Label)({x:r.getEnd().getX()+p*f.width(),y:r.getEnd().getY()+m*t.applyZoomScale(15).y,scale:t.applyZoomScale(1),visible:!1,name:"label"});S.add(f),S.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const y=new(lt().Group);return y.name(this.getGroupName()),y.add(S),y.add(d),y.add(i),y.visible(!0),y}getAnchors(e,t){const n=e.points(),r=[];return r.push(mn(n[0]+e.x(),n[1]+e.y(),"begin",t)),r.push(mn(n[2]+e.x(),n[3]+e.y(),"end",t)),r}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"shape-triangle"===e.name()}))[0],o=r.getChildren((function(e){return"label"===e.name()}))[0],s=r.getChildren((function(e){return"begin"===e.id()}))[0],l=r.getChildren((function(e){return"end"===e.id()}))[0];switch(e.id()){case"begin":s.x(e.x()),s.y(e.y());break;case"end":l.x(e.x()),l.y(e.y())}const c=s.x()-i.x(),u=s.y()-i.y(),h=l.x()-i.x(),d=l.y()-i.y();i.points([c,u,h,d]);const f=new T(s.x(),s.y()),g=new T(l.x(),l.y()),p=new cn(f,g),m=new T(c,u),S=new T(h,d),y=hn(p,m,10),v=hn(p,S,10);i.hitFunc((function(e){e.beginPath(),e.moveTo(y.getBegin().getX(),y.getBegin().getY()),e.lineTo(y.getEnd().getX(),y.getEnd().getY()),e.lineTo(v.getEnd().getX(),v.getEnd().getY()),e.lineTo(v.getBegin().getX(),v.getBegin().getY()),e.closePath(),e.fillStrokeShape(i)}));const b=new T(p.getBegin().getX(),p.getBegin().getY()-10),C=new cn(p.getBegin(),b),w=un(p,C),x=w*Math.PI/180;a.x(p.getBegin().getX()+a.radius()*Math.sin(x)),a.y(p.getBegin().getY()+a.radius()*Math.cos(x)),a.rotation(-w);const D=o.getText();D.setText(D.meta.textExpr);const P=p.getBegin().getX()>p.getEnd().getX()?0:-1,I=p.getBegin().getY()>p.getEnd().getY()?-1:0,A={x:p.getEnd().getX()+P*D.width(),y:p.getEnd().getY()+I*t.applyZoomScale(15).y};o.position(A)}},CircleFactory:class{getGroupName(){return"circle-group"}getNPoints(){return 2}getTimeout(){return 0}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=Math.abs(e[0].getX()-e[1].getX()),i=Math.abs(e[0].getY()-e[1].getY()),a=Math.round(Math.sqrt(r*r+i*i)),o=new An(e[0],a),s=new(lt().Circle)({x:o.getCenter().getX(),y:o.getCenter().getY(),radius:o.getRadius(),stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),l=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),padding:t.getTextPadding(),shadowColor:t.getShadowLineColour(),shadowOffset:t.getShadowOffset(),name:"text"});let c="";c="{surface}";const u=o.quantify(n,Y(c));l.setText(X(c,u)),l.meta={textExpr:c,quantification:u};const h=new(lt().Label)({x:o.getCenter().getX(),y:o.getCenter().getY(),scale:t.applyZoomScale(1),visible:0!==c.length,name:"label"});h.add(l),h.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const d=new(lt().Group);return d.name(this.getGroupName()),d.add(h),d.add(s),d.visible(!0),d}getAnchors(e,t){const n=e.x(),r=e.y(),i=e.radius(),a=[];return a.push(mn(n-i,r,"left",t)),a.push(mn(n+i,r,"right",t)),a.push(mn(n,r-i,"bottom",t)),a.push(mn(n,r+i,"top",t)),a}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"label"===e.name()}))[0],o=r.getChildren((function(e){return"left"===e.id()}))[0],s=r.getChildren((function(e){return"right"===e.id()}))[0],l=r.getChildren((function(e){return"bottom"===e.id()}))[0],c=r.getChildren((function(e){return"top"===e.id()}))[0],u={x:i.x(),y:i.y()};let h;switch(e.id()){case"left":h=u.x-e.x(),o.y(s.y()),s.x(u.x+h),l.y(u.y-h),c.y(u.y+h);break;case"right":h=e.x()-u.x,s.y(o.y()),o.x(u.x-h),l.y(u.y-h),c.y(u.y+h);break;case"bottom":h=u.y-e.y(),l.x(c.x()),o.x(u.x-h),s.x(u.x+h),c.y(u.y+h);break;case"top":h=e.y()-u.y,c.x(l.x()),o.x(u.x-h),s.x(u.x+h),l.y(u.y-h);break;default:g.error("Unhandled anchor id: "+e.id())}i.radius(Math.abs(h));const d=new T(r.x()+u.x,r.y()+u.y),f=(new An(d,h),{x:u.x,y:u.y});a.position(f),this.#Oi(r,n)}updateQuantification(e,t){this.#Oi(e,t)}#Oi(e,t){const n=e.getChildren((function(e){return"shape"===e.name()}))[0],r=e.getChildren((function(e){return"label"===e.name()}))[0],i=new T(e.x()+n.x(),e.y()+n.y()),a=new An(i,n.radius()),o=r.getText(),s=a.quantify(t,Y(o.meta.textExpr));o.setText(X(o.meta.textExpr,s)),o.meta.quantification=s}#_i(e,t){let n=0,r=0;void 0!==t&&(n=t.x(),r=t.y());const i=new(lt().Group);i.name("shadow");const a=e.getRound();for(let e=0;e<a.length;++e){const t=a[e],o=t[0][0],s=t[0][1],l=t[1][0],c=new(lt().Rect)({x:o-n,y:s-r,width:l-o,height:1,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow-element"});i.add(c)}return i}},EllipseFactory:class{getGroupName(){return"ellipse-group"}getNPoints(){return 2}getTimeout(){return 0}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=Math.abs(e[0].getX()-e[1].getX()),i=Math.abs(e[0].getY()-e[1].getY()),a=new Ln(e[0],r,i),o={x:a.getA(),y:a.getB()},s=new(lt().Ellipse)({x:a.getCenter().getX(),y:a.getCenter().getY(),radius:o,radiusX:o.x,radiusY:o.y,stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),l=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),padding:t.getTextPadding(),shadowColor:t.getShadowLineColour(),shadowOffset:t.getShadowOffset(),name:"text"});let c="";c="{surface}";const u=a.quantify(n,Y(c));l.setText(X(c,u)),l.meta={textExpr:c,quantification:u};const h=new(lt().Label)({x:a.getCenter().getX(),y:a.getCenter().getY(),scale:t.applyZoomScale(1),visible:0!==c.length,name:"label"});h.add(l),h.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const d=new(lt().Group);return d.name(this.getGroupName()),d.add(h),d.add(s),d.visible(!0),d}getAnchors(e,t){const n=e.x(),r=e.y(),i=e.radius(),a=[];return a.push(mn(n-i.x,r-i.y,"topLeft",t)),a.push(mn(n+i.x,r-i.y,"topRight",t)),a.push(mn(n+i.x,r+i.y,"bottomRight",t)),a.push(mn(n-i.x,r+i.y,"bottomLeft",t)),a}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"label"===e.name()}))[0],o=r.getChildren((function(e){return"topLeft"===e.id()}))[0],s=r.getChildren((function(e){return"topRight"===e.id()}))[0],l=r.getChildren((function(e){return"bottomRight"===e.id()}))[0],c=r.getChildren((function(e){return"bottomLeft"===e.id()}))[0];switch(e.id()){case"topLeft":o.x(e.x()),o.y(e.y()),s.y(e.y()),c.x(e.x());break;case"topRight":s.x(e.x()),s.y(e.y()),o.y(e.y()),l.x(e.x());break;case"bottomRight":l.x(e.x()),l.y(e.y()),c.y(e.y()),s.x(e.x());break;case"bottomLeft":c.x(e.x()),c.y(e.y()),l.y(e.y()),o.x(e.x());break;default:g.error("Unhandled anchor id: "+e.id())}const u=(s.x()-o.x())/2,h=(l.y()-s.y())/2,d={x:o.x()+u,y:s.y()+h};i.position(d);const f={x:Math.abs(u),y:Math.abs(h)};f&&i.radius(f);const p=new T(r.x()+d.x,r.y()+d.y),m=(new Ln(p,f.x,f.y),{x:d.x,y:d.y});a.position(m),this.#Ei(r,n)}updateQuantification(e,t){this.#Ei(e,t)}#Ei(e,t){const n=e.getChildren((function(e){return"shape"===e.name()}))[0],r=e.getChildren((function(e){return"label"===e.name()}))[0],i=new T(e.x()+n.x(),e.y()+n.y()),a=new Ln(i,n.radius().x,n.radius().y),o=r.getText(),s=a.quantify(t,Y(o.meta.textExpr));o.setText(X(o.meta.textExpr,s)),o.meta.quantification=s}#Ri(e,t){let n=0,r=0;void 0!==t&&(n=t.x(),r=t.y());const i=new(lt().Group);i.name("shadow");const a=e.getRound();for(let e=0;e<a.length;++e){const t=a[e],o=t[0][0],s=t[0][1],l=t[1][0],c=new(lt().Rect)({x:o-n,y:s-r,width:l-o,height:1,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow-element"});i.add(c)}return i}},FreeHandFactory:class{getGroupName(){return"freeHand-group"}getNPoints(){}getTimeout(){return 25}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=[];for(let t=0;t<e.length;++t)r.push(e[t].getX()),r.push(e[t].getY());const i=new(lt().Line)({points:r,stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape",tension:.5}),a=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),name:"text"});let o="";o="",a.setText(""),a.meta={textExpr:"",quantification:{}};const s=new(lt().Label)({x:e[0].getX(),y:e[0].getY()+t.scale(10),scale:t.applyZoomScale(1),visible:!1,name:"label"});s.add(a),s.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const l=new(lt().Group);return l.name(this.getGroupName()),l.add(s),l.add(i),l.visible(!0),l}getAnchors(e,t){const n=e.points(),r=[];for(let i=0;i<n.length;i+=2){const a=n[i]+e.x(),o=n[i+1]+e.y(),s=i.toString();r.push(mn(a,o,s,t))}return r}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"label"===e.name()}))[0],o=r.getChildren((function(t){return t.id()===e.id()}))[0];o.x(e.x()),o.y(e.y());const s=i.points();s[e.id()]=e.x()-i.x(),s[e.id()+1]=e.y()-i.y(),i.points(s.concat());const l=a.getText();l.setText(l.meta.textExpr);const c={x:s[0]+i.x(),y:s[1]+i.y()+t.scale(10)};a.position(c)}},ProtractorFactory:class{getGroupName(){return"protractor-group"}getNPoints(){return 3}getTimeout(){return 500}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=new cn(e[0],e[1]),i=[];for(let t=0;t<e.length;++t)i.push(e[t].getX()),i.push(e[t].getY());const a=new(lt().Line)({points:i,stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),o=new(lt().Group);if(o.name(this.getGroupName()),3===e.length){const n=new cn(e[1],e[2]);a.hitFunc((function(t){t.beginPath(),t.moveTo(e[0].getX(),e[0].getY()),t.lineTo(e[1].getX(),e[1].getY()),t.lineTo(e[2].getX(),e[2].getY()),t.closePath(),t.fillStrokeShape(a)}));let i=un(r,n),s=r.getInclination();i>180&&(i=360-i,s+=i);const l=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),padding:t.getTextPadding(),shadowColor:t.getShadowLineColour(),shadowOffset:t.getShadowOffset(),name:"text"});let c="";c="{angle}";const u={angle:{value:i,unit:ln.t("unit.degree")}};l.setText(X(c,u)),l.meta={textExpr:c,quantification:u};const h=(r.getMidpoint().getX()+n.getMidpoint().getX())/2,d=(r.getMidpoint().getY()+n.getMidpoint().getY())/2,f=new(lt().Label)({x:h,y:d-t.applyZoomScale(15).y,scale:t.applyZoomScale(1),visible:0!==c.length,name:"label"});f.add(l),f.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const g=33*Math.min(r.getLength(),n.getLength())/100,p=new(lt().Arc)({innerRadius:g,outerRadius:g,stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,angle:i,rotation:-s,x:e[1].getX(),y:e[1].getY(),name:"shape-arc"});o.add(f),o.add(p)}return o.add(a),o.visible(!0),o}getAnchors(e,t){const n=e.points(),r=[];return r.push(mn(n[0]+e.x(),n[1]+e.y(),"begin",t)),r.push(mn(n[2]+e.x(),n[3]+e.y(),"mid",t)),r.push(mn(n[4]+e.x(),n[5]+e.y(),"end",t)),r}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"label"===e.name()}))[0],o=r.getChildren((function(e){return"shape-arc"===e.name()}))[0],s=r.getChildren((function(e){return"begin"===e.id()}))[0],l=r.getChildren((function(e){return"mid"===e.id()}))[0],c=r.getChildren((function(e){return"end"===e.id()}))[0];switch(e.id()){case"begin":s.x(e.x()),s.y(e.y());break;case"mid":l.x(e.x()),l.y(e.y());break;case"end":c.x(e.x()),c.y(e.y())}const u=s.x()-i.x(),h=s.y()-i.y(),d=l.x()-i.x(),f=l.y()-i.y(),g=c.x()-i.x(),p=c.y()-i.y();i.points([u,h,d,f,g,p]),i.hitFunc((function(e){e.beginPath(),e.moveTo(u,h),e.lineTo(d,f),e.lineTo(g,p),e.closePath(),e.fillStrokeShape(i)}));const m=new T(s.x(),s.y()),S=new T(l.x(),l.y()),y=new T(c.x(),c.y()),v=new cn(m,S),b=new cn(S,y);let C=un(v,b),w=v.getInclination();C>180&&(C=360-C,w+=C);const x=a.getText(),D={angle:{value:C,unit:ln.t("unit.degree")}};x.setText(X(x.meta.textExpr,D)),x.meta.quantification=D;const P={x:(v.getMidpoint().getX()+b.getMidpoint().getX())/2,y:(v.getMidpoint().getY()+b.getMidpoint().getY())/2-t.applyZoomScale(15).y};a.position(P);const I=33*Math.min(v.getLength(),b.getLength())/100;o.innerRadius(I),o.outerRadius(I),o.angle(C),o.rotation(-w);const A={x:l.x(),y:l.y()};o.position(A)}},RectangleFactory:class{getGroupName(){return"rectangle-group"}getNPoints(){return 2}getTimeout(){return 0}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=new On(e[0],e[1]),i=new(lt().Rect)({x:r.getBegin().getX(),y:r.getBegin().getY(),width:r.getWidth(),height:r.getHeight(),stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),a=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),padding:t.getTextPadding(),shadowColor:t.getShadowLineColour(),shadowOffset:t.getShadowOffset(),name:"text"});let o="";o="{surface}";const s=r.quantify(n,Y(o));a.setText(X(o,s)),a.meta={textExpr:o,quantification:s};const l=new(lt().Label)({x:r.getBegin().getX(),y:r.getEnd().getY(),scale:t.applyZoomScale(1),visible:0!==o.length,name:"label"});l.add(a),l.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const c=new(lt().Group);return c.name(this.getGroupName()),c.add(l),c.add(i),c.visible(!0),c}getAnchors(e,t){const n=e.x(),r=e.y(),i=e.width(),a=e.height(),o=[];return o.push(mn(n,r,"topLeft",t)),o.push(mn(n+i,r,"topRight",t)),o.push(mn(n+i,r+a,"bottomRight",t)),o.push(mn(n,r+a,"bottomLeft",t)),o}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"label"===e.name()}))[0],o=r.getChildren((function(e){return"topLeft"===e.id()}))[0],s=r.getChildren((function(e){return"topRight"===e.id()}))[0],l=r.getChildren((function(e){return"bottomRight"===e.id()}))[0],c=r.getChildren((function(e){return"bottomLeft"===e.id()}))[0];switch(e.id()){case"topLeft":o.x(e.x()),o.y(e.y()),s.y(e.y()),c.x(e.x());break;case"topRight":s.x(e.x()),s.y(e.y()),o.y(e.y()),l.x(e.x());break;case"bottomRight":l.x(e.x()),l.y(e.y()),c.y(e.y()),s.x(e.x());break;case"bottomLeft":c.x(e.x()),c.y(e.y()),l.y(e.y()),o.x(e.x());break;default:g.error("Unhandled anchor id: "+e.id())}i.position(o.position());const u=s.x()-o.x(),h=c.y()-o.y();u&&h&&i.size({width:u,height:h});const d=new T(r.x()+o.x(),r.y()+o.y()),f=new T(r.x()+l.x(),r.y()+l.y()),p=new On(d,f),m={x:p.getBegin().getX()-r.x(),y:p.getEnd().getY()-r.y()};a.position(m),this.#Fi(r,n)}updateQuantification(e,t){this.#Fi(e,t)}#Fi(e,t){const n=e.getChildren((function(e){return"shape"===e.name()}))[0],r=e.getChildren((function(e){return"label"===e.name()}))[0],i=new T(e.x()+n.x(),e.y()+n.y()),a=new T(i.getX()+n.width(),i.getY()+n.height()),o=new On(i,a),s=r.getText(),l=o.quantify(t,Y(s.meta.textExpr));s.setText(X(s.meta.textExpr,l)),s.meta.quantification=l}#ki(e){const t=e.getRound(),n=t.max.getX()-t.min.getX(),r=t.max.getY()-t.min.getY();return new(lt().Rect)({x:t.min.getX(),y:t.min.getY(),width:n,height:r,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow"})}},RoiFactory:bn,RulerFactory:class{getGroupName(){return"ruler-group"}getNPoints(){return 2}getTimeout(){return 0}isFactoryGroup(e){return this.getGroupName()===e.name()}create(e,t,n){const r=new cn(e[0],e[1]),i=new(lt().Line)({points:[r.getBegin().getX(),r.getBegin().getY(),r.getEnd().getX(),r.getEnd().getY()],stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),a=t.scale(10),o=hn(r,e[0],a),s=new(lt().Line)({points:[o.getBegin().getX(),o.getBegin().getY(),o.getEnd().getX(),o.getEnd().getY()],stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape-tick0"}),l=hn(r,e[1],a),c=new(lt().Line)({points:[l.getBegin().getX(),l.getBegin().getY(),l.getEnd().getX(),l.getEnd().getY()],stroke:t.getLineColour(),strokeWidth:t.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape-tick1"});i.hitFunc((function(e){e.beginPath(),e.moveTo(o.getBegin().getX(),o.getBegin().getY()),e.lineTo(o.getEnd().getX(),o.getEnd().getY()),e.lineTo(l.getEnd().getX(),l.getEnd().getY()),e.lineTo(l.getBegin().getX(),l.getBegin().getY()),e.closePath(),e.fillStrokeShape(i)}));const u=new(lt().Text)({fontSize:t.getFontSize(),fontFamily:t.getFontFamily(),fill:t.getLineColour(),padding:t.getTextPadding(),shadowColor:t.getShadowLineColour(),shadowOffset:t.getShadowOffset(),name:"text"});let h="";h="{length}";const d=r.quantify(n);u.setText(X(h,d)),u.meta={textExpr:h,quantification:d};const f=r.getBegin().getX()>r.getEnd().getX()?0:-1,g=r.getBegin().getY()>r.getEnd().getY()?-1:0,p=new(lt().Label)({x:r.getEnd().getX()+f*u.width(),y:r.getEnd().getY()+g*t.applyZoomScale(15).y,scale:t.applyZoomScale(1),visible:0!==h.length,name:"label"});p.add(u),p.add(new(lt().Tag)({fill:t.getLineColour(),opacity:t.getTagOpacity()}));const m=new(lt().Group);return m.name(this.getGroupName()),m.add(p),m.add(s),m.add(c),m.add(i),m.visible(!0),m}getAnchors(e,t){const n=e.points(),r=[];return r.push(mn(n[0]+e.x(),n[1]+e.y(),"begin",t)),r.push(mn(n[2]+e.x(),n[3]+e.y(),"end",t)),r}update(e,t,n){const r=e.getParent(),i=r.getChildren((function(e){return"shape"===e.name()}))[0],a=r.getChildren((function(e){return"shape-tick0"===e.name()}))[0],o=r.getChildren((function(e){return"shape-tick1"===e.name()}))[0],s=r.getChildren((function(e){return"label"===e.name()}))[0],l=r.getChildren((function(e){return"begin"===e.id()}))[0],c=r.getChildren((function(e){return"end"===e.id()}))[0];switch(e.id()){case"begin":l.x(e.x()),l.y(e.y());break;case"end":c.x(e.x()),c.y(e.y())}const u=l.x()-i.x(),h=l.y()-i.y(),d=c.x()-i.x(),f=c.y()-i.y();i.points([u,h,d,f]);const g=new T(l.x(),l.y()),p=new T(c.x(),c.y()),m=new cn(g,p),S=new T(u,h),y=new T(d,f),v=hn(m,S,t.scale(10));a.points([v.getBegin().getX(),v.getBegin().getY(),v.getEnd().getX(),v.getEnd().getY()]);const b=hn(m,y,t.scale(10));o.points([b.getBegin().getX(),b.getBegin().getY(),b.getEnd().getX(),b.getEnd().getY()]),i.hitFunc((function(e){e.beginPath(),e.moveTo(v.getBegin().getX(),v.getBegin().getY()),e.lineTo(v.getEnd().getX(),v.getEnd().getY()),e.lineTo(b.getEnd().getX(),b.getEnd().getY()),e.lineTo(b.getBegin().getX(),b.getBegin().getY()),e.closePath(),e.fillStrokeShape(i)}));const C=s.getText(),w=m.quantify(n);C.setText(X(C.meta.textExpr,w)),C.meta.quantification=w;const x=m.getBegin().getX()>m.getEnd().getX()?0:-1,D=m.getBegin().getY()>m.getEnd().getY()?-1:0,P={x:m.getEnd().getX()+x*C.width(),y:m.getEnd().getY()+D*t.applyZoomScale(15).y};s.position(P)}}},filter:{Threshold:class{#dr;constructor(e){this.#dr=e}#qr=new _n;#Mi=!0;#ue=new Ce;activate(e){e&&(this.#Mi=!0)}init(){}run(e){this.#qr.setMin(e.min),this.#qr.setMax(e.max),this.#Mi&&(this.#qr.setOriginalImage(this.#dr.getLastImage()),this.#Mi=!1);const t=new Fn(this.#qr,this.#dr);t.onExecute=this.#ge,t.onUndo=this.#ge,t.execute(),this.#dr.addToUndoStack(t)}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)}},Sobel:class{#dr;constructor(e){this.#dr=e}#ue=new Ce;activate(e){}init(){}run(e){const t=new Rn;t.setOriginalImage(this.#dr.getLastImage());const n=new Fn(t,this.#dr);n.onExecute=this.#ge,n.onUndo=this.#ge,n.execute(),this.#dr.addToUndoStack(n)}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)}},Sharpen:class{#dr;constructor(e){this.#dr=e}#ue=new Ce;activate(e){}init(){}run(e){const t=new En;t.setOriginalImage(this.#dr.getLastImage());const n=new Fn(t,this.#dr);n.onExecute=this.#ge,n.onUndo=this.#ge,n.execute(),this.#dr.addToUndoStack(n)}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}#ge=e=>{this.#ue.fireEvent(e)}}}};class qn{divId;orientation;colourMap;opacity;constructor(e){this.divId=e}}class Un{options;constructor(e){this.options=e}}class Bn{dataViewConfigs;tools;binders;viewOnFirstLoadItem;defaultCharacterSet;constructor(e){this.dataViewConfigs=e}}class Nn{#qn=null;#qi=null;#Ui=null;#Bi=null;#Ni=null;#Qi=null;#Pt=new ct;#ue=new Ce;getImage(e){return this.#qi.get(e).image}getLastImage(){return this.#qi.get(this.#qi.length()-1).image}setImage(e,t){this.#qi.setImage(e,t)}setLastImage(e){this.#qi.setImage(this.#qi.length()-1,e)}addNewImage(e,t){const n=this.#qi.length();return this.#ge({type:"loadstart",loadtype:"image",source:"internal",loadid:n}),this.#qi.addNew(n,e,t),this.#ge({type:"loaditem",loadtype:"image",data:t,source:"internal",loadid:n,isfirstitem:!0}),this.#qn.viewOnFirstLoadItem&&this.render(n),this.#ge({type:"load",loadtype:"image",source:"internal",loadid:n}),this.#ge({type:"loadend",loadtype:"image",source:"internal",loadid:n}),n}getMetaData(e){return this.#qi.get(e).meta}getNumberOfLoadedData(){return this.#qi.length()}canScroll(){return this.#Ni.getActiveLayerGroup().getActiveViewLayer().getViewController().canScroll()}canWindowLevel(){return this.#Ni.getActiveLayerGroup().getActiveViewLayer().getViewController().canWindowLevel()}getAddedScale(){return this.#Ni.getActiveLayerGroup().getAddedScale()}getBaseScale(){return this.#Ni.getActiveLayerGroup().getBaseScale()}getOffset(){return this.#Ni.getActiveLayerGroup().getOffset()}getToolboxController(){return this.#Ui}getActiveLayerGroup(){return this.#Ni.getActiveLayerGroup()}getViewLayersByDataIndex(e){return this.#Ni.getViewLayersByDataIndex(e)}getDrawLayersByDataIndex(e){return this.#Ni.getDrawLayersByDataIndex(e)}getLayerGroupByDivId(e){return this.#Ni.getLayerGroupByDivId(e)}getNumberOfLayerGroups(){return this.#Ni.getNumberOfLayerGroups()}getStyle(){return this.#Pt}addToUndoStack=e=>{null!==this.#Qi&&this.#Qi.add(e)};init(e){if(this.#qn=e,void 0===this.#qn.viewOnFirstLoadItem&&(this.#qn.viewOnFirstLoadItem=!0),this.#Qi=new kt,this.#Qi.addEventListener("undoadd",this.#ge),this.#Qi.addEventListener("undo",this.#ge),this.#Qi.addEventListener("redo",this.#ge),void 0!==this.#qn.tools){const e={},t=Object.keys(this.#qn.tools);for(let n=0;n<t.length;++n){const r=t[n];if(void 0!==kn[r]){if(e[r]=new kn[r](this),void 0!==e[r].addEventListener){const t=e[r].getEventNames();for(let n=0;n<t.length;++n)e[r].addEventListener(t[n],this.#ge)}const t=this.#qn.tools[r];if(void 0!==t.options&&0!==t.options.length){let n,i="raw";if(void 0!==e[r].getOptionsType&&(i=e[r].getOptionsType()),"instance"===i||"factory"===i){n={};for(let e=0;e<t.options.length;++e){const a=t.options[e];let o=a;"factory"===i&&(o+="Factory");const s=r.charAt(0).toLowerCase()+r.slice(1);void 0!==Mn[s][o]?n[a]=Mn[s][o]:g.warn("Could not find option class for: "+a)}}else n=t.options;e[r].setOptions(n)}}else g.warn("Could not initialise unknown tool: "+r)}this.#Ui=new Mt(e)}this.#Bi=new an(this.#qn.defaultCharacterSet),this.#Bi.onloadstart=this.#Gi,this.#Bi.onprogress=this.#zi,this.#Bi.onloaditem=this.#Vi,this.#Bi.onload=this.#ji,this.#Bi.onloadend=this.#Wi,this.#Bi.onerror=this.#Hi,this.#Bi.onabort=this.#Yi,this.#qi=new on,this.#Ni=new It,void 0!==this.#qn.binders&&this.#Ni.setBinders(this.#qn.binders)}reset(){this.#qi.reset(),this.#Ni.empty(),this.#Qi&&(this.#Qi=new kt,this.#Qi.addEventListener("undoadd",this.#ge),this.#Qi.addEventListener("undo",this.#ge),this.#Qi.addEventListener("redo",this.#ge))}resetLayout(){this.#Ni.reset(),this.#Ni.draw()}addEventListener(e,t){this.#ue.add(e,t)}removeEventListener(e,t){this.#ue.remove(e,t)}loadFiles=e=>{0!==e.length?this.#Bi.loadFiles(e):g.warn("Ignoring empty input file list.")};loadURLs=(e,t)=>{0!==e.length?this.#Bi.loadURLs(e,t):g.warn("Ignoring empty input url list.")};loadFromUri=(e,t)=>{const n=function(e){const t=Ft(e);return 0===Object.keys(t).length?null:t.query}(e),r=()=>{this.removeEventListener("loadend",r),this.loadURLs([n.state])};n&&void 0!==n.input&&(void 0!==n.state&&this.addEventListener("loadend",r),function(e,t,n){e.type&&"manifest"===e.type?function(e,t){let n="";"/"===e.input[0]&&(n=window.location.protocol+"//"+window.location.host),n+=e.input;const r=new XMLHttpRequest;r.open("GET",decodeURIComponent(n),!0),r.responseType="document",r.onload=function(n){t(function(e,t){const n=[],r=e.getElementsByTagName("wado_query")[0].getAttribute("wadoURL")+"?requestType=WADO&contentType=application/dicom&",i=e.getElementsByTagName("Patient");i.length>1&&g.warn("More than one patient, loading first one.");const a=i[0].getElementsByTagName("Study");a.length>1&&g.warn("More than one study, loading first one.");const o=a[0].getAttribute("StudyInstanceUID"),s=a[0].getElementsByTagName("Series");s.length>1&&g.warn("More than one series, loading first one.");const l=s[0].getAttribute("SeriesInstanceUID"),c=s[0].getElementsByTagName("Instance");let u=c.length;t<u&&(u=t);for(let e=0;e<u;++e){const t=r+"&studyUID="+o+"&seriesUID="+l+"&objectUID="+c[e].getAttribute("SOPInstanceUID");n.push(t)}return n}(n.target.responseXML,e.nslices))},r.onerror=function(e){g.warn("RequestError while receiving manifest: "+e.target.status)},r.send(null)}(e,t):t(function(e,t){const n=[];let r="key";t&&(r=t);const i=decodeURIComponent(e),a=Ft(i);if(0===Object.keys(a).length)n.push(i);else{const e=Object.keys(a.query);let t=null;for(let n=0;n<e.length;++n)if(a.query[e[n]]instanceof Array){t=e[n];break}if(t){const i=a.query[t];let o=a.base;""!==o&&"file"!==t&&(o+="?");let s,l=!1;for(let n=0;n<e.length;++n)e[n]!==t&&(l&&(o+="&"),o+=e[n]+"="+a.query[e[n]],l=!0);for(let e=0;e<i.length;++e)s=o,l&&(s+="&"),"key"===r&&(s+=t+"="),s+=i[e],n.push(s)}else n.push(i)}return n}(e.input,e.dwvReplaceMode),n)}(n,this.loadURLs,t))};loadImageObject=e=>{this.#Bi.loadImageObject(e)};abortLoad(){this.#Bi.abort()}fitToContainer(){this.#Ni.syncLayerGroupScale()}initWLDisplay(){this.#Ni.getActiveLayerGroup().getActiveViewLayer().getViewController().initialise()}#Xi(e){if(null===this.#qn.dataViewConfigs||void 0===this.#qn.dataViewConfigs)throw new Error("No available data view configuration");let t=[];return void 0!==this.#qn.dataViewConfigs["*"]?t=this.#qn.dataViewConfigs["*"]:void 0!==this.#qn.dataViewConfigs[e]&&(t=this.#qn.dataViewConfigs[e]),t}getDataViewConfigs(){return this.#qn.dataViewConfigs}setDataViewConfigs(e){this.#Ni.empty(),this.#qn.dataViewConfigs=e,this.#Zi(e)}#Zi(e){const t=Object.keys(e),n=[];for(let r=0;r<t.length;++r){const i=e[t[r]];for(let e=0;e<i.length;++e){const t=i[e];if(!n.includes(t.divId)){const e=document.getElementById(t.divId),r=this.#Ni.addLayerGroup(e);this.#$i(r),void 0!==t.orientation&&r.setTargetOrientation(D(t.orientation)),n.push(t.divId)}}}}setLayerGroupsBinders(e){const t=[];for(let n=0;n<e.length;++n)void 0!==Pt[e[n]]&&t.push(new Pt[e[n]]);this.#Ni.setBinders(t)}render(e){if(null==e)throw new Error("Cannot render without data index");0===this.#Ni.getNumberOfLayerGroups()&&this.#Zi(this.#qn.dataViewConfigs);const t=this.#Xi(e);if(0!==t.length)for(let n=0;n<t.length;++n){const r=t[n],i=this.#Ni.getLayerGroupByDivId(r.divId);if(!i)throw new Error("No layer group for "+r.divId);0===i.getViewLayersByDataIndex(e).length&&(0===i.getNumberOfLayers()?this.#Ki(e,r):this.#Ji(e,r)),i.draw()}else g.info("Not rendering data: "+e+" (no data view config)")}zoom(e,t,n){const r=this.#Ni.getActiveLayerGroup(),i=r.getActiveViewLayer().getViewController().getCurrentScrollPosition(),a=new P(t,n,i);r.addScale(e,a),r.draw()}translate(e,t){const n=this.#Ni.getActiveLayerGroup();n.addTranslation({x:e,y:t}),n.draw()}setOpacity(e){const t=this.#Ni.getActiveLayerGroup().getActiveViewLayer();t.setOpacity(e),t.draw()}setDrawings(e,t){const n=this.#Ni.getActiveLayerGroup(),r=n.getActiveViewLayer().getViewController(),i=n.getActiveDrawLayer().getDrawController();i.setDrawings(e,t,this.#ge,this.addToUndoStack),i.activateDrawLayer(r.getCurrentOrientedIndex(),r.getScrollIndex())}getJsonState(){return(new At).toJSON(this)}applyJsonState(e){const t=new At;t.apply(this,t.fromJSON(e))}onResize=()=>{this.fitToContainer()};onKeydown=e=>{this.#ge(e)};defaultOnKeydown=e=>{if(e.ctrlKey)if(e.shiftKey){const t=this.#Ni.getActiveLayerGroup().getActiveViewLayer().getViewController(),n=t.getImageSize();"ArrowLeft"===e.key?n.moreThanOne(3)&&t.decrementIndex(3):"ArrowUp"===e.key?t.canScroll()&&t.incrementScrollIndex():"ArrowRight"===e.key?n.moreThanOne(3)&&t.incrementIndex(3):"ArrowDown"===e.key&&t.canScroll()&&t.decrementScrollIndex()}else if("y"===e.key)this.#Qi.redo();else if("z"===e.key)this.#Qi.undo();else if(" "===e.key)for(let e=0;e<this.#Ni.getNumberOfLayerGroups();++e)this.#Ni.getLayerGroup(e).setShowCrosshair(!this.#Ni.getLayerGroup(e).getShowCrosshair())};resetDisplay(){this.resetLayout(),this.initWLDisplay()}resetZoom(){this.resetLayout()}setColourMap(e){this.#Ni.getActiveLayerGroup().getActiveViewLayer().getViewController().setColourMapFromName(e)}setWindowLevelPreset(e){this.#Ni.getActiveLayerGroup().getActiveViewLayer().getViewController().setWindowLevelPreset(e)}setTool(e){for(let t=0;t<this.#Ni.getNumberOfLayerGroups();++t){const n=this.#Ni.getLayerGroup(t);let r=null;r="Draw"===e||"Livewire"===e||"Floodfill"===e?n.getActiveDrawLayer():n.getActiveViewLayer(),r&&this.#Ui.bindLayer(r,n.getDivId())}this.#Ui.setSelectedTool(e)}setToolFeatures(e){this.#Ui.setToolFeatures(e)}undo(){this.#Qi.undo()}redo(){this.#Qi.redo()}getStackSize(){return this.#Qi.getStackSize()}getCurrentStackIndex(){return this.#Qi.getCurrentStackIndex()}#ge=e=>{this.#ue.fireEvent(e)};#Gi=e=>{e.type="loadstart",this.#ge(e)};#zi=e=>{e.type="loadprogress",this.#ge(e)};#Vi=e=>{void 0===e.data&&g.error("Missing loaditem event data."),void 0===e.loadtype&&g.error("Missing loaditem event load type.");const t=e.isfirstitem;let n=null;"image"===e.loadtype?(t?this.#qi.addNew(e.loadid,e.data.image,e.data.info):this.#qi.update(e.loadid,e.data.image,e.data.info),n=e.data.info):"state"===e.loadtype&&(this.applyJsonState(e.data),n="state"),this.#ge({type:"loaditem",data:n,source:e.source,loadtype:e.loadtype,loadid:e.loadid,isfirstitem:e.isfirstitem,warn:e.warn}),"image"===e.loadtype&&0!==this.#Xi(e.loadid).length&&t&&this.#qn.viewOnFirstLoadItem&&this.render(e.loadid)};#ji=e=>{e.type="load",this.#ge(e)};#Wi=e=>{e.type="loadend",this.#ge(e)};#Hi=e=>{e.type="loaderror",this.#ge(e)};#Yi=e=>{e.type="loadabort",this.#ge(e)};#$i(e){e.addEventListener("zoomchange",this.#ge),e.addEventListener("offsetchange",this.#ge),e.addEventListener("renderstart",this.#ge),e.addEventListener("renderend",this.#ge);for(let t=0;t<Ye.length;++t)e.addEventListener(Ye[t],this.#ge);this.#Ui&&this.#Ui.hasTool("Draw")&&(e.addEventListener("drawcreate",this.#ge),e.addEventListener("drawdelete",this.#ge))}#Ki(e,t){this.#Ji(e,t),this.#Ui&&this.#Ui.init()}#Ji(e,t){const n=this.#qi.get(e);if(!n)throw new Error("Cannot initialise layer with data id: "+e);const r=this.#Ni.getLayerGroupByDivId(t.divId);if(!r)throw new Error("Cannot initialise layer with group id: "+t.divId);const i=n.image.getGeometry();this.#Ni.unbindLayerGroups();const a=(new He).create(n.meta,n.image),o=function(e,t){let n=w();return void 0!==t&&(n=e.asOneAndZeros().getInverse().multiply(t)),n.getAbs()}(i.getOrientation(),r.getTargetOrientation());a.setOrientation(o),"SEG"===n.image.getMeta().Modality&&a.setAlphaFunction((function(e){return 0===e[0]&&0===e[1]&&0===e[2]?0:255})),void 0!==t.colourMap&&a.setColourMap(t.colourMap);const s=0===r.getNumberOfLayers();let l=1;s||(l=.5,void 0===t.colourMap&&a.setColourMap(f.rainbow));const c=r.addViewLayer();c.setView(a,e);const u=i.getSize(o).get2D(),h=i.getSpacing(o).get2D();c.initialise(u,h,l);const d=c.getViewController();let g;"SEG"===n.image.getMeta().Modality&&(d.addEventListener("masksegmentdelete",this.#ge),d.addEventListener("masksegmentredraw",this.#ge)),this.#qi.addEventListener("imageset",c.onimageset),this.#qi.addEventListener("imagechange",(e=>{c.onimagechange(e),this.render(e.dataid)})),this.#Ni.bindLayerGroups(),this.#Ui&&this.#Ui.bindLayer(c,r.getDivId()),this.#Ui&&this.#Ui.hasTool("Draw")&&(g=r.addDrawLayer(),g.initialise(u,h,e),g.setPlaneHelper(c.getViewController().getPlaneHelper()));const p=[d.getCurrentIndex().getValues(),d.getCurrentPosition().getValues()];r.updateLayersToPositionChange({value:p,srclayerid:c.getId()}),this.#Ni.syncLayerGroupScale();const m=i.getOrientation().getThirdColMajorDirection();c.setOffset(r.getOffset()),void 0!==t.orientation&&(2===m?"axial"!==t.orientation&&(c.addFlipOffsetY(),void 0!==g&&g.addFlipOffsetY()):0===m&&"sagittal"!==t.orientation&&(c.addFlipOffsetX(),void 0!==g&&g.addFlipOffsetX())),s?void 0!==t.orientation?0===m||2===m?r.flipScaleZ():(c.setScale(r.getScale()),void 0!==g&&g.setScale(r.getScale())):0===m?r.flipScaleZ():(c.setScale(r.getScale()),void 0!==g&&g.setScale(r.getScale())):(c.setScale(r.getScale()),void 0!==g&&g.setScale(r.getScale()))}}class Qn{#P=!0;#L;constructor(e,t){void 0!==t&&(this.#P=t),this.#L=new DataView(e)}writeUint8(e,t){return this.#L.setUint8(e,t),e+Uint8Array.BYTES_PER_ELEMENT}writeInt8(e,t){return this.#L.setInt8(e,t),e+Int8Array.BYTES_PER_ELEMENT}writeUint16(e,t){return this.#L.setUint16(e,t,this.#P),e+Uint16Array.BYTES_PER_ELEMENT}writeInt16(e,t){return this.#L.setInt16(e,t,this.#P),e+Int16Array.BYTES_PER_ELEMENT}writeUint32(e,t){return this.#L.setUint32(e,t,this.#P),e+Uint32Array.BYTES_PER_ELEMENT}writeUint64(e,t){return this.#L.setBigUint64(e,t,this.#P),e+BigUint64Array.BYTES_PER_ELEMENT}writeInt32(e,t){return this.#L.setInt32(e,t,this.#P),e+Int32Array.BYTES_PER_ELEMENT}writeInt64(e,t){return this.#L.setBigInt64(e,t,this.#P),e+BigInt64Array.BYTES_PER_ELEMENT}writeFloat32(e,t){return this.#L.setFloat32(e,t,this.#P),e+Float32Array.BYTES_PER_ELEMENT}writeFloat64(e,t){return this.#L.setFloat64(e,t,this.#P),e+Float64Array.BYTES_PER_ELEMENT}writeHex(e,t){const n=parseInt(t,16);return this.#L.setUint16(e,n,this.#P),e+Uint16Array.BYTES_PER_ELEMENT}writeBinaryArray(e,t){if(t.length%8!=0)throw new Error("Cannot write boolean array as binary.");let n=null,r=null;for(let i=0,a=t.length;i<a;i+=8){n=0;for(let e=0;e<8;++e)r=0===t[i+e]?0:1,n+=r<<e;e=this.writeUint8(e,n)}return e}writeUint8Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeUint8(e,t[n]);return e}writeInt8Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeInt8(e,t[n]);return e}writeUint16Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeUint16(e,t[n]);return e}writeInt16Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeInt16(e,t[n]);return e}writeUint32Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeUint32(e,t[n]);return e}writeUint64Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeUint64(e,t[n]);return e}writeInt32Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeInt32(e,t[n]);return e}writeInt64Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeInt64(e,t[n]);return e}writeFloat32Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeFloat32(e,t[n]);return e}writeFloat64Array(e,t){for(let n=0,r=t.length;n<r;++n)e=this.writeFloat64(e,t[n]);return e}}let Gn=0;class zn{action;value;constructor(e){this.action=e}}function Vn(e){const t="1.2.826.0.1.3680043.9.7278.1.";let n="";if("ImplementationClassUID"===e)n=t+"0.32.3";else{const r="."+(new Date).toISOString().replace(/\D/g,"").substring(0,14);Gn+=1;const i="."+Gn;n=t;const a=t.length+i.length+r.length,o=Math.min(e.length,64-a);if(o>1){let t="";for(let n=0;n<o;++n)t+=e.charCodeAt(n);n+=t.substring(0,o)}n+=r+i}return n}function jn(e){return e%2==0}function Wn(e){const t=k[e];return void 0!==t&&"string"===t}function Hn(e,t){const n=new Uint8Array(e.length+1);return n.set(e),n.set(t,e.length),n}class Yn{encode(e){const t=new Uint8Array(e.length);for(let n=0,r=e.length;n<r;++n)t[n]=e.charCodeAt(n);return t}}class Xn{#ea=!1;setUseUnVrForPrivateSq(e){this.#ea=e}#ta={copy:function(e){return e},remove:function(){return null},clear:function(e){return e.value=[],e},replace:function(e,t){return e.value=[t],e}};#na={default:{action:"copy",value:null}};#ra=this.#na;setRules(e){this.#ra=e}#ia=new Yn;#aa=this.#ia;#oa(e){return this.#ia.encode(e)}#sa(e){return this.#aa.encode(e)}useSpecialTextEncoder(){this.#aa=new TextEncoder}useDefaultAnonymisationRules(){this.setRules({default:{action:"remove",value:null},PatientName:{action:"replace",value:"Anonymized"},"Meta Element":{action:"copy",value:null},Acquisition:{action:"copy",value:null},"Image Presentation":{action:"copy",value:null},Procedure:{action:"copy",value:null},"Pixel Data":{action:"copy",value:null}})}getElementToWrite(e){const t=e.tag.getGroupName(),n=e.tag.getNameFromDictionary();let r;return r=void 0!==this.#ra[e.tag.getKey()]?this.#ra[e.tag.getKey()]:void 0!==n&&void 0!==this.#ra[n]?this.#ra[n]:void 0!==this.#ra[t]?this.#ra[t]:this.#ra.default,this.#ta[r.action](e,r.value)}#la(e,t,n,r){let i=null;for(let a=0;a<n.length;++a){i=n[a];const o=Object.keys(i);if(0===o.length)continue;let s=!1;void 0!==i.FFFEE000.undefinedLength&&(s=i.FFFEE000.undefinedLength);const l=new ae("NONE");l.vl=s?4294967295:i.FFFEE000.vl,l.tag=U(),l.value=[],t=this.#ca(e,l,t,r);for(let n=0;n<o.length;++n)"FFFEE000"!==o[n]&&"FFFEE00D"!==o[n]&&(t=this.#ca(e,i[o[n]],t,r));if(s){const n=new ae("NONE");n.vl=0,n.tag=new M("FFFE","E00D"),n.value=[],t=this.#ca(e,n,t,r)}}return t}#ua(e,t,n,r,i){const a=n;if("NONE"===t.vr);else if(r instanceof Uint8Array)n=r.length===8*t.vl?e.writeBinaryArray(n,r):e.writeUint8Array(n,r);else if(r instanceof Int8Array)n=e.writeInt8Array(n,r);else if(r instanceof Uint16Array)n=e.writeUint16Array(n,r);else if(r instanceof Int16Array)n=e.writeInt16Array(n,r);else if(r instanceof Uint32Array)n=e.writeUint32Array(n,r);else if(r instanceof Int32Array)n=e.writeInt32Array(n,r);else if(r instanceof BigUint64Array)n=e.writeUint64Array(n,r);else if(r instanceof BigInt64Array)n=e.writeInt64Array(n,r);else{const a=k[t.vr];if(void 0!==a)if("Uint8"===a)n=e.writeUint8Array(n,r);else if("Uint16"===a)n=e.writeUint16Array(n,r);else if("Int16"===a)n=e.writeInt16Array(n,r);else if("Uint32"===a)n=e.writeUint32Array(n,r);else if("Int32"===a)n=e.writeInt32Array(n,r);else if("Uint64"===a)n=e.writeUint64Array(n,r);else if("Int64"===a)n=e.writeInt64Array(n,r);else if("Float32"===a)n=e.writeFloat32Array(n,r);else if("Float64"===a)n=e.writeFloat64Array(n,r);else{if("string"!==a)throw Error("Unknown VR type: "+a);n=e.writeUint8Array(n,r)}else if("SQ"===t.vr)n=this.#la(e,n,r,i);else if("AT"===t.vr)for(let t=0;t<r.length;++t){const i=r[t]+"",a=i.substring(1,5),o=i.substring(6,10),s=[parseInt(a,16),parseInt(o,16)];n=e.writeUint16Array(n,s)}else g.warn("Unknown VR: "+t.vr)}if("SQ"!==t.vr&&"NONE"!==t.vr){const e=n-a;e!==t.vl&&g.warn("Offset difference and VL are not equal: "+e+" != "+t.vl+", vr:"+t.vr)}return n}#ha(e,t,n,r,i){let a=!1;if(void 0!==t.undefinedLength&&(a=t.undefinedLength),a){const a={};a.FFFEE000={tag:U(),vr:"NONE",vl:0,value:[]};for(let e=0;e<r.length;++e)a[e]={tag:U(),vr:t.vr,vl:r[e].length,value:r[e]};n=this.#la(e,n,[a],i)}else{let a=r[0];r.length>1&&(a=function(e){const t=e.length,n=e[0].length;if(void 0===n)return e;const r=t*n,i=new e[0].constructor(r);for(let r=0;r<t;r++){const t=r*n;i.set(e[r],t)}return i}(r)),n=this.#ua(e,t,n,a,i)}return n}#ca(e,t,n,r){const i=t.tag.isWithVR(),a=!(!r&&i)||E(t.vr);n=e.writeHex(n,t.tag.getGroup()),n=e.writeHex(n,t.tag.getElement());let o=t.vr;this.#ea&&t.tag.isPrivate()&&"SQ"===o&&(g.warn("Write element using VR=UN for private sequence."),o="UN"),i&&!r&&(n=e.writeUint8Array(n,this.#oa(o)),a&&(n+=2));let s=!1;("SQ"===t.vr||G(t.tag))&&void 0!==t.undefinedLength&&(s=t.undefinedLength);let l=!1;B(t.tag)&&void 0!==t.undefinedLength&&(l=t.undefinedLength);let c=t.vl;(s||l)&&(c=4294967295),n=a?e.writeUint32(n,c):e.writeUint16(n,c);let u=t.value;if(void 0===u&&(u=[]),n=G(t.tag)?this.#ha(e,t,n,u,r):this.#ua(e,t,n,u,r),s){const t=new ae("NONE");t.vl=0,t.tag=new M("FFFE","E0DD"),t.value=[],n=this.#ca(e,t,n,r)}return n}getBuffer(e){const t=e["00020010"].value[0],n=de(t),r=fe(t);if(void 0!==e["00080005"]){const t=e["00080005"].value[0];void 0!==t&&"ISO-IR 6"!==t&&(g.debug("Change charset to UTF, was: "+t),this.useSpecialTextEncoder(),e["00080005"].value=["ISO_IR 192"])}let i;void 0!==e["00280100"]&&(i=e["00280100"].value[0]);let a=132,o=0;const s=[],l=[];let c,u,h=0;const d=new M("0002","0000"),f=new M("0002","0001"),p=new M("0002","0012"),m=new M("0002","0013"),S=Object.keys(e);for(let t=0,r=S.length;t<r;++t){const r=e[S[t]];r.tag=q(S[t]),c=this.getElementToWrite(r),null===c||d.equals(c.tag)||f.equals(c.tag)||p.equals(c.tag)||m.equals(c.tag)||(o=0,Zn(c),this.#da(c,c.value,n,i),u=c.tag.getGroupName(),o+=ve(c.vr,"Meta Element"!==u&&n),o+=c.vl,"Meta Element"===u?(s.push(c),h+=o):l.push(c),a+=o)}const y=$n("FileMetaInformationVersion");let v=ve(y.vr,!1);v+=this.#da(y,[0,1],!1),s.push(y),h+=v,a+=v;const b=$n("ImplementationClassUID");let C=ve(b.vr,!1);C+=this.#da(b,[Vn("ImplementationClassUID")],!1),s.push(b),h+=C,a+=C;const w=$n("ImplementationVersionName");let x=ve(w.vr,!1);x+=this.#da(w,["DWV_0.32.3"],!1),s.push(w),h+=x,a+=x;const D=function(e,t){return function(e,t){let n=parseInt(e.getGroup(),16)-parseInt(t.getGroup(),16);return 0===n&&(n=parseInt(e.getElement(),16)-parseInt(t.getElement(),16)),n}(e.tag,t.tag)};s.sort(D),l.sort(D);const T=$n("FileMetaInformationGroupLength");let P=ve(T.vr,!1);P+=this.#da(T,new Uint32Array([h]),!1),a+=P;const I=new ArrayBuffer(a),A=new Qn(I),L=new Qn(I,!r);let O=128;O=A.writeUint8Array(O,this.#oa("DICM")),O=this.#ca(A,T,O,!1);for(let e=0,t=s.length;e<t;++e)O=this.#ca(A,s[e],O,!1);const _=132+P+h;O!==_&&g.warn("Bad size calculation... meta offset: "+O+", calculated size:"+_+" (diff:"+(O-_)+")");for(let e=0,t=l.length;e<t;++e)O=this.#ca(L,l[e],O,n);return O!==a&&g.warn("Bad size calculation... final offset: "+O+", calculated size:"+a+" (diff:"+(O-a)+")"),I}#da(e,t,n,r){let i=0;if("SQ"===e.vr){if(null!==t&&0!==t){const a=[];let o,s=!1;void 0!==e.undefinedLength&&(s=e.undefinedLength,delete e.undefinedLength);for(let e=0;e<t.length;++e){const l=t[e],c={};let u=0;if(null===l||0===l)continue;const h=Object.keys(l);for(let e=0,t=h.length;e<t;++e){const t=h[e],i=l[t];i.tag=q(t),B(i.tag)||(u+=this.#da(i,i.value,n,r),c[t]=i,u+=ve(i.vr,n))}const d={tag:U(),vr:"NONE",vl:u,value:[]};s&&(d.undefinedLength=s),o=d.tag.getKey(),c[o]=d,u+=ve(d.vr,n),s&&(u+=ve("NONE",n)),i+=u,a.push(c)}s&&(i+=ve("NONE",n)),e.value=a,e.vl=i,s&&(e.undefinedLength=s)}}else{if(Wn(a=e.vr)||"OB"===a){const n=function(e){let t="";return Wn(e)&&(t="UI"===e?"\0":" "),t}(e.vr);if(Wn(e.vr)){let r;F(e.vr)?(t=this.#sa(t.join("\\")),r=this.#sa(n)):(t=this.#oa(t.join("\\")),r=this.#oa(n)),jn(t.length)||(t=Hn(t,r))}else"OB"===e.vr&&(t=function(e){if(null==e||void 0===e.length)throw new Error("Cannot pad undefined or null OB value.");if(0!==e.length&&void 0!==e[0].length){let t=0;for(let n=0;n<e.length;++n)t+=e[n].length;jn(t)||(e[e.length-1]=Hn(e[e.length-1],[0]))}else jn(e.length)||(e=Hn(e,[0]));return e}(t))}if(i=0,"AT"===e.vr)i=4*t.length;else if("xs"===e.vr)i=t.length*Uint16Array.BYTES_PER_ELEMENT;else if(function(e){const t=k[e];return void 0!==t&&"string"!==t}(e.vr)||"ox"===e.vr){if(G(e.tag)&&Array.isArray(t)){i=0;for(let e=0;e<t.length;++e)i+=t[e].length}else i=t.length;const a=k[e.vr];if(G(e.tag)||"ox"===e.vr)if(e.undefinedLength){const e=ve("NONE",n);i+=e,i+=e*t.length,i+=e}else void 0!==r&&(1===r?i/=8:16===r&&(i*=Uint16Array.BYTES_PER_ELEMENT));else{if(void 0===a)throw Error("Unsupported element: "+e.vr);{const e=function(e){let t;return"Uint8"===e?t=Uint8Array.BYTES_PER_ELEMENT:"Uint16"===e?t=Uint16Array.BYTES_PER_ELEMENT:"Int16"===e?t=Int16Array.BYTES_PER_ELEMENT:"Uint32"===e?t=Uint32Array.BYTES_PER_ELEMENT:"Int32"===e?t=Int32Array.BYTES_PER_ELEMENT:"Float32"===e?t=Float32Array.BYTES_PER_ELEMENT:"Float64"===e?t=Float64Array.BYTES_PER_ELEMENT:"Uint64"===e?t=BigUint64Array.BYTES_PER_ELEMENT:"Int64"===e&&(t=BigInt64Array.BYTES_PER_ELEMENT),t}(a);if(void 0===e)throw Error("Unknown bytes per element for VR type: "+a);i*=e}}}else i=t.length;e.value=t,e.vl=i}var a;return i}}function Zn(e){if("UN"===e.vr){const t=e.tag.getVrFromDictionary();void 0!==t&&e.vr!==t&&(e.vr=t,g.info("Element "+e.tag.getGroup()+" "+e.tag.getElement()+" VR changed from UN to "+e.vr))}}function $n(e){const t=z(e),n=new ae(t.getVrFromDictionary());return n.tag=t,n}function Kn(e){const t=Object.keys(e),n={};for(let r=0,i=t.length;r<i;++r){const i=z(t[r]);if(void 0===i)continue;const a=i.getVrFromDictionary();let o,s=!1;const l=e[t[r]];if("SQ"===a){const e=[];if(void 0!==l.undefinedLength&&(s=l.undefinedLength),void 0!==l.value&&null!==l.value)for(let t=0;t<l.value.length;++t)e.push(Kn(l.value[t]));else g.trace("Undefined or null jsonTag SQ value.");o=e}else o=Array.isArray(l)?l:[l];const c=new ae(a);c.tag=i,c.value=o,s&&(c.undefinedLength=s),n[i.getKey()]=c}return n}}(),o}())},679:(e,t,n)=>{"use strict";var r=n(296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(g){var i=f(n);i&&i!==g&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var s=l(t),p=l(n),m=0;m<o.length;++m){var S=o[m];if(!(a[S]||r&&r[S]||p&&p[S]||s&&s[S])){var y=d(n,S);try{c(t,S,y)}catch(e){}}}}return t}},103:(e,t)=>{"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,S=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function C(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case m:case p:case l:return e;default:return t}}case i:return t}}}function w(e){return C(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=a,t.Lazy=m,t.Memo=p,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||C(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return C(e)===c},t.isContextProvider=function(e){return C(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return C(e)===d},t.isFragment=function(e){return C(e)===a},t.isLazy=function(e){return C(e)===m},t.isMemo=function(e){return C(e)===p},t.isPortal=function(e){return C(e)===i},t.isProfiler=function(e){return C(e)===s},t.isStrictMode=function(e){return C(e)===o},t.isSuspense=function(e){return C(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===h||e===s||e===o||e===f||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===p||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===v||e.$$typeof===b||e.$$typeof===S)},t.typeOf=C},296:(e,t,n)=>{"use strict";e.exports=n(103)},645:(e,t)=>{
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-u)-1,f>>=-u,u+=s;u>0;a=256*a+e[t+h],h+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=c}return(f?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,g=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=g,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+f]=255&o,f+=g,o/=256,c-=8);e[n+f-g]|=128*p}},733:(e,t,n)=>{var r=n(764).lW;
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/e.exports=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return i(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,o,s,l,c,u=[],h=0,d=e.length,f=d,g="string"!==r.getTypeOf(e);h<e.length;)f=d-h,i=g?(t=e[h++],n=h<d?e[h++]:0,h<d?e[h++]:0):(t=e.charCodeAt(h++),n=h<d?e.charCodeAt(h++):0,h<d?e.charCodeAt(h++):0),o=t>>2,s=(3&t)<<4|n>>4,l=1<f?(15&n)<<2|i>>6:64,c=2<f?63&i:64,u.push(a.charAt(o)+a.charAt(s)+a.charAt(l)+a.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,o,s,l,c=0,u=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&f--,e.charAt(e.length-2)===a.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|f):new Array(0|f);c<e.length;)t=a.indexOf(e.charAt(c++))<<2|(o=a.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(s=a.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(l=a.indexOf(e.charAt(c++))),d[u++]=t,64!==s&&(d[u++]=n),64!==l&&(d[u++]=r);return d}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),a=e("./utils"),o=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",a.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,o,u){var h,d,f=e.file,g=e.compression,p=u!==s.utf8encode,m=a.transformTo("string",u(f.name)),S=a.transformTo("string",s.utf8encode(f.name)),y=f.comment,v=a.transformTo("string",u(y)),b=a.transformTo("string",s.utf8encode(y)),C=S.length!==f.name.length,w=b.length!==y.length,x="",D="",T="",P=f.dir,I=f.date,A={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(A.crc32=e.crc32,A.compressedSize=e.compressedSize,A.uncompressedSize=e.uncompressedSize);var L=0;t&&(L|=8),p||!C&&!w||(L|=2048);var O=0,_=0;P&&(O|=16),"UNIX"===o?(_=798,O|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,P)):(_=20,O|=function(e){return 63&(e||0)}(f.dosPermissions)),h=I.getUTCHours(),h<<=6,h|=I.getUTCMinutes(),h<<=5,h|=I.getUTCSeconds()/2,d=I.getUTCFullYear()-1980,d<<=4,d|=I.getUTCMonth()+1,d<<=5,d|=I.getUTCDate(),C&&(D=r(1,1)+r(l(m),4)+S,x+="up"+r(D.length,2)+D),w&&(T=r(1,1)+r(l(v),4)+b,x+="uc"+r(T.length,2)+T);var E="";return E+="\n\0",E+=r(L,2),E+=g.magic,E+=r(h,2),E+=r(d,2),E+=r(A.crc32,4),E+=r(A.compressedSize,4),E+=r(A.uncompressedSize,4),E+=r(m.length,2),E+=r(x.length,2),{fileRecord:c.LOCAL_FILE_HEADER+E+m+x,dirRecord:c.CENTRAL_FILE_HEADER+r(_,2)+E+r(v.length,2)+"\0\0\0\0"+r(O,4)+r(i,4)+m+x+v}}var a=e("../utils"),o=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(u,o),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,o){var s=a.transformTo("string",o(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var a=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(a)})),a.entriesCount=o}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),a=e("./utf8"),o=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(c(r[a]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),a=i.files,o=0;o<a.length;o++){var s=a[o],l=s.fileNameStr,c=r.resolve(s.fileNameStr);n.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(a,i),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:void 0!==r,newBufferFrom:function(e,t){if(r.from&&r.from!==Uint8Array.from)return r.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new r(e,t)},allocBuffer:function(e){if(r.alloc)return r.alloc(e);var t=new r(e);return t.fill(0),t},isBuffer:function(e){return r.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=a.getTypeOf(t),s=a.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=p(e)),s.createFolders&&(r=g(e))&&m.call(this,r,!0);var h="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!h),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var S=null;S=t instanceof c||t instanceof o?t:d.isNode&&d.isStream(t)?new f(e,t):a.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new u(e,S,s);this.files[e]=y}var i=e("./utf8"),a=e("./utils"),o=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),g=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},p=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:l.createFolders,e=p(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function S(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(S(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(S(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=m.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");a.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(e){(t=new o("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),a=e("./ArrayReader"),o=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(r.transformTo("uint8array",e)):new a(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function a(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,r),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,r),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var i=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),s=e("../base64"),l=e("../support"),c=e("../external"),u=null;if(l.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t){return new c.Promise((function(n,a){var o=[],l=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",(function(e,n){o.push(e),t&&t(n)})).on("error",(function(e){o=[],a(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return i.transformTo(e,t)}}(c,function(e,t){var n,i=0,a=null,o=0;for(n=0;n<t.length;n++)o+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(a=new Uint8Array(o),n=0;n<t.length;n++)a.set(t[n],i),i+=t[n].length;return a;case"nodebuffer":return r.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,o),u);n(e)}catch(e){a(e)}o=[]})).resume()}))}function d(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new a(r)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return h(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==r,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),n.blob=0===a.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),a=e("./nodejsUtils"),o=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,n,r,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),a=o=0;o<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,o=e.length,l=new Array(2*o);for(t=n=0;t<o;)if((i=e[t++])<128)l[n++]=i;else if(4<(a=s[i]))l[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&t<o;)i=i<<6|63&e[t++],a--;1<a?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,o),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),l=t;o!==t.length&&(i.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),a=e("./nodejsUtils"),o=e("./external");function s(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,a)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,a)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var d={};d.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,a.allocBuffer(e.length))}},d.array={string:u,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(e)}},d.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return a.newBufferFrom(e)}},d.nodebuffer={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return d[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,a,s,c){return o.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(c?t=i.decode(t):a&&!0!==s&&(t=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./signature"),o=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),a=e("./compressedObject"),o=e("./crc32"),s=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),o=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)r.prototype[c[h]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,o=new i(u),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var a={},o=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return a.reject(e,r)}r===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,a.reject(e,t))}function i(t){n||(n=!0,a.resolve(e,t))}var o=g((function(){t(i,r)}));"error"===o.status&&r(o.value)}function g(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==l?h(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){a.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},a.resolve=function(e,t){var n=g(d,t);if("error"===n.status)return a.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:a.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return a.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then((function(e){o[i]=e,++s!==n||r||(r=!0,a.resolve(c,o))}),(function(e){r||(r=!0,a.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,s=-1,l=new this(i);++s<n;)o=e[s],t.resolve(o).then((function(e){r||(r=!0,a.resolve(l,e))}),(function(e){r||(r=!0,a.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,h=0,d=8;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({level:u,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var g;if(g="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,g))!==c)throw new Error(o[n]);this._dict_set=!0}}function g(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}f.prototype.push=function(e,t){var n,o,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,o))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),!(s.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=f,n.deflate=g,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,g(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,g(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),a=e("./utils/strings"),o=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}h.prototype.push=function(e,t){var n,s,l,c,h,d,f=this.strm,g=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(g),f.next_out=0,f.avail_out=g),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(d="string"==typeof p?a.string2buf(p):"[object ArrayBuffer]"===u.call(p)?new Uint8Array(p):p,n=r.inflateSetDictionary(this.strm,d)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(f.output,f.next_out),c=f.next_out-l,h=a.buf2string(f.output,l),f.next_out=c,f.avail_out=g-c,c&&i.arraySet(f.output,f.output,l,c,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(f.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},a={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,i,a,o,s=e.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),a=o=0;o<l;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,a,s=t||e.length,c=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if(4<(a=o[i]))c[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&n<s;)i=i<<6|63&e[n++],a--;1<a?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;a=a+(i=i+t[r++]|0)|0,--o;);i%=65521,a%=65521}return i|a<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),a=e("./trees"),o=e("./adler32"),s=e("./crc32"),l=e("./messages"),c=0,u=4,h=0,d=-2,f=-1,g=4,p=2,m=8,S=9,y=286,v=30,b=19,C=2*y+1,w=15,x=3,D=258,T=D+x+1,P=42,I=113,A=1,L=2,O=3,_=4;function E(e,t){return e.msg=l[t],t}function R(e){return(e<<1)-(4<e?9:0)}function F(e){for(var t=e.length;0<=--t;)e[t]=0}function k(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function M(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,k(e.strm)}function q(e,t){e.pending_buf[e.pending++]=t}function U(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-T?e.strstart-(e.w_size-T):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+D,f=c[a+o-1],g=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+o]===g&&c[n+o-1]===f&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<d);if(r=D-(d-a),a=d-D,o<r){if(e.match_start=t,s<=(o=r))break;f=c[a+o-1],g=c[a+o]}}}while((t=h[t&u])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function N(e){var t,n,r,a,l,c,u,h,d,f,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-T)){for(i.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=n=e.hash_size;r=e.head[--t],e.head[t]=g<=r?r-g:0,--n;);for(t=n=g;r=e.prev[--t],e.prev[t]=g<=r?r-g:0,--n;);a+=g}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,h=e.strstart+e.lookahead,f=void 0,(d=a)<(f=c.avail_in)&&(f=d),n=0===f?0:(c.avail_in-=f,i.arraySet(u,c.input,c.next_in,f,h),1===c.state.wrap?c.adler=o(c.adler,u,f,h):2===c.state.wrap&&(c.adler=s(c.adler,u,f,h)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=x)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+x-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<T&&0!==e.strm.avail_in)}function Q(e,t){for(var n,r;;){if(e.lookahead<T){if(N(e),e.lookahead<T&&t===c)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-T&&(e.match_length=B(e,n)),e.match_length>=x)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(M(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<x-1?e.strstart:x-1,t===u?(M(e,!0),0===e.strm.avail_out?O:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?A:L}function G(e,t){for(var n,r,i;;){if(e.lookahead<T){if(N(e),e.lookahead<T&&t===c)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-T&&(e.match_length=B(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-x,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,r&&(M(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,t===u?(M(e,!0),0===e.strm.avail_out?O:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?A:L}function z(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*C),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*b+1)),F(this.dyn_ltree),F(this.dyn_dtree),F(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(w+1),this.heap=new i.Buf16(2*y+1),F(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),F(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function j(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=p,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?P:I,e.adler=2===t.wrap?0:1,t.last_flush=c,a._tr_init(t),h):E(e,d)}function W(e){var t=j(e);return t===h&&function(e){e.window_size=2*e.w_size,F(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),t}function H(e,t,n,r,a,o){if(!e)return d;var s=1;if(t===f&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),a<1||S<a||n!==m||r<8||15<r||t<0||9<t||o<0||g<o)return E(e,d);8===r&&(r=9);var l=new V;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,W(e)}r=[new z(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(N(e),0===e.lookahead&&t===c)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,M(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-T&&(M(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?O:_):(e.strstart>e.block_start&&(M(e,!1),e.strm.avail_out),A)})),new z(4,4,8,4,Q),new z(4,5,16,8,Q),new z(4,6,32,32,Q),new z(4,4,16,16,G),new z(8,16,32,32,G),new z(8,16,128,128,G),new z(8,32,128,256,G),new z(32,128,258,1024,G),new z(32,258,258,4096,G)],n.deflateInit=function(e,t){return H(e,t,m,15,8,0)},n.deflateInit2=H,n.deflateReset=W,n.deflateResetKeep=j,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},n.deflate=function(e,t){var n,i,o,l;if(!e||!e.state||5<t||t<0)return e?E(e,d):d;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return E(e,0===e.avail_out?-5:d);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===P)if(2===i.wrap)e.adler=0,q(i,31),q(i,139),q(i,8),i.gzhead?(q(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),q(i,255&i.gzhead.time),q(i,i.gzhead.time>>8&255),q(i,i.gzhead.time>>16&255),q(i,i.gzhead.time>>24&255),q(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),q(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(q(i,255&i.gzhead.extra.length),q(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(q(i,0),q(i,0),q(i,0),q(i,0),q(i,0),q(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),q(i,3),i.status=I);else{var f=m+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=I,U(i,f),0!==i.strstart&&(U(i,e.adler>>>16),U(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),k(e),o=i.pending,i.pending!==i.pending_buf_size));)q(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),k(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,q(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),k(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,q(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&k(e),i.pending+2<=i.pending_buf_size&&(q(i,255&e.adler),q(i,e.adler>>8&255),e.adler=0,i.status=I)):i.status=I),0!==i.pending){if(k(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&R(t)<=R(n)&&t!==u)return E(e,-5);if(666===i.status&&0!==e.avail_in)return E(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var g=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(N(e),0===e.lookahead)){if(t===c)return A;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(M(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?O:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?A:L}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=D){if(N(e),e.lookahead<=D&&t===c)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+D;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=D-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(n=a._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(M(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===u?(M(e,!0),0===e.strm.avail_out?O:_):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?A:L}(i,t):r[i.level].func(i,t);if(g!==O&&g!==_||(i.status=666),g===A||g===O)return 0===e.avail_out&&(i.last_flush=-1),h;if(g===L&&(1===t?a._tr_align(i):5!==t&&(a._tr_stored_block(i,0,0,!1),3===t&&(F(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),k(e),0===e.avail_out))return i.last_flush=-1,h}return t!==u?h:i.wrap<=0?1:(2===i.wrap?(q(i,255&e.adler),q(i,e.adler>>8&255),q(i,e.adler>>16&255),q(i,e.adler>>24&255),q(i,255&e.total_in),q(i,e.total_in>>8&255),q(i,e.total_in>>16&255),q(i,e.total_in>>24&255)):(U(i,e.adler>>>16),U(i,65535&e.adler)),k(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==P&&69!==t&&73!==t&&91!==t&&103!==t&&t!==I&&666!==t?E(e,d):(e.state=null,t===I?E(e,-3):h):d},n.deflateSetDictionary=function(e,t){var n,r,a,s,l,c,u,f,g=t.length;if(!e||!e.state)return d;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==P||n.lookahead)return d;for(1===s&&(e.adler=o(e.adler,t,g,0)),n.wrap=0,g>=n.w_size&&(0===s&&(F(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,g-n.w_size,n.w_size,0),t=f,g=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=g,e.next_in=0,e.input=t,N(n);n.lookahead>=x;){for(r=n.strstart,a=n.lookahead-(x-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+x-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--a;);n.strstart=r,n.lookahead=x-1,N(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=x-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=s,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,a,o,s,l,c,u,h,d,f,g,p,m,S,y,v,b,C,w,x,D,T,P;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),a=e.next_out,P=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,d=n.window,f=n.hold,g=n.bits,p=n.lencode,m=n.distcode,S=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{g<15&&(f+=T[r++]<<g,g+=8,f+=T[r++]<<g,g+=8),v=p[f&S];t:for(;;){if(f>>>=b=v>>>24,g-=b,0==(b=v>>>16&255))P[a++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=p[(65535&v)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}C=65535&v,(b&=15)&&(g<b&&(f+=T[r++]<<g,g+=8),C+=f&(1<<b)-1,f>>>=b,g-=b),g<15&&(f+=T[r++]<<g,g+=8,f+=T[r++]<<g,g+=8),v=m[f&y];n:for(;;){if(f>>>=b=v>>>24,g-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=m[(65535&v)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&v,g<(b&=15)&&(f+=T[r++]<<g,(g+=8)<b&&(f+=T[r++]<<g,g+=8)),l<(w+=f&(1<<b)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,g-=b,(b=a-o)<w){if(u<(b=w-b)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(D=d,(x=0)===h){if(x+=c-b,b<C){for(C-=b;P[a++]=d[x++],--b;);x=a-w,D=P}}else if(h<b){if(x+=c+h-b,(b-=h)<C){for(C-=b;P[a++]=d[x++],--b;);if(x=0,h<C){for(C-=b=h;P[a++]=d[x++],--b;);x=a-w,D=P}}}else if(x+=h-b,b<C){for(C-=b;P[a++]=d[x++],--b;);x=a-w,D=P}for(;2<C;)P[a++]=D[x++],P[a++]=D[x++],P[a++]=D[x++],C-=3;C&&(P[a++]=D[x++],1<C&&(P[a++]=D[x++]))}else{for(x=a-w;P[a++]=P[x++],P[a++]=P[x++],P[a++]=P[x++],2<(C-=3););C&&(P[a++]=P[x++],1<C&&(P[a++]=P[x++]))}break}}break}}while(r<i&&a<s);r-=C=g>>3,f&=(1<<(g-=C<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=f,n.bits=g}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),a=e("./crc32"),o=e("./inffast"),s=e("./inftrees"),l=1,c=2,u=0,h=-2,d=1,f=852,g=592;function p(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(f),t.distcode=t.distdyn=new r.Buf32(g),t.sane=1,t.back=-1,u):h}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,S(e)):h}function v(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):h}function b(e,t){var n,r;return e?(r=new m,(e.state=r).window=null,(n=v(e,t))!==u&&(e.state=null),n):h}var C,w,x=!0;function D(e){if(x){var t;for(C=new r.Buf32(512),w=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,C,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,w,0,e.work,{bits:5}),x=!1}e.lencode=C,e.lenbits=9,e.distcode=w,e.distbits=5}function T(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(a=o.wsize-o.wnext)&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}n.inflateReset=y,n.inflateReset2=v,n.inflateResetKeep=S,n.inflateInit=function(e){return b(e,15)},n.inflateInit2=b,n.inflate=function(e,t){var n,f,g,m,S,y,v,b,C,w,x,P,I,A,L,O,_,E,R,F,k,M,q,U,B=0,N=new r.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(n=e.state).mode&&(n.mode=13),S=e.next_out,g=e.output,v=e.avail_out,m=e.next_in,f=e.input,y=e.avail_in,b=n.hold,C=n.bits,w=y,x=v,M=u;e:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;C<16;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(2&n.wrap&&35615===b){N[n.check=0]=255&b,N[1]=b>>>8&255,n.check=a(n.check,N,2,0),C=b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){e.msg="unknown compression method",n.mode=30;break}if(C-=4,k=8+(15&(b>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&b?10:12,C=b=0;break;case 2:for(;C<16;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(N[0]=255&b,N[1]=b>>>8&255,n.check=a(n.check,N,2,0)),C=b=0,n.mode=3;case 3:for(;C<32;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}n.head&&(n.head.time=b),512&n.flags&&(N[0]=255&b,N[1]=b>>>8&255,N[2]=b>>>16&255,N[3]=b>>>24&255,n.check=a(n.check,N,4,0)),C=b=0,n.mode=4;case 4:for(;C<16;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(N[0]=255&b,N[1]=b>>>8&255,n.check=a(n.check,N,2,0)),C=b=0,n.mode=5;case 5:if(1024&n.flags){for(;C<16;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(N[0]=255&b,N[1]=b>>>8&255,n.check=a(n.check,N,2,0)),C=b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(P=n.length)&&(P=y),P&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,m,P,k)),512&n.flags&&(n.check=a(n.check,f,P,m)),y-=P,m+=P,n.length-=P),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(P=0;k=f[m+P++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k)),k&&P<y;);if(512&n.flags&&(n.check=a(n.check,f,P,m)),y-=P,m+=P,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(P=0;k=f[m+P++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k)),k&&P<y;);if(512&n.flags&&(n.check=a(n.check,f,P,m)),y-=P,m+=P,k)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;C<16;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}C=b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;C<32;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}e.adler=n.check=p(b),C=b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=S,e.avail_out=v,e.next_in=m,e.avail_in=y,n.hold=b,n.bits=C,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&C,C-=7&C,n.mode=27;break}for(;C<3;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}switch(n.last=1&b,C-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(D(n),n.mode=20,6!==t)break;b>>>=2,C-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}b>>>=2,C-=2;break;case 14:for(b>>>=7&C,C-=7&C;C<32;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,C=b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(P=n.length){if(y<P&&(P=y),v<P&&(P=v),0===P)break e;r.arraySet(g,f,m,P,S),y-=P,m+=P,v-=P,S+=P,n.length-=P;break}n.mode=12;break;case 17:for(;C<14;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(n.nlen=257+(31&b),b>>>=5,C-=5,n.ndist=1+(31&b),b>>>=5,C-=5,n.ncode=4+(15&b),b>>>=4,C-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;C<3;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}n.lens[Q[n.have++]]=7&b,b>>>=3,C-=3}for(;n.have<19;)n.lens[Q[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,q={bits:n.lenbits},M=s(0,n.lens,0,19,n.lencode,0,n.work,q),n.lenbits=q.bits,M){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(B=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,_=65535&B,!((L=B>>>24)<=C);){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(_<16)b>>>=L,C-=L,n.lens[n.have++]=_;else{if(16===_){for(U=L+2;C<U;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(b>>>=L,C-=L,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}k=n.lens[n.have-1],P=3+(3&b),b>>>=2,C-=2}else if(17===_){for(U=L+3;C<U;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}C-=L,k=0,P=3+(7&(b>>>=L)),b>>>=3,C-=3}else{for(U=L+7;C<U;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}C-=L,k=0,P=11+(127&(b>>>=L)),b>>>=7,C-=7}if(n.have+P>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;P--;)n.lens[n.have++]=k}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,q={bits:n.lenbits},M=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,q),n.lenbits=q.bits,M){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,q={bits:n.distbits},M=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,q),n.distbits=q.bits,M){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=v){e.next_out=S,e.avail_out=v,e.next_in=m,e.avail_in=y,n.hold=b,n.bits=C,o(e,x),S=e.next_out,g=e.output,v=e.avail_out,m=e.next_in,f=e.input,y=e.avail_in,b=n.hold,C=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(B=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,_=65535&B,!((L=B>>>24)<=C);){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(O&&0==(240&O)){for(E=L,R=O,F=_;O=(B=n.lencode[F+((b&(1<<E+R)-1)>>E)])>>>16&255,_=65535&B,!(E+(L=B>>>24)<=C);){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}b>>>=E,C-=E,n.back+=E}if(b>>>=L,C-=L,n.back+=L,n.length=_,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(U=n.extra;C<U;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,C-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(B=n.distcode[b&(1<<n.distbits)-1])>>>16&255,_=65535&B,!((L=B>>>24)<=C);){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(0==(240&O)){for(E=L,R=O,F=_;O=(B=n.distcode[F+((b&(1<<E+R)-1)>>E)])>>>16&255,_=65535&B,!(E+(L=B>>>24)<=C);){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}b>>>=E,C-=E,n.back+=E}if(b>>>=L,C-=L,n.back+=L,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=_,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(U=n.extra;C<U;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,C-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break e;if(P=x-v,n.offset>P){if((P=n.offset-P)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}I=P>n.wnext?(P-=n.wnext,n.wsize-P):n.wnext-P,P>n.length&&(P=n.length),A=n.window}else A=g,I=S-n.offset,P=n.length;for(v<P&&(P=v),v-=P,n.length-=P;g[S++]=A[I++],--P;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;g[S++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;C<32;){if(0===y)break e;y--,b|=f[m++]<<C,C+=8}if(x-=v,e.total_out+=x,n.total+=x,x&&(e.adler=n.check=n.flags?a(n.check,g,x,S-x):i(n.check,g,x,S-x)),x=v,(n.flags?b:p(b))!==n.check){e.msg="incorrect data check",n.mode=30;break}C=b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;C<32;){if(0===y)break e;y--,b+=f[m++]<<C,C+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}C=b=0}n.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;default:return h}return e.next_out=S,e.avail_out=v,e.next_in=m,e.avail_in=y,n.hold=b,n.bits=C,(n.wsize||x!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&T(e,e.output,e.next_out,x-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,x-=e.avail_out,e.total_in+=w,e.total_out+=x,n.total+=x,n.wrap&&x&&(e.adler=n.check=n.flags?a(n.check,g,x,e.next_out-x):i(n.check,g,x,e.next_out-x)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===x||4===t)&&M===u&&(M=-5),M)},n.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?h:((n.head=t).done=!1,u):h},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?h:11===n.mode&&i(1,t,r,0)!==n.check?-3:T(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,h,d){var f,g,p,m,S,y,v,b,C,w=d.bits,x=0,D=0,T=0,P=0,I=0,A=0,L=0,O=0,_=0,E=0,R=null,F=0,k=new r.Buf16(16),M=new r.Buf16(16),q=null,U=0;for(x=0;x<=15;x++)k[x]=0;for(D=0;D<l;D++)k[t[n+D]]++;for(I=w,P=15;1<=P&&0===k[P];P--);if(P<I&&(I=P),0===P)return c[u++]=20971520,c[u++]=20971520,d.bits=1,0;for(T=1;T<P&&0===k[T];T++);for(I<T&&(I=T),x=O=1;x<=15;x++)if(O<<=1,(O-=k[x])<0)return-1;if(0<O&&(0===e||1!==P))return-1;for(M[1]=0,x=1;x<15;x++)M[x+1]=M[x]+k[x];for(D=0;D<l;D++)0!==t[n+D]&&(h[M[t[n+D]]++]=D);if(y=0===e?(R=q=h,19):1===e?(R=i,F-=257,q=a,U-=257,256):(R=o,q=s,-1),x=T,S=u,L=D=E=0,p=-1,m=(_=1<<(A=I))-1,1===e&&852<_||2===e&&592<_)return 1;for(;;){for(v=x-L,C=h[D]<y?(b=0,h[D]):h[D]>y?(b=q[U+h[D]],R[F+h[D]]):(b=96,0),f=1<<x-L,T=g=1<<A;c[S+(E>>L)+(g-=f)]=v<<24|b<<16|C|0,0!==g;);for(f=1<<x-1;E&f;)f>>=1;if(0!==f?(E&=f-1,E+=f):E=0,D++,0==--k[x]){if(x===P)break;x=t[n+h[D]]}if(I<x&&(E&m)!==p){for(0===L&&(L=I),S+=T,O=1<<(A=x-L);A+L<P&&!((O-=k[A+L])<=0);)A++,O<<=1;if(_+=1<<A,1===e&&852<_||2===e&&592<_)return 1;c[p=E&m]=I<<24|A<<16|S-u|0}}return 0!==E&&(c[S+E]=x-L<<24|64<<16|0),d.bits=I,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,a=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,l=29,c=256,u=c+1+l,h=30,d=19,f=2*u+1,g=15,p=16,m=7,S=256,y=16,v=17,b=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(u+2));o(T);var P=new Array(2*h);o(P);var I=new Array(512);o(I);var A=new Array(256);o(A);var L=new Array(l);o(L);var O,_,E,R=new Array(h);function F(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?I[e]:I[256+(e>>>7)]}function q(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function U(e,t,n){e.bi_valid>p-n?(e.bi_buf|=t<<e.bi_valid&65535,q(e,e.bi_buf),e.bi_buf=t>>p-e.bi_valid,e.bi_valid+=n-p):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function B(e,t,n){U(e,n[2*t],n[2*t+1])}function N(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function Q(e,t,n){var r,i,a=new Array(g+1),o=0;for(r=1;r<=g;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=N(a[s]++,s))}}function G(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*S]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function z(e){8<e.bi_valid?q(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function V(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function j(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&V(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!V(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function W(e,t,n){var r,i,a,o,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?B(e,i,t):(B(e,(a=A[i])+c+1,t),0!==(o=C[a])&&U(e,i-=L[a],o),B(e,a=M(--r),n),0!==(o=w[a])&&U(e,r-=R[a],o)),s<e.last_lit;);B(e,S,t)}function H(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=f,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)j(e,a,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],j(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,j(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,S=0;for(a=0;a<=g;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<f;n++)m<(a=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(a=m,S++),l[2*r+1]=a,c<r||(e.bl_count[a]++,o=0,p<=r&&(o=d[r-p]),s=l[2*r],e.opt_len+=s*(a+o),h&&(e.static_len+=s*(u[2*r+1]+o)));if(0!==S){do{for(a=m-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[m]--,S-=2}while(0<S);for(a=m;0!==a;a--)for(r=e.bl_count[a];0!==r;)c<(i=e.heap[--n])||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(e,t),Q(a,c,e.bl_count)}function Y(e,t,n){var r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*v]++:e.bl_tree[2*b]++,a=i,c=(s=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4))}function X(e,t,n){var r,i,a=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)for(;B(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==a&&(B(e,i,e.bl_tree),s--),B(e,y,e.bl_tree),U(e,s-3,2)):s<=10?(B(e,v,e.bl_tree),U(e,s-3,3)):(B(e,b,e.bl_tree),U(e,s-11,7));a=i,c=(s=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4)}}o(R);var Z=!1;function $(e,t,n,i){U(e,(s<<1)+(i?1:0),3),function(e,t,n,i){z(e),i&&(q(e,n),q(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){Z||(function(){var e,t,n,r,i,a=new Array(g+1);for(r=n=0;r<l-1;r++)for(L[r]=n,e=0;e<1<<C[r];e++)A[n++]=r;for(A[n-1]=r,r=i=0;r<16;r++)for(R[r]=i,e=0;e<1<<w[r];e++)I[i++]=r;for(i>>=7;r<h;r++)for(R[r]=i<<7,e=0;e<1<<w[r]-7;e++)I[256+i++]=r;for(t=0;t<=g;t++)a[t]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,a[8]++;for(;e<=255;)T[2*e+1]=9,e++,a[9]++;for(;e<=279;)T[2*e+1]=7,e++,a[7]++;for(;e<=287;)T[2*e+1]=8,e++,a[8]++;for(Q(T,u+1,a),e=0;e<h;e++)P[2*e+1]=5,P[2*e]=N(e,5);O=new F(T,C,c+1,u,g),_=new F(P,w,0,h,g),E=new F(new Array(0),x,0,d,m)}(),Z=!0),e.l_desc=new k(e.dyn_ltree,O),e.d_desc=new k(e.dyn_dtree,_),e.bl_desc=new k(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,G(e)},n._tr_stored_block=$,n._tr_flush_block=function(e,t,n,r){var o,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return a;return i}(e)),H(e,e.l_desc),H(e,e.d_desc),l=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),H(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*D[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=n+5,n+4<=o&&-1!==t?$(e,t,n,r):4===e.strategy||s===o?(U(e,2+(r?1:0),3),W(e,T,P)):(U(e,4+(r?1:0),3),function(e,t,n,r){var i;for(U(e,t-257,5),U(e,n-1,5),U(e,r-4,4),i=0;i<r;i++)U(e,e.bl_tree[2*D[i]+1],3);X(e,e.dyn_ltree,t-1),X(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),W(e,e.dyn_ltree,e.dyn_dtree)),G(e),r&&z(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(A[n]+c+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){U(e,2,3),B(e,S,T),function(e){16===e.bi_valid?(q(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,a,o=1,s={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(d,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[o]=i,n(o),o++},u.clearImmediate=h}function h(e){delete s[e]}function d(e){if(l)setTimeout(d,0,e);else{var n=s[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{h(e),l=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&d(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},486:function(e,t,n){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,h=128,d=256,f=1/0,g=9007199254740991,p=NaN,m=4294967295,S=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",d]],y="[object Arguments]",v="[object Array]",b="[object Boolean]",C="[object Date]",w="[object Error]",x="[object Function]",D="[object GeneratorFunction]",T="[object Map]",P="[object Number]",I="[object Object]",A="[object Promise]",L="[object RegExp]",O="[object Set]",_="[object String]",E="[object Symbol]",R="[object WeakMap]",F="[object ArrayBuffer]",k="[object DataView]",M="[object Float32Array]",q="[object Float64Array]",U="[object Int8Array]",B="[object Int16Array]",N="[object Int32Array]",Q="[object Uint8Array]",G="[object Uint8ClampedArray]",z="[object Uint16Array]",V="[object Uint32Array]",j=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Z=RegExp(Y.source),$=RegExp(X.source),K=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,Se=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,Ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,De="\\ud800-\\udfff",Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pe="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Le="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_e="[']",Ee="["+De+"]",Re="["+Oe+"]",Fe="["+Te+"]",ke="\\d+",Me="["+Pe+"]",qe="["+Ie+"]",Ue="[^"+De+Oe+ke+Pe+Ie+Ae+"]",Be="\\ud83c[\\udffb-\\udfff]",Ne="[^"+De+"]",Qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ge="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Ae+"]",Ve="\\u200d",je="(?:"+qe+"|"+Ue+")",We="(?:"+ze+"|"+Ue+")",He="(?:['](?:d|ll|m|re|s|t|ve))?",Ye="(?:['](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Fe+"|"+Be+")"+"?",Ze="["+Le+"]?",$e=Ze+Xe+("(?:"+Ve+"(?:"+[Ne,Qe,Ge].join("|")+")"+Ze+Xe+")*"),Ke="(?:"+[Me,Qe,Ge].join("|")+")"+$e,Je="(?:"+[Ne+Fe+"?",Fe,Qe,Ge,Ee].join("|")+")",et=RegExp(_e,"g"),tt=RegExp(Fe,"g"),nt=RegExp(Be+"(?="+Be+")|"+Je+$e,"g"),rt=RegExp([ze+"?"+qe+"+"+He+"(?="+[Re,ze,"$"].join("|")+")",We+"+"+Ye+"(?="+[Re,ze+je,"$"].join("|")+")",ze+"?"+je+"+"+He,ze+"+"+Ye,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ke,Ke].join("|"),"g"),it=RegExp("["+Ve+De+Te+Le+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[M]=lt[q]=lt[U]=lt[B]=lt[N]=lt[Q]=lt[G]=lt[z]=lt[V]=!0,lt[y]=lt[v]=lt[F]=lt[b]=lt[k]=lt[C]=lt[w]=lt[x]=lt[T]=lt[P]=lt[I]=lt[L]=lt[O]=lt[_]=lt[R]=!1;var ct={};ct[y]=ct[v]=ct[F]=ct[k]=ct[b]=ct[C]=ct[M]=ct[q]=ct[U]=ct[B]=ct[N]=ct[T]=ct[P]=ct[I]=ct[L]=ct[O]=ct[_]=ct[E]=ct[Q]=ct[G]=ct[z]=ct[V]=!0,ct[w]=ct[x]=ct[R]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,gt="object"==typeof self&&self&&self.Object===Object&&self,pt=ft||gt||Function("return this")(),mt=t&&!t.nodeType&&t,St=mt&&e&&!e.nodeType&&e,yt=St&&St.exports===mt,vt=yt&&ft.process,bt=function(){try{var e=St&&St.require&&St.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),Ct=bt&&bt.isArrayBuffer,wt=bt&&bt.isDate,xt=bt&&bt.isMap,Dt=bt&&bt.isRegExp,Tt=bt&&bt.isSet,Pt=bt&&bt.isTypedArray;function It(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function At(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function _t(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Et(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Rt(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Ft(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function kt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Mt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function qt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Ut(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Nt=Ht("length");function Qt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Gt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function zt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Gt(e,jt,n)}function Vt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function jt(e){return e!=e}function Wt(e,t){var n=null==e?0:e.length;return n?Zt(e,t)/n:p}function Ht(e){return function(t){return null==t?i:t[e]}}function Yt(e){return function(t){return null==e?i:e[t]}}function Xt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Zt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kt(e){return e?e.slice(0,mn(e)+1).replace(oe,""):e}function Jt(e){return function(t){return e(t)}}function en(e,t){return kt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&zt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&zt(t,e[n],0)>-1;);return n}var an=Yt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),on=Yt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function gn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Nt(e)}function pn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var Sn=Yt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n,r=(t=null==t?pt:yn.defaults(pt.Object(),t,yn.pick(pt,ot))).Array,se=t.Date,De=t.Error,Te=t.Function,Pe=t.Math,Ie=t.Object,Ae=t.RegExp,Le=t.String,Oe=t.TypeError,_e=r.prototype,Ee=Te.prototype,Re=Ie.prototype,Fe=t["__core-js_shared__"],ke=Ee.toString,Me=Re.hasOwnProperty,qe=0,Ue=(n=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Re.toString,Ne=ke.call(Ie),Qe=pt._,Ge=Ae("^"+ke.call(Me).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=yt?t.Buffer:i,Ve=t.Symbol,je=t.Uint8Array,We=ze?ze.allocUnsafe:i,He=un(Ie.getPrototypeOf,Ie),Ye=Ie.create,Xe=Re.propertyIsEnumerable,Ze=_e.splice,$e=Ve?Ve.isConcatSpreadable:i,Ke=Ve?Ve.iterator:i,Je=Ve?Ve.toStringTag:i,nt=function(){try{var e=da(Ie,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==pt.clearTimeout&&t.clearTimeout,ut=se&&se.now!==pt.Date.now&&se.now,ft=t.setTimeout!==pt.setTimeout&&t.setTimeout,gt=Pe.ceil,mt=Pe.floor,St=Ie.getOwnPropertySymbols,vt=ze?ze.isBuffer:i,bt=t.isFinite,Nt=_e.join,Yt=un(Ie.keys,Ie),vn=Pe.max,bn=Pe.min,Cn=se.now,wn=t.parseInt,xn=Pe.random,Dn=_e.reverse,Tn=da(t,"DataView"),Pn=da(t,"Map"),In=da(t,"Promise"),An=da(t,"Set"),Ln=da(t,"WeakMap"),On=da(Ie,"create"),_n=Ln&&new Ln,En={},Rn=Ua(Tn),Fn=Ua(Pn),kn=Ua(In),Mn=Ua(An),qn=Ua(Ln),Un=Ve?Ve.prototype:i,Bn=Un?Un.valueOf:i,Nn=Un?Un.toString:i;function Qn(e){if(ns(e)&&!jo(e)&&!(e instanceof jn)){if(e instanceof Vn)return e;if(Me.call(e,"__wrapped__"))return Ba(e)}return new Vn(e)}var Gn=function(){function e(){}return function(t){if(!ts(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function zn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function jn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Zn(e){var t=this.__data__=new Hn(e);this.size=t.size}function $n(e,t){var n=jo(e),r=!n&&Vo(e),i=!n&&!r&&Xo(e),a=!n&&!r&&!i&&us(e),o=n||r||i||a,s=o?$t(e.length,Le):[],l=s.length;for(var c in e)!t&&!Me.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||va(c,l))||s.push(c);return s}function Kn(e){var t=e.length;return t?e[Xr(0,t-1)]:i}function Jn(e,t){return ka(Oi(e),lr(t,0,e.length))}function er(e){return ka(Oi(e))}function tr(e,t,n){(n!==i&&!Qo(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Me.call(e,t)&&Qo(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Qo(e[n][0],t))return n;return-1}function ir(e,t,n,r){return fr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&_i(t,Es(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,a=t.length,o=r(a),s=null==e;++n<a;)o[n]=s?i:Is(e,t[n]);return o}function lr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function cr(e,t,n,r,a,o){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ts(e))return e;var h=jo(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Me.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Oi(e,s)}else{var d=pa(e),f=d==x||d==D;if(Xo(e))return Di(e,l);if(d==I||d==y||f&&!a){if(s=c||f?{}:Sa(e),!l)return c?function(e,t){return _i(e,ga(e),t)}(e,function(e,t){return e&&_i(t,Rs(t),e)}(s,e)):function(e,t){return _i(e,fa(e),t)}(e,ar(s,e))}else{if(!ct[d])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case F:return Ti(e);case b:case C:return new r(+e);case k:return function(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case q:case U:case B:case N:case Q:case G:case z:case V:return Pi(e,n);case T:return new r;case P:case _:return new r(e);case L:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new r;case E:return i=e,Bn?Ie(Bn.call(i)):{}}var i}(e,d,l)}}o||(o=new Zn);var g=o.get(e);if(g)return g;o.set(e,s),ss(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):rs(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,o))}));var p=h?i:(u?c?aa:ia:c?Rs:Es)(e);return Lt(p||e,(function(r,i){p&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,o))})),s}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ie(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function hr(e,t,n){if("function"!=typeof e)throw new Oe(a);return _a((function(){e.apply(i,n)}),t)}function dr(e,t,n,r){var i=-1,a=Rt,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=kt(t,Jt(n))),r?(a=Ft,o=!1):t.length>=200&&(a=tn,o=!1,t=new Xn(t));e:for(;++i<s;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,o&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else a(t,h,r)||l.push(u)}return l}Qn.templateSettings={escape:K,evaluate:J,interpolate:ee,variable:"",imports:{_:Qn}},Qn.prototype=zn.prototype,Qn.prototype.constructor=Qn,Vn.prototype=Gn(zn.prototype),Vn.prototype.constructor=Vn,jn.prototype=Gn(zn.prototype),jn.prototype.constructor=jn,Wn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(On){var n=t[e];return n===o?i:n}return Me.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return On?t[e]!==i:Me.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=On&&t===i?o:t,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,!0)},Hn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Hn.prototype.has=function(e){return rr(this.__data__,e)>-1},Hn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Pn||Hn),string:new Wn}},Yn.prototype.delete=function(e){var t=ua(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return ua(this,e).get(e)},Yn.prototype.has=function(e){return ua(this,e).has(e)},Yn.prototype.set=function(e,t){var n=ua(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,o),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Zn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Zn.prototype.get=function(e){return this.__data__.get(e)},Zn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!Pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var fr=Fi(Cr),gr=Fi(wr,!0);function pr(e,t){var n=!0;return fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(l===i?s==s&&!cs(s):n(s,l)))var l=s,c=o}return c}function Sr(e,t){var n=[];return fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ya),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Mt(i,s):r||(i[i.length]=s)}return i}var vr=ki(),br=ki(!0);function Cr(e,t){return e&&vr(e,t,Es)}function wr(e,t){return e&&br(e,t,Es)}function xr(e,t){return Et(t,(function(t){return Ko(e[t])}))}function Dr(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[qa(t[n++])];return n&&n==r?e:i}function Tr(e,t,n){var r=t(e);return jo(e)?r:Mt(r,n(e))}function Pr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in Ie(e)?function(e){var t=Me.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(e){}var a=Be.call(e);r&&(t?e[Je]=n:delete e[Je]);return a}(e):function(e){return Be.call(e)}(e)}function Ir(e,t){return e>t}function Ar(e,t){return null!=e&&Me.call(e,t)}function Lr(e,t){return null!=e&&t in Ie(e)}function Or(e,t,n){for(var a=n?Ft:Rt,o=e[0].length,s=e.length,l=s,c=r(s),u=1/0,h=[];l--;){var d=e[l];l&&t&&(d=kt(d,Jt(t))),u=bn(d.length,u),c[l]=!n&&(t||o>=120&&d.length>=120)?new Xn(l&&d):i}d=e[0];var f=-1,g=c[0];e:for(;++f<o&&h.length<u;){var p=d[f],m=t?t(p):p;if(p=n||0!==p?p:0,!(g?tn(g,m):a(h,m,n))){for(l=s;--l;){var S=c[l];if(!(S?tn(S,m):a(e[l],m,n)))continue e}g&&g.push(m),h.push(p)}}return h}function _r(e,t,n){var r=null==(e=Aa(e,t=bi(t,e)))?e:e[qa(Za(t))];return null==r?i:It(r,e,n)}function Er(e){return ns(e)&&Pr(e)==y}function Rr(e,t,n,r,a){return e===t||(null==e||null==t||!ns(e)&&!ns(t)?e!=e&&t!=t:function(e,t,n,r,a,o){var s=jo(e),l=jo(t),c=s?v:pa(e),u=l?v:pa(t),h=(c=c==y?I:c)==I,d=(u=u==y?I:u)==I,f=c==u;if(f&&Xo(e)){if(!Xo(t))return!1;s=!0,h=!1}if(f&&!h)return o||(o=new Zn),s||us(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case F:return!(e.byteLength!=t.byteLength||!a(new je(e),new je(t)));case b:case C:case P:return Qo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case L:case _:return e==t+"";case T:var s=cn;case O:var l=1&r;if(s||(s=dn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=na(s(e),s(t),r,i,a,o);return o.delete(e),u;case E:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var g=h&&Me.call(e,"__wrapped__"),p=d&&Me.call(t,"__wrapped__");if(g||p){var m=g?e.value():e,S=p?t.value():t;return o||(o=new Zn),a(m,S,n,r,o)}}if(!f)return!1;return o||(o=new Zn),function(e,t,n,r,a,o){var s=1&n,l=ia(e),c=l.length,u=ia(t),h=u.length;if(c!=h&&!s)return!1;var d=c;for(;d--;){var f=l[d];if(!(s?f in t:Me.call(t,f)))return!1}var g=o.get(e),p=o.get(t);if(g&&p)return g==t&&p==e;var m=!0;o.set(e,t),o.set(t,e);var S=s;for(;++d<c;){var y=e[f=l[d]],v=t[f];if(r)var b=s?r(v,y,f,t,e,o):r(y,v,f,e,t,o);if(!(b===i?y===v||a(y,v,n,r,o):b)){m=!1;break}S||(S="constructor"==f)}if(m&&!S){var C=e.constructor,w=t.constructor;C==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof C&&C instanceof C&&"function"==typeof w&&w instanceof w||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,n,r,a,o)}(e,t,n,r,Rr,a))}function Fr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Ie(e);a--;){var l=n[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var c=(l=n[a])[0],u=e[c],h=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var d=new Zn;if(r)var f=r(u,h,c,e,t,d);if(!(f===i?Rr(h,u,3,r,d):f))return!1}}return!0}function kr(e){return!(!ts(e)||(t=e,Ue&&Ue in t))&&(Ko(e)?Ge:ye).test(Ua(e));var t}function Mr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?jo(e)?Gr(e[0],e[1]):Qr(e):fl(e)}function qr(e){if(!Da(e))return Yt(e);var t=[];for(var n in Ie(e))Me.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ur(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var n in Ie(e))t.push(n);return t}(e);var t=Da(e),n=[];for(var r in e)("constructor"!=r||!t&&Me.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function Nr(e,t){var n=-1,i=Ho(e)?r(e.length):[];return fr(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Qr(e){var t=ha(e);return 1==t.length&&t[0][2]?Pa(t[0][0],t[0][1]):function(n){return n===e||Fr(n,e,t)}}function Gr(e,t){return Ca(e)&&Ta(t)?Pa(qa(e),t):function(n){var r=Is(n,e);return r===i&&r===t?As(n,e):Rr(t,r,3)}}function zr(e,t,n,r,a){e!==t&&vr(t,(function(o,s){if(a||(a=new Zn),ts(o))!function(e,t,n,r,a,o,s){var l=La(e,n),c=La(t,n),u=s.get(c);if(u)return void tr(e,n,u);var h=o?o(l,c,n+"",e,t,s):i,d=h===i;if(d){var f=jo(c),g=!f&&Xo(c),p=!f&&!g&&us(c);h=c,f||g||p?jo(l)?h=l:Yo(l)?h=Oi(l):g?(d=!1,h=Di(c,!0)):p?(d=!1,h=Pi(c,!0)):h=[]:as(c)||Vo(c)?(h=l,Vo(l)?h=ys(l):ts(l)&&!Ko(l)||(h=Sa(c))):d=!1}d&&(s.set(c,h),a(h,c,r,o,s),s.delete(c));tr(e,n,h)}(e,t,s,n,zr,r,a);else{var l=r?r(La(e,s),o,s+"",e,t,a):i;l===i&&(l=o),tr(e,s,l)}}),Rs)}function Vr(e,t){var n=e.length;if(n)return va(t+=t<0?n:0,n)?e[t]:i}function jr(e,t,n){t=t.length?kt(t,(function(e){return jo(e)?function(t){return Dr(t,1===e.length?e[0]:e)}:e})):[il];var r=-1;t=kt(t,Jt(ca()));var i=Nr(e,(function(e,n,i){var a=kt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var l=Ii(i[r],a[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Dr(e,o);n(s,o)&&ei(a,bi(o,e),s)}return a}function Hr(e,t,n,r){var i=r?Vt:zt,a=-1,o=t.length,s=e;for(e===t&&(t=Oi(t)),n&&(s=kt(e,Jt(n)));++a<o;)for(var l=0,c=t[a],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Ze.call(s,l,1),Ze.call(e,l,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;va(i)?Ze.call(e,i,1):di(e,i)}}return e}function Xr(e,t){return e+mt(xn()*(t-e+1))}function Zr(e,t){var n="";if(!e||t<1||t>g)return n;do{t%2&&(n+=e),(t=mt(t/2))&&(e+=e)}while(t);return n}function $r(e,t){return Ea(Ia(e,t,il),e+"")}function Kr(e){return Kn(Qs(e))}function Jr(e,t){var n=Qs(e);return ka(n,lr(t,0,n.length))}function ei(e,t,n,r){if(!ts(e))return e;for(var a=-1,o=(t=bi(t,e)).length,s=o-1,l=e;null!=l&&++a<o;){var c=qa(t[a]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=ts(h)?h:va(t[a+1])?[]:{})}nr(l,c,u),l=l[c]}return e}var ti=_n?function(e,t){return _n.set(e,t),e}:il,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ri(e){return ka(Qs(e))}function ii(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,il,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,l=null===t,c=cs(t),u=t===i;a<o;){var h=mt((a+o)/2),d=n(e[h]),f=d!==i,g=null===d,p=d==d,m=cs(d);if(s)var S=r||p;else S=u?p&&(r||f):l?p&&f&&(r||!g):c?p&&f&&!g&&(r||!m):!g&&!m&&(r?d<=t:d<t);S?a=h+1:o=h}return bn(o,4294967294)}function li(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Qo(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:cs(e)?p:+e}function ui(e){if("string"==typeof e)return e;if(jo(e))return kt(e,ui)+"";if(cs(e))return Nn?Nn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hi(e,t,n){var r=-1,i=Rt,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=Ft;else if(a>=200){var c=t?null:Zi(e);if(c)return dn(c);o=!1,i=tn,l=new Xn}else l=t?[]:s;e:for(;++r<a;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function di(e,t){return null==(e=Aa(e,t=bi(t,e)))||delete e[qa(Za(t))]}function fi(e,t,n,r){return ei(e,t,n(Dr(e,t)),r)}function gi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function pi(e,t){var n=e;return n instanceof jn&&(n=n.value()),qt(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),n)}function mi(e,t,n){var i=e.length;if(i<2)return i?hi(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=e[a],l=-1;++l<i;)l!=a&&(o[a]=dr(o[a]||s,e[l],t,n));return hi(yr(o,1),t,n)}function Si(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var l=r<o?t[r]:i;n(s,e[r],l)}return s}function yi(e){return Yo(e)?e:[]}function vi(e){return"function"==typeof e?e:il}function bi(e,t){return jo(e)?e:Ca(e,t)?[e]:Ma(vs(e))}var Ci=$r;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var xi=it||function(e){return pt.clearTimeout(e)};function Di(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Ti(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function Pi(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ii(e,t){if(e!==t){var n=e!==i,r=null===e,a=e==e,o=cs(e),s=t!==i,l=null===t,c=t==t,u=cs(t);if(!l&&!u&&!o&&e>t||o&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!u&&e<t||u&&n&&a&&!r&&!o||l&&n&&a||!s&&a||!c)return-1}return 0}function Ai(e,t,n,i){for(var a=-1,o=e.length,s=n.length,l=-1,c=t.length,u=vn(o-s,0),h=r(c+u),d=!i;++l<c;)h[l]=t[l];for(;++a<s;)(d||a<o)&&(h[n[a]]=e[a]);for(;u--;)h[l++]=e[a++];return h}function Li(e,t,n,i){for(var a=-1,o=e.length,s=-1,l=n.length,c=-1,u=t.length,h=vn(o-l,0),d=r(h+u),f=!i;++a<h;)d[a]=e[a];for(var g=a;++c<u;)d[g+c]=t[c];for(;++s<l;)(f||a<o)&&(d[g+n[s]]=e[a++]);return d}function Oi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function _i(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),a?or(n,l,c):nr(n,l,c)}return n}function Ei(e,t){return function(n,r){var i=jo(n)?At:ir,a=t?t():{};return i(n,e,ca(r,2),a)}}function Ri(e){return $r((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&ba(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Ie(t);++r<a;){var l=n[r];l&&e(t,l,r,o)}return t}))}function Fi(e,t){return function(n,r){if(null==n)return n;if(!Ho(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Ie(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function ki(e){return function(t,n,r){for(var i=-1,a=Ie(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}function Mi(e){return function(t){var n=ln(t=vs(t))?pn(t):i,r=n?n[0]:t.charAt(0),a=n?wi(n,1).join(""):t.slice(1);return r[e]()+a}}function qi(e){return function(t){return qt(Ks(Vs(t).replace(et,"")),e,"")}}function Ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Gn(e.prototype),r=e.apply(n,t);return ts(r)?r:n}}function Bi(e){return function(t,n,r){var a=Ie(t);if(!Ho(t)){var o=ca(n,3);t=Es(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Ni(e){return ra((function(t){var n=t.length,r=n,o=Vn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Oe(a);if(o&&!l&&"wrapper"==sa(s))var l=new Vn([],!0)}for(r=l?r:n;++r<n;){var c=sa(s=t[r]),u="wrapper"==c?oa(s):i;l=u&&wa(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[sa(u[0])].apply(l,u[3]):1==s.length&&wa(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&jo(r))return l.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Qi(e,t,n,a,o,s,l,c,u,d){var f=t&h,g=1&t,p=2&t,m=24&t,S=512&t,y=p?i:Ui(e);return function h(){for(var v=arguments.length,b=r(v),C=v;C--;)b[C]=arguments[C];if(m)var w=la(h),x=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,w);if(a&&(b=Ai(b,a,o,m)),s&&(b=Li(b,s,l,m)),v-=x,m&&v<d){var D=hn(b,w);return Yi(e,t,Qi,h.placeholder,n,b,D,c,u,d-v)}var T=g?n:this,P=p?T[e]:e;return v=b.length,c?b=function(e,t){var n=e.length,r=bn(t.length,n),a=Oi(e);for(;r--;){var o=t[r];e[r]=va(o,n)?a[o]:i}return e}(b,c):S&&v>1&&b.reverse(),f&&u<v&&(b.length=u),this&&this!==pt&&this instanceof h&&(P=y||Ui(P)),P.apply(T,b)}}function Gi(e,t){return function(n,r){return function(e,t,n,r){return Cr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function zi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=ci(n),r=ci(r)),a=e(n,r)}return a}}function Vi(e){return ra((function(t){return t=kt(t,Jt(ca())),$r((function(n){var r=this;return e(t,(function(e){return It(e,r,n)}))}))}))}function ji(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Zr(t,e):t;var r=Zr(t,gt(e/gn(t)));return ln(t)?wi(pn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,n,a){return a&&"number"!=typeof a&&ba(t,n,a)&&(n=a=i),t=gs(t),n===i?(n=t,t=0):n=gs(n),function(e,t,n,i){for(var a=-1,o=vn(gt((t-e)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=e,e+=n;return s}(t,n,a=a===i?t<n?1:-1:gs(a),e)}}function Hi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ss(t),n=Ss(n)),e(t,n)}}function Yi(e,t,n,r,a,o,s,l,h,d){var f=8&t;t|=f?c:u,4&(t&=~(f?u:c))||(t&=-4);var g=[e,t,a,f?o:i,f?s:i,f?i:o,f?i:s,l,h,d],p=n.apply(i,g);return wa(e)&&Oa(p,g),p.placeholder=r,Ra(p,e,t)}function Xi(e){var t=Pe[e];return function(e,n){if(e=Ss(e),(n=null==n?0:bn(ps(n),292))&&bt(e)){var r=(vs(e)+"e").split("e");return+((r=(vs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Zi=An&&1/dn(new An([,-0]))[1]==f?function(e){return new An(e)}:cl;function $i(e){return function(t){var n=pa(t);return n==T?cn(t):n==O?fn(t):function(e,t){return kt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ki(e,t,n,o,f,g,p,m){var S=2&t;if(!S&&"function"!=typeof e)throw new Oe(a);var y=o?o.length:0;if(y||(t&=-97,o=f=i),p=p===i?p:vn(ps(p),0),m=m===i?m:ps(m),y-=f?f.length:0,t&u){var v=o,b=f;o=f=i}var C=S?i:oa(e),w=[e,t,n,o,f,v,b,g,p,m];if(C&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Ai(c,l,t[4]):l,e[4]=c?hn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Li(c,l,t[6]):l,e[6]=c?hn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&h&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,C),e=w[0],t=w[1],n=w[2],o=w[3],f=w[4],!(m=w[9]=w[9]===i?S?0:e.length:vn(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)x=8==t||t==l?function(e,t,n){var a=Ui(e);return function o(){for(var s=arguments.length,l=r(s),c=s,u=la(o);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:hn(l,u);return(s-=h.length)<n?Yi(e,t,Qi,o.placeholder,i,l,h,i,i,n-s):It(this&&this!==pt&&this instanceof o?a:e,this,l)}}(e,t,m):t!=c&&33!=t||f.length?Qi.apply(i,w):function(e,t,n,i){var a=1&t,o=Ui(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,h=r(u+l),d=this&&this!==pt&&this instanceof t?o:e;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++s];return It(d,a?n:this,h)}}(e,t,n,o);else var x=function(e,t,n){var r=1&t,i=Ui(e);return function t(){return(this&&this!==pt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Ra((C?ti:Oa)(x,w),e,t)}function Ji(e,t,n,r){return e===i||Qo(e,Re[n])&&!Me.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ts(e)&&ts(t)&&(o.set(t,e),zr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return as(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(e),h=o.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,g=2&n?new Xn:i;for(o.set(e,t),o.set(t,e);++d<l;){var p=e[d],m=t[d];if(r)var S=s?r(m,p,d,t,e,o):r(p,m,d,e,t,o);if(S!==i){if(S)continue;f=!1;break}if(g){if(!Bt(t,(function(e,t){if(!tn(g,t)&&(p===e||a(p,e,n,r,o)))return g.push(t)}))){f=!1;break}}else if(p!==m&&!a(p,m,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function ra(e){return Ea(Ia(e,i,ja),e+"")}function ia(e){return Tr(e,Es,fa)}function aa(e){return Tr(e,Rs,ga)}var oa=_n?function(e){return _n.get(e)}:cl;function sa(e){for(var t=e.name+"",n=En[t],r=Me.call(En,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function la(e){return(Me.call(Qn,"placeholder")?Qn:e).placeholder}function ca(){var e=Qn.iteratee||al;return e=e===al?Mr:e,arguments.length?e(arguments[0],arguments[1]):e}function ua(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ha(e){for(var t=Es(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ta(i)]}return t}function da(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return kr(n)?n:i}var fa=St?function(e){return null==e?[]:(e=Ie(e),Et(St(e),(function(t){return Xe.call(e,t)})))}:ml,ga=St?function(e){for(var t=[];e;)Mt(t,fa(e)),e=He(e);return t}:ml,pa=Pr;function ma(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,a=!1;++r<i;){var o=qa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&es(i)&&va(o,i)&&(jo(e)||Vo(e))}function Sa(e){return"function"!=typeof e.constructor||Da(e)?{}:Gn(He(e))}function ya(e){return jo(e)||Vo(e)||!!($e&&e&&e[$e])}function va(e,t){var n=typeof e;return!!(t=null==t?g:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function ba(e,t,n){if(!ts(n))return!1;var r=typeof t;return!!("number"==r?Ho(n)&&va(t,n.length):"string"==r&&t in n)&&Qo(n[t],e)}function Ca(e,t){if(jo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ie(t))}function wa(e){var t=sa(e),n=Qn[t];if("function"!=typeof n||!(t in jn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(Tn&&pa(new Tn(new ArrayBuffer(1)))!=k||Pn&&pa(new Pn)!=T||In&&pa(In.resolve())!=A||An&&pa(new An)!=O||Ln&&pa(new Ln)!=R)&&(pa=function(e){var t=Pr(e),n=t==I?e.constructor:i,r=n?Ua(n):"";if(r)switch(r){case Rn:return k;case Fn:return T;case kn:return A;case Mn:return O;case qn:return R}return t});var xa=Fe?Ko:Sl;function Da(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function Ta(e){return e==e&&!ts(e)}function Pa(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ie(n)))}}function Ia(e,t,n){return t=vn(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=vn(i.length-t,0),s=r(o);++a<o;)s[a]=i[t+a];a=-1;for(var l=r(t+1);++a<t;)l[a]=i[a];return l[t]=n(s),It(e,this,l)}}function Aa(e,t){return t.length<2?e:Dr(e,ii(t,0,-1))}function La(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oa=Fa(ti),_a=ft||function(e,t){return pt.setTimeout(e,t)},Ea=Fa(ni);function Ra(e,t,n){var r=t+"";return Ea(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Lt(S,(function(n){var r="_."+n[0];t&n[1]&&!Rt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Fa(e){var t=0,n=0;return function(){var r=Cn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ka(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Xr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Ma=function(e){var t=ko(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function qa(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ua(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ba(e){if(e instanceof jn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Na=$r((function(e,t){return Yo(e)?dr(e,yr(t,1,Yo,!0)):[]})),Qa=$r((function(e,t){var n=Za(t);return Yo(n)&&(n=i),Yo(e)?dr(e,yr(t,1,Yo,!0),ca(n,2)):[]})),Ga=$r((function(e,t){var n=Za(t);return Yo(n)&&(n=i),Yo(e)?dr(e,yr(t,1,Yo,!0),i,n):[]}));function za(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=vn(r+i,0)),Gt(e,ca(t,3),i)}function Va(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ps(n),a=n<0?vn(r+a,0):bn(a,r-1)),Gt(e,ca(t,3),a,!0)}function ja(e){return(null==e?0:e.length)?yr(e,1):[]}function Wa(e){return e&&e.length?e[0]:i}var Ha=$r((function(e){var t=kt(e,yi);return t.length&&t[0]===e[0]?Or(t):[]})),Ya=$r((function(e){var t=Za(e),n=kt(e,yi);return t===Za(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Or(n,ca(t,2)):[]})),Xa=$r((function(e){var t=Za(e),n=kt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Or(n,i,t):[]}));function Za(e){var t=null==e?0:e.length;return t?e[t-1]:i}var $a=$r(Ka);function Ka(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var Ja=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Yr(e,kt(t,(function(e){return va(e,n)?+e:e})).sort(Ii)),r}));function eo(e){return null==e?e:Dn.call(e)}var to=$r((function(e){return hi(yr(e,1,Yo,!0))})),no=$r((function(e){var t=Za(e);return Yo(t)&&(t=i),hi(yr(e,1,Yo,!0),ca(t,2))})),ro=$r((function(e){var t=Za(e);return t="function"==typeof t?t:i,hi(yr(e,1,Yo,!0),i,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=Et(e,(function(e){if(Yo(e))return t=vn(e.length,t),!0})),$t(t,(function(t){return kt(e,Ht(t))}))}function ao(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:kt(n,(function(e){return It(t,i,e)}))}var oo=$r((function(e,t){return Yo(e)?dr(e,t):[]})),so=$r((function(e){return mi(Et(e,Yo))})),lo=$r((function(e){var t=Za(e);return Yo(t)&&(t=i),mi(Et(e,Yo),ca(t,2))})),co=$r((function(e){var t=Za(e);return t="function"==typeof t?t:i,mi(Et(e,Yo),i,t)})),uo=$r(io);var ho=$r((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ao(e,n)}));function fo(e){var t=Qn(e);return t.__chain__=!0,t}function go(e,t){return t(e)}var po=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof jn&&va(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:go,args:[a],thisArg:i}),new Vn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var mo=Ei((function(e,t,n){Me.call(e,n)?++e[n]:or(e,n,1)}));var So=Bi(za),yo=Bi(Va);function vo(e,t){return(jo(e)?Lt:fr)(e,ca(t,3))}function bo(e,t){return(jo(e)?Ot:gr)(e,ca(t,3))}var Co=Ei((function(e,t,n){Me.call(e,n)?e[n].push(t):or(e,n,[t])}));var wo=$r((function(e,t,n){var i=-1,a="function"==typeof t,o=Ho(e)?r(e.length):[];return fr(e,(function(e){o[++i]=a?It(t,e,n):_r(e,t,n)})),o})),xo=Ei((function(e,t,n){or(e,n,t)}));function Do(e,t){return(jo(e)?kt:Nr)(e,ca(t,3))}var To=Ei((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Po=$r((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ba(e,t[0],t[1])?t=[]:n>2&&ba(t[0],t[1],t[2])&&(t=[t[0]]),jr(e,yr(t,1),[])})),Io=ut||function(){return pt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ki(e,h,i,i,i,i,t)}function Lo(e,t){var n;if("function"!=typeof t)throw new Oe(a);return e=ps(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Oo=$r((function(e,t,n){var r=1;if(n.length){var i=hn(n,la(Oo));r|=c}return Ki(e,r,t,n,i)})),_o=$r((function(e,t,n){var r=3;if(n.length){var i=hn(n,la(_o));r|=c}return Ki(t,r,e,n,i)}));function Eo(e,t,n){var r,o,s,l,c,u,h=0,d=!1,f=!1,g=!0;if("function"!=typeof e)throw new Oe(a);function p(t){var n=r,a=o;return r=o=i,h=t,l=e.apply(a,n)}function m(e){var n=e-u;return u===i||n>=t||n<0||f&&e-h>=s}function S(){var e=Io();if(m(e))return y(e);c=_a(S,function(e){var n=t-(e-u);return f?bn(n,s-(e-h)):n}(e))}function y(e){return c=i,g&&r?p(e):(r=o=i,l)}function v(){var e=Io(),n=m(e);if(r=arguments,o=this,u=e,n){if(c===i)return function(e){return h=e,c=_a(S,t),d?p(e):l}(u);if(f)return xi(c),c=_a(S,t),p(u)}return c===i&&(c=_a(S,t)),l}return t=Ss(t)||0,ts(n)&&(d=!!n.leading,s=(f="maxWait"in n)?vn(Ss(n.maxWait)||0,t):s,g="trailing"in n?!!n.trailing:g),v.cancel=function(){c!==i&&xi(c),h=0,r=u=o=c=i},v.flush=function(){return c===i?l:y(Io())},v}var Ro=$r((function(e,t){return hr(e,1,t)})),Fo=$r((function(e,t,n){return hr(e,Ss(t)||0,n)}));function ko(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(ko.Cache||Yn),n}function Mo(e){if("function"!=typeof e)throw new Oe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ko.Cache=Yn;var qo=Ci((function(e,t){var n=(t=1==t.length&&jo(t[0])?kt(t[0],Jt(ca())):kt(yr(t,1),Jt(ca()))).length;return $r((function(r){for(var i=-1,a=bn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return It(e,this,r)}))})),Uo=$r((function(e,t){var n=hn(t,la(Uo));return Ki(e,c,i,t,n)})),Bo=$r((function(e,t){var n=hn(t,la(Bo));return Ki(e,u,i,t,n)})),No=ra((function(e,t){return Ki(e,d,i,i,i,t)}));function Qo(e,t){return e===t||e!=e&&t!=t}var Go=Hi(Ir),zo=Hi((function(e,t){return e>=t})),Vo=Er(function(){return arguments}())?Er:function(e){return ns(e)&&Me.call(e,"callee")&&!Xe.call(e,"callee")},jo=r.isArray,Wo=Ct?Jt(Ct):function(e){return ns(e)&&Pr(e)==F};function Ho(e){return null!=e&&es(e.length)&&!Ko(e)}function Yo(e){return ns(e)&&Ho(e)}var Xo=vt||Sl,Zo=wt?Jt(wt):function(e){return ns(e)&&Pr(e)==C};function $o(e){if(!ns(e))return!1;var t=Pr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Ko(e){if(!ts(e))return!1;var t=Pr(e);return t==x||t==D||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jo(e){return"number"==typeof e&&e==ps(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ns(e){return null!=e&&"object"==typeof e}var rs=xt?Jt(xt):function(e){return ns(e)&&pa(e)==T};function is(e){return"number"==typeof e||ns(e)&&Pr(e)==P}function as(e){if(!ns(e)||Pr(e)!=I)return!1;var t=He(e);if(null===t)return!0;var n=Me.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==Ne}var os=Dt?Jt(Dt):function(e){return ns(e)&&Pr(e)==L};var ss=Tt?Jt(Tt):function(e){return ns(e)&&pa(e)==O};function ls(e){return"string"==typeof e||!jo(e)&&ns(e)&&Pr(e)==_}function cs(e){return"symbol"==typeof e||ns(e)&&Pr(e)==E}var us=Pt?Jt(Pt):function(e){return ns(e)&&es(e.length)&&!!lt[Pr(e)]};var hs=Hi(Br),ds=Hi((function(e,t){return e<=t}));function fs(e){if(!e)return[];if(Ho(e))return ls(e)?pn(e):Oi(e);if(Ke&&e[Ke])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ke]());var t=pa(e);return(t==T?cn:t==O?dn:Qs)(e)}function gs(e){return e?(e=Ss(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ps(e){var t=gs(e),n=t%1;return t==t?n?t-n:t:0}function ms(e){return e?lr(ps(e),0,m):0}function Ss(e){if("number"==typeof e)return e;if(cs(e))return p;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kt(e);var n=Se.test(e);return n||ve.test(e)?dt(e.slice(2),n?2:8):me.test(e)?p:+e}function ys(e){return _i(e,Rs(e))}function vs(e){return null==e?"":ui(e)}var bs=Ri((function(e,t){if(Da(t)||Ho(t))_i(t,Es(t),e);else for(var n in t)Me.call(t,n)&&nr(e,n,t[n])})),Cs=Ri((function(e,t){_i(t,Rs(t),e)})),ws=Ri((function(e,t,n,r){_i(t,Rs(t),e,r)})),xs=Ri((function(e,t,n,r){_i(t,Es(t),e,r)})),Ds=ra(sr);var Ts=$r((function(e,t){e=Ie(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&ba(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Rs(o),l=-1,c=s.length;++l<c;){var u=s[l],h=e[u];(h===i||Qo(h,Re[u])&&!Me.call(e,u))&&(e[u]=o[u])}return e})),Ps=$r((function(e){return e.push(i,ea),It(ks,i,e)}));function Is(e,t,n){var r=null==e?i:Dr(e,t);return r===i?n:r}function As(e,t){return null!=e&&ma(e,t,Lr)}var Ls=Gi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),tl(il)),Os=Gi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Me.call(e,t)?e[t].push(n):e[t]=[n]}),ca),_s=$r(_r);function Es(e){return Ho(e)?$n(e):qr(e)}function Rs(e){return Ho(e)?$n(e,!0):Ur(e)}var Fs=Ri((function(e,t,n){zr(e,t,n)})),ks=Ri((function(e,t,n,r){zr(e,t,n,r)})),Ms=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=kt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),_i(e,aa(e),n),r&&(n=cr(n,7,ta));for(var i=t.length;i--;)di(n,t[i]);return n}));var qs=ra((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function Us(e,t){if(null==e)return{};var n=kt(aa(e),(function(e){return[e]}));return t=ca(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Bs=$i(Es),Ns=$i(Rs);function Qs(e){return null==e?[]:en(e,Es(e))}var Gs=qi((function(e,t,n){return t=t.toLowerCase(),e+(n?zs(t):t)}));function zs(e){return $s(vs(e).toLowerCase())}function Vs(e){return(e=vs(e))&&e.replace(Ce,an).replace(tt,"")}var js=qi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ws=qi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Hs=Mi("toLowerCase");var Ys=qi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=qi((function(e,t,n){return e+(n?" ":"")+$s(t)}));var Zs=qi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$s=Mi("toUpperCase");function Ks(e,t,n){return e=vs(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Js=$r((function(e,t){try{return It(e,i,t)}catch(e){return $o(e)?e:new De(e)}})),el=ra((function(e,t){return Lt(t,(function(t){t=qa(t),or(e,t,Oo(e[t],e))})),e}));function tl(e){return function(){return e}}var nl=Ni(),rl=Ni(!0);function il(e){return e}function al(e){return Mr("function"==typeof e?e:cr(e,1))}var ol=$r((function(e,t){return function(n){return _r(n,e,t)}})),sl=$r((function(e,t){return function(n){return _r(e,n,t)}}));function ll(e,t,n){var r=Es(t),i=xr(t,r);null!=n||ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Es(t)));var a=!(ts(n)&&"chain"in n&&!n.chain),o=Ko(e);return Lt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Oi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Mt([this.value()],arguments))})})),e}function cl(){}var ul=Vi(kt),hl=Vi(_t),dl=Vi(Bt);function fl(e){return Ca(e)?Ht(qa(e)):function(e){return function(t){return Dr(t,e)}}(e)}var gl=Wi(),pl=Wi(!0);function ml(){return[]}function Sl(){return!1}var yl=zi((function(e,t){return e+t}),0),vl=Xi("ceil"),bl=zi((function(e,t){return e/t}),1),Cl=Xi("floor");var wl,xl=zi((function(e,t){return e*t}),1),Dl=Xi("round"),Tl=zi((function(e,t){return e-t}),0);return Qn.after=function(e,t){if("function"!=typeof t)throw new Oe(a);return e=ps(e),function(){if(--e<1)return t.apply(this,arguments)}},Qn.ary=Ao,Qn.assign=bs,Qn.assignIn=Cs,Qn.assignInWith=ws,Qn.assignWith=xs,Qn.at=Ds,Qn.before=Lo,Qn.bind=Oo,Qn.bindAll=el,Qn.bindKey=_o,Qn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return jo(e)?e:[e]},Qn.chain=fo,Qn.chunk=function(e,t,n){t=(n?ba(e,t,n):t===i)?1:vn(ps(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,l=r(gt(a/t));o<a;)l[s++]=ii(e,o,o+=t);return l},Qn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Qn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Mt(jo(n)?Oi(n):[n],yr(t,1))},Qn.cond=function(e){var t=null==e?0:e.length,n=ca();return e=t?kt(e,(function(e){if("function"!=typeof e[1])throw new Oe(a);return[n(e[0]),e[1]]})):[],$r((function(n){for(var r=-1;++r<t;){var i=e[r];if(It(i[0],this,n))return It(i[1],this,n)}}))},Qn.conforms=function(e){return function(e){var t=Es(e);return function(n){return ur(n,e,t)}}(cr(e,1))},Qn.constant=tl,Qn.countBy=mo,Qn.create=function(e,t){var n=Gn(e);return null==t?n:ar(n,t)},Qn.curry=function e(t,n,r){var a=Ki(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Qn.curryRight=function e(t,n,r){var a=Ki(t,l,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Qn.debounce=Eo,Qn.defaults=Ts,Qn.defaultsDeep=Ps,Qn.defer=Ro,Qn.delay=Fo,Qn.difference=Na,Qn.differenceBy=Qa,Qn.differenceWith=Ga,Qn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ps(t))<0?0:t,r):[]},Qn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ps(t)))<0?0:t):[]},Qn.dropRightWhile=function(e,t){return e&&e.length?gi(e,ca(t,3),!0,!0):[]},Qn.dropWhile=function(e,t){return e&&e.length?gi(e,ca(t,3),!0):[]},Qn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ba(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ps(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ps(r))<0&&(r+=a),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Qn.filter=function(e,t){return(jo(e)?Et:Sr)(e,ca(t,3))},Qn.flatMap=function(e,t){return yr(Do(e,t),1)},Qn.flatMapDeep=function(e,t){return yr(Do(e,t),f)},Qn.flatMapDepth=function(e,t,n){return n=n===i?1:ps(n),yr(Do(e,t),n)},Qn.flatten=ja,Qn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,f):[]},Qn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ps(t)):[]},Qn.flip=function(e){return Ki(e,512)},Qn.flow=nl,Qn.flowRight=rl,Qn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Qn.functions=function(e){return null==e?[]:xr(e,Es(e))},Qn.functionsIn=function(e){return null==e?[]:xr(e,Rs(e))},Qn.groupBy=Co,Qn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Qn.intersection=Ha,Qn.intersectionBy=Ya,Qn.intersectionWith=Xa,Qn.invert=Ls,Qn.invertBy=Os,Qn.invokeMap=wo,Qn.iteratee=al,Qn.keyBy=xo,Qn.keys=Es,Qn.keysIn=Rs,Qn.map=Do,Qn.mapKeys=function(e,t){var n={};return t=ca(t,3),Cr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Qn.mapValues=function(e,t){var n={};return t=ca(t,3),Cr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Qn.matches=function(e){return Qr(cr(e,1))},Qn.matchesProperty=function(e,t){return Gr(e,cr(t,1))},Qn.memoize=ko,Qn.merge=Fs,Qn.mergeWith=ks,Qn.method=ol,Qn.methodOf=sl,Qn.mixin=ll,Qn.negate=Mo,Qn.nthArg=function(e){return e=ps(e),$r((function(t){return Vr(t,e)}))},Qn.omit=Ms,Qn.omitBy=function(e,t){return Us(e,Mo(ca(t)))},Qn.once=function(e){return Lo(2,e)},Qn.orderBy=function(e,t,n,r){return null==e?[]:(jo(t)||(t=null==t?[]:[t]),jo(n=r?i:n)||(n=null==n?[]:[n]),jr(e,t,n))},Qn.over=ul,Qn.overArgs=qo,Qn.overEvery=hl,Qn.overSome=dl,Qn.partial=Uo,Qn.partialRight=Bo,Qn.partition=To,Qn.pick=qs,Qn.pickBy=Us,Qn.property=fl,Qn.propertyOf=function(e){return function(t){return null==e?i:Dr(e,t)}},Qn.pull=$a,Qn.pullAll=Ka,Qn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,ca(n,2)):e},Qn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,i,n):e},Qn.pullAt=Ja,Qn.range=gl,Qn.rangeRight=pl,Qn.rearg=No,Qn.reject=function(e,t){return(jo(e)?Et:Sr)(e,Mo(ca(t,3)))},Qn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ca(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Yr(e,i),n},Qn.rest=function(e,t){if("function"!=typeof e)throw new Oe(a);return $r(e,t=t===i?t:ps(t))},Qn.reverse=eo,Qn.sampleSize=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:ps(t),(jo(e)?Jn:Jr)(e,t)},Qn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Qn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Qn.shuffle=function(e){return(jo(e)?er:ri)(e)},Qn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ba(e,t,n)?(t=0,n=r):(t=null==t?0:ps(t),n=n===i?r:ps(n)),ii(e,t,n)):[]},Qn.sortBy=Po,Qn.sortedUniq=function(e){return e&&e.length?li(e):[]},Qn.sortedUniqBy=function(e,t){return e&&e.length?li(e,ca(t,2)):[]},Qn.split=function(e,t,n){return n&&"number"!=typeof n&&ba(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=vs(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ui(t))&&ln(e)?wi(pn(e),0,n):e.split(t,n):[]},Qn.spread=function(e,t){if("function"!=typeof e)throw new Oe(a);return t=null==t?0:vn(ps(t),0),$r((function(n){var r=n[t],i=wi(n,0,t);return r&&Mt(i,r),It(e,this,i)}))},Qn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Qn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ps(t))<0?0:t):[]},Qn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ps(t)))<0?0:t,r):[]},Qn.takeRightWhile=function(e,t){return e&&e.length?gi(e,ca(t,3),!1,!0):[]},Qn.takeWhile=function(e,t){return e&&e.length?gi(e,ca(t,3)):[]},Qn.tap=function(e,t){return t(e),e},Qn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Oe(a);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Eo(e,t,{leading:r,maxWait:t,trailing:i})},Qn.thru=go,Qn.toArray=fs,Qn.toPairs=Bs,Qn.toPairsIn=Ns,Qn.toPath=function(e){return jo(e)?kt(e,qa):cs(e)?[e]:Oi(Ma(vs(e)))},Qn.toPlainObject=ys,Qn.transform=function(e,t,n){var r=jo(e),i=r||Xo(e)||us(e);if(t=ca(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ts(e)&&Ko(a)?Gn(He(e)):{}}return(i?Lt:Cr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Qn.unary=function(e){return Ao(e,1)},Qn.union=to,Qn.unionBy=no,Qn.unionWith=ro,Qn.uniq=function(e){return e&&e.length?hi(e):[]},Qn.uniqBy=function(e,t){return e&&e.length?hi(e,ca(t,2)):[]},Qn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?hi(e,i,t):[]},Qn.unset=function(e,t){return null==e||di(e,t)},Qn.unzip=io,Qn.unzipWith=ao,Qn.update=function(e,t,n){return null==e?e:fi(e,t,vi(n))},Qn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:fi(e,t,vi(n),r)},Qn.values=Qs,Qn.valuesIn=function(e){return null==e?[]:en(e,Rs(e))},Qn.without=oo,Qn.words=Ks,Qn.wrap=function(e,t){return Uo(vi(t),e)},Qn.xor=so,Qn.xorBy=lo,Qn.xorWith=co,Qn.zip=uo,Qn.zipObject=function(e,t){return Si(e||[],t||[],nr)},Qn.zipObjectDeep=function(e,t){return Si(e||[],t||[],ei)},Qn.zipWith=ho,Qn.entries=Bs,Qn.entriesIn=Ns,Qn.extend=Cs,Qn.extendWith=ws,ll(Qn,Qn),Qn.add=yl,Qn.attempt=Js,Qn.camelCase=Gs,Qn.capitalize=zs,Qn.ceil=vl,Qn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=Ss(n))==n?n:0),t!==i&&(t=(t=Ss(t))==t?t:0),lr(Ss(e),t,n)},Qn.clone=function(e){return cr(e,4)},Qn.cloneDeep=function(e){return cr(e,5)},Qn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:i)},Qn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:i)},Qn.conformsTo=function(e,t){return null==t||ur(e,t,Es(t))},Qn.deburr=Vs,Qn.defaultTo=function(e,t){return null==e||e!=e?t:e},Qn.divide=bl,Qn.endsWith=function(e,t,n){e=vs(e),t=ui(t);var r=e.length,a=n=n===i?r:lr(ps(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Qn.eq=Qo,Qn.escape=function(e){return(e=vs(e))&&$.test(e)?e.replace(X,on):e},Qn.escapeRegExp=function(e){return(e=vs(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Qn.every=function(e,t,n){var r=jo(e)?_t:pr;return n&&ba(e,t,n)&&(t=i),r(e,ca(t,3))},Qn.find=So,Qn.findIndex=za,Qn.findKey=function(e,t){return Qt(e,ca(t,3),Cr)},Qn.findLast=yo,Qn.findLastIndex=Va,Qn.findLastKey=function(e,t){return Qt(e,ca(t,3),wr)},Qn.floor=Cl,Qn.forEach=vo,Qn.forEachRight=bo,Qn.forIn=function(e,t){return null==e?e:vr(e,ca(t,3),Rs)},Qn.forInRight=function(e,t){return null==e?e:br(e,ca(t,3),Rs)},Qn.forOwn=function(e,t){return e&&Cr(e,ca(t,3))},Qn.forOwnRight=function(e,t){return e&&wr(e,ca(t,3))},Qn.get=Is,Qn.gt=Go,Qn.gte=zo,Qn.has=function(e,t){return null!=e&&ma(e,t,Ar)},Qn.hasIn=As,Qn.head=Wa,Qn.identity=il,Qn.includes=function(e,t,n,r){e=Ho(e)?e:Qs(e),n=n&&!r?ps(n):0;var i=e.length;return n<0&&(n=vn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&zt(e,t,n)>-1},Qn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=vn(r+i,0)),zt(e,t,i)},Qn.inRange=function(e,t,n){return t=gs(t),n===i?(n=t,t=0):n=gs(n),function(e,t,n){return e>=bn(t,n)&&e<vn(t,n)}(e=Ss(e),t,n)},Qn.invoke=_s,Qn.isArguments=Vo,Qn.isArray=jo,Qn.isArrayBuffer=Wo,Qn.isArrayLike=Ho,Qn.isArrayLikeObject=Yo,Qn.isBoolean=function(e){return!0===e||!1===e||ns(e)&&Pr(e)==b},Qn.isBuffer=Xo,Qn.isDate=Zo,Qn.isElement=function(e){return ns(e)&&1===e.nodeType&&!as(e)},Qn.isEmpty=function(e){if(null==e)return!0;if(Ho(e)&&(jo(e)||"string"==typeof e||"function"==typeof e.splice||Xo(e)||us(e)||Vo(e)))return!e.length;var t=pa(e);if(t==T||t==O)return!e.size;if(Da(e))return!qr(e).length;for(var n in e)if(Me.call(e,n))return!1;return!0},Qn.isEqual=function(e,t){return Rr(e,t)},Qn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Rr(e,t,i,n):!!r},Qn.isError=$o,Qn.isFinite=function(e){return"number"==typeof e&&bt(e)},Qn.isFunction=Ko,Qn.isInteger=Jo,Qn.isLength=es,Qn.isMap=rs,Qn.isMatch=function(e,t){return e===t||Fr(e,t,ha(t))},Qn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Fr(e,t,ha(t),n)},Qn.isNaN=function(e){return is(e)&&e!=+e},Qn.isNative=function(e){if(xa(e))throw new De("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kr(e)},Qn.isNil=function(e){return null==e},Qn.isNull=function(e){return null===e},Qn.isNumber=is,Qn.isObject=ts,Qn.isObjectLike=ns,Qn.isPlainObject=as,Qn.isRegExp=os,Qn.isSafeInteger=function(e){return Jo(e)&&e>=-9007199254740991&&e<=g},Qn.isSet=ss,Qn.isString=ls,Qn.isSymbol=cs,Qn.isTypedArray=us,Qn.isUndefined=function(e){return e===i},Qn.isWeakMap=function(e){return ns(e)&&pa(e)==R},Qn.isWeakSet=function(e){return ns(e)&&"[object WeakSet]"==Pr(e)},Qn.join=function(e,t){return null==e?"":Nt.call(e,t)},Qn.kebabCase=js,Qn.last=Za,Qn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ps(n))<0?vn(r+a,0):bn(a,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Gt(e,jt,a,!0)},Qn.lowerCase=Ws,Qn.lowerFirst=Hs,Qn.lt=hs,Qn.lte=ds,Qn.max=function(e){return e&&e.length?mr(e,il,Ir):i},Qn.maxBy=function(e,t){return e&&e.length?mr(e,ca(t,2),Ir):i},Qn.mean=function(e){return Wt(e,il)},Qn.meanBy=function(e,t){return Wt(e,ca(t,2))},Qn.min=function(e){return e&&e.length?mr(e,il,Br):i},Qn.minBy=function(e,t){return e&&e.length?mr(e,ca(t,2),Br):i},Qn.stubArray=ml,Qn.stubFalse=Sl,Qn.stubObject=function(){return{}},Qn.stubString=function(){return""},Qn.stubTrue=function(){return!0},Qn.multiply=xl,Qn.nth=function(e,t){return e&&e.length?Vr(e,ps(t)):i},Qn.noConflict=function(){return pt._===this&&(pt._=Qe),this},Qn.noop=cl,Qn.now=Io,Qn.pad=function(e,t,n){e=vs(e);var r=(t=ps(t))?gn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ji(mt(i),n)+e+ji(gt(i),n)},Qn.padEnd=function(e,t,n){e=vs(e);var r=(t=ps(t))?gn(e):0;return t&&r<t?e+ji(t-r,n):e},Qn.padStart=function(e,t,n){e=vs(e);var r=(t=ps(t))?gn(e):0;return t&&r<t?ji(t-r,n)+e:e},Qn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(vs(e).replace(oe,""),t||0)},Qn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ba(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=gs(e),t===i?(t=e,e=0):t=gs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=xn();return bn(e+a*(t-e+ht("1e-"+((a+"").length-1))),t)}return Xr(e,t)},Qn.reduce=function(e,t,n){var r=jo(e)?qt:Xt,i=arguments.length<3;return r(e,ca(t,4),n,i,fr)},Qn.reduceRight=function(e,t,n){var r=jo(e)?Ut:Xt,i=arguments.length<3;return r(e,ca(t,4),n,i,gr)},Qn.repeat=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:ps(t),Zr(vs(e),t)},Qn.replace=function(){var e=arguments,t=vs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Qn.result=function(e,t,n){var r=-1,a=(t=bi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[qa(t[r])];o===i&&(r=a,o=n),e=Ko(o)?o.call(e):o}return e},Qn.round=Dl,Qn.runInContext=e,Qn.sample=function(e){return(jo(e)?Kn:Kr)(e)},Qn.size=function(e){if(null==e)return 0;if(Ho(e))return ls(e)?gn(e):e.length;var t=pa(e);return t==T||t==O?e.size:qr(e).length},Qn.snakeCase=Ys,Qn.some=function(e,t,n){var r=jo(e)?Bt:ai;return n&&ba(e,t,n)&&(t=i),r(e,ca(t,3))},Qn.sortedIndex=function(e,t){return oi(e,t)},Qn.sortedIndexBy=function(e,t,n){return si(e,t,ca(n,2))},Qn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Qo(e[r],t))return r}return-1},Qn.sortedLastIndex=function(e,t){return oi(e,t,!0)},Qn.sortedLastIndexBy=function(e,t,n){return si(e,t,ca(n,2),!0)},Qn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Qo(e[n],t))return n}return-1},Qn.startCase=Xs,Qn.startsWith=function(e,t,n){return e=vs(e),n=null==n?0:lr(ps(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},Qn.subtract=Tl,Qn.sum=function(e){return e&&e.length?Zt(e,il):0},Qn.sumBy=function(e,t){return e&&e.length?Zt(e,ca(t,2)):0},Qn.template=function(e,t,n){var r=Qn.templateSettings;n&&ba(e,t,n)&&(t=i),e=vs(e),t=ws({},t,r,Ji);var a,o,s=ws({},t.imports,r.imports,Ji),l=Es(s),c=en(s,l),u=0,h=t.interpolate||we,d="__p += '",f=Ae((t.escape||we).source+"|"+h.source+"|"+(h===ee?ge:we).source+"|"+(t.evaluate||we).source+"|$","g"),g="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(f,(function(t,n,r,i,s,l){return r||(r=i),d+=e.slice(u,l).replace(xe,sn),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var p=Me.call(t,"variable")&&t.variable;if(p){if(de.test(p))throw new De("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(j,""):d).replace(W,"$1").replace(H,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Js((function(){return Te(l,g+"return "+d).apply(i,c)}));if(m.source=d,$o(m))throw m;return m},Qn.times=function(e,t){if((e=ps(e))<1||e>g)return[];var n=m,r=bn(e,m);t=ca(t),e-=m;for(var i=$t(r,t);++n<e;)t(n);return i},Qn.toFinite=gs,Qn.toInteger=ps,Qn.toLength=ms,Qn.toLower=function(e){return vs(e).toLowerCase()},Qn.toNumber=Ss,Qn.toSafeInteger=function(e){return e?lr(ps(e),-9007199254740991,g):0===e?e:0},Qn.toString=vs,Qn.toUpper=function(e){return vs(e).toUpperCase()},Qn.trim=function(e,t,n){if((e=vs(e))&&(n||t===i))return Kt(e);if(!e||!(t=ui(t)))return e;var r=pn(e),a=pn(t);return wi(r,nn(r,a),rn(r,a)+1).join("")},Qn.trimEnd=function(e,t,n){if((e=vs(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=ui(t)))return e;var r=pn(e);return wi(r,0,rn(r,pn(t))+1).join("")},Qn.trimStart=function(e,t,n){if((e=vs(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ui(t)))return e;var r=pn(e);return wi(r,nn(r,pn(t))).join("")},Qn.truncate=function(e,t){var n=30,r="...";if(ts(t)){var a="separator"in t?t.separator:a;n="length"in t?ps(t.length):n,r="omission"in t?ui(t.omission):r}var o=(e=vs(e)).length;if(ln(e)){var s=pn(e);o=s.length}if(n>=o)return e;var l=n-gn(r);if(l<1)return r;var c=s?wi(s,0,l).join(""):e.slice(0,l);if(a===i)return c+r;if(s&&(l+=c.length-l),os(a)){if(e.slice(l).search(a)){var u,h=c;for(a.global||(a=Ae(a.source,vs(pe.exec(a))+"g")),a.lastIndex=0;u=a.exec(h);)var d=u.index;c=c.slice(0,d===i?l:d)}}else if(e.indexOf(ui(a),l)!=l){var f=c.lastIndexOf(a);f>-1&&(c=c.slice(0,f))}return c+r},Qn.unescape=function(e){return(e=vs(e))&&Z.test(e)?e.replace(Y,Sn):e},Qn.uniqueId=function(e){var t=++qe;return vs(e)+t},Qn.upperCase=Zs,Qn.upperFirst=$s,Qn.each=vo,Qn.eachRight=bo,Qn.first=Wa,ll(Qn,(wl={},Cr(Qn,(function(e,t){Me.call(Qn.prototype,t)||(wl[t]=e)})),wl),{chain:!1}),Qn.VERSION="4.17.21",Lt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Qn[e].placeholder=Qn})),Lt(["drop","take"],(function(e,t){jn.prototype[e]=function(n){n=n===i?1:vn(ps(n),0);var r=this.__filtered__&&!t?new jn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},jn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Lt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;jn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ca(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Lt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");jn.prototype[e]=function(){return this[n](1).value()[0]}})),Lt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");jn.prototype[e]=function(){return this.__filtered__?new jn(this):this[n](1)}})),jn.prototype.compact=function(){return this.filter(il)},jn.prototype.find=function(e){return this.filter(e).head()},jn.prototype.findLast=function(e){return this.reverse().find(e)},jn.prototype.invokeMap=$r((function(e,t){return"function"==typeof e?new jn(this):this.map((function(n){return _r(n,e,t)}))})),jn.prototype.reject=function(e){return this.filter(Mo(ca(e)))},jn.prototype.slice=function(e,t){e=ps(e);var n=this;return n.__filtered__&&(e>0||t<0)?new jn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ps(t))<0?n.dropRight(-t):n.take(t-e)),n)},jn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},jn.prototype.toArray=function(){return this.take(m)},Cr(jn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Qn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Qn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof jn,c=s[0],u=l||jo(t),h=function(e){var t=a.apply(Qn,Mt([e],s));return r&&d?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,g=o&&!d,p=l&&!f;if(!o&&u){t=p?t:new jn(this);var m=e.apply(t,s);return m.__actions__.push({func:go,args:[h],thisArg:i}),new Vn(m,d)}return g&&p?e.apply(this,s):(m=this.thru(h),g?r?m.value()[0]:m.value():m)})})),Lt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=_e[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Qn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(jo(i)?i:[],e)}return this[n]((function(n){return t.apply(jo(n)?n:[],e)}))}})),Cr(jn.prototype,(function(e,t){var n=Qn[t];if(n){var r=n.name+"";Me.call(En,r)||(En[r]=[]),En[r].push({name:t,func:n})}})),En[Qi(i,2).name]=[{name:"wrapper",func:i}],jn.prototype.clone=function(){var e=new jn(this.__wrapped__);return e.__actions__=Oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oi(this.__views__),e},jn.prototype.reverse=function(){if(this.__filtered__){var e=new jn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},jn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=jo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=bn(t,e+o);break;case"takeRight":e=vn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,c=r?s:o-1,u=this.__iteratees__,h=u.length,d=0,f=bn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return pi(e,this.__actions__);var g=[];e:for(;l--&&d<f;){for(var p=-1,m=e[c+=t];++p<h;){var S=u[p],y=S.iteratee,v=S.type,b=y(m);if(2==v)m=b;else if(!b){if(1==v)continue e;break e}}g[d++]=m}return g},Qn.prototype.at=po,Qn.prototype.chain=function(){return fo(this)},Qn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Qn.prototype.next=function(){this.__values__===i&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Qn.prototype.plant=function(e){for(var t,n=this;n instanceof zn;){var r=Ba(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Qn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof jn){var t=e;return this.__actions__.length&&(t=new jn(this)),(t=t.reverse()).__actions__.push({func:go,args:[eo],thisArg:i}),new Vn(t,this.__chain__)}return this.thru(eo)},Qn.prototype.toJSON=Qn.prototype.valueOf=Qn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Qn.prototype.first=Qn.prototype.head,Ke&&(Qn.prototype[Ke]=function(){return this}),Qn}();pt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},252:(e,t,n)=>{e=n.nmd(e);
/*
 Magic wand tool (fuzzy selection) by color

 @package magic-wand-tool
 @author Ryasnoy Paul <ryasnoypaul@gmail.com>
 @version 1.1.7
 @license MIT
 @copyright (c) 2014-2020, Ryasnoy Paul <ryasnoypaul@gmail.com>

*/
var r,i=((r={}).floodFill=function(e,t,n,r,i,a){return a?function(e,t,n,r,i){var a,o,s,l,c,u,h,d,f,g,p=e.data,m=e.width,S=e.height,y=e.bytes,v=-1,b=m+1,C=-1,w=S+1,x=n*m+t,D=new Uint8Array(m*S),T=new Uint8Array(i||m*S);if(1===T[x])return null;var P=[p[x*=y],p[x+1],p[x+2],p[x+3]],I=[{y:n,left:t-1,right:t+1,dir:1}];do{for(g=!1,o=(l=I.shift()).left+1;o<l.right;o++)if(x=((h=l.y*m)+o)*y,1!==T[h+o]&&(g=!0,D[h+o]=1,T[h+o]=1,!((a=p[x]-P[0])>r||a<-r||(a=p[x+1]-P[1])>r||a<-r||(a=p[x+2]-P[2])>r||a<-r))){for(u=o-1;u>-1&&(x=(d=h+u)*y,1!==T[d])&&(D[d]=1,T[d]=1,u--,!((a=p[x]-P[0])>r||a<-r))&&!((a=p[x+1]-P[1])>r||a<-r)&&!((a=p[x+2]-P[2])>r||a<-r););for(c=o+1;c<m&&(x=(f=h+c)*y,1!==T[f])&&(D[f]=1,T[f]=1,c++,!((a=p[x]-P[0])>r||a<-r))&&!((a=p[x+1]-P[1])>r||a<-r)&&!((a=p[x+2]-P[2])>r||a<-r););u<b&&(b=u+1),c>v&&(v=c-1),(s=l.y-l.dir)>=0&&s<S&&(u<l.left&&I.push({y:s,left:u,right:l.left,dir:-l.dir}),l.right<c&&I.push({y:s,left:l.right,right:c,dir:-l.dir})),(s=l.y+l.dir)>=0&&s<S&&u<c&&I.push({y:s,left:u,right:c,dir:l.dir})}g&&(l.y<w&&(w=l.y),l.y>C&&(C=l.y))}while(I.length>0);return{data:D,width:e.width,height:e.height,bounds:{minX:b,minY:w,maxX:v,maxY:C}}}(e,t,n,r,i):function(e,t,n,r,i){var a,o,s,l,c,u,h,d,f,g,p=e.data,m=e.width,S=e.height,y=e.bytes,v=-1,b=m+1,C=-1,w=S+1,x=n*m+t,D=new Uint8Array(m*S),T=new Uint8Array(i||m*S);if(1===T[x])return null;var P=[p[x*=y],p[x+1],p[x+2],p[x+3]],I=[{y:n,left:t-1,right:t+1,dir:1}];do{for(g=!1,o=(l=I.shift()).left+1;o<l.right;o++)if(x=((h=l.y*m)+o)*y,1!==T[h+o]&&!((a=p[x]-P[0])>r||a<-r||(a=p[x+1]-P[1])>r||a<-r||(a=p[x+2]-P[2])>r||a<-r)){for(g=!0,D[h+o]=1,T[h+o]=1,u=o-1;u>-1&&(x=(d=h+u)*y,1!==T[d])&&!((a=p[x]-P[0])>r||a<-r)&&!((a=p[x+1]-P[1])>r||a<-r)&&!((a=p[x+2]-P[2])>r||a<-r);)D[d]=1,T[d]=1,u--;for(c=o+1;c<m&&(x=(f=h+c)*y,1!==T[f])&&!((a=p[x]-P[0])>r||a<-r)&&!((a=p[x+1]-P[1])>r||a<-r)&&!((a=p[x+2]-P[2])>r||a<-r);)D[f]=1,T[f]=1,c++;u<b&&(b=u+1),c>v&&(v=c-1),(s=l.y-l.dir)>=0&&s<S&&(u<l.left&&I.push({y:s,left:u,right:l.left,dir:-l.dir}),l.right<c&&I.push({y:s,left:l.right,right:c,dir:-l.dir})),(s=l.y+l.dir)>=0&&s<S&&u<c&&I.push({y:s,left:u,right:c,dir:l.dir})}g&&(l.y<w&&(w=l.y),l.y>C&&(C=l.y))}while(I.length>0);return{data:D,width:e.width,height:e.height,bounds:{minX:b,minY:w,maxX:v,maxY:C}}}(e,t,n,r,i)},r.gaussBlur=function(e,t){var n,r,i,a,o,s,l,c=2*t+1,u=t*t,h=new Float32Array(c),d=0,f=e.width,g=e.height,p=e.data,m=e.bounds.minX,S=e.bounds.maxX,y=e.bounds.minY,v=e.bounds.maxY;for(n=0;n<t;n++){var b=(t-n)*(t-n),C=Math.exp(-b/(2*u))/(2*Math.PI*u);h[t+n]=h[t-n]=C,d+=2*C}for(n=0;n<c;n++)h[n]/=d;var w=new Uint8Array(f*g),x=t+f,D=t+g;for(o=y;o<v+1;o++)for(a=m;a<S+1;a++){for(s=0,l=x-a<c?x-a:c,i=(r=o*f+a)-t,n=t-a>0?t-a:0;n<l;n++)s+=p[i+n]*h[n];for(l=D-o<c?D-o:c,i=r-t*f,n=t-o>0?t-o:0;n<l;n++)s+=p[i+n*f]*h[n];w[r]=s>.5?1:0}return{data:w,width:f,height:g,bounds:{minX:m,minY:y,maxX:S,maxY:v}}},r.gaussBlurOnlyBorder=function(e,t,n){var r,i,a,o,s,l,c,u,h,d,f=function(e,t,n){var r,i,a,o,s,l,c,u=e.width,h=e.height,d=e.data,f=new Uint8Array(d),g=e.bounds.minX,p=e.bounds.maxX,m=e.bounds.minY,S=e.bounds.maxY,y=u*h,v=new Uint8Array(y),b=[],C=Math.max(g,1),w=Math.min(p,u-2),x=Math.max(m,1),D=Math.min(S,h-2);if(n&&n.length>0)for(s=0;s<y;s++)1===n[s]&&(f[s]=1);for(o=x;o<D+1;o++)for(r=C;r<w+1;r++)0!==d[s=o*u+r]&&(l=s+u,c=s-u,0!==f[s+1]&&0!==f[s-1]&&0!==f[l]&&0!==f[l+1]&&0!==f[l-1]&&0!==f[c]&&0!==f[c+1]&&0!==f[c-1]||b.push(s));if(0==g)for(o=m;o<S+1;o++)1===d[o*u]&&b.push(o*u);if(p==u-1)for(o=m;o<S+1;o++)1===d[o*u+p]&&b.push(o*u+p);if(0==m)for(r=g;r<p+1;r++)1===d[r]&&b.push(r);if(S==h-1)for(r=g;r<p+1;r++)1===d[S*u+r]&&b.push(S*u+r);var T,P=[],I=t+u,A=t+h,L=2*t+1;for(y=b.length,a=0;a<y;a++){for(v[s=b[a]]=1,P.push(s),o=(s-(r=s%u))/u,T=I-r<L?I-r:L,l=s-t,i=t-r>0?t-r:0;i<T;i++)0===v[c=l+i]&&(v[c]=1,P.push(c));for(T=A-o<L?A-o:L,l=s-t*u,i=t-o>0?t-o:0;i<T;i++)0===v[c=l+i*u]&&(v[c]=1,P.push(c))}return P}(e,t,n),g=2*t+1,p=2*t*t,m=new Float32Array(g),S=0,y=e.width,v=e.height,b=e.data,C=e.bounds.minX,w=e.bounds.maxX,x=e.bounds.minY,D=e.bounds.maxY,T=f.length;for(a=0;a<t;a++)i=(t-a)*(t-a),r=Math.exp(-i/p)/Math.PI,m[t+a]=m[t-a]=r,S+=2*r;for(a=0;a<g;a++)m[a]/=S;var P=new Uint8Array(b),I=t+y,A=t+v;for(a=0;a<T;a++){for(h=0,u=((s=f[a])-(c=s%y))/y,d=I-c<g?I-c:g,l=s-t,o=t-c>0?t-c:0;o<d;o++)h+=b[l+o]*m[o];if(h>.5)P[s]=1,c<C&&(C=c),c>w&&(w=c),u<x&&(x=u),u>D&&(D=u);else{for(d=A-u<g?A-u:g,l=s-t*y,o=t-u>0?t-u:0;o<d;o++)h+=b[l+o*y]*m[o];h>.5?(P[s]=1,c<C&&(C=c),c>w&&(w=c),u<x&&(x=u),u>D&&(D=u)):P[s]=0}}return{data:P,width:y,height:v,bounds:{minX:C,minY:x,maxX:w,maxY:D}}},r.createBorderMask=function(e){var t,n,r,i,a,o=e.width,s=e.height,l=e.data,c=e.bounds.minX,u=e.bounds.maxX,h=e.bounds.minY,d=e.bounds.maxY,f=u-c+1,g=d-h+1,p=new Uint8Array(f*g),m=Math.max(c,1),S=Math.min(u,o-2),y=Math.max(h,1),v=Math.min(d,s-2);for(n=y;n<v+1;n++)for(t=m;t<S+1;t++)0!==l[r=n*o+t]&&(i=r+o,a=r-o,0!==l[r+1]&&0!==l[r-1]&&0!==l[i]&&0!==l[i+1]&&0!==l[i-1]&&0!==l[a]&&0!==l[a+1]&&0!==l[a-1]||(p[(n-h)*f+(t-c)]=1));if(0==c)for(n=h;n<d+1;n++)1===l[n*o]&&(p[(n-h)*f]=1);if(u==o-1)for(n=h;n<d+1;n++)1===l[n*o+u]&&(p[(n-h)*f+(u-c)]=1);if(0==h)for(t=c;t<u+1;t++)1===l[t]&&(p[t-c]=1);if(d==s-1)for(t=c;t<u+1;t++)1===l[d*o+t]&&(p[(d-h)*f+(t-c)]=1);return{data:p,width:f,height:g,offset:{x:c,y:h}}},r.getBorderIndices=function(e){var t,n,r,i,a,o=e.width,s=e.height,l=e.data,c=[],u=o-1,h=s-1;for(n=1;n<h;n++)for(t=1;t<u;t++)0!==l[r=n*o+t]&&(i=r+o,a=r-o,0!==l[r+1]&&0!==l[r-1]&&0!==l[i]&&0!==l[i+1]&&0!==l[i-1]&&0!==l[a]&&0!==l[a+1]&&0!==l[a-1]||c.push(r));for(n=0;n<s;n++)1===l[n*o]&&c.push(n*o);for(t=0;t<o;t++)1===l[t]&&c.push(t);for(r=o-1,n=0;n<s;n++)1===l[n*o+r]&&c.push(n*o+r);for(r=(s-1)*o,t=0;t<o;t++)1===l[r+t]&&c.push(r+t);return c},r.traceContours=function(e){var t,n,r,i,a,o,s,l,c,u,h,d,f,g,p,m=function(e){var t,n,r=e.width,i=e.data,a=e.bounds.minX,o=e.bounds.maxX,s=e.bounds.minY,l=e.bounds.maxY,c=o-a+3,u=l-s+3,h=new Uint8Array(c*u);for(n=s;n<l+1;n++)for(t=a;t<o+1;t++)1===i[n*r+t]&&(h[(n-s+1)*c+(t-a+1)]=1);return{data:h,width:c,height:u,offset:{x:a-1,y:s-1}}}(e),S=[],y=0,v=m.width,b=2*v,C=m.height,w=m.data,x=m.offset.x,D=m.offset.y,T=new Uint8Array(w),P=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];for(i=1;i<C-1;i++)for(r=1;r<v-1;r++)if(1===w[a=i*v+r])for(t=-v;t<b;t+=b)if(0===w[a+t]&&0===T[a+t]){for(y++,s=[],c=(l=t===v)?2:6,d=f=u={x:r,y:i},h=null;;){for(T[d.y*v+d.x]=y,n=0;n<8;n++){if(p=P[c=(c+1)%8],1===w[o=(g={x:d.x+p[0],y:d.y+p[1]}).y*v+g.x]){T[o]=y;break}T[o]=-1,g=null}if(null===g)break;if(d=g,h){if(f.x===u.x&&f.y===u.y&&d.x===h.x&&d.y===h.y)break}else h=g;s.push({x:f.x+x,y:f.y+D}),f=d,c=(c+4)%8}null!=g&&(s.push({x:u.x+x,y:u.y+D}),S.push({inner:l,label:y,points:s}))}return S},r.simplifyContours=function(e,t,n){var r,i,a,o,s,l,c,u,h,d,f,g,p,m,S,y,v,b,C,w,x,D=e.length,T=[];for(i=0;i<D;i++)if(s=(o=e[i]).points,(l=o.points.length)<n){for(c=[],a=0;a<l;a++)c.push({x:s[a].x,y:s[a].y});T.push({inner:o.inner,label:o.label,points:c,initialCount:l})}else{u=[0,l-1],h=[{first:0,last:l-1}];do{if(!((d=h.shift()).last<=d.first+1)){for(f=-1,g=d.first,r=d.first+1;r<d.last;r++)C=s[r],w=s[d.first],x=s[d.last],v=C.x-w.x,b=C.y-w.y,m=Math.sqrt(v*v+b*b),v=C.x-x.x,b=C.y-x.y,S=Math.sqrt(v*v+b*b),v=w.x-x.x,b=w.y-x.y,y=Math.sqrt(v*v+b*b),(p=m>=Math.sqrt(S*S+y*y)?S:S>=Math.sqrt(m*m+y*y)?m:Math.abs((b*C.x-v*C.y+w.x*x.y-x.x*w.y)/y))>f&&(g=r,f=p);f>t&&(u.push(g),h.push({first:d.first,last:g}),h.push({first:g,last:d.last}))}}while(h.length>0);for(c=[],l=u.length,u.sort((function(e,t){return e-t})),a=0;a<l;a++)c.push({x:s[u[a]].x,y:s[u[a]].y});T.push({inner:o.inner,label:o.label,points:c,initialCount:o.points.length})}return T},r);null!==e&&(e.exports=i),"undefined"!=typeof window&&null!==window&&(window.MagicWand=i)},418:e=>{"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(s[c]=a[c]);if(t){o=t(a);for(var u=0;u<o.length;u++)r.call(a,o[u])&&(s[o[u]]=a[o[u]])}}return s}},703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},107:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r='function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nvar JpxImage = function () {\n  function e() {\n    this.failOnCorruptedImage = !0;\n  }\n\n  function t(e, t) {\n    e.x0 = Math.ceil(t.XOsiz / e.XRsiz), e.x1 = Math.ceil(t.Xsiz / e.XRsiz), e.y0 = Math.ceil(t.YOsiz / e.YRsiz), e.y1 = Math.ceil(t.Ysiz / e.YRsiz), e.width = e.x1 - e.x0, e.height = e.y1 - e.y0;\n  }\n\n  function n(e, t) {\n    for (var n, s = e.SIZ, r = [], o = Math.ceil((s.Xsiz - s.XTOsiz) / s.XTsiz), a = Math.ceil((s.Ysiz - s.YTOsiz) / s.YTsiz), c = 0; c < a; c++) {\n      for (var l = 0; l < o; l++) {\n        n = {}, n.tx0 = Math.max(s.XTOsiz + l * s.XTsiz, s.XOsiz), n.ty0 = Math.max(s.YTOsiz + c * s.YTsiz, s.YOsiz), n.tx1 = Math.min(s.XTOsiz + (l + 1) * s.XTsiz, s.Xsiz), n.ty1 = Math.min(s.YTOsiz + (c + 1) * s.YTsiz, s.Ysiz), n.width = n.tx1 - n.tx0, n.height = n.ty1 - n.ty0, n.components = [], r.push(n);\n      }\n    }\n\n    e.tiles = r;\n\n    for (var d, m = s.Csiz, h = 0; h < m; h++) {\n      d = t[h];\n\n      for (var g, u = 0, b = r.length; u < b; u++) {\n        g = {}, n = r[u], g.tcx0 = Math.ceil(n.tx0 / d.XRsiz), g.tcy0 = Math.ceil(n.ty0 / d.YRsiz), g.tcx1 = Math.ceil(n.tx1 / d.XRsiz), g.tcy1 = Math.ceil(n.ty1 / d.YRsiz), g.width = g.tcx1 - g.tcx0, g.height = g.tcy1 - g.tcy0, n.components[h] = g;\n      }\n    }\n  }\n\n  function i(e, t, n) {\n    var i = t.codingStyleParameters,\n        s = {};\n    return i.entropyCoderWithCustomPrecincts ? (s.PPx = i.precinctsSizes[n].PPx, s.PPy = i.precinctsSizes[n].PPy) : (s.PPx = 15, s.PPy = 15), s.xcb_ = 0 < n ? Math.min(i.xcb, s.PPx - 1) : Math.min(i.xcb, s.PPx), s.ycb_ = 0 < n ? Math.min(i.ycb, s.PPy - 1) : Math.min(i.ycb, s.PPy), s;\n  }\n\n  function s(e, t, n) {\n    var i = 1 << n.PPx,\n        s = 1 << n.PPy,\n        r = 0 === t.resLevel,\n        o = 1 << n.PPx + (r ? 0 : -1),\n        a = 1 << n.PPy + (r ? 0 : -1),\n        c = t.trx1 > t.trx0 ? Math.ceil(t.trx1 / i) - Math.floor(t.trx0 / i) : 0,\n        l = t.try1 > t.try0 ? Math.ceil(t.try1 / s) - Math.floor(t.try0 / s) : 0;\n    t.precinctParameters = {\n      precinctWidth: i,\n      precinctHeight: s,\n      numprecinctswide: c,\n      numprecinctshigh: l,\n      numprecincts: c * l,\n      precinctWidthInSubband: o,\n      precinctHeightInSubband: a\n    };\n  }\n\n  function o(e, t, n) {\n    var s,\n        r,\n        o,\n        a,\n        c = n.xcb_,\n        l = n.ycb_,\n        d = 1 << c,\n        p = 1 << l,\n        m = t.tbx0 >> c,\n        h = t.tby0 >> l,\n        g = t.tbx1 + d - 1 >> c,\n        u = t.tby1 + p - 1 >> l,\n        b = t.resolution.precinctParameters,\n        x = [],\n        y = [];\n\n    for (r = h; r < u; r++) {\n      for (s = m; s < g; s++) {\n        o = {\n          cbx: s,\n          cby: r,\n          tbx0: d * s,\n          tby0: p * r,\n          tbx1: d * (s + 1),\n          tby1: p * (r + 1)\n        }, o.tbx0_ = Math.max(t.tbx0, o.tbx0), o.tby0_ = Math.max(t.tby0, o.tby0), o.tbx1_ = Math.min(t.tbx1, o.tbx1), o.tby1_ = Math.min(t.tby1, o.tby1);\n        var P = Math.floor((o.tbx0_ - t.tbx0) / b.precinctWidthInSubband),\n            f = Math.floor((o.tby0_ - t.tby0) / b.precinctHeightInSubband);\n\n        if (a = P + f * b.numprecinctswide, o.precinctNumber = a, o.subbandType = t.type, o.Lblock = 3, !(o.tbx1_ <= o.tbx0_ || o.tby1_ <= o.tby0_)) {\n          x.push(o);\n          var C = y[a];\n          void 0 === C ? y[a] = C = {\n            cbxMin: s,\n            cbyMin: r,\n            cbxMax: s,\n            cbyMax: r\n          } : (s < C.cbxMin ? C.cbxMin = s : s > C.cbxMax && (C.cbxMax = s), r < C.cbyMin ? C.cbxMin = r : r > C.cbyMax && (C.cbyMax = r)), o.precinct = C;\n        }\n      }\n    }\n\n    t.codeblockParameters = {\n      codeblockWidth: c,\n      codeblockHeight: l,\n      numcodeblockwide: g - m + 1,\n      numcodeblockhigh: u - h + 1\n    }, t.codeblocks = x, t.precincts = y;\n  }\n\n  function a(e, t, n) {\n    for (var s = [], r = e.subbands, o = 0, a = r.length; o < a; o++) {\n      for (var c, l = r[o], d = l.codeblocks, p = 0, m = d.length; p < m; p++) {\n        (c = d[p], c.precinctNumber === t) && s.push(c);\n      }\n    }\n\n    return {\n      layerNumber: n,\n      codeblocks: s\n    };\n  }\n\n  function c(e) {\n    for (var t = e.SIZ, n = e.currentTile.index, s = e.tiles[n], o = s.codingStyleDefaultParameters.layersCount, c = t.Csiz, d = 0, p = 0; p < c; p++) {\n      d = Math.max(d, s.components[p].codingStyleParameters.decompositionLevelsCount);\n    }\n\n    var m = 0,\n        h = 0,\n        g = 0,\n        u = 0;\n\n    this.nextPacket = function () {\n      for (; m < o; m++) {\n        for (; h <= d; h++) {\n          for (; g < c; g++) {\n            var e = s.components[g];\n\n            if (!(h > e.codingStyleParameters.decompositionLevelsCount)) {\n              for (var t, n = e.resolutions[h], i = n.precinctParameters.numprecincts; u < i;) {\n                return t = a(n, u, m), u++, t;\n              }\n\n              u = 0;\n            }\n          }\n\n          g = 0;\n        }\n\n        h = 0;\n      }\n    };\n  }\n\n  function l(e) {\n    for (var t = e.SIZ, n = e.currentTile.index, s = e.tiles[n], o = s.codingStyleDefaultParameters.layersCount, c = t.Csiz, d = 0, p = 0; p < c; p++) {\n      d = Math.max(d, s.components[p].codingStyleParameters.decompositionLevelsCount);\n    }\n\n    var m = 0,\n        h = 0,\n        g = 0,\n        u = 0;\n\n    this.nextPacket = function () {\n      for (; m <= d; m++) {\n        for (; h < o; h++) {\n          for (; g < c; g++) {\n            var e = s.components[g];\n\n            if (!(m > e.codingStyleParameters.decompositionLevelsCount)) {\n              for (var t, n = e.resolutions[m], i = n.precinctParameters.numprecincts; u < i;) {\n                return t = a(n, u, h), u++, t;\n              }\n\n              u = 0;\n            }\n          }\n\n          g = 0;\n        }\n\n        h = 0;\n      }\n    };\n  }\n\n  function d(e) {\n    var t,\n        n,\n        i,\n        s,\n        o = e.SIZ,\n        d = e.currentTile.index,\n        m = e.tiles[d],\n        h = m.codingStyleDefaultParameters.layersCount,\n        g = o.Csiz,\n        u = 0;\n\n    for (i = 0; i < g; i++) {\n      var b = m.components[i];\n      u = Math.max(u, b.codingStyleParameters.decompositionLevelsCount);\n    }\n\n    var x = new Int32Array(u + 1);\n\n    for (n = 0; n <= u; ++n) {\n      var y = 0;\n\n      for (i = 0; i < g; ++i) {\n        var P = m.components[i].resolutions;\n        n < P.length && (y = Math.max(y, P[n].precinctParameters.numprecincts));\n      }\n\n      x[n] = y;\n    }\n\n    t = 0, n = 0, i = 0, s = 0, this.nextPacket = function () {\n      for (; n <= u; n++) {\n        for (; s < x[n]; s++) {\n          for (; i < g; i++) {\n            var e = m.components[i];\n\n            if (!(n > e.codingStyleParameters.decompositionLevelsCount)) {\n              var r = e.resolutions[n],\n                  o = r.precinctParameters.numprecincts;\n\n              if (!(s >= o)) {\n                for (; t < h;) {\n                  var c = a(r, s, t);\n                  return t++, c;\n                }\n\n                t = 0;\n              }\n            }\n          }\n\n          i = 0;\n        }\n\n        s = 0;\n      }\n    };\n  }\n\n  function p(e) {\n    var t = e.SIZ,\n        n = e.currentTile.index,\n        i = e.tiles[n],\n        s = i.codingStyleDefaultParameters.layersCount,\n        o = t.Csiz,\n        d = g(i),\n        p = d,\n        m = 0,\n        u = 0,\n        b = 0,\n        x = 0,\n        y = 0;\n\n    this.nextPacket = function () {\n      for (; y < p.maxNumHigh; y++) {\n        for (; x < p.maxNumWide; x++) {\n          for (; b < o; b++) {\n            for (var e = i.components[b], t = e.codingStyleParameters.decompositionLevelsCount; u <= t; u++) {\n              var n = e.resolutions[u],\n                  r = d.components[b].resolutions[u],\n                  c = h(x, y, r, p, n);\n\n              if (null !== c) {\n                for (; m < s;) {\n                  var l = a(n, c, m);\n                  return m++, l;\n                }\n\n                m = 0;\n              }\n            }\n\n            u = 0;\n          }\n\n          b = 0;\n        }\n\n        x = 0;\n      }\n    };\n  }\n\n  function m(e) {\n    var t = e.SIZ,\n        n = e.currentTile.index,\n        i = e.tiles[n],\n        s = i.codingStyleDefaultParameters.layersCount,\n        o = t.Csiz,\n        d = g(i),\n        p = 0,\n        m = 0,\n        u = 0,\n        b = 0,\n        x = 0;\n\n    this.nextPacket = function () {\n      for (; u < o; ++u) {\n        for (var e = i.components[u], t = d.components[u], n = e.codingStyleParameters.decompositionLevelsCount; x < t.maxNumHigh; x++) {\n          for (; b < t.maxNumWide; b++) {\n            for (; m <= n; m++) {\n              var r = e.resolutions[m],\n                  c = t.resolutions[m],\n                  l = h(b, x, c, t, r);\n\n              if (null !== l) {\n                for (; p < s;) {\n                  var g = a(r, l, p);\n                  return p++, g;\n                }\n\n                p = 0;\n              }\n            }\n\n            m = 0;\n          }\n\n          b = 0;\n        }\n\n        x = 0;\n      }\n    };\n  }\n\n  function h(e, t, n, i, s) {\n    var r = e * i.minWidth,\n        o = t * i.minHeight;\n    if (0 != r % n.width || 0 != o % n.height) return null;\n    var a = o / n.width * s.precinctParameters.numprecinctswide;\n    return r / n.height + a;\n  }\n\n  function g(e) {\n    for (var t = e.components.length, n = Number.MAX_VALUE, i = Number.MAX_VALUE, s = 0, o = 0, a = Array(t), l = 0; l < t; l++) {\n      for (var d = e.components[l], p = d.codingStyleParameters.decompositionLevelsCount, m = Array(p + 1), h = Number.MAX_VALUE, g = Number.MAX_VALUE, u = 0, b = 0, x = 1, y = p; 0 <= y; --y) {\n        var P = d.resolutions[y],\n            f = x * P.precinctParameters.precinctWidth,\n            C = x * P.precinctParameters.precinctHeight;\n        h = Math.min(h, f), g = Math.min(g, C), u = Math.max(u, P.precinctParameters.numprecinctswide), b = Math.max(b, P.precinctParameters.numprecinctshigh), m[y] = {\n          width: f,\n          height: C\n        }, x <<= 1;\n      }\n\n      n = Math.min(n, h), i = Math.min(i, g), s = Math.max(s, u), o = Math.max(o, b), a[l] = {\n        resolutions: m,\n        minWidth: h,\n        minHeight: g,\n        maxNumWide: u,\n        maxNumHigh: b\n      };\n    }\n\n    return {\n      components: a,\n      minWidth: n,\n      minHeight: i,\n      maxNumWide: s,\n      maxNumHigh: o\n    };\n  }\n\n  function u(e) {\n    for (var t = e.SIZ, n = e.currentTile.index, a = e.tiles[n], h = t.Csiz, g = 0; g < h; g++) {\n      for (var u = a.components[g], b = u.codingStyleParameters.decompositionLevelsCount, x = [], y = [], P = 0; P <= b; P++) {\n        var f = i(e, u, P),\n            C = {},\n            T = 1 << b - P;\n        C.trx0 = Math.ceil(u.tcx0 / T), C.try0 = Math.ceil(u.tcy0 / T), C.trx1 = Math.ceil(u.tcx1 / T), C.try1 = Math.ceil(u.tcy1 / T), C.resLevel = P, s(e, C, f), x.push(C);\n        var S;\n        if (0 == P) S = {}, S.type = "LL", S.tbx0 = Math.ceil(u.tcx0 / T), S.tby0 = Math.ceil(u.tcy0 / T), S.tbx1 = Math.ceil(u.tcx1 / T), S.tby1 = Math.ceil(u.tcy1 / T), S.resolution = C, o(e, S, f), y.push(S), C.subbands = [S];else {\n          var w = 1 << b - P + 1,\n              v = [];\n          S = {}, S.type = "HL", S.tbx0 = Math.ceil(u.tcx0 / w - .5), S.tby0 = Math.ceil(u.tcy0 / w), S.tbx1 = Math.ceil(u.tcx1 / w - .5), S.tby1 = Math.ceil(u.tcy1 / w), S.resolution = C, o(e, S, f), y.push(S), v.push(S), S = {}, S.type = "LH", S.tbx0 = Math.ceil(u.tcx0 / w), S.tby0 = Math.ceil(u.tcy0 / w - .5), S.tbx1 = Math.ceil(u.tcx1 / w), S.tby1 = Math.ceil(u.tcy1 / w - .5), S.resolution = C, o(e, S, f), y.push(S), v.push(S), S = {}, S.type = "HH", S.tbx0 = Math.ceil(u.tcx0 / w - .5), S.tby0 = Math.ceil(u.tcy0 / w - .5), S.tbx1 = Math.ceil(u.tcx1 / w - .5), S.tby1 = Math.ceil(u.tcy1 / w - .5), S.resolution = C, o(e, S, f), y.push(S), v.push(S), C.subbands = v;\n        }\n      }\n\n      u.resolutions = x, u.subbands = y;\n    }\n\n    var I = a.codingStyleDefaultParameters.progressionOrder;\n\n    switch (I) {\n      case 0:\n        a.packetsIterator = new c(e);\n        break;\n\n      case 1:\n        a.packetsIterator = new l(e);\n        break;\n\n      case 2:\n        a.packetsIterator = new d(e);\n        break;\n\n      case 3:\n        a.packetsIterator = new p(e);\n        break;\n\n      case 4:\n        a.packetsIterator = new m(e);\n        break;\n\n      default:\n        throw new Error("JPX Error: Unsupported progression order " + I);\n    }\n  }\n\n  function b(e, t, n, s) {\n    function r(e) {\n      for (; h < e;) {\n        var i = t[n + m];\n        m++, g ? (p = p << 7 | i, h += 7, g = !1) : (p = p << 8 | i, h += 8), 255 === i && (g = !0);\n      }\n\n      return h -= e, p >>> h & (1 << e) - 1;\n    }\n\n    function o(e) {\n      return 255 === t[n + m - 1] && t[n + m] === e ? (a(1), !0) : !(255 !== t[n + m] || t[n + m + 1] !== e) && (a(2), !0);\n    }\n\n    function a(e) {\n      m += e;\n    }\n\n    function c() {\n      h = 0, g && (m++, g = !1);\n    }\n\n    function d() {\n      if (0 === r(1)) return 1;\n      if (0 === r(1)) return 2;\n      var e = r(2);\n      return 3 > e ? e + 3 : (e = r(5), 31 > e) ? e + 6 : (e = r(7), e + 37);\n    }\n\n    for (var p, m = 0, h = 0, g = !1, u = e.currentTile.index, b = e.tiles[u], x = e.COD.sopMarkerUsed, y = e.COD.ephMarkerUsed, P = b.packetsIterator; m < s;) {\n      c(), x && o(145) && a(4);\n      var f = P.nextPacket();\n      if (f === void 0) return;\n\n      if (r(1)) {\n        for (var C, w = f.layerNumber, v = [], I = 0, j = f.codeblocks.length; I < void 0; I++) {\n          C = f.codeblocks[I];\n\n          var L,\n              k = C.precinct,\n              E = C.cbx - k.cbxMin,\n              F = C.cby - k.cbyMin,\n              O = !1,\n              _ = !1;\n\n          if (void 0 !== C.included) O = !!r(1);else {\n            k = C.precinct;\n            var R, z;\n            if (void 0 !== k.inclusionTree) R = k.inclusionTree;else {\n              var M = k.cbxMax - k.cbxMin + 1,\n                  q = k.cbyMax - k.cbyMin + 1;\n              R = new S(M, q, w), z = new T(M, q), k.inclusionTree = R, k.zeroBitPlanesTree = z;\n\n              for (var D = 0; D < w; D++) {\n                if (0 !== r(1)) throw new Error("JPX Error: Invalid tag tree");\n              }\n            }\n            if (R.reset(E, F, w)) for (;;) {\n              if (!r(1)) {\n                R.incrementValue(w);\n                break;\n              } else if (L = !R.nextLevel(), L) {\n                C.included = !0, O = _ = !0;\n                break;\n              }\n            }\n          }\n\n          if (O) {\n            if (_) {\n              for (z = k.zeroBitPlanesTree, z.reset(E, F);;) {\n                if (!r(1)) z.incrementValue();else if (L = !z.nextLevel(), L) break;\n              }\n\n              C.zeroBitPlanes = z.value;\n            }\n\n            for (var B = d(); r(1);) {\n              C.Lblock++;\n            }\n\n            var X = log2(B),\n                A = (B < 1 << X ? X - 1 : X) + C.Lblock,\n                H = r(A);\n            v.push({\n              codeblock: C,\n              codingpasses: B,\n              dataLength: H\n            });\n          }\n        }\n\n        for (c(), y && o(146); 0 < v.length;) {\n          var N = v.shift();\n          C = N.codeblock, void 0 === C.data && (C.data = []), C.data.push({\n            data: t,\n            start: n + m,\n            end: n + m + N.dataLength,\n            codingpasses: N.codingpasses\n          }), m += N.dataLength;\n        }\n      }\n    }\n\n    return m;\n  }\n\n  function x(e, t, s, r, o, a, c, l) {\n    for (var d = r.tbx0, p = r.tby0, m = r.tbx1 - r.tbx0, h = r.codeblocks, g = "H" === r.type.charAt(0) ? 1 : 0, u = "H" === r.type.charAt(1) ? t : 0, b = 0, x = h.length; b < x; ++b) {\n      var y = h[b],\n          P = y.tbx1_ - y.tbx0_,\n          f = y.tby1_ - y.tby0_;\n\n      if (0 !== P && 0 !== f && void 0 !== y.data) {\n        var C, T;\n        C = new w(P, f, y.subbandType, y.zeroBitPlanes, a), T = 2;\n        var S,\n            v,\n            I,\n            L = y.data,\n            E = 0,\n            F = 0;\n\n        for (S = 0, v = L.length; S < v; S++) {\n          I = L[S], E += I.end - I.start, F += I.codingpasses;\n        }\n\n        var O = new Int16Array(E),\n            _ = 0;\n\n        for (S = 0, v = L.length; S < v; S++) {\n          I = L[S];\n          var R = I.data.subarray(I.start, I.end);\n          O.set(R, _), _ += R.length;\n        }\n\n        var z = new ArithmeticDecoder(O, 0, E);\n\n        for (C.setDecoder(z), S = 0; S < F; S++) {\n          0 === T ? C.runSignificancePropogationPass() : 1 === T ? C.runMagnitudeRefinementPass() : 2 === T ? (C.runCleanupPass(), l && C.checkSegmentationSymbol()) : void 0, T = (T + 1) % 3;\n        }\n\n        var M,\n            q,\n            D,\n            B = y.tbx0_ - d + (y.tby0_ - p) * m,\n            X = C.coefficentsSign,\n            A = C.coefficentsMagnitude,\n            H = C.bitsDecoded,\n            N = c ? 0 : .5;\n        _ = 0;\n        var U = "LL" !== r.type;\n\n        for (S = 0; S < f; S++) {\n          var Y = 0 | B / m;\n\n          for (M = 0; M < P; M++) {\n            if (q = A[_], 0 !== q) {\n              q = (q + N) * o, 0 !== X[_] && (q = -q), D = H[_];\n              var W = U ? 2 * Y * (t - m) + g + u + (B << 1) : B;\n              e[W] = c && D >= a ? q : q * (1 << a - D);\n            }\n\n            B++, _++;\n          }\n\n          B += m - P;\n        }\n      }\n    }\n  }\n\n  function y(e, t, n) {\n    for (var s = t.components[n], r = s.codingStyleParameters, o = s.quantizationParameters, a = r.decompositionLevelsCount, c = o.SPqcds, l = o.scalarExpounded, d = o.guardBits, p = r.segmentationSymbolUsed, m = e.components[n].precision, h = r.reversibleTransformation, g = h ? new L() : new I(), u = [], y = 0, P = 0; P <= a; P++) {\n      for (var f = s.resolutions[P], T = f.trx1 - f.trx0, S = f.try1 - f.try0, w = new Float32Array(T * S), v = 0, k = f.subbands.length; v < k; v++) {\n        var E, F;\n        l ? (E = c[y].mu, F = c[y].epsilon, y++) : (E = c[0].mu, F = c[0].epsilon + (0 < P ? 1 - P : 0));\n        var O = f.subbands[v],\n            _ = C[O.type],\n            R = h ? 1 : Math.pow(2, m + _ - F) * (1 + E / 2048),\n            z = d + F - 1;\n        x(w, T, S, O, R, z, h, p);\n      }\n\n      u.push({\n        width: T,\n        height: S,\n        items: w\n      });\n    }\n\n    var M = g.calculate(u, s.tcx0, s.tcy0);\n    return {\n      left: s.tcx0,\n      top: s.tcy0,\n      width: M.width,\n      height: M.height,\n      items: M.items\n    };\n  }\n\n  function P(e) {\n    for (var t = e.SIZ, n = e.components, s = t.Csiz, o = [], a = 0, l = e.tiles.length; a < l; a++) {\n      var d,\n          p = e.tiles[a],\n          m = [];\n\n      for (d = 0; d < s; d++) {\n        m[d] = y(e, p, d);\n      }\n\n      var h,\n          u,\n          x,\n          P,\n          f,\n          C,\n          T,\n          S,\n          w,\n          v,\n          I,\n          L,\n          E,\n          F,\n          O,\n          _ = m[0],\n          R = new Int16Array(_.items.length * s),\n          z = {\n        left: _.left,\n        top: _.top,\n        width: _.width,\n        height: _.height,\n        items: R\n      },\n          M = 0;\n\n      if (p.codingStyleDefaultParameters.multipleComponentTransform) {\n        var q = 4 === s,\n            D = m[0].items,\n            B = m[1].items,\n            X = m[2].items,\n            A = q ? m[3].items : null;\n        h = n[0].precision - 8, u = (128 << h) + .5, x = 255 * (1 << h), f = .5 * x, P = -f;\n        var H = p.components[0],\n            N = s - 3;\n        if (T = D.length, !H.codingStyleParameters.reversibleTransformation) for (C = 0; C < T; C++, M += N) {\n          S = D[C] + u, w = B[C], v = X[C], I = S + 1.402 * v, L = S - .34413 * w - .71414 * v, E = S + 1.772 * w, R[M++] = 0 >= I ? 0 : I >= x ? 255 : I >> h, R[M++] = 0 >= L ? 0 : L >= x ? 255 : L >> h, R[M++] = 0 >= E ? 0 : E >= x ? 255 : E >> h;\n        } else for (C = 0; C < T; C++, M += N) {\n          S = D[C] + u, w = B[C], v = X[C], L = S - (v + w >> 2), I = L + v, E = L + w, R[M++] = 0 >= I ? 0 : I >= x ? 255 : I >> h, R[M++] = 0 >= L ? 0 : L >= x ? 255 : L >> h, R[M++] = 0 >= E ? 0 : E >= x ? 255 : E >> h;\n        }\n        if (q) for (C = 0, M = 3; C < T; C++, M += 4) {\n          F = A[C], R[M] = F <= P ? 0 : F >= f ? 255 : F + u >> h;\n        }\n      } else for (d = 0; d < s; d++) {\n        if (8 === n[d].precision) {\n          var U = m[d].items;\n\n          for (h = n[d].precision - 8, u = (128 << h) + .5, x = 127.5 * (1 << h), P = -x, (M = d, C = 0, T = U.length); C < T; C++) {\n            O = U[C], R[M] = O <= P ? 0 : O >= x ? 255 : O + u >> h, M += s;\n          }\n        } else {\n          var Y = n[d].isSigned,\n              U = m[d].items;\n\n          for (Y ? (h = 0, u = 0) : (h = n[d].precision - 8, u = (128 << h) + .5), M = d, C = 0, T = U.length; C < T; C++) {\n            O = U[C], R[M] = O + u, M += s;\n          }\n        }\n      }\n\n      o.push(z);\n    }\n\n    return o;\n  }\n\n  function f(e, t) {\n    for (var n = e.SIZ, i = n.Csiz, s = e.tiles[t], r = 0; r < i; r++) {\n      var o = s.components[r],\n          a = e.currentTile.QCC[r] === void 0 ? e.currentTile.QCD : e.currentTile.QCC[r];\n      o.quantizationParameters = a;\n      var l = e.currentTile.COC[r] === void 0 ? e.currentTile.COD : e.currentTile.COC[r];\n      o.codingStyleParameters = l;\n    }\n\n    s.codingStyleDefaultParameters = e.currentTile.COD;\n  }\n\n  var C = {\n    LL: 0,\n    LH: 1,\n    HL: 1,\n    HH: 2\n  };\n  e.prototype = {\n    parse: function parse(e) {\n      var t = readUint16(e, 0);\n      if (65359 === t) return void this.parseCodestream(e, 0, e.length);\n\n      for (var n = 0, i = e.length; n < i;) {\n        var s = 8,\n            r = readUint32(e, n),\n            o = readUint32(e, n + 4);\n        if (n += s, 1 === r && (r = 4294967296 * readUint32(e, n) + readUint32(e, n + 4), n += 8, s += 8), 0 === r && (r = i - n + s), r < s) throw new Error("JPX Error: Invalid box field size");\n        var a = r - s,\n            c = !0;\n\n        switch (o) {\n          case 1785737832:\n            c = !1;\n            break;\n\n          case 1668246642:\n            var l = e[n],\n                d = e[n + 1],\n                p = e[n + 2];\n\n            if (1 === l) {\n              var m = readUint32(e, n + 3);\n\n              switch (m) {\n                case 16:\n                case 17:\n                case 18:\n                  break;\n\n                default:\n                  warn("Unknown colorspace " + m);\n              }\n            } else 2 === l && info("ICC profile not supported");\n\n            break;\n\n          case 1785737827:\n            this.parseCodestream(e, n, n + a);\n            break;\n\n          case 1783636e3:\n            218793738 !== readUint32(e, n) && warn("Invalid JP2 signature");\n            break;\n\n          case 1783634458:\n          case 1718909296:\n          case 1920099697:\n          case 1919251232:\n          case 1768449138:\n            break;\n\n          default:\n            var h = String.fromCharCode(255 & o >> 24, 255 & o >> 16, 255 & o >> 8, 255 & o);\n            warn("Unsupported header type " + o + " (" + h + ")");\n        }\n\n        c && (n += a);\n      }\n    },\n    parseImageProperties: function parseImageProperties(e) {\n      for (var t = e.getByte(); 0 <= t;) {\n        var n = t;\n        t = e.getByte();\n        var i = n << 8 | t;\n\n        if (65361 == i) {\n          e.skip(4);\n          var s = e.getInt32() >>> 0,\n              r = e.getInt32() >>> 0,\n              o = e.getInt32() >>> 0,\n              a = e.getInt32() >>> 0;\n          e.skip(16);\n          var c = e.getUint16();\n          return this.width = s - o, this.height = r - a, this.componentsCount = c, void (this.bitsPerComponent = 8);\n        }\n      }\n\n      throw new Error("JPX Error: No size marker found in JPX stream");\n    },\n    parseCodestream: function parseCodestream(e, s, r) {\n      var o = {};\n\n      try {\n        for (var a = !1, c = s; c + 1 < r;) {\n          var l = readUint16(e, c);\n          c += 2;\n          var d,\n              p,\n              m,\n              h,\n              g,\n              x,\n              y = 0;\n\n          switch (l) {\n            case 65359:\n              o.mainHeader = !0;\n              break;\n\n            case 65497:\n              break;\n\n            case 65361:\n              y = readUint16(e, c);\n              var C = {};\n              C.Xsiz = readUint32(e, c + 4), C.Ysiz = readUint32(e, c + 8), C.XOsiz = readUint32(e, c + 12), C.YOsiz = readUint32(e, c + 16), C.XTsiz = readUint32(e, c + 20), C.YTsiz = readUint32(e, c + 24), C.XTOsiz = readUint32(e, c + 28), C.YTOsiz = readUint32(e, c + 32);\n              var T = readUint16(e, c + 36);\n              C.Csiz = T;\n              var S = [];\n              d = c + 38;\n\n              for (var w, v = 0; v < T; v++) {\n                w = {\n                  precision: (127 & e[d]) + 1,\n                  isSigned: !!(128 & e[d]),\n                  XRsiz: e[d + 1],\n                  YRsiz: e[d + 1]\n                }, t(w, C), S.push(w);\n              }\n\n              o.SIZ = C, o.components = S, n(o, S), o.QCC = [], o.COC = [];\n              break;\n\n            case 65372:\n              y = readUint16(e, c);\n              var I = {};\n\n              switch (d = c + 2, p = e[d++], 31 & p) {\n                case 0:\n                  h = 8, g = !0;\n                  break;\n\n                case 1:\n                  h = 16, g = !1;\n                  break;\n\n                case 2:\n                  h = 16, g = !0;\n                  break;\n\n                default:\n                  throw new Error("JPX Error: Invalid SQcd value " + p);\n              }\n\n              for (I.noQuantization = 8 === h, I.scalarExpounded = g, I.guardBits = p >> 5, m = []; d < y + c;) {\n                var L = {};\n                8 === h ? (L.epsilon = e[d++] >> 3, L.mu = 0) : (L.epsilon = e[d] >> 3, L.mu = (7 & e[d]) << 8 | e[d + 1], d += 2), m.push(L);\n              }\n\n              I.SPqcds = m, o.mainHeader ? o.QCD = I : (o.currentTile.QCD = I, o.currentTile.QCC = []);\n              break;\n\n            case 65373:\n              y = readUint16(e, c);\n              var k = {};\n              d = c + 2;\n              var E;\n\n              switch (257 > o.SIZ.Csiz ? E = e[d++] : (E = readUint16(e, d), d += 2), p = e[d++], 31 & p) {\n                case 0:\n                  h = 8, g = !0;\n                  break;\n\n                case 1:\n                  h = 16, g = !1;\n                  break;\n\n                case 2:\n                  h = 16, g = !0;\n                  break;\n\n                default:\n                  throw new Error("JPX Error: Invalid SQcd value " + p);\n              }\n\n              for (k.noQuantization = 8 === h, k.scalarExpounded = g, k.guardBits = p >> 5, m = []; d < y + c;) {\n                L = {}, 8 === h ? (L.epsilon = e[d++] >> 3, L.mu = 0) : (L.epsilon = e[d] >> 3, L.mu = (7 & e[d]) << 8 | e[d + 1], d += 2), m.push(L);\n              }\n\n              k.SPqcds = m, o.mainHeader ? o.QCC[E] = k : o.currentTile.QCC[E] = k;\n              break;\n\n            case 65362:\n              y = readUint16(e, c);\n              var F = {};\n              d = c + 2;\n              var O = e[d++];\n              F.entropyCoderWithCustomPrecincts = !!(1 & O), F.sopMarkerUsed = !!(2 & O), F.ephMarkerUsed = !!(4 & O), F.progressionOrder = e[d++], F.layersCount = readUint16(e, d), d += 2, F.multipleComponentTransform = e[d++], F.decompositionLevelsCount = e[d++], F.xcb = (15 & e[d++]) + 2, F.ycb = (15 & e[d++]) + 2;\n              var _ = e[d++];\n\n              if (F.selectiveArithmeticCodingBypass = !!(1 & _), F.resetContextProbabilities = !!(2 & _), F.terminationOnEachCodingPass = !!(4 & _), F.verticalyStripe = !!(8 & _), F.predictableTermination = !!(16 & _), F.segmentationSymbolUsed = !!(32 & _), F.reversibleTransformation = e[d++], F.entropyCoderWithCustomPrecincts) {\n                for (var R, z = []; d < y + c;) {\n                  R = e[d++], z.push({\n                    PPx: 15 & R,\n                    PPy: R >> 4\n                  });\n                }\n\n                F.precinctsSizes = z;\n              }\n\n              var M = [];\n              if (F.selectiveArithmeticCodingBypass && M.push("selectiveArithmeticCodingBypass"), F.resetContextProbabilities && M.push("resetContextProbabilities"), F.terminationOnEachCodingPass && M.push("terminationOnEachCodingPass"), F.verticalyStripe && M.push("verticalyStripe"), F.predictableTermination && M.push("predictableTermination"), 0 < M.length) throw a = !0, new Error("JPX Error: Unsupported COD options (" + M.join(", ") + ")");\n              o.mainHeader ? o.COD = F : (o.currentTile.COD = F, o.currentTile.COC = []);\n              break;\n\n            case 65424:\n              y = readUint16(e, c), x = {}, x.index = readUint16(e, c + 2), x.length = readUint32(e, c + 4), x.dataEnd = x.length + c - 2, x.partIndex = e[c + 8], x.partsCount = e[c + 9], o.mainHeader = !1, 0 === x.partIndex && (x.COD = o.COD, x.COC = o.COC.slice(0), x.QCD = o.QCD, x.QCC = o.QCC.slice(0)), o.currentTile = x;\n              break;\n\n            case 65427:\n              x = o.currentTile, 0 === x.partIndex && (f(o, x.index), u(o)), y = x.dataEnd - c, b(o, e, c, y);\n              break;\n\n            case 65365:\n            case 65367:\n            case 65368:\n            case 65380:\n            case 65363:\n              y = readUint16(e, c);\n              break;\n\n            default:\n              throw new Error("JPX Error: Unknown codestream code: " + l.toString(16));\n          }\n\n          c += y;\n        }\n      } catch (t) {\n        if (a || this.failOnCorruptedImage) throw t;else warn("Trying to recover from " + t.message);\n      }\n\n      this.tiles = P(o), this.width = o.SIZ.Xsiz - o.SIZ.XOsiz, this.height = o.SIZ.Ysiz - o.SIZ.YOsiz, this.componentsCount = o.SIZ.Csiz;\n    }\n  };\n\n  var T = function () {\n    function e(e, t) {\n      var n = log2(Math.max(e, t)) + 1;\n      this.levels = [];\n\n      for (var s, r = 0; r < n; r++) {\n        s = {\n          width: e,\n          height: t,\n          items: []\n        }, this.levels.push(s), e = Math.ceil(e / 2), t = Math.ceil(t / 2);\n      }\n    }\n\n    return e.prototype = {\n      reset: function reset(e, t) {\n        for (var n, s = 0, r = 0; s < this.levels.length;) {\n          n = this.levels[s];\n          var o = e + t * n.width;\n\n          if (void 0 !== n.items[o]) {\n            r = n.items[o];\n            break;\n          }\n\n          n.index = o, e >>= 1, t >>= 1, s++;\n        }\n\n        s--, n = this.levels[s], n.items[n.index] = r, this.currentLevel = s, delete this.value;\n      },\n      incrementValue: function incrementValue() {\n        var e = this.levels[this.currentLevel];\n        e.items[e.index]++;\n      },\n      nextLevel: function nextLevel() {\n        var e = this.currentLevel,\n            t = this.levels[e],\n            n = t.items[t.index];\n        return (e--, 0 > e) ? (this.value = n, !1) : (this.currentLevel = e, t = this.levels[e], t.items[t.index] = n, !0);\n      }\n    }, e;\n  }(),\n      S = function () {\n    function e(e, t, n) {\n      var s = log2(Math.max(e, t)) + 1;\n      this.levels = [];\n\n      for (var r, o = 0; o < s; o++) {\n        r = new Int16Array(e * t);\n\n        for (var a = 0, c = r.length; a < c; a++) {\n          r[a] = n;\n        }\n\n        var l = {\n          width: e,\n          height: t,\n          items: r\n        };\n        this.levels.push(l), e = Math.ceil(e / 2), t = Math.ceil(t / 2);\n      }\n    }\n\n    return e.prototype = {\n      reset: function reset(e, t, n) {\n        for (var s = 0; s < this.levels.length;) {\n          var r = this.levels[s],\n              o = e + t * r.width;\n          r.index = o;\n          var a = r.items[o];\n          if (255 === a) break;\n          if (a > n) return this.currentLevel = s, this.propagateValues(), !1;\n          e >>= 1, t >>= 1, s++;\n        }\n\n        return this.currentLevel = s - 1, !0;\n      },\n      incrementValue: function incrementValue(e) {\n        var t = this.levels[this.currentLevel];\n        t.items[t.index] = e + 1, this.propagateValues();\n      },\n      propagateValues: function propagateValues() {\n        for (var e = this.currentLevel, t = this.levels[e], n = t.items[t.index]; 0 <= --e;) {\n          t = this.levels[e], t.items[t.index] = n;\n        }\n      },\n      nextLevel: function nextLevel() {\n        var e = this.currentLevel,\n            t = this.levels[e],\n            n = t.items[t.index];\n        return (t.items[t.index] = 255, e--, !(0 > e)) && (this.currentLevel = e, t = this.levels[e], t.items[t.index] = n, !0);\n      }\n    }, e;\n  }(),\n      w = function () {\n    function e(e, t, o, a, c) {\n      this.width = e, this.height = t, this.contextLabelTable = "HH" === o ? r : "HL" === o ? s : n;\n      var l = e * t;\n      this.neighborsSignificance = new Uint8Array(l), this.coefficentsSign = new Uint8Array(l), this.coefficentsMagnitude = 14 < c ? new Uint32Array(l) : 6 < c ? new Uint16Array(l) : new Uint8Array(l), this.processingFlags = new Uint8Array(l);\n      var d = new Uint8Array(l);\n      if (0 !== a) for (var p = 0; p < l; p++) {\n        d[p] = a;\n      }\n      this.bitsDecoded = d, this.reset();\n    }\n\n    var t = 18,\n        n = new Uint8Array([0, 5, 8, 0, 3, 7, 8, 0, 4, 7, 8, 0, 0, 0, 0, 0, 1, 6, 8, 0, 3, 7, 8, 0, 4, 7, 8, 0, 0, 0, 0, 0, 2, 6, 8, 0, 3, 7, 8, 0, 4, 7, 8, 0, 0, 0, 0, 0, 2, 6, 8, 0, 3, 7, 8, 0, 4, 7, 8, 0, 0, 0, 0, 0, 2, 6, 8, 0, 3, 7, 8, 0, 4, 7, 8]),\n        s = new Uint8Array([0, 3, 4, 0, 5, 7, 7, 0, 8, 8, 8, 0, 0, 0, 0, 0, 1, 3, 4, 0, 6, 7, 7, 0, 8, 8, 8, 0, 0, 0, 0, 0, 2, 3, 4, 0, 6, 7, 7, 0, 8, 8, 8, 0, 0, 0, 0, 0, 2, 3, 4, 0, 6, 7, 7, 0, 8, 8, 8, 0, 0, 0, 0, 0, 2, 3, 4, 0, 6, 7, 7, 0, 8, 8, 8]),\n        r = new Uint8Array([0, 1, 2, 0, 1, 2, 2, 0, 2, 2, 2, 0, 0, 0, 0, 0, 3, 4, 5, 0, 4, 5, 5, 0, 5, 5, 5, 0, 0, 0, 0, 0, 6, 7, 7, 0, 7, 7, 7, 0, 7, 7, 7, 0, 0, 0, 0, 0, 8, 8, 8, 0, 8, 8, 8, 0, 8, 8, 8, 0, 0, 0, 0, 0, 8, 8, 8, 0, 8, 8, 8, 0, 8, 8, 8]);\n    return e.prototype = {\n      setDecoder: function setDecoder(e) {\n        this.decoder = e;\n      },\n      reset: function reset() {\n        this.contexts = new Int8Array(19), this.contexts[0] = 8, this.contexts[17] = 92, this.contexts[t] = 6;\n      },\n      setNeighborsSignificance: function setNeighborsSignificance(e, t, n) {\n        var s,\n            r = this.neighborsSignificance,\n            o = this.width,\n            a = this.height,\n            c = 0 < t,\n            l = t + 1 < o;\n        0 < e && (s = n - o, c && (r[s - 1] += 16), l && (r[s + 1] += 16), r[s] += 4), e + 1 < a && (s = n + o, c && (r[s - 1] += 16), l && (r[s + 1] += 16), r[s] += 4), c && (r[n - 1] += 1), l && (r[n + 1] += 1), r[n] |= 128;\n      },\n      runSignificancePropogationPass: function runSignificancePropogationPass() {\n        for (var e = this.decoder, t = this.width, n = this.height, s = this.coefficentsMagnitude, r = this.coefficentsSign, o = this.neighborsSignificance, a = this.processingFlags, c = this.contexts, l = this.contextLabelTable, d = this.bitsDecoded, p = 0; p < n; p += 4) {\n          for (var m, h = 0; h < t; h++) {\n            m = p * t + h;\n\n            for (var g, u = 0; 4 > u && (g = p + u, !(g >= n)); u++, m += t) {\n              if (a[m] &= -2, !s[m] && o[m]) {\n                var b = l[o[m]],\n                    x = e.readBit(c, b);\n\n                if (x) {\n                  var y = this.decodeSignBit(g, h, m);\n                  r[m] = y, s[m] = 1, this.setNeighborsSignificance(g, h, m), a[m] |= 2;\n                }\n\n                d[m]++, a[m] |= 1;\n              }\n            }\n          }\n        }\n      },\n      decodeSignBit: function decodeSignBit(e, t, n) {\n        var i,\n            s,\n            r,\n            o,\n            a,\n            c,\n            l = this.width,\n            d = this.height,\n            p = this.coefficentsMagnitude,\n            m = this.coefficentsSign;\n        o = 0 < t && 0 !== p[n - 1], t + 1 < l && 0 !== p[n + 1] ? (r = m[n + 1], o ? (s = m[n - 1], i = 1 - r - s) : i = 1 - r - r) : o ? (s = m[n - 1], i = 1 - s - s) : i = 0;\n        var h = 3 * i;\n        return o = 0 < e && 0 !== p[n - l], e + 1 < d && 0 !== p[n + l] ? (r = m[n + l], o ? (s = m[n - l], i = 1 - r - s + h) : i = 1 - r - r + h) : o ? (s = m[n - l], i = 1 - s - s + h) : i = h, 0 <= i ? (a = 9 + i, c = this.decoder.readBit(this.contexts, a)) : (a = 9 - i, c = 1 ^ this.decoder.readBit(this.contexts, a)), c;\n      },\n      runMagnitudeRefinementPass: function runMagnitudeRefinementPass() {\n        for (var e, t = this.decoder, n = this.width, i = this.height, s = this.coefficentsMagnitude, r = this.neighborsSignificance, o = this.contexts, a = this.bitsDecoded, c = this.processingFlags, l = 1, d = 2, p = n * i, m = 0; m < p; m = e) {\n          e = Math.min(p, m + 4 * n);\n\n          for (var h = 0; h < n; h++) {\n            for (var g = m + h; g < e; g += n) {\n              if (s[g] && 0 == (c[g] & l)) {\n                var u = 16;\n\n                if (0 != (c[g] & d)) {\n                  c[g] ^= d;\n                  var b = 127 & r[g];\n                  u = 0 == b ? 15 : 14;\n                }\n\n                var x = t.readBit(o, u);\n                s[g] = s[g] << 1 | x, a[g]++, c[g] |= l;\n              }\n            }\n          }\n        }\n      },\n      runCleanupPass: function runCleanupPass() {\n        for (var e, n = this.decoder, s = this.width, r = this.height, o = this.neighborsSignificance, a = this.coefficentsMagnitude, c = this.coefficentsSign, l = this.contexts, d = this.contextLabelTable, p = this.bitsDecoded, m = this.processingFlags, h = 2, g = s, u = 2 * s, b = 3 * s, x = 0; x < r; x = e) {\n          e = Math.min(x + 4, r);\n\n          for (var y = x * s, P = x + 3 < r, f = 0; f < s; f++) {\n            var C,\n                T = y + f,\n                S = P && 0 === m[T] && 0 === m[T + g] && 0 === m[T + u] && 0 === m[T + b] && 0 === o[T] && 0 === o[T + g] && 0 === o[T + u] && 0 === o[T + b],\n                w = 0,\n                v = T,\n                I = x;\n\n            if (S) {\n              var L = n.readBit(l, t);\n\n              if (!L) {\n                p[T]++, p[T + g]++, p[T + u]++, p[T + b]++;\n                continue;\n              }\n\n              w = n.readBit(l, 17) << 1 | n.readBit(l, 17), 0 !== w && (I = x + w, v += w * s), C = this.decodeSignBit(I, f, v), c[v] = C, a[v] = 1, this.setNeighborsSignificance(I, f, v), m[v] |= h, v = T;\n\n              for (var k = x; k <= I; k++, v += s) {\n                p[v]++;\n              }\n\n              w++;\n            }\n\n            for (I = x + w; I < e; I++, v += s) {\n              if (!(a[v] || 0 != (m[v] & 1))) {\n                var E = d[o[v]],\n                    F = n.readBit(l, E);\n                1 === F && (C = this.decodeSignBit(I, f, v), c[v] = C, a[v] = 1, this.setNeighborsSignificance(I, f, v), m[v] |= h), p[v]++;\n              }\n            }\n          }\n        }\n      },\n      checkSegmentationSymbol: function checkSegmentationSymbol() {\n        var e = this.decoder,\n            t = this.contexts,\n            n = e.readBit(t, 17) << 3 | e.readBit(t, 17) << 2 | e.readBit(t, 17) << 1 | e.readBit(t, 17);\n        if (10 !== n) throw new Error("JPX Error: Invalid segmentation symbol");\n      }\n    }, e;\n  }(),\n      v = function () {\n    function e() {}\n\n    return e.prototype.calculate = function (e, t, n) {\n      for (var s = e[0], r = 1, o = e.length; r < o; r++) {\n        s = this.iterate(s, e[r], t, n);\n      }\n\n      return s;\n    }, e.prototype.extend = function (e, t, n) {\n      var i = t - 1,\n          s = t + 1,\n          r = t + n - 2,\n          o = t + n;\n      e[i--] = e[s++], e[o++] = e[r--], e[i--] = e[s++], e[o++] = e[r--], e[i--] = e[s++], e[o++] = e[r--], e[i] = e[s], e[o] = e[r];\n    }, e.prototype.iterate = function (e, t, n, s) {\n      var r,\n          o,\n          a,\n          c,\n          d,\n          p,\n          m = e.width,\n          h = e.height,\n          g = e.items,\n          x = t.width,\n          y = t.height,\n          P = t.items;\n\n      for (a = 0, r = 0; r < h; r++) {\n        for (c = 2 * r * x, o = 0; o < m; o++, a++, c += 2) {\n          P[c] = g[a];\n        }\n      }\n\n      g = e.items = null;\n      var f = new Float32Array(x + 8);\n      if (1 !== x) for (p = 0, a = 0; p < y; p++, a += x) {\n        f.set(P.subarray(a, a + x), 4), this.extend(f, 4, x), this.filter(f, 4, x), P.set(f.subarray(4, 4 + x), a);\n      } else if (0 != (1 & n)) for (p = 0, a = 0; p < y; p++, a += x) {\n        P[a] *= .5;\n      }\n      var C = 16,\n          T = [];\n\n      for (r = 0; r < C; r++) {\n        T.push(new Float32Array(y + 8));\n      }\n\n      var S,\n          w = 0;\n      if (e = 4 + y, 1 !== y) for (d = 0; d < x; d++) {\n        if (0 === w) {\n          for (C = Math.min(x - d, C), a = d, c = 4; c < e; a += x, c++) {\n            for (S = 0; S < C; S++) {\n              T[S][c] = P[a + S];\n            }\n          }\n\n          w = C;\n        }\n\n        w--;\n        var I = T[w];\n        if (this.extend(I, 4, y), this.filter(I, 4, y), 0 === w) for (a = d - C + 1, c = 4; c < e; a += x, c++) {\n          for (S = 0; S < C; S++) {\n            P[a + S] = T[S][c];\n          }\n        }\n      } else if (0 != (1 & s)) for (d = 0; d < x; d++) {\n        P[d] *= .5;\n      }\n      return {\n        width: x,\n        height: y,\n        items: P\n      };\n    }, e;\n  }(),\n      I = function () {\n    function e() {\n      v.call(this);\n    }\n\n    return e.prototype = Object.create(v.prototype), e.prototype.filter = function (e, t, i) {\n      var s = i >> 1;\n      t |= 0;\n      var r,\n          o,\n          a,\n          c,\n          l = -1.586134342059924,\n          d = -.052980118572961,\n          p = .882911075530934,\n          m = .443506852043971,\n          h = 1.230174104914001;\n\n      for (r = t - 3, o = s + 4; o--; r += 2) {\n        e[r] *= 1 / h;\n      }\n\n      for (r = t - 2, a = m * e[r - 1], o = s + 3; o-- && (c = m * e[r + 1], e[r] = h * e[r] - a - c, o--); r += 2) {\n        r += 2, a = m * e[r + 1], e[r] = h * e[r] - a - c;\n      }\n\n      for (r = t - 1, a = p * e[r - 1], o = s + 2; o-- && (c = p * e[r + 1], e[r] -= a + c, o--); r += 2) {\n        r += 2, a = p * e[r + 1], e[r] -= a + c;\n      }\n\n      for (r = t, a = d * e[r - 1], o = s + 1; o-- && (c = d * e[r + 1], e[r] -= a + c, o--); r += 2) {\n        r += 2, a = d * e[r + 1], e[r] -= a + c;\n      }\n\n      if (0 != s) for (r = t + 1, a = l * e[r - 1], o = s; o-- && (c = l * e[r + 1], e[r] -= a + c, o--); r += 2) {\n        r += 2, a = l * e[r + 1], e[r] -= a + c;\n      }\n    }, e;\n  }(),\n      L = function () {\n    function e() {\n      v.call(this);\n    }\n\n    return e.prototype = Object.create(v.prototype), e.prototype.filter = function (e, t, i) {\n      var s = i >> 1;\n      t |= 0;\n      var r, o;\n\n      for (r = t, o = s + 1; o--; r += 2) {\n        e[r] -= e[r - 1] + e[r + 1] + 2 >> 2;\n      }\n\n      for (r = t + 1, o = s; o--; r += 2) {\n        e[r] += e[r - 1] + e[r + 1] >> 1;\n      }\n    }, e;\n  }();\n\n  return e;\n}(),\n    globalScope = "undefined" == typeof window ? this : window,\n    isWorker = "undefined" == typeof window,\n    FONT_IDENTITY_MATRIX = [.001, 0, 0, .001, 0, 0],\n    TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n},\n    ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n},\n    AnnotationType = {\n  WIDGET: 1,\n  TEXT: 2,\n  LINK: 3\n},\n    StreamType = {\n  UNKNOWN: 0,\n  FLATE: 1,\n  LZW: 2,\n  DCT: 3,\n  JPX: 4,\n  JBIG: 5,\n  A85: 6,\n  AHX: 7,\n  CCF: 8,\n  RL: 9\n},\n    FontType = {\n  UNKNOWN: 0,\n  TYPE1: 1,\n  TYPE1C: 2,\n  CIDFONTTYPE0: 3,\n  CIDFONTTYPE0C: 4,\n  TRUETYPE: 5,\n  CIDFONTTYPE2: 6,\n  TYPE3: 7,\n  OPENTYPE: 8,\n  TYPE0: 9,\n  MMTYPE1: 10\n};\n\nglobalScope.PDFJS || (globalScope.PDFJS = {}), globalScope.PDFJS.pdfBug = !1, PDFJS.VERBOSITY_LEVELS = {\n  errors: 0,\n  warnings: 1,\n  infos: 5\n};\nvar OPS = PDFJS.OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotations: 78,\n  endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\n\nfunction info(e) {\n  PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.infos && console.log("Info: " + e);\n}\n\nfunction warn(e) {\n  PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.warnings && console.log("Warning: " + e);\n}\n\nfunction error(e) {\n  if (1 < arguments.length) {\n    var t = ["Error:"];\n    t.push.apply(t, arguments), console.log.apply(console, t), e = [].join.call(arguments, " ");\n  } else console.log("Error: " + e);\n\n  throw console.log(backtrace()), UnsupportedManager.notify(UNSUPPORTED_FEATURES.unknown), new Error(e);\n}\n\nfunction backtrace() {\n  try {\n    throw new Error();\n  } catch (t) {\n    return t.stack ? t.stack.split("\\n").slice(2).join("\\n") : "";\n  }\n}\n\nfunction assert(e, t) {\n  e || error(t);\n}\n\nvar UNSUPPORTED_FEATURES = PDFJS.UNSUPPORTED_FEATURES = {\n  unknown: "unknown",\n  forms: "forms",\n  javaScript: "javaScript",\n  smask: "smask",\n  shadingPattern: "shadingPattern",\n  font: "font"\n},\n    UnsupportedManager = PDFJS.UnsupportedManager = function () {\n  var e = [];\n  return {\n    listen: function listen(t) {\n      e.push(t);\n    },\n    notify: function notify(t) {\n      warn("Unsupported feature \\"" + t + "\\"");\n\n      for (var n = 0, s = e.length; n < s; n++) {\n        e[n](t);\n      }\n    }\n  };\n}();\n\nfunction combineUrl(e, t) {\n  if (!t) return e;\n  if (/^[a-z][a-z0-9+\\-.]*:/i.test(t)) return t;\n  var n;\n  if ("/" === t.charAt(0)) return n = e.indexOf("://"), "/" === t.charAt(1) ? ++n : n = e.indexOf("/", n + 3), e.substring(0, n) + t;\n  var s = e.length;\n  n = e.lastIndexOf("#"), s = 0 <= n ? n : s, n = e.lastIndexOf("?", s), s = 0 <= n ? n : s;\n  var r = e.lastIndexOf("/", s);\n  return e.substring(0, r + 1) + t;\n}\n\nfunction isValidUrl(e, t) {\n  if (!e) return !1;\n  var n = /^[a-z][a-z0-9+\\-.]*(?=:)/i.exec(e);\n  return n ? (n = n[0].toLowerCase(), "http" === n || "https" === n || "ftp" === n || "mailto" === n || "tel" === n) : t;\n}\n\nPDFJS.isValidUrl = isValidUrl;\n\nfunction shadow(e, t, n) {\n  return Object.defineProperty(e, t, {\n    value: n,\n    enumerable: !0,\n    configurable: !0,\n    writable: !1\n  }), n;\n}\n\nPDFJS.shadow = shadow;\n\nvar PasswordResponses = PDFJS.PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n},\n    PasswordException = function () {\n  function e(e, t) {\n    this.name = "PasswordException", this.message = e, this.code = t;\n  }\n\n  return e.prototype = new Error(), e.constructor = e, e;\n}();\n\nPDFJS.PasswordException = PasswordException;\n\nvar UnknownErrorException = function () {\n  function e(e, t) {\n    this.name = "UnknownErrorException", this.message = e, this.details = t;\n  }\n\n  return e.prototype = new Error(), e.constructor = e, e;\n}();\n\nPDFJS.UnknownErrorException = UnknownErrorException;\n\nvar InvalidPDFException = function () {\n  function e(e) {\n    this.name = "InvalidPDFException", this.message = e;\n  }\n\n  return e.prototype = new Error(), e.constructor = e, e;\n}();\n\nPDFJS.InvalidPDFException = InvalidPDFException;\n\nvar MissingPDFException = function () {\n  function e(e) {\n    this.name = "MissingPDFException", this.message = e;\n  }\n\n  return e.prototype = new Error(), e.constructor = e, e;\n}();\n\nPDFJS.MissingPDFException = MissingPDFException;\n\nvar UnexpectedResponseException = function () {\n  function e(e, t) {\n    this.name = "UnexpectedResponseException", this.message = e, this.status = t;\n  }\n\n  return e.prototype = new Error(), e.constructor = e, e;\n}();\n\nPDFJS.UnexpectedResponseException = UnexpectedResponseException;\n\nvar NotImplementedException = function () {\n  function e(e) {\n    this.message = e;\n  }\n\n  return e.prototype = new Error(), e.prototype.name = "NotImplementedException", e.constructor = e, e;\n}(),\n    MissingDataException = function () {\n  function e(e, t) {\n    this.begin = e, this.end = t, this.message = "Missing data [" + e + ", " + t + ")";\n  }\n\n  return e.prototype = new Error(), e.prototype.name = "MissingDataException", e.constructor = e, e;\n}(),\n    XRefParseException = function () {\n  function e(e) {\n    this.message = e;\n  }\n\n  return e.prototype = new Error(), e.prototype.name = "XRefParseException", e.constructor = e, e;\n}();\n\nfunction bytesToString(e) {\n  assert(null !== e && "object" == _typeof(e) && e.length !== void 0, "Invalid argument for bytesToString");\n  var t = e.length,\n      n = 8192;\n  if (t < n) return String.fromCharCode.apply(null, e);\n\n  for (var s = [], r = 0; r < t; r += n) {\n    var o = Math.min(r + n, t),\n        a = e.subarray(r, o);\n    s.push(String.fromCharCode.apply(null, a));\n  }\n\n  return s.join("");\n}\n\nfunction stringToBytes(e) {\n  assert("string" == typeof e, "Invalid argument for stringToBytes");\n\n  for (var t = e.length, n = new Uint8Array(t), s = 0; s < t; ++s) {\n    n[s] = 255 & e.charCodeAt(s);\n  }\n\n  return n;\n}\n\nfunction string32(e) {\n  return String.fromCharCode(255 & e >> 24, 255 & e >> 16, 255 & e >> 8, 255 & e);\n}\n\nfunction log2(e) {\n  for (var t = 1, s = 0; e > t;) {\n    t <<= 1, s++;\n  }\n\n  return s;\n}\n\nfunction readInt8(e, t) {\n  return e[t] << 24 >> 24;\n}\n\nfunction readUint16(e, t) {\n  return e[t] << 8 | e[t + 1];\n}\n\nfunction readUint32(e, t) {\n  return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0;\n}\n\nfunction isLittleEndian() {\n  var e = new Uint8Array(2);\n  e[0] = 1;\n  var t = new Uint16Array(e.buffer);\n  return 1 === t[0];\n}\n\nObject.defineProperty(PDFJS, "isLittleEndian", {\n  configurable: !0,\n  get: function get() {\n    return shadow(PDFJS, "isLittleEndian", isLittleEndian());\n  }\n});\n\nfunction hasCanvasTypedArrays() {\n  var e = document.createElement("canvas");\n  e.width = e.height = 1;\n  var t = e.getContext("2d"),\n      n = t.createImageData(1, 1);\n  return "undefined" != typeof n.data.buffer;\n}\n\nObject.defineProperty(PDFJS, "hasCanvasTypedArrays", {\n  configurable: !0,\n  get: function get() {\n    return shadow(PDFJS, "hasCanvasTypedArrays", hasCanvasTypedArrays());\n  }\n});\n\nvar Uint32ArrayView = function () {\n  function e(e, t) {\n    this.buffer = e, this.byteLength = e.length, this.length = t === void 0 ? this.byteLength >> 2 : t, n(this.length);\n  }\n\n  function t(e) {\n    return {\n      get: function get() {\n        var t = this.buffer,\n            n = e << 2;\n        return (t[n] | t[n + 1] << 8 | t[n + 2] << 16 | t[n + 3] << 24) >>> 0;\n      },\n      set: function set(t) {\n        var n = this.buffer,\n            i = e << 2;\n        n[i] = 255 & t, n[i + 1] = 255 & t >> 8, n[i + 2] = 255 & t >> 16, n[i + 3] = 255 & t >>> 24;\n      }\n    };\n  }\n\n  function n(n) {\n    for (; i < n;) {\n      Object.defineProperty(e.prototype, i, t(i)), i++;\n    }\n  }\n\n  e.prototype = Object.create(null);\n  var i = 0;\n  return e;\n}(),\n    IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0],\n    Util = PDFJS.Util = function () {\n  function e() {}\n\n  var t = ["rgb(", 0, ",", 0, ",", 0, ")"];\n  return e.makeCssRgb = function (e, n, i) {\n    return t[1] = e, t[3] = n, t[5] = i, t.join("");\n  }, e.transform = function (e, t) {\n    return [e[0] * t[0] + e[2] * t[1], e[1] * t[0] + e[3] * t[1], e[0] * t[2] + e[2] * t[3], e[1] * t[2] + e[3] * t[3], e[0] * t[4] + e[2] * t[5] + e[4], e[1] * t[4] + e[3] * t[5] + e[5]];\n  }, e.applyTransform = function (e, t) {\n    var n = e[0] * t[0] + e[1] * t[2] + t[4],\n        i = e[0] * t[1] + e[1] * t[3] + t[5];\n    return [n, i];\n  }, e.applyInverseTransform = function (e, t) {\n    var n = t[0] * t[3] - t[1] * t[2],\n        i = (e[0] * t[3] - e[1] * t[2] + t[2] * t[5] - t[4] * t[3]) / n,\n        s = (-e[0] * t[1] + e[1] * t[0] + t[4] * t[1] - t[5] * t[0]) / n;\n    return [i, s];\n  }, e.getAxialAlignedBoundingBox = function (t, n) {\n    var i = e.applyTransform(t, n),\n        s = e.applyTransform(t.slice(2, 4), n),\n        r = e.applyTransform([t[0], t[3]], n),\n        o = e.applyTransform([t[2], t[1]], n);\n    return [Math.min(i[0], s[0], r[0], o[0]), Math.min(i[1], s[1], r[1], o[1]), Math.max(i[0], s[0], r[0], o[0]), Math.max(i[1], s[1], r[1], o[1])];\n  }, e.inverseTransform = function (e) {\n    var t = e[0] * e[3] - e[1] * e[2];\n    return [e[3] / t, -e[1] / t, -e[2] / t, e[0] / t, (e[2] * e[5] - e[4] * e[3]) / t, (e[4] * e[1] - e[5] * e[0]) / t];\n  }, e.apply3dTransform = function (e, t) {\n    return [e[0] * t[0] + e[1] * t[1] + e[2] * t[2], e[3] * t[0] + e[4] * t[1] + e[5] * t[2], e[6] * t[0] + e[7] * t[1] + e[8] * t[2]];\n  }, e.singularValueDecompose2dScale = function (e) {\n    var t = [e[0], e[2], e[1], e[3]],\n        n = e[0] * t[0] + e[1] * t[2],\n        i = e[0] * t[1] + e[1] * t[3],\n        s = e[2] * t[0] + e[3] * t[2],\n        r = e[2] * t[1] + e[3] * t[3],\n        o = (n + r) / 2,\n        a = Math.sqrt((n + r) * (n + r) - 4 * (n * r - s * i)) / 2;\n    return [Math.sqrt(o + a || 1), Math.sqrt(o - a || 1)];\n  }, e.normalizeRect = function (e) {\n    var t = e.slice(0);\n    return e[0] > e[2] && (t[0] = e[2], t[2] = e[0]), e[1] > e[3] && (t[1] = e[3], t[3] = e[1]), t;\n  }, e.intersect = function (t, n) {\n    function i(e, t) {\n      return e - t;\n    }\n\n    var s = [t[0], t[2], n[0], n[2]].sort(i),\n        r = [t[1], t[3], n[1], n[3]].sort(i),\n        o = [];\n    if (t = e.normalizeRect(t), n = e.normalizeRect(n), s[0] === t[0] && s[1] === n[0] || s[0] === n[0] && s[1] === t[0]) o[0] = s[1], o[2] = s[2];else return !1;\n    if (r[0] === t[1] && r[1] === n[1] || r[0] === n[1] && r[1] === t[1]) o[1] = r[1], o[3] = r[2];else return !1;\n    return o;\n  }, e.sign = function (e) {\n    return 0 > e ? -1 : 1;\n  }, e.appendToArray = function (e, t) {\n    Array.prototype.push.apply(e, t);\n  }, e.prependToArray = function (e, t) {\n    Array.prototype.unshift.apply(e, t);\n  }, e.extendObj = function (e, t) {\n    for (var n in t) {\n      e[n] = t[n];\n    }\n  }, e.getInheritableProperty = function (e, t) {\n    for (; e && !e.has(t);) {\n      e = e.get("Parent");\n    }\n\n    return e ? e.get(t) : null;\n  }, e.inherit = function (e, t, n) {\n    for (var i in e.prototype = Object.create(t.prototype), e.prototype.constructor = e, n) {\n      e.prototype[i] = n[i];\n    }\n  }, e.loadScript = function (e, t) {\n    var n = document.createElement("script"),\n        i = !1;\n    n.setAttribute("src", e), t && (n.onload = function () {\n      i || t(), i = !0;\n    }), document.getElementsByTagName("head")[0].appendChild(n);\n  }, e;\n}(),\n    PageViewport = PDFJS.PageViewport = function () {\n  function e(e, t, n, i, s, r) {\n    this.viewBox = e, this.scale = t, this.rotation = n, this.offsetX = i, this.offsetY = s;\n    var o,\n        a,\n        c,\n        l,\n        d = (e[2] + e[0]) / 2,\n        p = (e[3] + e[1]) / 2;\n\n    switch (n %= 360, n = 0 > n ? n + 360 : n, n) {\n      case 180:\n        o = -1, a = 0, c = 0, l = 1;\n        break;\n\n      case 90:\n        o = 0, a = 1, c = 1, l = 0;\n        break;\n\n      case 270:\n        o = 0, a = -1, c = -1, l = 0;\n        break;\n\n      default:\n        o = 1, a = 0, c = 0, l = -1;\n    }\n\n    r && (c = -c, l = -l);\n    var m, h, g, u;\n    0 === o ? (m = Math.abs(p - e[1]) * t + i, h = Math.abs(d - e[0]) * t + s, g = Math.abs(e[3] - e[1]) * t, u = Math.abs(e[2] - e[0]) * t) : (m = Math.abs(d - e[0]) * t + i, h = Math.abs(p - e[1]) * t + s, g = Math.abs(e[2] - e[0]) * t, u = Math.abs(e[3] - e[1]) * t), this.transform = [o * t, a * t, c * t, l * t, m - o * t * d - c * t * p, h - a * t * d - l * t * p], this.width = g, this.height = u, this.fontScale = t;\n  }\n\n  return e.prototype = {\n    clone: function clone(t) {\n      t = t || {};\n      var n = "scale" in t ? t.scale : this.scale,\n          i = "rotation" in t ? t.rotation : this.rotation;\n      return new e(this.viewBox.slice(), n, i, this.offsetX, this.offsetY, t.dontFlip);\n    },\n    convertToViewportPoint: function convertToViewportPoint(e, t) {\n      return Util.applyTransform([e, t], this.transform);\n    },\n    convertToViewportRectangle: function convertToViewportRectangle(e) {\n      var t = Util.applyTransform([e[0], e[1]], this.transform),\n          n = Util.applyTransform([e[2], e[3]], this.transform);\n      return [t[0], t[1], n[0], n[1]];\n    },\n    convertToPdfPoint: function convertToPdfPoint(e, t) {\n      return Util.applyInverseTransform([e, t], this.transform);\n    }\n  }, e;\n}(),\n    PDFStringTranslateTable = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 728, 711, 710, 729, 733, 731, 730, 732, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8226, 8224, 8225, 8230, 8212, 8211, 402, 8260, 8249, 8250, 8722, 8240, 8222, 8220, 8221, 8216, 8217, 8218, 8482, 64257, 64258, 321, 338, 352, 376, 381, 305, 322, 339, 353, 382, 0, 8364];\n\nfunction stringToPDFString(e) {\n  var t,\n      s = e.length,\n      n = [];\n  if ("\\xFE" === e[0] && "\\xFF" === e[1]) for (t = 2; t < s; t += 2) {\n    n.push(String.fromCharCode(e.charCodeAt(t) << 8 | e.charCodeAt(t + 1)));\n  } else for (t = 0; t < s; ++t) {\n    var r = PDFStringTranslateTable[e.charCodeAt(t)];\n    n.push(r ? String.fromCharCode(r) : e.charAt(t));\n  }\n  return n.join("");\n}\n\nfunction stringToUTF8String(e) {\n  return decodeURIComponent(escape(e));\n}\n\nfunction isEmptyObj(e) {\n  for (var t in e) {\n    return !1;\n  }\n\n  return !0;\n}\n\nfunction isBool(e) {\n  return "boolean" == typeof e;\n}\n\nfunction isInt(e) {\n  return "number" == typeof e && (0 | e) === e;\n}\n\nfunction isNum(e) {\n  return "number" == typeof e;\n}\n\nfunction isString(e) {\n  return "string" == typeof e;\n}\n\nfunction isName(e) {\n  return e instanceof Name;\n}\n\nfunction isCmd(e, t) {\n  return e instanceof Cmd && (t === void 0 || e.cmd === t);\n}\n\nfunction isDict(e, t) {\n  if (!(e instanceof Dict)) return !1;\n  if (!t) return !0;\n  var n = e.get("Type");\n  return isName(n) && n.name === t;\n}\n\nfunction isArray(e) {\n  return e instanceof Array;\n}\n\nfunction isStream(e) {\n  return "object" == _typeof(e) && null !== e && e.getBytes !== void 0;\n}\n\nfunction isArrayBuffer(e) {\n  return "object" == _typeof(e) && null !== e && e.byteLength !== void 0;\n}\n\nfunction isRef(e) {\n  return e instanceof Ref;\n}\n\nfunction createPromiseCapability() {\n  var e = {};\n  return e.promise = new Promise(function (t, n) {\n    e.resolve = t, e.reject = n;\n  }), e;\n}\n\nPDFJS.createPromiseCapability = createPromiseCapability, function () {\n  function e(e) {\n    this._status = 0, this._handlers = [];\n\n    try {\n      e.call(this, this._resolve.bind(this), this._reject.bind(this));\n    } catch (t) {\n      this._reject(t);\n    }\n  }\n\n  if (globalScope.Promise) return "function" != typeof globalScope.Promise.all && (globalScope.Promise.all = function (e) {\n    var t,\n        n,\n        s = 0,\n        r = [],\n        o = new globalScope.Promise(function (e, i) {\n      t = e, n = i;\n    });\n    return e.forEach(function (e, o) {\n      s++, e.then(function (e) {\n        r[o] = e, s--, 0 === s && t(r);\n      }, n);\n    }), 0 == s && t(r), o;\n  }), "function" != typeof globalScope.Promise.resolve && (globalScope.Promise.resolve = function (e) {\n    return new globalScope.Promise(function (t) {\n      t(e);\n    });\n  }), "function" != typeof globalScope.Promise.reject && (globalScope.Promise.reject = function (e) {\n    return new globalScope.Promise(function (t, n) {\n      n(e);\n    });\n  }), void ("function" != typeof globalScope.Promise.prototype["catch"] && (globalScope.Promise.prototype["catch"] = function (e) {\n    return globalScope.Promise.prototype.then(void 0, e);\n  }));\n  var t = 1,\n      n = 2,\n      s = 500,\n      r = {\n    handlers: [],\n    running: !1,\n    unhandledRejections: [],\n    pendingRejectionCheck: !1,\n    scheduleHandlers: function scheduleHandlers(e) {\n      0 !== e._status && (this.handlers = this.handlers.concat(e._handlers), e._handlers = [], this.running || (this.running = !0, setTimeout(this.runHandlers.bind(this), 0)));\n    },\n    runHandlers: function runHandlers() {\n      for (var e = Date.now() + 1; 0 < this.handlers.length;) {\n        var i = this.handlers.shift(),\n            s = i.thisPromise._status,\n            r = i.thisPromise._value;\n\n        try {\n          s === t ? "function" == typeof i.onResolve && (r = i.onResolve(r)) : "function" == typeof i.onReject && (r = i.onReject(r), s = t, i.thisPromise._unhandledRejection && this.removeUnhandeledRejection(i.thisPromise));\n        } catch (e) {\n          s = n, r = e;\n        }\n\n        if (i.nextPromise._updateStatus(s, r), Date.now() >= e) break;\n      }\n\n      return 0 < this.handlers.length ? void setTimeout(this.runHandlers.bind(this), 0) : void (this.running = !1);\n    },\n    addUnhandledRejection: function addUnhandledRejection(e) {\n      this.unhandledRejections.push({\n        promise: e,\n        time: Date.now()\n      }), this.scheduleRejectionCheck();\n    },\n    removeUnhandeledRejection: function removeUnhandeledRejection(e) {\n      e._unhandledRejection = !1;\n\n      for (var t = 0; t < this.unhandledRejections.length; t++) {\n        this.unhandledRejections[t].promise === e && (this.unhandledRejections.splice(t), t--);\n      }\n    },\n    scheduleRejectionCheck: function scheduleRejectionCheck() {\n      this.pendingRejectionCheck || (this.pendingRejectionCheck = !0, setTimeout(function () {\n        this.pendingRejectionCheck = !1;\n\n        for (var e = Date.now(), t = 0; t < this.unhandledRejections.length; t++) {\n          if (e - this.unhandledRejections[t].time > s) {\n            var n = this.unhandledRejections[t].promise._value,\n                r = "Unhandled rejection: " + n;\n            n.stack && (r += "\\n" + n.stack), warn(r), this.unhandledRejections.splice(t), t--;\n          }\n        }\n\n        this.unhandledRejections.length && this.scheduleRejectionCheck();\n      }.bind(this), s));\n    }\n  };\n  e.all = function (t) {\n    function s(e) {\n      a._status === n || (l = [], o(e));\n    }\n\n    var r,\n        o,\n        a = new e(function (e, t) {\n      r = e, o = t;\n    }),\n        c = t.length,\n        l = [];\n    if (0 === c) return r(l), a;\n\n    for (var d = 0, p = t.length; d < p; ++d) {\n      var m = t[d],\n          h = function (e) {\n        return function (t) {\n          a._status === n || (l[e] = t, c--, 0 === c && r(l));\n        };\n      }(d);\n\n      e.isPromise(m) ? m.then(h, s) : h(m);\n    }\n\n    return a;\n  }, e.isPromise = function (e) {\n    return e && "function" == typeof e.then;\n  }, e.resolve = function (t) {\n    return new e(function (e) {\n      e(t);\n    });\n  }, e.reject = function (t) {\n    return new e(function (e, n) {\n      n(t);\n    });\n  }, e.prototype = {\n    _status: null,\n    _value: null,\n    _handlers: null,\n    _unhandledRejection: null,\n    _updateStatus: function _updateStatus(i, s) {\n      return this._status === t || this._status === n ? void 0 : i === t && e.isPromise(s) ? void s.then(this._updateStatus.bind(this, t), this._updateStatus.bind(this, n)) : void (this._status = i, this._value = s, i === n && 0 === this._handlers.length && (this._unhandledRejection = !0, r.addUnhandledRejection(this)), r.scheduleHandlers(this));\n    },\n    _resolve: function _resolve(e) {\n      this._updateStatus(t, e);\n    },\n    _reject: function _reject(e) {\n      this._updateStatus(n, e);\n    },\n    then: function then(t, n) {\n      var i = new e(function (e, t) {\n        this.resolve = e, this.reject = t;\n      });\n      return this._handlers.push({\n        thisPromise: this,\n        onResolve: t,\n        onReject: n,\n        nextPromise: i\n      }), r.scheduleHandlers(this), i;\n    },\n    "catch": function _catch(e) {\n      return this.then(void 0, e);\n    }\n  }, globalScope.Promise = e;\n}();\n\nvar StatTimer = function () {\n  function e(e, t, n) {\n    for (; e.length < n;) {\n      e += t;\n    }\n\n    return e;\n  }\n\n  function t() {\n    this.started = {}, this.times = [], this.enabled = !0;\n  }\n\n  return t.prototype = {\n    time: function time(e) {\n      this.enabled && (e in this.started && warn("Timer is already running for " + e), this.started[e] = Date.now());\n    },\n    timeEnd: function timeEnd(e) {\n      this.enabled && (!(e in this.started) && warn("Timer has not been started for " + e), this.times.push({\n        name: e,\n        start: this.started[e],\n        end: Date.now()\n      }), delete this.started[e]);\n    },\n    toString: function toString() {\n      var t,\n          n,\n          s = this.times,\n          r = "",\n          o = 0;\n\n      for (t = 0, n = s.length; t < n; ++t) {\n        var a = s[t].name;\n        a.length > o && (o = a.length);\n      }\n\n      for (t = 0, n = s.length; t < n; ++t) {\n        var c = s[t],\n            l = c.end - c.start;\n        r += e(c.name, " ", o) + " " + l + "ms\\n";\n      }\n\n      return r;\n    }\n  }, t;\n}();\n\nPDFJS.createBlob = function (e, t) {\n  if ("undefined" != typeof Blob) return new Blob([e], {\n    type: t\n  });\n  var n = new MozBlobBuilder();\n  return n.append(e), n.getBlob(t);\n}, PDFJS.createObjectURL = function () {\n  return function (e, t) {\n    if (!PDFJS.disableCreateObjectURL && "undefined" != typeof URL && URL.createObjectURL) {\n      var n = PDFJS.createBlob(e, t);\n      return URL.createObjectURL(n);\n    }\n\n    for (var s = "data:" + t + ";base64,", r = 0, o = e.length; r < o; r += 3) {\n      var a = 255 & e[r],\n          c = 255 & e[r + 1],\n          l = 255 & e[r + 2],\n          d = r + 1 < o ? (15 & c) << 2 | l >> 6 : 64,\n          p = r + 2 < o ? 63 & l : 64;\n      s += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[a >> 2] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[(3 & a) << 4 | c >> 4] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[d] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[p];\n    }\n\n    return s;\n  };\n}();\n\nfunction MessageHandler(e, t) {\n  this.name = e, this.comObj = t, this.callbackIndex = 1, this.postMessageTransfers = !0;\n  var n = this.callbacksCapabilities = {},\n      i = this.actionHandler = {};\n  i.console_log = [function (e) {\n    console.log.apply(console, e);\n  }], i.console_error = [function (e) {\n    console.error.apply(console, e);\n  }], i._unsupported_feature = [function (e) {\n    UnsupportedManager.notify(e);\n  }], t.onmessage = function (e) {\n    var s = e.data;\n\n    if (s.isReply) {\n      var r = s.callbackId;\n\n      if (s.callbackId in n) {\n        var o = n[r];\n        delete n[r], "error" in s ? o.reject(s.error) : o.resolve(s.data);\n      } else error("Cannot resolve callback " + r);\n    } else if (s.action in i) {\n      var a = i[s.action];\n      s.callbackId ? Promise.resolve().then(function () {\n        return a[0].call(a[1], s.data);\n      }).then(function (e) {\n        t.postMessage({\n          isReply: !0,\n          callbackId: s.callbackId,\n          data: e\n        });\n      }, function (e) {\n        t.postMessage({\n          isReply: !0,\n          callbackId: s.callbackId,\n          error: e\n        });\n      }) : a[0].call(a[1], s.data);\n    } else error("Unknown action from worker: " + s.action);\n  };\n}\n\nMessageHandler.prototype = {\n  on: function on(e, t, n) {\n    var i = this.actionHandler;\n    i[e] && error("There is already an actionName called \\"" + e + "\\""), i[e] = [t, n];\n  },\n  send: function send(e, t, n) {\n    this.postMessage({\n      action: e,\n      data: t\n    }, n);\n  },\n  sendWithPromise: function sendWithPromise(e, t, n) {\n    var i = this.callbackIndex++,\n        s = createPromiseCapability();\n    this.callbacksCapabilities[i] = s;\n\n    try {\n      this.postMessage({\n        action: e,\n        data: t,\n        callbackId: i\n      }, n);\n    } catch (t) {\n      s.reject(t);\n    }\n\n    return s.promise;\n  },\n  postMessage: function postMessage(e, t) {\n    t && this.postMessageTransfers ? this.comObj.postMessage(e, t) : this.comObj.postMessage(e);\n  }\n};\n\nfunction loadJpegStream(e, t, n) {\n  var i = new Image();\n  i.onload = function () {\n    n.resolve(e, i);\n  }, i.onerror = function () {\n    n.resolve(e, null), warn("Error during JPEG image loading");\n  }, i.src = t;\n}\n\nvar ArithmeticDecoder = function () {\n  function e(e, t, n) {\n    this.data = e, this.bp = t, this.dataEnd = n, this.chigh = e[t], this.clow = 0, this.byteIn(), this.chigh = 65535 & this.chigh << 7 | 127 & this.clow >> 9, this.clow = 65535 & this.clow << 7, this.ct -= 7, this.a = 32768;\n  }\n\n  var t = [{\n    qe: 22017,\n    nmps: 1,\n    nlps: 1,\n    switchFlag: 1\n  }, {\n    qe: 13313,\n    nmps: 2,\n    nlps: 6,\n    switchFlag: 0\n  }, {\n    qe: 6145,\n    nmps: 3,\n    nlps: 9,\n    switchFlag: 0\n  }, {\n    qe: 2753,\n    nmps: 4,\n    nlps: 12,\n    switchFlag: 0\n  }, {\n    qe: 1313,\n    nmps: 5,\n    nlps: 29,\n    switchFlag: 0\n  }, {\n    qe: 545,\n    nmps: 38,\n    nlps: 33,\n    switchFlag: 0\n  }, {\n    qe: 22017,\n    nmps: 7,\n    nlps: 6,\n    switchFlag: 1\n  }, {\n    qe: 21505,\n    nmps: 8,\n    nlps: 14,\n    switchFlag: 0\n  }, {\n    qe: 18433,\n    nmps: 9,\n    nlps: 14,\n    switchFlag: 0\n  }, {\n    qe: 14337,\n    nmps: 10,\n    nlps: 14,\n    switchFlag: 0\n  }, {\n    qe: 12289,\n    nmps: 11,\n    nlps: 17,\n    switchFlag: 0\n  }, {\n    qe: 9217,\n    nmps: 12,\n    nlps: 18,\n    switchFlag: 0\n  }, {\n    qe: 7169,\n    nmps: 13,\n    nlps: 20,\n    switchFlag: 0\n  }, {\n    qe: 5633,\n    nmps: 29,\n    nlps: 21,\n    switchFlag: 0\n  }, {\n    qe: 22017,\n    nmps: 15,\n    nlps: 14,\n    switchFlag: 1\n  }, {\n    qe: 21505,\n    nmps: 16,\n    nlps: 14,\n    switchFlag: 0\n  }, {\n    qe: 20737,\n    nmps: 17,\n    nlps: 15,\n    switchFlag: 0\n  }, {\n    qe: 18433,\n    nmps: 18,\n    nlps: 16,\n    switchFlag: 0\n  }, {\n    qe: 14337,\n    nmps: 19,\n    nlps: 17,\n    switchFlag: 0\n  }, {\n    qe: 13313,\n    nmps: 20,\n    nlps: 18,\n    switchFlag: 0\n  }, {\n    qe: 12289,\n    nmps: 21,\n    nlps: 19,\n    switchFlag: 0\n  }, {\n    qe: 10241,\n    nmps: 22,\n    nlps: 19,\n    switchFlag: 0\n  }, {\n    qe: 9217,\n    nmps: 23,\n    nlps: 20,\n    switchFlag: 0\n  }, {\n    qe: 8705,\n    nmps: 24,\n    nlps: 21,\n    switchFlag: 0\n  }, {\n    qe: 7169,\n    nmps: 25,\n    nlps: 22,\n    switchFlag: 0\n  }, {\n    qe: 6145,\n    nmps: 26,\n    nlps: 23,\n    switchFlag: 0\n  }, {\n    qe: 5633,\n    nmps: 27,\n    nlps: 24,\n    switchFlag: 0\n  }, {\n    qe: 5121,\n    nmps: 28,\n    nlps: 25,\n    switchFlag: 0\n  }, {\n    qe: 4609,\n    nmps: 29,\n    nlps: 26,\n    switchFlag: 0\n  }, {\n    qe: 4353,\n    nmps: 30,\n    nlps: 27,\n    switchFlag: 0\n  }, {\n    qe: 2753,\n    nmps: 31,\n    nlps: 28,\n    switchFlag: 0\n  }, {\n    qe: 2497,\n    nmps: 32,\n    nlps: 29,\n    switchFlag: 0\n  }, {\n    qe: 2209,\n    nmps: 33,\n    nlps: 30,\n    switchFlag: 0\n  }, {\n    qe: 1313,\n    nmps: 34,\n    nlps: 31,\n    switchFlag: 0\n  }, {\n    qe: 1089,\n    nmps: 35,\n    nlps: 32,\n    switchFlag: 0\n  }, {\n    qe: 673,\n    nmps: 36,\n    nlps: 33,\n    switchFlag: 0\n  }, {\n    qe: 545,\n    nmps: 37,\n    nlps: 34,\n    switchFlag: 0\n  }, {\n    qe: 321,\n    nmps: 38,\n    nlps: 35,\n    switchFlag: 0\n  }, {\n    qe: 273,\n    nmps: 39,\n    nlps: 36,\n    switchFlag: 0\n  }, {\n    qe: 133,\n    nmps: 40,\n    nlps: 37,\n    switchFlag: 0\n  }, {\n    qe: 73,\n    nmps: 41,\n    nlps: 38,\n    switchFlag: 0\n  }, {\n    qe: 37,\n    nmps: 42,\n    nlps: 39,\n    switchFlag: 0\n  }, {\n    qe: 21,\n    nmps: 43,\n    nlps: 40,\n    switchFlag: 0\n  }, {\n    qe: 9,\n    nmps: 44,\n    nlps: 41,\n    switchFlag: 0\n  }, {\n    qe: 5,\n    nmps: 45,\n    nlps: 42,\n    switchFlag: 0\n  }, {\n    qe: 1,\n    nmps: 45,\n    nlps: 43,\n    switchFlag: 0\n  }, {\n    qe: 22017,\n    nmps: 46,\n    nlps: 46,\n    switchFlag: 0\n  }];\n  return e.prototype = {\n    byteIn: function byteIn() {\n      var e = this.data,\n          t = this.bp;\n\n      if (255 === e[t]) {\n        var n = e[t + 1];\n        143 < n ? (this.clow += 65280, this.ct = 8) : (t++, this.clow += e[t] << 9, this.ct = 7, this.bp = t);\n      } else t++, this.clow += t < this.dataEnd ? e[t] << 8 : 65280, this.ct = 8, this.bp = t;\n\n      65535 < this.clow && (this.chigh += this.clow >> 16, this.clow &= 65535);\n    },\n    readBit: function readBit(e, n) {\n      var i,\n          s = e[n] >> 1,\n          r = 1 & e[n],\n          o = t[s],\n          c = o.qe,\n          l = this.a - c;\n      if (this.chigh < c) l < c ? (l = c, i = r, s = o.nmps) : (l = c, i = 1 ^ r, 1 === o.switchFlag && (r = i), s = o.nlps);else {\n        if (this.chigh -= c, 0 != (32768 & l)) return this.a = l, r;\n        l < c ? (i = 1 ^ r, 1 === o.switchFlag && (r = i), s = o.nlps) : (i = r, s = o.nmps);\n      }\n\n      do {\n        0 === this.ct && this.byteIn(), l <<= 1, this.chigh = 65535 & this.chigh << 1 | 1 & this.clow >> 15, this.clow = 65535 & this.clow << 1, this.ct--;\n      } while (0 == (32768 & l));\n\n      return this.a = l, e[n] = s << 1 | r, i;\n    }\n  }, e;\n}();\n\nself.addEventListener("message", function (e) {\n  var t = new JpxImage();\n  t.parse(e.data.buffer);\n  var n = t.tiles[0].items;\n  self.postMessage([n]);\n}, !1);'},43:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r='function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nvar JpegImage = function () {\n  function a() {}\n\n  function b(a, b) {\n    for (var c, d, e = 0, f = [], g = 16; 0 < g && !a[g - 1];) {\n      g--;\n    }\n\n    f.push({\n      children: [],\n      index: 0\n    });\n    var h,\n        l = f[0];\n\n    for (c = 0; c < g; c++) {\n      for (d = 0; d < a[c]; d++) {\n        for (l = f.pop(), l.children[l.index] = b[e]; 0 < l.index;) {\n          l = f.pop();\n        }\n\n        for (l.index++, f.push(l); f.length <= c;) {\n          f.push(h = {\n            children: [],\n            index: 0\n          }), l.children[l.index] = h.children, l = h;\n        }\n\n        e++;\n      }\n\n      c + 1 < g && (f.push(h = {\n        children: [],\n        index: 0\n      }), l.children[l.index] = h.children, l = h);\n    }\n\n    return f[0].children;\n  }\n\n  function c(a, b, c) {\n    return 64 * ((a.blocksPerLine + 1) * b + c);\n  }\n\n  function d(a, b, d, e, f, g, l, m, o) {\n    function p() {\n      if (0 < M) return M--, 1 & L >> M;\n\n      if (L = a[b++], 255 === L) {\n        var c = a[b++];\n        if (c) throw "unexpected marker: " + (L << 8 | c).toString(16);\n      }\n\n      return M = 7, L >>> 7;\n    }\n\n    function q(a) {\n      for (var b = a;;) {\n        if (b = b[p()], "number" == typeof b) return b;\n        if ("object" != _typeof(b)) throw "invalid huffman sequence";\n      }\n    }\n\n    function t(a) {\n      for (var b = 0; 0 < a;) {\n        b = b << 1 | p(), a--;\n      }\n\n      return b;\n    }\n\n    function u(a) {\n      if (1 === a) return 1 === p() ? 1 : -1;\n      var b = t(a);\n      return b >= 1 << a - 1 ? b : b + (-1 << a) + 1;\n    }\n\n    function w(a, b) {\n      var c = q(a.huffmanTableDC),\n          d = 0 === c ? 0 : u(c);\n      a.blockData[b] = a.pred += d;\n\n      for (var e = 1; 64 > e;) {\n        var f = q(a.huffmanTableAC),\n            g = 15 & f,\n            h = f >> 4;\n\n        if (0 === g) {\n          if (15 > h) break;\n          e += 16;\n          continue;\n        }\n\n        e += h;\n        var j = i[e];\n        a.blockData[b + j] = u(g), e++;\n      }\n    }\n\n    function x(a, b) {\n      var c = q(a.huffmanTableDC),\n          d = 0 === c ? 0 : u(c) << o;\n      a.blockData[b] = a.pred += d;\n    }\n\n    function y(a, b) {\n      a.blockData[b] |= p() << o;\n    }\n\n    function z(a, b) {\n      if (0 < N) return void N--;\n\n      for (var c = g; c <= l;) {\n        var d = q(a.huffmanTableAC),\n            e = 15 & d,\n            f = d >> 4;\n\n        if (0 === e) {\n          if (15 > f) {\n            N = t(f) + (1 << f) - 1;\n            break;\n          }\n\n          c += 16;\n          continue;\n        }\n\n        c += f;\n        var h = i[c];\n        a.blockData[b + h] = u(e) * (1 << o), c++;\n      }\n    }\n\n    function A(a, b) {\n      for (var c, d, e, f = g, h = 0; f <= l;) {\n        switch (e = i[f], O) {\n          case 0:\n            if (d = q(a.huffmanTableAC), c = 15 & d, h = d >> 4, 0 === c) 15 > h ? (N = t(h) + (1 << h), O = 4) : (h = 16, O = 1);else {\n              if (1 !== c) throw "invalid ACn encoding";\n              D = u(c), O = h ? 2 : 3;\n            }\n            continue;\n\n          case 1:\n          case 2:\n            a.blockData[b + e] ? a.blockData[b + e] += p() << o : (h--, 0 === h && (O = 2 === O ? 3 : 0));\n            break;\n\n          case 3:\n            a.blockData[b + e] ? a.blockData[b + e] += p() << o : (a.blockData[b + e] = D << o, O = 0);\n            break;\n\n          case 4:\n            a.blockData[b + e] && (a.blockData[b + e] += p() << o);\n        }\n\n        f++;\n      }\n\n      4 === O && (N--, 0 === N && (O = 0));\n    }\n\n    function B(a, b, d, e, f) {\n      var g = (0 | d / I) * a.v + e,\n          h = d % I * a.h + f,\n          i = c(a, g, h);\n      b(a, i);\n    }\n\n    function C(a, b, d) {\n      var e = 0 | d / a.blocksPerLine,\n          f = d % a.blocksPerLine,\n          g = c(a, e, f);\n      b(a, g);\n    }\n\n    var D,\n        E,\n        F,\n        r,\n        s,\n        G,\n        H,\n        I = d.mcusPerLine,\n        J = d.progressive,\n        K = b,\n        L = 0,\n        M = 0,\n        N = 0,\n        O = 0,\n        P = e.length;\n    H = J ? 0 === g ? 0 === m ? x : y : 0 === m ? z : A : w;\n    var Q,\n        R,\n        S = 0;\n    R = 1 === P ? e[0].blocksPerLine * e[0].blocksPerColumn : I * d.mcusPerColumn, f || (f = R);\n\n    for (var T, U; S < R;) {\n      for (F = 0; F < P; F++) {\n        e[F].pred = 0;\n      }\n\n      if (N = 0, 1 === P) for (E = e[0], G = 0; G < f; G++) {\n        C(E, H, S), S++;\n      } else for (G = 0; G < f; G++) {\n        for (F = 0; F < P; F++) {\n          for (E = e[F], T = E.h, U = E.v, r = 0; r < U; r++) {\n            for (s = 0; s < T; s++) {\n              B(E, H, S, r, s);\n            }\n          }\n        }\n\n        S++;\n      }\n      if (M = 0, Q = a[b] << 8 | a[b + 1], 65280 >= Q) throw "marker was not found";\n      if (65488 <= Q && 65495 >= Q) b += 2;else break;\n    }\n\n    return b - K;\n  }\n\n  function e(a, b, c) {\n    for (var d, e, f, g, h, i, j, l, o, p, q, r, s, u, v, w, x, y = a.quantizationTable, z = a.blockData, A = 0; 64 > A; A += 8) {\n      if (o = z[b + A], p = z[b + A + 1], q = z[b + A + 2], r = z[b + A + 3], s = z[b + A + 4], u = z[b + A + 5], v = z[b + A + 6], w = z[b + A + 7], o *= y[A], 0 == (p | q | r | s | u | v | w)) {\n        x = 5793 * o + 512 >> 10, c[A] = x, c[A + 1] = x, c[A + 2] = x, c[A + 3] = x, c[A + 4] = x, c[A + 5] = x, c[A + 6] = x, c[A + 7] = x;\n        continue;\n      }\n\n      p *= y[A + 1], q *= y[A + 2], r *= y[A + 3], s *= y[A + 4], u *= y[A + 5], v *= y[A + 6], w *= y[A + 7], d = 5793 * o + 128 >> 8, e = 5793 * s + 128 >> 8, f = q, g = v, h = 2896 * (p - w) + 128 >> 8, l = 2896 * (p + w) + 128 >> 8, i = r << 4, j = u << 4, d = d + e + 1 >> 1, e = d - e, x = 3784 * f + 1567 * g + 128 >> 8, f = 1567 * f - 3784 * g + 128 >> 8, g = x, h = h + j + 1 >> 1, j = h - j, l = l + i + 1 >> 1, i = l - i, d = d + g + 1 >> 1, g = d - g, e = e + f + 1 >> 1, f = e - f, x = 2276 * h + 3406 * l + 2048 >> 12, h = 3406 * h - 2276 * l + 2048 >> 12, l = x, x = 799 * i + 4017 * j + 2048 >> 12, i = 4017 * i - 799 * j + 2048 >> 12, j = x, c[A] = d + l, c[A + 7] = d - l, c[A + 1] = e + j, c[A + 6] = e - j, c[A + 2] = f + i, c[A + 5] = f - i, c[A + 3] = g + h, c[A + 4] = g - h;\n    }\n\n    for (var B = 0; 8 > B; ++B) {\n      if (o = c[B], p = c[B + 8], q = c[B + 16], r = c[B + 24], s = c[B + 32], u = c[B + 40], v = c[B + 48], w = c[B + 56], 0 == (p | q | r | s | u | v | w)) {\n        x = 5793 * o + 8192 >> 14, x = x <= k ? 0 : x >= m ? n : x - k >> 4, z[b + B] = x, z[b + B + 8] = x, z[b + B + 16] = x, z[b + B + 24] = x, z[b + B + 32] = x, z[b + B + 40] = x, z[b + B + 48] = x, z[b + B + 56] = x;\n        continue;\n      }\n\n      d = 5793 * o + 2048 >> 12, e = 5793 * s + 2048 >> 12, f = q, g = v, h = 2896 * (p - w) + 2048 >> 12, l = 2896 * (p + w) + 2048 >> 12, i = r, j = u, d = d + e + 1 >> 1, e = d - e, x = 3784 * f + 1567 * g + 2048 >> 12, f = 1567 * f - 3784 * g + 2048 >> 12, g = x, h = h + j + 1 >> 1, j = h - j, l = l + i + 1 >> 1, i = l - i, d = d + g + 1 >> 1, g = d - g, e = e + f + 1 >> 1, f = e - f, x = 2276 * h + 3406 * l + 2048 >> 12, h = 3406 * h - 2276 * l + 2048 >> 12, l = x, x = 799 * i + 4017 * j + 2048 >> 12, i = 4017 * i - 799 * j + 2048 >> 12, j = x, o = d + l, w = d - l, p = e + j, v = e - j, q = f + i, u = f - i, r = g + h, s = g - h, o = o <= k ? 0 : o >= m ? n : o - k >> 4, p = p <= k ? 0 : p >= m ? n : p - k >> 4, q = q <= k ? 0 : q >= m ? n : q - k >> 4, r = r <= k ? 0 : r >= m ? n : r - k >> 4, s = s <= k ? 0 : s >= m ? n : s - k >> 4, u = u <= k ? 0 : u >= m ? n : u - k >> 4, v = v <= k ? 0 : v >= m ? n : v - k >> 4, w = w <= k ? 0 : w >= m ? n : w - k >> 4, z[b + B] = o, z[b + B + 8] = p, z[b + B + 16] = q, z[b + B + 24] = r, z[b + B + 32] = s, z[b + B + 40] = u, z[b + B + 48] = v, z[b + B + 56] = w;\n    }\n  }\n\n  function f(a, b) {\n    for (var d = b.blocksPerLine, f = b.blocksPerColumn, g = new Int32Array(64), h = 0; h < f; h++) {\n      for (var i, j = 0; j < d; j++) {\n        i = c(b, h, j), e(b, i, g);\n      }\n    }\n\n    return b.blockData;\n  }\n\n  function h(b) {\n    return 0 >= b ? 0 : 255 <= b ? 255 : b;\n  }\n\n  var i = new Uint8Array([0, 1, 8, 16, 9, 2, 3, 10, 17, 24, 32, 25, 18, 11, 4, 5, 12, 19, 26, 33, 40, 48, 41, 34, 27, 20, 13, 6, 7, 14, 21, 28, 35, 42, 49, 56, 57, 50, 43, 36, 29, 22, 15, 23, 30, 37, 44, 51, 58, 59, 52, 45, 38, 31, 39, 46, 53, 60, 61, 54, 47, 55, 62, 63]),\n      k = -2056,\n      m = 2024,\n      n = 255;\n  return a.prototype = {\n    parse: function parse(a) {\n      function c() {\n        var b = a[q] << 8 | a[q + 1];\n        return q += 2, b;\n      }\n\n      function e() {\n        var b = c(),\n            d = a.subarray(q, q + b - 2);\n        return q += d.length, d;\n      }\n\n      function g(a) {\n        for (var b = Math.ceil(a.samplesPerLine / 8 / a.maxH), c = Math.ceil(a.scanLines / 8 / a.maxV), d = 0; d < a.components.length; d++) {\n          T = a.components[d];\n          var e = Math.ceil(Math.ceil(a.samplesPerLine / 8) * T.h / a.maxH),\n              f = Math.ceil(Math.ceil(a.scanLines / 8) * T.v / a.maxV),\n              g = b * T.h,\n              h = c * T.v;\n          T.blockData = new Int16Array(64 * h * (g + 1)), T.blocksPerLine = e, T.blocksPerColumn = f;\n        }\n\n        a.mcusPerLine = b, a.mcusPerColumn = c;\n      }\n\n      var o,\n          p,\n          q = 0,\n          r = null,\n          s = null,\n          t = [],\n          u = [],\n          w = [],\n          x = c();\n      if (65496 !== x) throw "SOI not found";\n\n      for (x = c(); 65497 !== x;) {\n        var y, A, B;\n\n        switch (x) {\n          case 65504:\n          case 65505:\n          case 65506:\n          case 65507:\n          case 65508:\n          case 65509:\n          case 65510:\n          case 65511:\n          case 65512:\n          case 65513:\n          case 65514:\n          case 65515:\n          case 65516:\n          case 65517:\n          case 65518:\n          case 65519:\n          case 65534:\n            var C = e();\n            65504 === x && 74 === C[0] && 70 === C[1] && 73 === C[2] && 70 === C[3] && 0 === C[4] && (r = {\n              version: {\n                major: C[5],\n                minor: C[6]\n              },\n              densityUnits: C[7],\n              xDensity: C[8] << 8 | C[9],\n              yDensity: C[10] << 8 | C[11],\n              thumbWidth: C[12],\n              thumbHeight: C[13],\n              thumbData: C.subarray(14, 14 + 3 * C[12] * C[13])\n            }), 65518 === x && 65 === C[0] && 100 === C[1] && 111 === C[2] && 98 === C[3] && 101 === C[4] && (s = {\n              version: C[5] << 8 | C[6],\n              flags0: C[7] << 8 | C[8],\n              flags1: C[9] << 8 | C[10],\n              transformCode: C[11]\n            });\n            break;\n\n          case 65499:\n            for (var D, E = c(), F = E + q - 2; q < F;) {\n              var G = a[q++],\n                  H = new Uint16Array(64);\n              if (0 == G >> 4) for (A = 0; 64 > A; A++) {\n                D = i[A], H[D] = a[q++];\n              } else if (1 == G >> 4) for (A = 0; 64 > A; A++) {\n                D = i[A], H[D] = c();\n              } else throw "DQT: invalid table spec";\n              t[15 & G] = H;\n            }\n\n            break;\n\n          case 65472:\n          case 65473:\n          case 65474:\n            if (o) throw "Only single frame JPEGs supported";\n            c(), o = {}, o.extended = 65473 === x, o.progressive = 65474 === x, o.precision = a[q++];\n            var I = 255 / ((1 << o.precision) - 1);\n            k /= I, m /= I, n /= I, o.scanLines = c(), o.samplesPerLine = c(), o.components = [], o.componentIds = {};\n            var J,\n                K = a[q++],\n                L = 0,\n                M = 0;\n\n            for (y = 0; y < K; y++) {\n              J = a[q];\n              var N = a[q + 1] >> 4,\n                  h = 15 & a[q + 1];\n              L < N && (L = N), M < h && (M = h);\n              var v = a[q + 2];\n              B = o.components.push({\n                h: N,\n                v: h,\n                quantizationTable: t[v],\n                quantizationTableId: v\n              }), o.componentIds[J] = B - 1, q += 3;\n            }\n\n            o.maxH = L, o.maxV = M, g(o);\n            break;\n\n          case 65476:\n            var O = c();\n\n            for (y = 2; y < O;) {\n              var P = a[q++],\n                  Q = new Uint8Array(16),\n                  R = 0;\n\n              for (A = 0; 16 > A; A++, q++) {\n                R += Q[A] = a[q];\n              }\n\n              var S = new Uint8Array(R);\n\n              for (A = 0; A < R; A++, q++) {\n                S[A] = a[q];\n              }\n\n              y += 17 + R, (0 == P >> 4 ? w : u)[15 & P] = b(Q, S);\n            }\n\n            break;\n\n          case 65501:\n            c(), p = c();\n            break;\n\n          case 65498:\n            var T,\n                U = c(),\n                V = a[q++],\n                W = [];\n\n            for (y = 0; y < V; y++) {\n              var X = o.componentIds[a[q++]];\n              T = o.components[X];\n              var Y = a[q++];\n              T.huffmanTableDC = w[Y >> 4], T.huffmanTableAC = u[15 & Y], W.push(T);\n            }\n\n            var Z = a[q++],\n                $ = a[q++],\n                _ = a[q++],\n                aa = d(a, q, o, W, p, Z, $, _ >> 4, 15 & _);\n            q += aa;\n            break;\n\n          case 65535:\n            255 !== a[q] && q--;\n            break;\n\n          default:\n            if (255 === a[q - 3] && 192 <= a[q - 2] && 254 >= a[q - 2]) {\n              q -= 3;\n              break;\n            }\n\n            throw "unknown JPEG marker " + x.toString(16);\n        }\n\n        x = c();\n      }\n\n      for (this.width = o.samplesPerLine, this.height = o.scanLines, this.jfif = r, this.adobe = s, this.components = [], y = 0; y < o.components.length; y++) {\n        T = o.components[y], T.quantizationTable || null == T.quantizationTableId || (T.quantizationTable = t[T.quantizationTableId]), this.components.push({\n          output: f(o, T),\n          scaleX: T.h / o.maxH,\n          scaleY: T.v / o.maxV,\n          blocksPerLine: T.blocksPerLine,\n          blocksPerColumn: T.blocksPerColumn\n        });\n      }\n\n      this.numComponents = this.components.length;\n    },\n    _getLinearizedBlockData: function _getLinearizedBlockData(a, b) {\n      var c,\n          d,\n          e,\n          f,\n          g,\n          h,\n          l,\n          m,\n          n,\n          o,\n          p,\n          q = this.width / a,\n          r = this.height / b,\n          s = 0,\n          t = this.components.length,\n          u = a * b * t,\n          v = new Uint16Array(u),\n          w = new Uint32Array(a),\n          z = 4294967288;\n\n      for (l = 0; l < t; l++) {\n        for (c = this.components[l], d = c.scaleX * q, e = c.scaleY * r, s = l, p = c.output, f = c.blocksPerLine + 1 << 3, g = 0; g < a; g++) {\n          m = 0 | g * d, w[g] = (m & z) << 3 | 7 & m;\n        }\n\n        for (h = 0; h < b; h++) {\n          for (m = 0 | h * e, o = f * (m & z) | (7 & m) << 3, g = 0; g < a; g++) {\n            v[s] = p[o + w[g]], s += t;\n          }\n        }\n      }\n\n      var A = this.decodeTransform;\n      if (A) for (l = 0; l < u;) {\n        for (m = 0, n = 0; m < t; m++, l++, n += 2) {\n          v[l] = (v[l] * A[n] >> 8) + A[n + 1];\n        }\n      }\n      return v;\n    },\n    _isColorConversionNeeded: function _isColorConversionNeeded() {\n      return !!(this.adobe && this.adobe.transformCode) || 3 === this.numComponents;\n    },\n    _convertYccToRgb: function _convertYccToRgb(a) {\n      for (var b, c, d, e = 0, f = a.length; e < f; e += 3) {\n        b = a[e], c = a[e + 1], d = a[e + 2], a[e] = h(b - 179.456 + 1.402 * d), a[e + 1] = h(b + 135.459 - .344 * c - .714 * d), a[e + 2] = h(b - 226.816 + 1.772 * c);\n      }\n\n      return a;\n    },\n    _convertYcckToRgb: function _convertYcckToRgb(a) {\n      for (var c, d, e, f, j = 0, l = 0, m = a.length; l < m; l += 4) {\n        c = a[l], d = a[l + 1], e = a[l + 2], f = a[l + 3];\n        var n = -122.67195406894 + d * (-6.60635669420364e-5 * d + .000437130475926232 * e - 5.4080610064599e-5 * c + .00048449797120281 * f - .154362151871126) + e * (-.000957964378445773 * e + .000817076911346625 * c - .00477271405408747 * f + 1.53380253221734) + c * (.000961250184130688 * c - .00266257332283933 * f + .48357088451265) + f * (-.000336197177618394 * f + .484791561490776),\n            o = 107.268039397724 + d * (2.19927104525741e-5 * d - .000640992018297945 * e + .000659397001245577 * c + .000426105652938837 * f - .176491792462875) + e * (-.000778269941513683 * e + .00130872261408275 * c + .000770482631801132 * f - .151051492775562) + c * (.00126935368114843 * c - .00265090189010898 * f + .25802910206845) + f * (-.000318913117588328 * f - .213742400323665),\n            g = -20.810012546947 + d * (-.000570115196973677 * d - 2.63409051004589e-5 * e + .0020741088115012 * c - .00288260236853442 * f + .814272968359295) + e * (-1.53496057440975e-5 * e - .000132689043961446 * c + .000560833691242812 * f - .195152027534049) + c * (.00174418132927582 * c - .00255243321439347 * f + .116935020465145) + f * (-.000343531996510555 * f + .24165260232407);\n        a[j++] = h(n), a[j++] = h(o), a[j++] = h(g);\n      }\n\n      return a;\n    },\n    _convertYcckToCmyk: function _convertYcckToCmyk(a) {\n      for (var b, c, d, e = 0, f = a.length; e < f; e += 4) {\n        b = a[e], c = a[e + 1], d = a[e + 2], a[e] = h(434.456 - b - 1.402 * d), a[e + 1] = h(119.541 - b + .344 * c + .714 * d), a[e + 2] = h(481.816 - b - 1.772 * c);\n      }\n\n      return a;\n    },\n    _convertCmykToRgb: function _convertCmykToRgb(a) {\n      for (var d, e, f, h, j = 0, l = -16581375, n = 1 / 255 / 255, o = 0, p = a.length; o < p; o += 4) {\n        d = a[o], e = a[o + 1], f = a[o + 2], h = a[o + 3];\n        var q = d * (-4.387332384609988 * d + 54.48615194189176 * e + 18.82290502165302 * f + 212.25662451639585 * h - 72734.4411664936) + e * (1.7149763477362134 * e - 5.6096736904047315 * f - 17.873870861415444 * h - 1401.7366389350734) + f * (-2.5217340131683033 * f - 21.248923337353073 * h + 4465.541406466231) - h * (21.86122147463605 * h + 48317.86113160301),\n            r = d * (8.841041422036149 * d + 60.118027045597366 * e + 6.871425592049007 * f + 31.159100130055922 * h - 20220.756542821975) + e * (-15.310361306967817 * e + 17.575251261109482 * f + 131.35250912493976 * h - 48691.05921601825) + f * (4.444339102852739 * f + 9.8632861493405 * h - 6341.191035517494) - h * (20.737325471181034 * h + 47890.15695978492),\n            g = d * (.8842522430003296 * d + 8.078677503112928 * e + 30.89978309703729 * f - .23883238689178934 * h - 3616.812083916688) + e * (10.49593273432072 * e + 63.02378494754052 * f + 50.606957656360734 * h - 28620.90484698408) + f * (.03296041114873217 * f + 115.60384449646641 * h - 49363.43385999684) - h * (22.33816807309886 * h + 45932.16563550634);\n        a[j++] = 0 <= q ? 255 : q <= l ? 0 : 0 | 255 + q * n, a[j++] = 0 <= r ? 255 : r <= l ? 0 : 0 | 255 + r * n, a[j++] = 0 <= g ? 255 : g <= l ? 0 : 0 | 255 + g * n;\n      }\n\n      return a;\n    },\n    getData: function getData(a, b, c) {\n      if (4 < this.numComponents) throw "Unsupported color mode";\n\n      var d = this._getLinearizedBlockData(a, b);\n\n      if (1 === this.numComponents && c) {\n        for (var e, f = d.length, g = new Uint16Array(3 * f), h = 0, j = 0; j < f; j++) {\n          e = d[j], g[h++] = e, g[h++] = e, g[h++] = e;\n        }\n\n        return g;\n      }\n\n      if (3 === this.numComponents) return this._convertYccToRgb(d);\n\n      if (4 === this.numComponents) {\n        if (this._isColorConversionNeeded()) return c ? this._convertYcckToRgb(d) : this._convertYcckToCmyk(d);\n        if (c) return this._convertCmykToRgb(d);\n      }\n\n      return d;\n    }\n  }, a;\n}();\n\nself.addEventListener("message", function (a) {\n  var b = new JpegImage();\n  b.parse(a.data.buffer);\n  var c = b.getData(b.width, b.height);\n  self.postMessage([c]);\n}, !1);'},10:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r='function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\n(function (a) {\n  if ("object" == (typeof exports === "undefined" ? "undefined" : _typeof(exports)) && "undefined" != typeof module) module.exports = a();else if ("function" == typeof define && define.amd) define([], a);else {\n    var b;\n    b = "undefined" == typeof window ? "undefined" == typeof global ? "undefined" == typeof self ? this : self : global : window, b.jpeg = a();\n  }\n})(function () {\n  return function b(c, d, e) {\n    function a(h, i) {\n      if (!d[h]) {\n        if (!c[h]) {\n          var j = "function" == typeof require && require;\n          if (!i && j) return j(h, !0);\n          if (g) return g(h, !0);\n          var k = new Error("Cannot find module \'" + h + "\'");\n          throw k.code = "MODULE_NOT_FOUND", k;\n        }\n\n        var f = d[h] = {\n          exports: {}\n        };\n        c[h][0].call(f.exports, function (b) {\n          var d = c[h][1][b];\n          return a(d ? d : b);\n        }, f, f.exports, b, c, d, e);\n      }\n\n      return d[h].exports;\n    }\n\n    for (var g = "function" == typeof require && require, f = 0; f < e.length; f++) {\n      a(e[f]);\n    }\n\n    return a;\n  }({\n    1: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.ComponentSpec = c.lossless.ComponentSpec || function () {\n        this.hSamp = 0, this.quantTableSel = 0, this.vSamp = 0;\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.ComponentSpec);\n    }, {}],\n    2: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.DataStream = c.lossless.DataStream || function (a, b, c) {\n        this.buffer = new Uint8Array(a, b, c), this.index = 0;\n      }, c.lossless.DataStream.prototype.get16 = function () {\n        var a = (this.buffer[this.index] << 8) + this.buffer[this.index + 1];\n        return this.index += 2, a;\n      }, c.lossless.DataStream.prototype.get8 = function () {\n        var a = this.buffer[this.index];\n        return this.index += 1, a;\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.DataStream);\n    }, {}],\n    3: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.DataStream = c.lossless.DataStream || ("undefined" == typeof a ? null : a("./data-stream.js")), c.lossless.HuffmanTable = c.lossless.HuffmanTable || ("undefined" == typeof a ? null : a("./huffman-table.js")), c.lossless.QuantizationTable = c.lossless.QuantizationTable || ("undefined" == typeof a ? null : a("./quantization-table.js")), c.lossless.ScanHeader = c.lossless.ScanHeader || ("undefined" == typeof a ? null : a("./scan-header.js")), c.lossless.FrameHeader = c.lossless.FrameHeader || ("undefined" == typeof a ? null : a("./frame-header.js")), c.lossless.Utils = c.lossless.Utils || ("undefined" == typeof a ? null : a("./utils.js")), c.lossless.Decoder = c.lossless.Decoder || function (a, b) {\n        this.buffer = a, this.frame = new c.lossless.FrameHeader(), this.huffTable = new c.lossless.HuffmanTable(), this.quantTable = new c.lossless.QuantizationTable(), this.scan = new c.lossless.ScanHeader(), this.DU = c.lossless.Utils.createArray(10, 4, 64), this.HuffTab = c.lossless.Utils.createArray(4, 2, 12800), this.IDCT_Source = [], this.nBlock = [], this.acTab = c.lossless.Utils.createArray(10, 1), this.dcTab = c.lossless.Utils.createArray(10, 1), this.qTab = c.lossless.Utils.createArray(10, 1), this.marker = 0, this.markerIndex = 0, this.numComp = 0, this.restartInterval = 0, this.selection = 0, this.xDim = 0, this.yDim = 0, this.xLoc = 0, this.yLoc = 0, this.numBytes = 0, this.outputData = null, this.restarting = !1, this.mask = 0, "undefined" != typeof b && (this.numBytes = b);\n      }, c.lossless.Decoder.IDCT_P = [0, 5, 40, 16, 45, 2, 7, 42, 21, 56, 8, 61, 18, 47, 1, 4, 41, 23, 58, 13, 32, 24, 37, 10, 63, 17, 44, 3, 6, 43, 20, 57, 15, 34, 29, 48, 53, 26, 39, 9, 60, 19, 46, 22, 59, 12, 33, 31, 50, 55, 25, 36, 11, 62, 14, 35, 28, 49, 52, 27, 38, 30, 51, 54], c.lossless.Decoder.TABLE = [0, 1, 5, 6, 14, 15, 27, 28, 2, 4, 7, 13, 16, 26, 29, 42, 3, 8, 12, 17, 25, 30, 41, 43, 9, 11, 18, 24, 31, 40, 44, 53, 10, 19, 23, 32, 39, 45, 52, 54, 20, 22, 33, 38, 46, 51, 55, 60, 21, 34, 37, 47, 50, 56, 59, 61, 35, 36, 48, 49, 57, 58, 62, 63], c.lossless.Decoder.MAX_HUFFMAN_SUBTREE = 50, c.lossless.Decoder.MSB = 2147483648, c.lossless.Decoder.RESTART_MARKER_BEGIN = 65488, c.lossless.Decoder.RESTART_MARKER_END = 65495, c.lossless.Decoder.prototype.decompress = function (a, b, c) {\n        return this.decode(a, b, c).buffer;\n      }, c.lossless.Decoder.prototype.decode = function (a, b, d, e) {\n        var f,\n            g,\n            h,\n            j,\n            k = 0,\n            l = [],\n            m = [],\n            n = [];\n        if ("undefined" != typeof a && (this.buffer = a), "undefined" != typeof e && (this.numBytes = e), this.stream = new c.lossless.DataStream(this.buffer, b, d), this.buffer = null, this.xLoc = 0, this.yLoc = 0, f = this.stream.get16(), 65496 !== f) throw new Error("Not a JPEG file");\n\n        for (f = this.stream.get16(); 4092 != f >> 4 || 65476 === f;) {\n          switch (f) {\n            case 65476:\n              this.huffTable.read(this.stream, this.HuffTab);\n              break;\n\n            case 65484:\n              throw new Error("Program doesn\'t support arithmetic coding. (format throw new IOException)");\n\n            case 65499:\n              this.quantTable.read(this.stream, c.lossless.Decoder.TABLE);\n              break;\n\n            case 65501:\n              this.restartInterval = this.readNumber();\n              break;\n\n            case 65504:\n            case 65505:\n            case 65506:\n            case 65507:\n            case 65508:\n            case 65509:\n            case 65510:\n            case 65511:\n            case 65512:\n            case 65513:\n            case 65514:\n            case 65515:\n            case 65516:\n            case 65517:\n            case 65518:\n            case 65519:\n              this.readApp();\n              break;\n\n            case 65534:\n              this.readComment();\n              break;\n\n            default:\n              if (255 != f >> 8) throw new Error("ERROR: format throw new IOException! (decode)");\n          }\n\n          f = this.stream.get16();\n        }\n\n        if (65472 > f || 65479 < f) throw new Error("ERROR: could not handle arithmetic code!");\n        this.frame.read(this.stream), f = this.stream.get16();\n\n        do {\n          for (; 65498 !== f;) {\n            switch (f) {\n              case 65476:\n                this.huffTable.read(this.stream, this.HuffTab);\n                break;\n\n              case 65484:\n                throw new Error("Program doesn\'t support arithmetic coding. (format throw new IOException)");\n\n              case 65499:\n                this.quantTable.read(this.stream, c.lossless.Decoder.TABLE);\n                break;\n\n              case 65501:\n                this.restartInterval = this.readNumber();\n                break;\n\n              case 65504:\n              case 65505:\n              case 65506:\n              case 65507:\n              case 65508:\n              case 65509:\n              case 65510:\n              case 65511:\n              case 65512:\n              case 65513:\n              case 65514:\n              case 65515:\n              case 65516:\n              case 65517:\n              case 65518:\n              case 65519:\n                this.readApp();\n                break;\n\n              case 65534:\n                this.readComment();\n                break;\n\n              default:\n                if (255 != f >> 8) throw new Error("ERROR: format throw new IOException! (Parser.decode)");\n            }\n\n            f = this.stream.get16();\n          }\n\n          switch (this.precision = this.frame.precision, this.components = this.frame.components, this.numBytes || (this.numBytes = parseInt(Math.ceil(this.precision / 8))), this.mask = 1 == this.numBytes ? 255 : 65535, this.scan.read(this.stream), this.numComp = this.scan.numComp, this.selection = this.scan.selection, 1 === this.numBytes ? 3 === this.numComp ? (this.getter = this.getValueRGB, this.setter = this.setValueRGB, this.output = this.outputRGB) : (this.getter = this.getValue8, this.setter = this.setValue8, this.output = this.outputSingle) : (this.getter = this.getValue16, this.setter = this.setValue16, this.output = this.outputSingle), this.selection) {\n            case 2:\n              this.selector = this.select2;\n              break;\n\n            case 3:\n              this.selector = this.select3;\n              break;\n\n            case 4:\n              this.selector = this.select4;\n              break;\n\n            case 5:\n              this.selector = this.select5;\n              break;\n\n            case 6:\n              this.selector = this.select6;\n              break;\n\n            case 7:\n              this.selector = this.select7;\n              break;\n\n            default:\n              this.selector = this.select1;\n          }\n\n          for (this.scanComps = this.scan.components, this.quantTables = this.quantTable.quantTables, g = 0; g < this.numComp; g += 1) {\n            h = this.scanComps[g].scanCompSel, this.qTab[g] = this.quantTables[this.components[h].quantTableSel], this.nBlock[g] = this.components[h].vSamp * this.components[h].hSamp, this.dcTab[g] = this.HuffTab[this.scanComps[g].dcTabSel][0], this.acTab[g] = this.HuffTab[this.scanComps[g].acTabSel][1];\n          }\n\n          for (this.xDim = this.frame.dimX, this.yDim = this.frame.dimY, this.outputData = 1 == this.numBytes ? new Uint8Array(new ArrayBuffer(this.xDim * this.yDim * this.numBytes * this.numComp)) : new Uint16Array(new ArrayBuffer(this.xDim * this.yDim * this.numBytes * this.numComp)), k += 1;;) {\n            for (m[0] = 0, n[0] = 0, g = 0; 10 > g; g += 1) {\n              l[g] = 1 << this.precision - 1;\n            }\n\n            if (0 === this.restartInterval) {\n              for (f = this.decodeUnit(l, m, n); 0 === f && this.xLoc < this.xDim && this.yLoc < this.yDim;) {\n                this.output(l), f = this.decodeUnit(l, m, n);\n              }\n\n              break;\n            }\n\n            for (j = 0; j < this.restartInterval && (this.restarting = 0 == j, f = this.decodeUnit(l, m, n), this.output(l), 0 === f); j += 1) {\n              ;\n            }\n\n            if (0 === f && (0 === this.markerIndex ? f = this.stream.get16() : (f = 65280 | this.marker, this.markerIndex = 0)), !(f >= c.lossless.Decoder.RESTART_MARKER_BEGIN && f <= c.lossless.Decoder.RESTART_MARKER_END)) break;\n          }\n\n          65500 === f && 1 === k && (this.readNumber(), f = this.stream.get16());\n        } while (65497 !== f && this.xLoc < this.xDim && this.yLoc < this.yDim && 0 === k);\n\n        return this.outputData;\n      }, c.lossless.Decoder.prototype.decodeUnit = function (a, b, c) {\n        return 1 == this.numComp ? this.decodeSingle(a, b, c) : 3 == this.numComp ? this.decodeRGB(a, b, c) : -1;\n      }, c.lossless.Decoder.prototype.select1 = function (a) {\n        return this.getPreviousX(a);\n      }, c.lossless.Decoder.prototype.select2 = function (a) {\n        return this.getPreviousY(a);\n      }, c.lossless.Decoder.prototype.select3 = function (a) {\n        return this.getPreviousXY(a);\n      }, c.lossless.Decoder.prototype.select4 = function (a) {\n        return this.getPreviousX(a) + this.getPreviousY(a) - this.getPreviousXY(a);\n      }, c.lossless.Decoder.prototype.select5 = function (a) {\n        return this.getPreviousX(a) + (this.getPreviousY(a) - this.getPreviousXY(a) >> 1);\n      }, c.lossless.Decoder.prototype.select6 = function (a) {\n        return this.getPreviousY(a) + (this.getPreviousX(a) - this.getPreviousXY(a) >> 1);\n      }, c.lossless.Decoder.prototype.select7 = function (a) {\n        return (this.getPreviousX(a) + this.getPreviousY(a)) / 2;\n      }, c.lossless.Decoder.prototype.decodeRGB = function (a, b, d) {\n        var e, f, g, h, l, m, n, o;\n\n        for (a[0] = this.selector(0), a[1] = this.selector(1), a[2] = this.selector(2), l = 0; l < this.numComp; l += 1) {\n          for (h = this.qTab[l], f = this.acTab[l], g = this.dcTab[l], m = 0; m < this.nBlock[l]; m += 1) {\n            for (n = 0; n < this.IDCT_Source.length; n += 1) {\n              this.IDCT_Source[n] = 0;\n            }\n\n            if (e = this.getHuffmanValue(g, b, d), 65280 <= e) return e;\n\n            for (a[l] = this.IDCT_Source[0] = a[l] + this.getn(d, e, b, d), this.IDCT_Source[0] *= h[0], o = 1; 64 > o; o += 1) {\n              if (e = this.getHuffmanValue(f, b, d), 65280 <= e) return e;\n              if (o += e >> 4, 0 != (15 & e)) this.IDCT_Source[c.lossless.Decoder.IDCT_P[o]] = this.getn(d, 15 & e, b, d) * h[o];else if (0 == e >> 4) break;\n            }\n          }\n        }\n\n        return 0;\n      }, c.lossless.Decoder.prototype.decodeSingle = function (a, b, d) {\n        var e, f, g, h;\n\n        for (this.restarting ? (this.restarting = !1, a[0] = 1 << this.frame.precision - 1) : a[0] = this.selector(), f = 0; f < this.nBlock[0]; f += 1) {\n          if (e = this.getHuffmanValue(this.dcTab[0], b, d), 65280 <= e) return e;\n          if (g = this.getn(a, e, b, d), h = g >> 8, h >= c.lossless.Decoder.RESTART_MARKER_BEGIN && h <= c.lossless.Decoder.RESTART_MARKER_END) return h;\n          a[0] += g;\n        }\n\n        return 0;\n      }, c.lossless.Decoder.prototype.getHuffmanValue = function (a, b, d) {\n        var e, f, g;\n\n        if (g = 65535, 8 > d[0] ? (b[0] <<= 8, f = this.stream.get8(), 255 === f && (this.marker = this.stream.get8(), 0 !== this.marker && (this.markerIndex = 9)), b[0] |= f) : d[0] -= 8, e = a[b[0] >> d[0]], 0 != (e & c.lossless.Decoder.MSB)) {\n          if (0 !== this.markerIndex) return this.markerIndex = 0, 65280 | this.marker;\n          b[0] &= g >> 16 - d[0], b[0] <<= 8, f = this.stream.get8(), 255 === f && (this.marker = this.stream.get8(), 0 !== this.marker && (this.markerIndex = 9)), b[0] |= f, e = a[256 * (255 & e) + (b[0] >> d[0])], d[0] += 8;\n        }\n\n        if (d[0] += 8 - (e >> 8), 0 > d[0]) throw new Error("index=" + d[0] + " temp=" + b[0] + " code=" + e + " in HuffmanValue()");\n        return d[0] < this.markerIndex ? (this.markerIndex = 0, 65280 | this.marker) : (b[0] &= g >> 16 - d[0], 255 & e);\n      }, c.lossless.Decoder.prototype.getn = function (a, b, c, d) {\n        var e, f, g, h, i;\n        if (f = 1, g = -1, h = 65535, 0 === b) return 0;\n        if (16 === b) return 0 <= a[0] ? -32768 : 32768;\n\n        if (d[0] -= b, 0 <= d[0]) {\n          if (d[0] < this.markerIndex && !this.isLastPixel()) return this.markerIndex = 0, (65280 | this.marker) << 8;\n          e = c[0] >> d[0], c[0] &= h >> 16 - d[0];\n        } else {\n          if (c[0] <<= 8, i = this.stream.get8(), 255 === i && (this.marker = this.stream.get8(), 0 !== this.marker && (this.markerIndex = 9)), c[0] |= i, d[0] += 8, 0 > d[0]) {\n            if (0 !== this.markerIndex) return this.markerIndex = 0, (65280 | this.marker) << 8;\n            c[0] <<= 8, i = this.stream.get8(), 255 === i && (this.marker = this.stream.get8(), 0 !== this.marker && (this.markerIndex = 9)), c[0] |= i, d[0] += 8;\n          }\n\n          if (0 > d[0]) throw new Error("index=" + d[0] + " in getn()");\n          if (d[0] < this.markerIndex) return this.markerIndex = 0, (65280 | this.marker) << 8;\n          e = c[0] >> d[0], c[0] &= h >> 16 - d[0];\n        }\n\n        return e < f << b - 1 && (e += (g << b) + 1), e;\n      }, c.lossless.Decoder.prototype.getPreviousX = function (a) {\n        return 0 < this.xLoc ? this.getter(this.yLoc * this.xDim + this.xLoc - 1, a) : 0 < this.yLoc ? this.getPreviousY(a) : 1 << this.frame.precision - 1;\n      }, c.lossless.Decoder.prototype.getPreviousXY = function (a) {\n        return 0 < this.xLoc && 0 < this.yLoc ? this.getter((this.yLoc - 1) * this.xDim + this.xLoc - 1, a) : this.getPreviousY(a);\n      }, c.lossless.Decoder.prototype.getPreviousY = function (a) {\n        return 0 < this.yLoc ? this.getter((this.yLoc - 1) * this.xDim + this.xLoc, a) : this.getPreviousX(a);\n      }, c.lossless.Decoder.prototype.isLastPixel = function () {\n        return this.xLoc === this.xDim - 1 && this.yLoc === this.yDim - 1;\n      }, c.lossless.Decoder.prototype.outputSingle = function (a) {\n        this.xLoc < this.xDim && this.yLoc < this.yDim && (this.setter(this.yLoc * this.xDim + this.xLoc, this.mask & a[0]), this.xLoc += 1, this.xLoc >= this.xDim && (this.yLoc += 1, this.xLoc = 0));\n      }, c.lossless.Decoder.prototype.outputRGB = function (a) {\n        var b = this.yLoc * this.xDim + this.xLoc;\n        this.xLoc < this.xDim && this.yLoc < this.yDim && (this.setter(b, a[0], 0), this.setter(b, a[1], 1), this.setter(b, a[2], 2), this.xLoc += 1, this.xLoc >= this.xDim && (this.yLoc += 1, this.xLoc = 0));\n      }, c.lossless.Decoder.prototype.setValue8 = function (a, b) {\n        this.outputData[a] = b;\n      }, c.lossless.Decoder.prototype.getValue8 = function (a) {\n        return this.outputData[a];\n      };\n\n      var d = function () {\n        var a = new ArrayBuffer(2);\n        return new DataView(a).setInt16(0, 256, !0), 256 === new Int16Array(a)[0];\n      }();\n\n      d ? (c.lossless.Decoder.prototype.setValue16 = c.lossless.Decoder.prototype.setValue8, c.lossless.Decoder.prototype.getValue16 = c.lossless.Decoder.prototype.getValue8) : (c.lossless.Decoder.prototype.setValue16 = function (a, b) {\n        this.outputData[a] = (255 & b) << 8 | 255 & b >> 8;\n      }, c.lossless.Decoder.prototype.getValue16 = function (a) {\n        var b = this.outputData[a];\n        return (255 & b) << 8 | 255 & b >> 8;\n      }), c.lossless.Decoder.prototype.setValueRGB = function (a, b, c) {\n        this.outputData[3 * a + c] = b;\n      }, c.lossless.Decoder.prototype.getValueRGB = function (a, b) {\n        return this.outputData[3 * a + b];\n      }, c.lossless.Decoder.prototype.readApp = function () {\n        var a = 0,\n            b = this.stream.get16();\n\n        for (a += 2; a < b;) {\n          this.stream.get8(), a += 1;\n        }\n\n        return b;\n      }, c.lossless.Decoder.prototype.readComment = function () {\n        var a,\n            b = "",\n            c = 0;\n\n        for (a = this.stream.get16(), c += 2; c < a;) {\n          b += this.stream.get8(), c += 1;\n        }\n\n        return b;\n      }, c.lossless.Decoder.prototype.readNumber = function () {\n        var a = this.stream.get16();\n        if (4 !== a) throw new Error("ERROR: Define number format throw new IOException [Ld!=4]");\n        return this.stream.get16();\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.Decoder);\n    }, {\n      "./data-stream.js": 2,\n      "./frame-header.js": 4,\n      "./huffman-table.js": 5,\n      "./quantization-table.js": 7,\n      "./scan-header.js": 9,\n      "./utils.js": 10\n    }],\n    4: [function (a, b) {\n      "use strict";\n\n      var d = d || {};\n      d.lossless = d.lossless || {}, d.lossless.ComponentSpec = d.lossless.ComponentSpec || ("undefined" == typeof a ? null : a("./component-spec.js")), d.lossless.DataStream = d.lossless.DataStream || ("undefined" == typeof a ? null : a("./data-stream.js")), d.lossless.FrameHeader = d.lossless.FrameHeader || function () {\n        this.components = [], this.dimX = 0, this.dimY = 0, this.numComp = 0, this.precision = 0;\n      }, d.lossless.FrameHeader.prototype.read = function (a) {\n        var b,\n            e,\n            f,\n            g,\n            h = 0;\n\n        for (b = a.get16(), h += 2, this.precision = a.get8(), h += 1, this.dimY = a.get16(), h += 2, this.dimX = a.get16(), h += 2, this.numComp = a.get8(), h += 1, e = 1; e <= this.numComp; e += 1) {\n          if (h > b) throw new Error("ERROR: frame format error");\n          if (f = a.get8(), h += 1, h >= b) throw new Error("ERROR: frame format error [c>=Lf]");\n          g = a.get8(), h += 1, this.components[f] || (this.components[f] = new d.lossless.ComponentSpec()), this.components[f].hSamp = g >> 4, this.components[f].vSamp = 15 & g, this.components[f].quantTableSel = a.get8(), h += 1;\n        }\n\n        if (h !== b) throw new Error("ERROR: frame format error [Lf!=count]");\n        return 1;\n      };\n      "undefined" != typeof b && b.exports && (b.exports = d.lossless.FrameHeader);\n    }, {\n      "./component-spec.js": 1,\n      "./data-stream.js": 2\n    }],\n    5: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.DataStream = c.lossless.DataStream || ("undefined" == typeof a ? null : a("./data-stream.js")), c.lossless.Utils = c.lossless.Utils || ("undefined" == typeof a ? null : a("./utils.js")), c.lossless.HuffmanTable = c.lossless.HuffmanTable || function () {\n        this.l = c.lossless.Utils.createArray(4, 2, 16), this.th = [], this.v = c.lossless.Utils.createArray(4, 2, 16, 200), this.tc = c.lossless.Utils.createArray(4, 2), this.tc[0][0] = 0, this.tc[1][0] = 0, this.tc[2][0] = 0, this.tc[3][0] = 0, this.tc[0][1] = 0, this.tc[1][1] = 0, this.tc[2][1] = 0, this.tc[3][1] = 0, this.th[0] = 0, this.th[1] = 0, this.th[2] = 0, this.th[3] = 0;\n      }, c.lossless.HuffmanTable.MSB = 2147483648, c.lossless.HuffmanTable.prototype.read = function (a, b) {\n        var d,\n            e,\n            f,\n            g,\n            h,\n            k,\n            l = 0;\n\n        for (d = a.get16(), l += 2; l < d;) {\n          if (e = a.get8(), l += 1, f = 15 & e, 3 < f) throw new Error("ERROR: Huffman table ID > 3");\n          if (g = e >> 4, 2 < g) throw new Error("ERROR: Huffman table [Table class > 2 ]");\n\n          for (this.th[f] = 1, this.tc[f][g] = 1, h = 0; 16 > h; h += 1) {\n            this.l[f][g][h] = a.get8(), l += 1;\n          }\n\n          for (h = 0; 16 > h; h += 1) {\n            for (k = 0; k < this.l[f][g][h]; k += 1) {\n              if (l > d) throw new Error("ERROR: Huffman table format error [count>Lh]");\n              this.v[f][g][h][k] = a.get8(), l += 1;\n            }\n          }\n        }\n\n        if (l !== d) throw new Error("ERROR: Huffman table format error [count!=Lf]");\n\n        for (h = 0; 4 > h; h += 1) {\n          for (k = 0; 2 > k; k += 1) {\n            0 !== this.tc[h][k] && this.buildHuffTable(b[h][k], this.l[h][k], this.v[h][k]);\n          }\n        }\n\n        return 1;\n      }, c.lossless.HuffmanTable.prototype.buildHuffTable = function (a, b, d) {\n        var e, f, g, h, l, m;\n\n        for (f = 256, g = 0, h = 0; 8 > h; h += 1) {\n          for (l = 0; l < b[h]; l += 1) {\n            for (m = 0; m < f >> h + 1; m += 1) {\n              a[g] = d[h][l] | h + 1 << 8, g += 1;\n            }\n          }\n        }\n\n        for (h = 1; 256 > g; h += 1, g += 1) {\n          a[g] = h | c.lossless.HuffmanTable.MSB;\n        }\n\n        for (e = 1, g = 0, h = 8; 16 > h; h += 1) {\n          for (l = 0; l < b[h]; l += 1) {\n            for (m = 0; m < f >> h - 7; m += 1) {\n              a[256 * e + g] = d[h][l] | h + 1 << 8, g += 1;\n            }\n\n            if (256 <= g) {\n              if (256 < g) throw new Error("ERROR: Huffman table error(1)!");\n              g = 0, e += 1;\n            }\n          }\n        }\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.HuffmanTable);\n    }, {\n      "./data-stream.js": 2,\n      "./utils.js": 10\n    }],\n    6: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.ComponentSpec = c.lossless.ComponentSpec || ("undefined" == typeof a ? null : a("./component-spec.js")), c.lossless.DataStream = c.lossless.DataStream || ("undefined" == typeof a ? null : a("./data-stream.js")), c.lossless.Decoder = c.lossless.Decoder || ("undefined" == typeof a ? null : a("./decoder.js")), c.lossless.FrameHeader = c.lossless.FrameHeader || ("undefined" == typeof a ? null : a("./frame-header.js")), c.lossless.HuffmanTable = c.lossless.HuffmanTable || ("undefined" == typeof a ? null : a("./huffman-table.js")), c.lossless.QuantizationTable = c.lossless.QuantizationTable || ("undefined" == typeof a ? null : a("./quantization-table.js")), c.lossless.ScanComponent = c.lossless.ScanComponent || ("undefined" == typeof a ? null : a("./scan-component.js")), c.lossless.ScanHeader = c.lossless.ScanHeader || ("undefined" == typeof a ? null : a("./scan-header.js")), c.lossless.Utils = c.lossless.Utils || ("undefined" == typeof a ? null : a("./utils.js"));\n      "undefined" != typeof b && b.exports && (b.exports = c);\n    }, {\n      "./component-spec.js": 1,\n      "./data-stream.js": 2,\n      "./decoder.js": 3,\n      "./frame-header.js": 4,\n      "./huffman-table.js": 5,\n      "./quantization-table.js": 7,\n      "./scan-component.js": 8,\n      "./scan-header.js": 9,\n      "./utils.js": 10\n    }],\n    7: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.DataStream = c.lossless.DataStream || ("undefined" == typeof a ? null : a("./data-stream.js")), c.lossless.Utils = c.lossless.Utils || ("undefined" == typeof a ? null : a("./utils.js")), c.lossless.QuantizationTable = c.lossless.QuantizationTable || function () {\n        this.precision = [], this.tq = [], this.quantTables = c.lossless.Utils.createArray(4, 64), this.tq[0] = 0, this.tq[1] = 0, this.tq[2] = 0, this.tq[3] = 0;\n      }, c.lossless.QuantizationTable.enhanceQuantizationTable = function (a, b) {\n        var c;\n\n        for (c = 0; 8 > c; c += 1) {\n          a[b[0 + c]] *= 90, a[b[32 + c]] *= 90, a[b[16 + c]] *= 118, a[b[48 + c]] *= 49, a[b[40 + c]] *= 71, a[b[8 + c]] *= 126, a[b[56 + c]] *= 25, a[b[24 + c]] *= 106;\n        }\n\n        for (c = 0; 8 > c; c += 1) {\n          a[b[0 + 8 * c]] *= 90, a[b[4 + 8 * c]] *= 90, a[b[2 + 8 * c]] *= 118, a[b[6 + 8 * c]] *= 49, a[b[5 + 8 * c]] *= 71, a[b[1 + 8 * c]] *= 126, a[b[7 + 8 * c]] *= 25, a[b[3 + 8 * c]] *= 106;\n        }\n\n        for (c = 0; 64 > c; c += 1) {\n          a[c] >>= 6;\n        }\n      }, c.lossless.QuantizationTable.prototype.read = function (a, b) {\n        var d,\n            e,\n            f,\n            g,\n            h = 0;\n\n        for (d = a.get16(), h += 2; h < d;) {\n          if (e = a.get8(), h += 1, f = 15 & e, 3 < f) throw new Error("ERROR: Quantization table ID > 3");\n          if (this.precision[f] = e >> 4, 0 === this.precision[f]) this.precision[f] = 8;else if (1 === this.precision[f]) this.precision[f] = 16;else throw new Error("ERROR: Quantization table precision error");\n\n          if (this.tq[f] = 1, 8 === this.precision[f]) {\n            for (g = 0; 64 > g; g += 1) {\n              if (h > d) throw new Error("ERROR: Quantization table format error");\n              this.quantTables[f][g] = a.get8(), h += 1;\n            }\n\n            c.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[f], b);\n          } else {\n            for (g = 0; 64 > g; g += 1) {\n              if (h > d) throw new Error("ERROR: Quantization table format error");\n              this.quantTables[f][g] = a.get16(), h += 2;\n            }\n\n            c.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[f], b);\n          }\n        }\n\n        if (h !== d) throw new Error("ERROR: Quantization table error [count!=Lq]");\n        return 1;\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.QuantizationTable);\n    }, {\n      "./data-stream.js": 2,\n      "./utils.js": 10\n    }],\n    8: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.ScanComponent = c.lossless.ScanComponent || function () {\n        this.acTabSel = 0, this.dcTabSel = 0, this.scanCompSel = 0;\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.ScanComponent);\n    }, {}],\n    9: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.DataStream = c.lossless.DataStream || ("undefined" == typeof a ? null : a("./data-stream.js")), c.lossless.ScanComponent = c.lossless.ScanComponent || ("undefined" == typeof a ? null : a("./scan-component.js")), c.lossless.ScanHeader = c.lossless.ScanHeader || function () {\n        this.ah = 0, this.al = 0, this.numComp = 0, this.selection = 0, this.spectralEnd = 0, this.components = [];\n      }, c.lossless.ScanHeader.prototype.read = function (a) {\n        var b,\n            d,\n            e,\n            f = 0;\n\n        for (b = a.get16(), f += 2, this.numComp = a.get8(), f += 1, d = 0; d < this.numComp; d += 1) {\n          if (this.components[d] = new c.lossless.ScanComponent(), f > b) throw new Error("ERROR: scan header format error");\n          this.components[d].scanCompSel = a.get8(), f += 1, e = a.get8(), f += 1, this.components[d].dcTabSel = e >> 4, this.components[d].acTabSel = 15 & e;\n        }\n\n        if (this.selection = a.get8(), f += 1, this.spectralEnd = a.get8(), f += 1, e = a.get8(), this.ah = e >> 4, this.al = 15 & e, f += 1, f !== b) throw new Error("ERROR: scan header format error [count!=Ns]");\n        return 1;\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.ScanHeader);\n    }, {\n      "./data-stream.js": 2,\n      "./scan-component.js": 8\n    }],\n    10: [function (a, b) {\n      "use strict";\n\n      var c = c || {};\n      c.lossless = c.lossless || {}, c.lossless.Utils = c.lossless.Utils || {}, c.lossless.Utils.createArray = function (a) {\n        var b = Array(a || 0),\n            d = a;\n        if (1 < arguments.length) for (var e = Array.prototype.slice.call(arguments, 1); d--;) {\n          b[a - 1 - d] = c.lossless.Utils.createArray.apply(this, e);\n        }\n        return b;\n      }, c.lossless.Utils.makeCRCTable = function () {\n        for (var a, b = [], d = 0; 256 > d; d++) {\n          a = d;\n\n          for (var e = 0; 8 > e; e++) {\n            a = 1 & a ? 3988292384 ^ a >>> 1 : a >>> 1;\n          }\n\n          b[d] = a;\n        }\n\n        return b;\n      }, c.lossless.Utils.crc32 = function (a) {\n        for (var b = new Uint8Array(a.buffer), d = c.lossless.Utils.crcTable || (c.lossless.Utils.crcTable = c.lossless.Utils.makeCRCTable()), e = -1, f = 0; f < b.length; f++) {\n          e = e >>> 8 ^ d[255 & (e ^ b[f])];\n        }\n\n        return (-1 ^ e) >>> 0;\n      };\n      "undefined" != typeof b && b.exports && (b.exports = c.lossless.Utils);\n    }, {}]\n  }, {}, [6])(6);\n}), self.addEventListener("message", function (a) {\n  var b = a.data.bitsAllocated / 8,\n      c = new Uint8Array(a.data.buffer),\n      d = new jpeg.lossless.Decoder(),\n      e = d.decode(c.buffer, 0, c.buffer.byteLength, b),\n      f = null;\n  8 === a.data.bitsAllocated ? a.data.isSigned ? f = new Int8Array(e.buffer) : f = new Uint8Array(e.buffer) : 16 === a.data.bitsAllocated && (a.data.isSigned ? f = new Int16Array(e.buffer) : f = new Uint16Array(e.buffer)), self.postMessage([f]);\n}, !1);'},813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r='var dwv = dwv || {};\ndwv.decoder = dwv.decoder || {}, dwv.decoder.RleDecoder = function () {}, dwv.decoder.RleDecoder.prototype.decode = function (a, b, c, d, e, f) {\n  var g = b / 8,\n      h = new DataView(a.buffer, a.byteOffset),\n      k = new Int8Array(a.buffer, a.byteOffset),\n      l = new ArrayBuffer(d * e * g),\n      m = new Int8Array(l),\n      n = h.getInt32(0, !0),\n      o = 0,\n      p = 1;\n  0 === f && (p = e);\n\n  for (var q = 0, r = 0; r < n; ++r) {\n    1 !== e && 0 === f && (o = r);\n    var s = h.getInt32(4 * (r + 1), !0),\n        t = h.getInt32(4 * (r + 2), !0);\n    (r == n - 1 || 0 === t) && (t = a.length), q = s;\n\n    for (var u = 0; q < t;) {\n      if (u = k[q], ++q, 0 <= u && 127 >= u) for (var v = 0; v < u + 1; ++v) {\n        m[o * g] = k[q], ++q, o += p;\n      } else if (-1 >= u && -127 <= u) {\n        var w = k[q];\n        ++q;\n\n        for (var x = 0; x < -u + 1; ++x) {\n          m[o * g] = w, o += p;\n        }\n      }\n    }\n  }\n\n  var y = null;\n  return 8 === b ? c ? y = new Int8Array(l) : y = new Uint8Array(l) : 16 == b && (c ? y = new Int16Array(l) : y = new Uint16Array(l)), y;\n}, self.addEventListener("message", function (a) {\n  var b = new dwv.decoder.RleDecoder();\n  self.postMessage([b.decode(a.data.buffer, a.data.meta.bitsAllocated, a.data.meta.isSigned, a.data.meta.sliceSize, a.data.meta.samplesPerPixel, a.data.meta.planarConfiguration)]);\n}, !1);'},251:(e,t,n)=>{"use strict";
/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
n(418);var r=n(787),i=60103;if(60107,"function"==typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},893:(e,t,n)=>{"use strict";e.exports=n(251)},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=a[c]||0,h="".concat(c," ").concat(u);a[c]=u+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(t[d].references++,t[d].updater(f)):t.push({identifier:h,updater:i(f,r),references:1}),o.push(h)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var l=r(e,i),c=0;c<a.length;c++){var u=n(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},787:t=>{"use strict";t.exports=e},848:()=>{},920:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>sn});var r=Math.PI/180;const i="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},a={_global:i,version:"8.4.3",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:e=>a.angleDeg?e*r:e,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>a.DD.isDragging,isDragReady:()=>!!a.DD.node,releaseCanvasOnDestroy:!0,document:i.document,_injectGlobal(e){i.Konva=e}},o=e=>{a[e.prototype.getClassName()]=e};a._injectGlobal(a);class s{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new s(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,a=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;return this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){var n=this.m[0]+this.m[2]*t,r=this.m[1]+this.m[3]*t,i=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=a,this}multiply(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var e=this.m[0],t=this.m[1],n=this.m[2],r=this.m[3],i=e*r-t*n;let a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=e||0!=t){var o=Math.sqrt(e*e+t*t);a.rotation=t>0?Math.acos(e/o):-Math.acos(e/o),a.scaleX=o,a.scaleY=i/o,a.skewX=(e*n+t*r)/i,a.skewY=0}else if(0!=n||0!=r){var s=Math.sqrt(n*n+r*r);a.rotation=Math.PI/2-(r>0?Math.acos(-n/s):-Math.acos(n/s)),a.scaleX=i/s,a.scaleY=s,a.skewX=0,a.skewY=(e*n+t*r)/i}return a.rotation=p._getRotation(a.rotation),a}}var l=Math.PI/180,c=180/Math.PI,u="Konva error: ",h={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,f=[];const g="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)},p={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){f.push(e),1===f.length&&g((function(){const e=f;f=[],e.forEach((function(e){e()}))}))},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch(e){}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var n=p.createImageElement();n.onload=function(){t(n)},n.src=e},_rgbToHex:(e,t,n)=>((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){e=e.replace("#","");var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e="0"+e;return"#"+e},getRGB(e){var t;return e in h?{r:(t=h[e])[0],g:t[1],b:t[2]}:"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=d.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:e=>(e=e||"black",p._namedColorToRBA(e)||p._hex3ColorToRGBA(e)||p._hex4ColorToRGBA(e)||p._hex6ColorToRGBA(e)||p._hex8ColorToRGBA(e)||p._rgbColorToRGBA(e)||p._rgbaColorToRGBA(e)||p._hslColorToRGBA(e)),_namedColorToRBA(e){var t=h[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e)));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),r=Number(n[0])/360,i=Number(n[1])/100,a=Number(n[2])/100;let o,s,l;if(0===i)return l=255*a,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};o=a<.5?a*(1+i):a+i-a*i;const c=2*a-o,u=[0,0,0];for(let e=0;e<3;e++)s=r+1/3*-(e-1),s<0&&s++,s>1&&s--,l=6*s<1?c+6*(o-c)*s:2*s<1?o:3*s<2?c+(o-c)*(2/3-s)*6:c,u[e]=255*l;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){var t={};for(var n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*l,radToDeg:e=>e*c,_degToRad:e=>(p.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),p.degToRad(e)),_radToDeg:e=>(p.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),p.radToDeg(e)),_getRotation:e=>a.angleDeg?p.radToDeg(e):e,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error(u+e)},error(e){console.error(u+e)},warn(e){a.showWarnings&&console.warn("Konva warning: "+e)},each(e,t){for(var n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,r,i,a){var o,s,l,c=(e-n)*(e-n)+(t-r)*(t-r);if(0==c)o=e,s=t,l=(i-n)*(i-n)+(a-r)*(a-r);else{var u=((i-e)*(n-e)+(a-t)*(r-t))/c;u<0?(o=e,s=t,l=(e-i)*(e-i)+(t-a)*(t-a)):u>1?(o=n,s=r,l=(n-i)*(n-i)+(r-a)*(r-a)):l=((o=e+u*(n-e))-i)*(o-i)+((s=t+u*(r-t))-a)*(s-a)}return[o,s,l]},_getProjectionToLine(e,t,n){var r=p.cloneObject(e),i=Number.MAX_VALUE;return t.forEach((function(a,o){if(n||o!==t.length-1){var s=t[(o+1)%t.length],l=p._getProjectionToSegment(a.x,a.y,s.x,s.y,e.x,e.y),c=l[0],u=l[1],h=l[2];h<i&&(r.x=c,r.y=u,i=h)}})),r},_prepareArrayForTween(e,t,n){var r,i=[],a=[];if(e.length>t.length){var o=t;t=e,e=o}for(r=0;r<e.length;r+=2)i.push({x:e[r],y:e[r+1]});for(r=0;r<t.length;r+=2)a.push({x:t[r],y:t[r+1]});var s=[];return a.forEach((function(e){var t=p._getProjectionToLine(e,i,n);s.push(t.x),s.push(t.y)})),s},_prepareToStringify(e){var t;for(var n in e.visitedByCircularReferenceRemoval=!0,e)if(e.hasOwnProperty(n)&&e[n]&&"object"==typeof e[n])if(t=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||p._isElement(e[n])){if(!t.configurable)return null;delete e[n]}else if(null===p._prepareToStringify(e[n])){if(!t.configurable)return null;delete e[n]}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){a.releaseCanvasOnDestroy&&e.forEach((e=>{e.width=0,e.height=0}))},drawRoundedRectPath(e,t,n,r){let i=0,a=0,o=0,s=0;"number"==typeof r?i=a=o=s=Math.min(r,t/2,n/2):(i=Math.min(r[0]||0,t/2,n/2),a=Math.min(r[1]||0,t/2,n/2),s=Math.min(r[2]||0,t/2,n/2),o=Math.min(r[3]||0,t/2,n/2)),e.moveTo(i,0),e.lineTo(t-a,0),e.arc(t-a,a,a,3*Math.PI/2,0,!1),e.lineTo(t,n-s),e.arc(t-s,n-s,s,0,Math.PI/2,!1),e.lineTo(o,n),e.arc(o,n-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,i),e.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}};function m(e){return p._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||p._isBoolean(e)?e:Object.prototype.toString.call(e)}function S(e){return e>255?255:e<0?0:Math.round(e)}function y(){if(a.isUnminified)return function(e,t){return p._isNumber(e)||p.warn(m(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function v(e){if(a.isUnminified)return function(t,n){let r=p._isNumber(t),i=p._isArray(t)&&t.length==e;return r||i||p.warn(m(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function b(){if(a.isUnminified)return function(e,t){return p._isNumber(e)||"auto"===e||p.warn(m(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function C(){if(a.isUnminified)return function(e,t){return p._isString(e)||p.warn(m(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function w(){if(a.isUnminified)return function(e,t){const n=p._isString(e),r="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return n||r||p.warn(m(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function x(){if(a.isUnminified)return function(e,t){return!0===e||!1===e||p.warn(m(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}var D="get",T="set";const P={addGetterSetter(e,t,n,r,i){P.addGetter(e,t,n),P.addSetter(e,t,r,i),P.addOverloadedGetterSetter(e,t)},addGetter(e,t,n){var r=D+p._capitalize(t);e.prototype[r]=e.prototype[r]||function(){var e=this.attrs[t];return void 0===e?n:e}},addSetter(e,t,n,r){var i=T+p._capitalize(t);e.prototype[i]||P.overWriteSetter(e,t,n,r)},overWriteSetter(e,t,n,r){var i=T+p._capitalize(t);e.prototype[i]=function(e){return n&&null!=e&&(e=n.call(this,e,t)),this._setAttr(t,e),r&&r.call(this),this}},addComponentsGetterSetter(e,t,n,r,i){var o,s,l=n.length,c=p._capitalize,u=D+c(t),h=T+c(t);e.prototype[u]=function(){var e={};for(o=0;o<l;o++)e[s=n[o]]=this.getAttr(t+c(s));return e};var d=function(e){if(a.isUnminified)return function(t,n){return null==t||p.isObject(t)||p.warn(m(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}(n);e.prototype[h]=function(e){var a,o=this.attrs[t];for(a in r&&(e=r.call(this,e)),d&&d.call(this,e,t),e)e.hasOwnProperty(a)&&this._setAttr(t+c(a),e[a]);return e||n.forEach((e=>{this._setAttr(t+c(e),void 0)})),this._fireChangeEvent(t,o,e),i&&i.call(this),this},P.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var n=p._capitalize(t),r=T+n,i=D+n;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(e,t,n,r){p.error("Adding deprecated "+t);var i=D+p._capitalize(t),a=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[i]=function(){p.error(a);var e=this.attrs[t];return void 0===e?n:e},P.addSetter(e,t,r,(function(){p.error(a)})),P.addOverloadedGetterSetter(e,t)},backCompat(e,t){p.each(t,(function(t,n){var r=e.prototype[n],i=D+p._capitalize(t),a=T+p._capitalize(t);function o(){r.apply(this,arguments),p.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}e.prototype[t]=o,e.prototype[i]=o,e.prototype[a]=o}))},afterSetFilter(){this._filterUpToDate=!1}};var I=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class A{constructor(e){this.canvas=e,a.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var n,r,i,a,o=this.traceArr,s=o.length,l="";for(n=0;n<s;n++)(i=(r=o[n]).method)?(a=r.args,l+=i,e?l+="()":p._isArray(a[0])?l+="(["+a.join(",")+"])":(t&&(a=a.map((e=>"number"==typeof e?Math.floor(e):e))),l+="("+a.join(",")+")")):(l+=r.property,e||(l+="="+r.val)),l+=";";return l}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr;t.push(e),t.length>=100&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,r,i,a){this._context.arc(e,t,n,r,i,a)}arcTo(e,t,n,r,i){this._context.arcTo(e,t,n,r,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,r,i,a){this._context.bezierCurveTo(e,t,n,r,i,a)}clearRect(e,t,n,r){this._context.clearRect(e,t,n,r)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,t){var n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,r){return this._context.createLinearGradient(e,t,n,r)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,r,i,a){return this._context.createRadialGradient(e,t,n,r,i,a)}drawImage(e,t,n,r,i,a,o,s,l){var c=arguments,u=this._context;3===c.length?u.drawImage(e,t,n):5===c.length?u.drawImage(e,t,n,r,i):9===c.length&&u.drawImage(e,t,n,r,i,a,o,s,l)}ellipse(e,t,n,r,i,a,o,s){this._context.ellipse(e,t,n,r,i,a,o,s)}isPointInPath(e,t,n,r){return n?this._context.isPointInPath(n,e,t,r):this._context.isPointInPath(e,t,r)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,t,n,r){this._context.fillRect(e,t,n,r)}strokeRect(e,t,n,r){this._context.strokeRect(e,t,n,r)}fillText(e,t,n,r){r?this._context.fillText(e,t,n,r):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,r){return this._context.getImageData(e,t,n,r)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,r){this._context.rect(e,t,n,r)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,r){this._context.quadraticCurveTo(e,t,n,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,r,i,a){this._context.setTransform(e,t,n,r,i,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,r){this._context.strokeText(e,t,n,r)}transform(e,t,n,r,i,a){this._context.transform(e,t,n,r,i,a)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e,t,n=this,r=I.length,i=this.setAttr,a=function(e){var r,i=n[e];n[e]=function(){return t=function(e){var t,n,r=[],i=e.length,a=p;for(t=0;t<i;t++)n=e[t],a._isNumber(n)?n=Math.round(1e3*n)/1e3:a._isString(n)||(n+=""),r.push(n);return r}(Array.prototype.slice.call(arguments,0)),r=i.apply(n,arguments),n._trace({method:e,args:t}),r}};for(e=0;e<r;e++)a(I[e]);n.setAttr=function(){i.apply(n,arguments);var e=arguments[0],t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),n._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||"source-over"===t||this.setAttr("globalCompositeOperation",t)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(e){Object.defineProperty(A.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})}));class L extends A{constructor(e){super(e),this._context=e._canvas.getContext("2d")}_fillColor(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&"color"===n)return void this._fillColor(e);const r=e.getFillPatternImage();if(r&&"pattern"===n)return void this._fillPattern(e);const i=e.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)return void this._fillLinearGradient(e);const a=e.getFillRadialGradientColorStops();a&&"radial-gradient"===n?this._fillRadialGradient(e):t?this._fillColor(e):r?this._fillPattern(e):i?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(t.x,t.y,n.x,n.y);if(r){for(var a=0;a<r.length;a+=2)i.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",i)}}_stroke(e){var t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,r,i=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",a=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,o=null!==(r=e.getShadowOffset())&&void 0!==r?r:{x:0,y:0},s=e.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=s.x*l,u=s.y*l;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(u))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*u)}}class O extends A{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();var t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),r="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}var _;class E{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||a.pixelRatio||function(){if(_)return _;var e=p.createCanvasElement(),t=e.getContext("2d");return _=(a._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),p.releaseCanvas(e),_}();this.pixelRatio=t,this._canvas=p.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch(e){try{return this._canvas.toDataURL()}catch(e){return p.error("Unable to get data URL. "+e.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}P.addGetterSetter(E,"pixelRatio",void 0,y());class R extends E{constructor(e={width:0,height:0}){super(e),this.context=new L(this),this.setSize(e.width,e.height)}}class F extends E{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new O(this),this.setSize(e.width,e.height)}}const k={get isDragging(){var e=!1;return k._dragElements.forEach((t=>{"dragging"===t.dragStatus&&(e=!0)})),e},justDragged:!1,get node(){var e;return k._dragElements.forEach((t=>{e=t.node})),e},_dragElements:new Map,_drag(e){const t=[];k._dragElements.forEach(((n,r)=>{const{node:i}=n,a=i.getStage();a.setPointersPositions(e),void 0===n.pointerId&&(n.pointerId=p._getFirstPointerId(e));const o=a._changedPointerPositions.find((e=>e.id===n.pointerId));if(o){if("dragging"!==n.dragStatus){var s=i.dragDistance();if(Math.max(Math.abs(o.x-n.startPointerPos.x),Math.abs(o.y-n.startPointerPos.y))<s)return;if(i.startDrag({evt:e}),!i.isDragging())return}i._setDragPosition(e,n),t.push(i)}})),t.forEach((t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:e},!0)}))},_endDragBefore(e){const t=[];k._dragElements.forEach((n=>{const{node:r}=n,i=r.getStage();e&&i.setPointersPositions(e);if(!i._changedPointerPositions.find((e=>e.id===n.pointerId)))return;"dragging"!==n.dragStatus&&"stopped"!==n.dragStatus||(k.justDragged=!0,a._mouseListenClick=!1,a._touchListenClick=!1,a._pointerListenClick=!1,n.dragStatus="stopped");const o=n.node.getLayer()||n.node instanceof a.Stage&&n.node;o&&-1===t.indexOf(o)&&t.push(o)})),t.forEach((e=>{e.draw()}))},_endDragAfter(e){k._dragElements.forEach(((t,n)=>{"stopped"===t.dragStatus&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),"dragging"!==t.dragStatus&&k._dragElements.delete(n)}))}};a.isBrowser&&(window.addEventListener("mouseup",k._endDragBefore,!0),window.addEventListener("touchend",k._endDragBefore,!0),window.addEventListener("mousemove",k._drag),window.addEventListener("touchmove",k._drag),window.addEventListener("mouseup",k._endDragAfter,!1),window.addEventListener("touchend",k._endDragAfter,!1));var M="absoluteOpacity",q="allEventListeners",U="absoluteTransform",B="absoluteScale",N="canvas",Q="listening",G="mouseenter",z="mouseleave",V="Shape",j=" ",W="stage",H="transform",Y="visible",X=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(j);let Z=1;class ${constructor(e){this._id=Z++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==H&&e!==U||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){var n=this._cache.get(e);return(void 0===n||(e===H||e===U)&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const n=t.map((e=>e+"Change.konva")).join(j);this.on(n,(()=>{this._clearCache(e)})),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(N)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===U&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(N)){const{scene:e,filter:t,hit:n}=this._cache.get(N);p.releaseCanvas(e,t,n),this._cache.delete(N)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},n={};void 0!==t.x&&void 0!==t.y&&void 0!==t.width&&void 0!==t.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(t.width||n.width),i=Math.ceil(t.height||n.height),a=t.pixelRatio,o=void 0===t.x?Math.floor(n.x):t.x,s=void 0===t.y?Math.floor(n.y):t.y,l=t.offset||0,c=t.drawBorder||!1,u=t.hitCanvasPixelRatio||1;if(r&&i){o-=l,s-=l;var h=new R({pixelRatio:a,width:r+=2*l+1,height:i+=2*l+1}),d=new R({pixelRatio:a,width:0,height:0}),f=new F({pixelRatio:u,width:r,height:i}),g=h.getContext(),m=f.getContext();return f.isCache=!0,h.isCache=!0,this._cache.delete(N),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(h.getContext()._context.imageSmoothingEnabled=!1,d.getContext()._context.imageSmoothingEnabled=!1),g.save(),m.save(),g.translate(-o,-s),m.translate(-o,-s),this._isUnderCache=!0,this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(B),this.drawScene(h,this),this.drawHit(f,this),this._isUnderCache=!1,g.restore(),m.restore(),c&&(g.save(),g.beginPath(),g.rect(0,0,r,i),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set(N,{scene:h,filter:d,hit:f,x:o,y:s}),this._requestDraw(),this}p.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(N)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){var n,r,i,a,o=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=this.getAbsoluteTransform(t);return o.forEach((function(e){var t=s.point(e);void 0===n&&(n=i=t.x,r=a=t.y),n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),a=Math.max(a,t.y)})),{x:n,y:r,width:i-n,height:a-r}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/r,n.height/r),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e,t,n,r,i=this.filters(),a=this._getCanvasCache(),o=a.scene,s=a.filter,l=s.getContext();if(i){if(!this._filterUpToDate){var c=o.pixelRatio;s.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(e=i.length,l.clear(),l.drawImage(o._canvas,0,0,o.getWidth()/c,o.getHeight()/c),t=l.getImageData(0,0,s.getWidth(),s.getHeight()),n=0;n<e;n++)"function"==typeof(r=i[n])?(r.call(this,t),l.putImageData(t,0,0)):p.error("Filter should be type of function, but got "+typeof r+" instead. Please check correct filters")}catch(e){p.error("Unable to apply filter. "+e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return o}on(e,t){if(this._cache&&this._cache.delete(q),3===arguments.length)return this._delegate.apply(this,arguments);var n,r,i,a,o=e.split(j),s=o.length;for(n=0;n<s;n++)i=(r=o[n].split("."))[0],a=r[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:a,handler:t});return this}off(e,t){var n,r,i,a,o,s=(e||"").split(j),l=s.length;if(this._cache&&this._cache.delete(q),!e)for(r in this.eventListeners)this._off(r);for(n=0;n<l;n++)if(a=(i=s[n].split("."))[0],o=i[1],a)this.eventListeners[a]&&this._off(a,o,t);else for(r in this.eventListeners)this._off(r,o,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,(function(e){t.call(this,e.evt)})),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){var r=this;this.on(e,(function(e){for(var i=e.target.findAncestors(t,!0,r),a=0;a<i.length;a++)(e=p.cloneObject(e)).currentTarget=i[a],n.call(i[a],e)}))}remove(){return this.isDragging()&&this.stopDrag(),k._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(U),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(W),this._clearSelfAndDescendantCache(Y),this._clearSelfAndDescendantCache(Q)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var t="get"+p._capitalize(e);return p._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges((()=>{var t,n;if(!e)return this;for(t in e)"children"!==t&&(n="set"+p._capitalize(t),p._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))})),this}isListening(){return this._getCache(Q,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(Y,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),r=!1;k._dragElements.forEach((e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===n)&&(r=!0)}));var i=!t&&!a.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e,t,n,r,i=this.getDepth(),a=this,o=0;return"Stage"!==a.nodeType&&function s(l){for(e=[],t=l.length,n=0;n<t;n++)r=l[n],o++,r.nodeType!==V&&(e=e.concat(r.getChildren().slice())),r._id===a._id&&(n=t);e.length>0&&e[0].getDepth()<=i&&s(e)}(a.getStage().getChildren()),o}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(H),this._clearSelfAndDescendantCache(U)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges((()=>{this.x(e.x),this.y(e.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var t=this.getAbsoluteTransform().copy();return t.invert(),t.point(e)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);var r=this.getAbsoluteTransform(e).getMatrix(),i=new s,a=this.offset();return i.m=r.slice(),i.translate(a.x,a.y),i.getTranslation()}setAbsolutePosition(e){var t=this._clearTransform();this.attrs.x=t.x,this.attrs.y=t.y,delete t.x,delete t.y,this._clearCache(H);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(t),this.setPosition({x:e.x,y:e.y}),this._clearCache(H),this._clearSelfAndDescendantCache(U),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,n=e.y,r=this.x(),i=this.y();return void 0!==t&&(r+=t),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this}_eachAncestorReverse(e,t){var n,r,i=[],a=this.getParent();if(!t||t._id!==this._id){for(i.unshift(this);a&&(!t||a._id!==t._id);)i.unshift(a),a=a.parent;for(n=i.length,r=0;r<n;r++)e(i[r])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return p.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return p.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return p.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return p.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return p.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&p.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(M,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e,t,n,r,i={},a=this.getAttrs();for(e in i.attrs={},a)t=a[e],p.isObject(t)&&!p._isPlainObject(t)&&!p._isArray(t)||(n="function"==typeof this[e]&&this[e],delete a[e],r=n?n.call(this):null,a[e]=t,r!==t&&(i.attrs[e]=t));return i.className=this.getClassName(),p._prepareToStringify(i)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){var r=[];t&&this._isMatch(e)&&r.push(this);for(var i=this.parent;i;){if(i===n)return r;i._isMatch(e)&&r.push(i),i=i.parent}return r}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);var t,n,r=e.replace(/ /g,"").split(","),i=r.length;for(t=0;t<i;t++)if(n=r[t],p.isValidSelector(n)||(p.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),p.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),p.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(W,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():void 0}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(U,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var t;if(e)return t=new s,this._eachAncestorReverse((function(e){var n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())}),e),t;t=this._cache.get(U)||new s,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var n=this.transformsEnabled();if("all"===n)t.multiply(this.getTransform());else if("position"===n){const e=this.attrs.x||0,n=this.attrs.y||0,r=this.attrs.offsetX||0,i=this.attrs.offsetY||0;t.translate(e-r,n-i)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(H,this._getTransform)}_getTransform(){var e,t,n=this._cache.get(H)||new s;n.reset();var r=this.x(),i=this.y(),o=a.getAngle(this.rotation()),l=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,c=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,u=this.attrs.skewX||0,h=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return 0===r&&0===i||n.translate(r,i),0!==o&&n.rotate(o),0===u&&0===h||n.skew(u,h),1===l&&1===c||n.scale(l,c),0===d&&0===f||n.translate(-1*d,-1*f),n.dirty=!1,n}clone(e){var t,n,r,i,a,o=p.cloneObject(this.attrs);for(t in e)o[t]=e[t];var s=new this.constructor(o);for(t in this.eventListeners)for(r=(n=this.eventListeners[t]).length,i=0;i<r;i++)(a=n[i]).name.indexOf("konva")<0&&(s.eventListeners[t]||(s.eventListeners[t]=[]),s.eventListeners[t].push(a));return s}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),n=this.getStage(),r=void 0!==e.x?e.x:Math.floor(t.x),i=void 0!==e.y?e.y:Math.floor(t.y),a=e.pixelRatio||1,o=new R({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:a}),s=o.getContext();return!1===e.imageSmoothingEnabled&&(s._context.imageSmoothingEnabled=!1),s.save(),(r||i)&&s.translate(-1*r,-1*i),this.drawScene(o),s.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){var t=(e=e||{}).mimeType||null,n=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(r),r}toImage(e){return new Promise(((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,p._urlToImage(this.toDataURL(e),(function(e){t(e),null==n||n(e)}))}catch(e){n(e)}}))}toBlob(e){return new Promise(((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob((e=>{t(e),null==n||n(e)}))}catch(e){n(e)}}))}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.dragDistance}_off(e,t,n){var r,i,a,o=this.eventListeners[e];for(r=0;r<o.length;r++)if(i=o[r].name,a=o[r].handler,!("konva"===i&&"konva"!==t||t&&i!==t||n&&n!==a)){if(o.splice(r,1),0===o.length){delete this.eventListeners[e];break}r--}}_fireChangeEvent(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){var t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();return!!t&&-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){var t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){var n=this["set"+p._capitalize(e)];return p._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(a.autoDrawEnabled){const e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){var n=this.attrs[e];(n!==t||p.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){var r;void 0!==n&&((r=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,r,n))}_fireAndBubble(e,t,n){if(t&&this.nodeType===V&&(t.target=this),!((e===G||e===z)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(e,t);var r=(e===G||e===z)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){let t=this._cache.get(q);if(!t){t={};let e=Object.getPrototypeOf(this);for(;e;)if(e.eventListeners){for(var n in e.eventListeners){const r=e.eventListeners[n],i=t[n]||[];t[n]=r.concat(i)}e=Object.getPrototypeOf(e)}else e=Object.getPrototypeOf(e);this._cache.set(q,t)}return t[e]}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,t);const i=this.eventListeners[e];if(i)for(r=0;r<i.length;r++)i[r].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition(),i=n._getPointerById(t)||n._changedPointerPositions[0]||r;k._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-r.x,y:i.y-r.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){k._dragElements.has(this._id)||this._createDragElement(e);k._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(n){var r={x:n.x-t.offset.x,y:n.y-t.offset.y},i=this.dragBoundFunc();if(void 0!==i){const t=i.call(this,r,e);t?r=t:p.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}stopDrag(e){const t=k._dragElements.get(this._id);t&&(t.dragStatus="stopped"),k._endDragBefore(e),k._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=k._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(e){if((!(void 0!==e.evt.button)||a.dragButtons.indexOf(e.evt.button)>=0)&&!this.isDragging()){var t=!1;k._dragElements.forEach((e=>{this.isAncestorOf(e.node)&&(t=!0)})),t||this._createDragElement(e)}}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=k._dragElements.get(this._id),t=e&&"dragging"===e.dragStatus,n=e&&"ready"===e.dragStatus;t?this.stopDrag():n&&k._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return p.haveIntersection(n,this.getClientRect())}static create(e,t){return p._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){var n,r,i,o=$.prototype.getClassName.call(e),s=e.children;t&&(e.attrs.container=t),a[o]||(p.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");if(n=new(0,a[o])(e.attrs),s)for(r=s.length,i=0;i<r;i++)n.add($._createNode(s[i]));return n}}$.prototype.nodeType="Node",$.prototype._attrsAffectingSize=[],$.prototype.eventListeners={},$.prototype.on.call($.prototype,X,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(H),this._clearSelfAndDescendantCache(U))})),$.prototype.on.call($.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(Y)})),$.prototype.on.call($.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(Q)})),$.prototype.on.call($.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(M)}));const K=P.addGetterSetter;K($,"zIndex"),K($,"absolutePosition"),K($,"position"),K($,"x",0,y()),K($,"y",0,y()),K($,"globalCompositeOperation","source-over",C()),K($,"opacity",1,y()),K($,"name","",C()),K($,"id","",C()),K($,"rotation",0,y()),P.addComponentsGetterSetter($,"scale",["x","y"]),K($,"scaleX",1,y()),K($,"scaleY",1,y()),P.addComponentsGetterSetter($,"skew",["x","y"]),K($,"skewX",0,y()),K($,"skewY",0,y()),P.addComponentsGetterSetter($,"offset",["x","y"]),K($,"offsetX",0,y()),K($,"offsetY",0,y()),K($,"dragDistance",null,y()),K($,"width",0,y()),K($,"height",0,y()),K($,"listening",!0,x()),K($,"preventDefault",!0,x()),K($,"filters",null,(function(e){return this._filterUpToDate=!1,e})),K($,"visible",!0,x()),K($,"transformsEnabled","all",C()),K($,"size"),K($,"dragBoundFunc"),K($,"draggable",!1,x()),P.backCompat($,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class J extends ${constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[];var n=[];return t.forEach((function(t){e(t)&&n.push(t)})),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((e=>{e.parent=null,e.index=0,e.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((e=>{e.parent=null,e.index=0,e.destroy()})),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(var t=0;t<e.length;t++)this.add(e[t]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var n=[];return this._descendants((r=>{const i=r._isMatch(e);return i&&n.push(r),!(!i||!t)})),n}_descendants(e){let t=!1;const n=this.getChildren();for(const r of n){if(t=e(r),t)return!0;if(r.hasChildren()&&(t=r._descendants(e),t))return!0}return!1}toObject(){var e=$.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach((t=>{e.children.push(t.toObject())})),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=$.prototype.clone.call(this,e);return this.getChildren().forEach((function(e){t.add(e.clone())})),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach((function(n){n.isVisible()&&n.intersects(e)&&t.push(n)})),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach((function(t){t._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach((function(e,t){e.index=t})),this._requestDraw()}drawScene(e,t){var n=this.getLayer(),r=e||n&&n.getCanvas(),i=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.scene,s=r&&r.isCache;if(!this.isVisible()&&!s)return this;if(o){i.save();var l=this.getAbsoluteTransform(t).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(i),i.restore()}else this._drawChildren("drawScene",r,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var n=this.getLayer(),r=e||n&&n.hitCanvas,i=r&&r.getContext(),a=this._getCanvasCache();if(a&&a.hit){i.save();var o=this.getAbsoluteTransform(t).getMatrix();i.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",r,t);return this}_drawChildren(e,t,n){var r,i=t&&t.getContext(),a=this.clipWidth(),o=this.clipHeight(),s=this.clipFunc(),l=a&&o||s;const c=n===this;if(l){i.save();var u=this.getAbsoluteTransform(n),h=u.getMatrix();if(i.transform(h[0],h[1],h[2],h[3],h[4],h[5]),i.beginPath(),s)s.call(this,i,this);else{var d=this.clipX(),f=this.clipY();i.rect(d,f,a,o)}i.clip(),h=u.copy().invert().getMatrix(),i.transform(h[0],h[1],h[2],h[3],h[4],h[5])}var g=!c&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;g&&(i.save(),i._applyGlobalCompositeOperation(this)),null===(r=this.children)||void 0===r||r.forEach((function(r){r[e](t,n)})),g&&i.restore(),l&&i.restore()}getClientRect(e){var t,n,r,i,a,o=(e=e||{}).skipTransform,s=e.relativeTo,l={x:1/0,y:1/0,width:0,height:0},c=this;null===(t=this.children)||void 0===t||t.forEach((function(t){if(t.visible()){var o=t.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===o.width&&0===o.height||(void 0===n?(n=o.x,r=o.y,i=o.x+o.width,a=o.y+o.height):(n=Math.min(n,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x+o.width),a=Math.max(a,o.y+o.height)))}}));for(var u=this.find("Shape"),h=!1,d=0;d<u.length;d++){if(u[d]._isVisible(this)){h=!0;break}}return l=h&&void 0!==n?{x:n,y:r,width:i-n,height:a-r}:{x:0,y:0,width:0,height:0},o?l:this._transformedRect(l,s)}}P.addComponentsGetterSetter(J,"clip",["x","y","width","height"]),P.addGetterSetter(J,"clipX",void 0,y()),P.addGetterSetter(J,"clipY",void 0,y()),P.addGetterSetter(J,"clipWidth",void 0,y()),P.addGetterSetter(J,"clipHeight",void 0,y()),P.addGetterSetter(J,"clipFunc");const ee=new Map,te=void 0!==a._global.PointerEvent;function ne(e){return ee.get(e)}function re(e){return{evt:e,pointerId:e.pointerId}}function ie(e,t){return ee.get(e)===t}function ae(e,t){oe(e);t.getStage()&&(ee.set(e,t),te&&t._fire("gotpointercapture",re(new PointerEvent("gotpointercapture"))))}function oe(e,t){const n=ee.get(e);if(!n)return;const r=n.getStage();r&&r.content,ee.delete(e),te&&n._fire("lostpointercapture",re(new PointerEvent("lostpointercapture")))}var se="mouseleave",le="mouseover",ce="mouseenter",ue="mousemove",he="mousedown",de="mouseup",fe="pointermove",ge="pointerdown",pe="pointerup",me="pointercancel",Se="pointerout",ye="pointerleave",ve="pointerover",be="pointerenter",Ce="contextmenu",we="touchstart",xe="touchend",De="touchmove",Te="touchcancel",Pe="wheel",Ie=[[ce,"_pointerenter"],[he,"_pointerdown"],[ue,"_pointermove"],[de,"_pointerup"],[se,"_pointerleave"],[we,"_pointerdown"],[De,"_pointermove"],[xe,"_pointerup"],[Te,"_pointercancel"],[le,"_pointerover"],[Pe,"_wheel"],[Ce,"_contextmenu"],[ge,"_pointerdown"],[fe,"_pointermove"],[pe,"_pointerup"],[me,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const Ae={mouse:{[Se]:"mouseout",[ye]:se,[ve]:le,[be]:ce,[fe]:ue,[ge]:he,[pe]:de,[me]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Se]:"touchout",[ye]:"touchleave",[ve]:"touchover",[be]:"touchenter",[fe]:De,[ge]:we,[pe]:xe,[me]:Te,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Se]:Se,[ye]:ye,[ve]:ve,[be]:be,[fe]:fe,[ge]:ge,[pe]:pe,[me]:me,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Le=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",Oe=e=>{const t=Le(e);return"pointer"===t?a.pointerEventsEnabled&&Ae.pointer:"touch"===t?Ae.touch:"mouse"===t?Ae.mouse:void 0};function _e(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&p.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const Ee=[];class Re extends J{constructor(e){super(_e(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Ee.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{_e(this.attrs)})),this._checkVisibility()}_validateAdd(e){const t="Layer"===e.getType(),n="FastLayer"===e.getType();t||n||p.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){if("."===e.charAt(0)){var t=e.slice(1);e=document.getElementsByClassName(t)[0]}else{var n;n="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(n)}if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e,t=this.children,n=t.length;for(e=0;e<n;e++)t[e].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),J.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&p._isInDocument(e)&&this.container().removeChild(e);var t=Ee.indexOf(this);return t>-1&&Ee.splice(t,1),p.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(p.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find((t=>t.id===e))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var t=new R({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,r=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),r.forEach((function(t){if(t.isVisible()){var r=t._toKonvaCanvas(e);n.drawImage(r._canvas,e.x,e.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}})),t}getIntersection(e){if(!e)return null;var t,n=this.children;for(t=n.length-1;t>=0;t--){const r=n[t].getIntersection(e);if(r)return r}return null}_resizeDOM(){var e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach((n=>{n.setSize({width:e,height:t}),n.draw()}))}add(e,...t){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var r=this.children.length;return r>5&&p.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),a.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return ie(e,this)}setPointerCapture(e){ae(e,this)}releaseCapture(e){oe(e)}getLayers(){return this.children}_bindContentEvents(){a.isBrowser&&Ie.forEach((([e,t])=>{this.content.addEventListener(e,(e=>{this[t](e)}),{passive:!1})}))}_pointerenter(e){this.setPointersPositions(e);const t=Oe(e.type);this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=Oe(e.type);this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=Oe(e.type),n=Le(e.type);if(t){this.setPointersPositions(e);var r=this._getTargetShape(n),i=!k.isDragging||a.hitOnDragEnabled;r&&i?(r._fireAndBubble(t.pointerout,{evt:e}),r._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):i&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const t=Oe(e.type),n=Le(e.type);if(t){this.setPointersPositions(e);var r=!1;this._changedPointerPositions.forEach((i=>{var o=this.getIntersection(i);k.justDragged=!1,a["_"+n+"ListenClick"]=!0;if(!(o&&o.isListening()))return;a.capturePointerEventsEnabled&&o.setPointerCapture(i.id),this[n+"ClickStartShape"]=o,o._fireAndBubble(t.pointerdown,{evt:e,pointerId:i.id}),r=!0;const s=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&s&&e.preventDefault()})),r||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const t=Oe(e.type),n=Le(e.type);if(!t)return;if(k.isDragging&&k.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),!(!k.isDragging||a.hitOnDragEnabled))return;var r={};let i=!1;var o=this._getTargetShape(n);this._changedPointerPositions.forEach((a=>{const s=ne(a.id)||this.getIntersection(a),l=a.id,c={evt:e,pointerId:l};var u=o!==s;if(u&&o&&(o._fireAndBubble(t.pointerout,Object.assign({},c),s),o._fireAndBubble(t.pointerleave,Object.assign({},c),s)),s){if(r[s._id])return;r[s._id]=!0}s&&s.isListening()?(i=!0,u&&(s._fireAndBubble(t.pointerover,Object.assign({},c),o),s._fireAndBubble(t.pointerenter,Object.assign({},c),o),this[n+"targetShape"]=s),s._fireAndBubble(t.pointermove,Object.assign({},c))):o&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:l}),this[n+"targetShape"]=null)})),i||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=Oe(e.type),n=Le(e.type);if(!t)return;this.setPointersPositions(e);const r=this[n+"ClickStartShape"],i=this[n+"ClickEndShape"];var o={};let s=!1;this._changedPointerPositions.forEach((l=>{const c=ne(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),o[c._id])return;o[c._id]=!0}const u=l.id,h={evt:e,pointerId:u};let d=!1;a["_"+n+"InDblClickWindow"]?(d=!0,clearTimeout(this[n+"DblTimeout"])):k.justDragged||(a["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout((function(){a["_"+n+"InDblClickWindow"]=!1}),a.dblClickWindow),c&&c.isListening()?(s=!0,this[n+"ClickEndShape"]=c,c._fireAndBubble(t.pointerup,Object.assign({},h)),a["_"+n+"ListenClick"]&&r&&r===c&&(c._fireAndBubble(t.pointerclick,Object.assign({},h)),d&&i&&i===c&&c._fireAndBubble(t.pointerdblclick,Object.assign({},h)))):(this[n+"ClickEndShape"]=null,a["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),d&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))})),s||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Ce,{evt:e}):this._fire(Ce,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Pe,{evt:e}):this._fire(Pe,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=ne(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(pe,re(e)),oe(e.pointerId)}_lostpointercapture(e){oe(e.pointerId)}setPointersPositions(e){var t=this._getContentPosition(),n=null,r=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,(e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})})),Array.prototype.forEach.call(e.changedTouches||e.touches,(e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})}))):(n=(e.clientX-t.left)/t.scaleX,r=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:p._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:r,id:p._getFirstPointerId(e)}])}_setPointerPosition(e){p.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new R({width:this.width(),height:this.height()}),this.bufferHitCanvas=new F({pixelRatio:1,width:this.width(),height:this.height()}),a.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return p.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(e){e.batchDraw()})),this}}Re.prototype.nodeType="Stage",o(Re),P.addGetterSetter(Re,"container");var Fe="hasShadow",ke="shadowRGBA",Me="patternImage",qe="linearGradient",Ue="radialGradient";let Be;function Ne(){return Be||(Be=p.createCanvasElement().getContext("2d"),Be)}const Qe={};class Ge extends ${constructor(e){let t;for(super(e);t=p.getRandomColor(),!t||t in Qe;);this.colorKey=t,Qe[t]=this}getContext(){return p.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return p.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Fe,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Me,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=Ne().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const t=new s;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(a.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=t.getMatrix(),r="undefined"==typeof DOMMatrix?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(qe,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var t=Ne(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=t.createLinearGradient(n.x,n.y,r.x,r.y),a=0;a<e.length;a+=2)i.addColorStop(e[a],e[a+1]);return i}}_getRadialGradient(){return this._getCache(Ue,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var t=Ne(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),a=0;a<e.length;a+=2)i.addColorStop(e[a],e[a+1]);return i}}getShadowRGBA(){return this._getCache(ke,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=p.colorToRGBA(this.shadowColor());return e?"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")":void 0}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var t=this.getStage().bufferHitCanvas;return t.getContext().clear(),this.drawHit(t,null,!0),t.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return $.prototype.destroy.call(this),delete Qe[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!this.getStage())return!1;if(!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;const n=e||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(n&&r&&i)return!0;const a=this.hasShadow(),o=this.shadowForStrokeEnabled();return!!(n&&r&&a&&o)}setStrokeHitEnabled(e){p.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const t=e.skipTransform,n=e.relativeTo,r=this.getSelfRect(),i=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=r.width+i,o=r.height+i,s=!e.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX():0,c=s?this.shadowOffsetY():0,u=a+Math.abs(l),h=o+Math.abs(c),d=s&&this.shadowBlur()||0,f={width:u+2*d,height:h+2*d,x:-(i/2+d)+Math.min(l,0)+r.x,y:-(i/2+d)+Math.min(c,0)+r.y};return t?f:this._transformedRect(f,n)}drawScene(e,t){var n,r,i=this.getLayer(),a=e||i.getCanvas(),o=a.getContext(),s=this._getCanvasCache(),l=this.getSceneFunc(),c=this.hasShadow(),u=a.isCache,h=t===this;if(!this.isVisible()&&!h)return this;if(s){o.save();var d=this.getAbsoluteTransform(t).getMatrix();return o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!l)return this;if(o.save(),this._useBufferCanvas()&&!u){(r=(n=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this);var f=this.getAbsoluteTransform(t).getMatrix();r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),l.call(this,r,this),r.restore();var g=n.pixelRatio;c&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(n._canvas,0,0,n.width/g,n.height/g)}else{if(o._applyLineJoin(this),!h){f=this.getAbsoluteTransform(t).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}c&&o._applyShadow(this),l.call(this,o,this)}return o.restore(),this}drawHit(e,t,n=!1){if(!this.shouldDrawHit(t,n))return this;var r=this.getLayer(),i=e||r.hitCanvas,a=i&&i.getContext(),o=this.hitFunc()||this.sceneFunc(),s=this._getCanvasCache(),l=s&&s.hit;if(this.colorKey||p.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){a.save();var c=this.getAbsoluteTransform(t).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;a.save(),a._applyLineJoin(this);if(!(this===t)){var u=this.getAbsoluteTransform(t).getMatrix();a.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){var t,n,r,i,a,o=this._getCanvasCache(),s=this._getCachedSceneCanvas(),l=o.hit,c=l.getContext(),u=l.getWidth(),h=l.getHeight();c.clear(),c.drawImage(s._canvas,0,0,u,h);try{for(r=(n=(t=c.getImageData(0,0,u,h)).data).length,i=p._hexToRgb(this.colorKey),a=0;a<r;a+=4)n[a+3]>e?(n[a]=i.r,n[a+1]=i.g,n[a+2]=i.b,n[a+3]=255):n[a+3]=0;c.putImageData(t,0,0)}catch(e){p.error("Unable to draw hit graph from cached scene canvas. "+e.message)}return this}hasPointerCapture(e){return ie(e,this)}setPointerCapture(e){ae(e,this)}releaseCapture(e){oe(e)}}Ge.prototype._fillFunc=function(e){e.fill()},Ge.prototype._strokeFunc=function(e){e.stroke()},Ge.prototype._fillFuncHit=function(e){e.fill()},Ge.prototype._strokeFuncHit=function(e){e.stroke()},Ge.prototype._centroid=!1,Ge.prototype.nodeType="Shape",o(Ge),Ge.prototype.eventListeners={},Ge.prototype.on.call(Ge.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(Fe)})),Ge.prototype.on.call(Ge.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(ke)})),Ge.prototype.on.call(Ge.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(Me)})),Ge.prototype.on.call(Ge.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(qe)})),Ge.prototype.on.call(Ge.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(Ue)})),P.addGetterSetter(Ge,"stroke",void 0,w()),P.addGetterSetter(Ge,"strokeWidth",2,y()),P.addGetterSetter(Ge,"fillAfterStrokeEnabled",!1),P.addGetterSetter(Ge,"hitStrokeWidth","auto",b()),P.addGetterSetter(Ge,"strokeHitEnabled",!0,x()),P.addGetterSetter(Ge,"perfectDrawEnabled",!0,x()),P.addGetterSetter(Ge,"shadowForStrokeEnabled",!0,x()),P.addGetterSetter(Ge,"lineJoin"),P.addGetterSetter(Ge,"lineCap"),P.addGetterSetter(Ge,"sceneFunc"),P.addGetterSetter(Ge,"hitFunc"),P.addGetterSetter(Ge,"dash"),P.addGetterSetter(Ge,"dashOffset",0,y()),P.addGetterSetter(Ge,"shadowColor",void 0,C()),P.addGetterSetter(Ge,"shadowBlur",0,y()),P.addGetterSetter(Ge,"shadowOpacity",1,y()),P.addComponentsGetterSetter(Ge,"shadowOffset",["x","y"]),P.addGetterSetter(Ge,"shadowOffsetX",0,y()),P.addGetterSetter(Ge,"shadowOffsetY",0,y()),P.addGetterSetter(Ge,"fillPatternImage"),P.addGetterSetter(Ge,"fill",void 0,w()),P.addGetterSetter(Ge,"fillPatternX",0,y()),P.addGetterSetter(Ge,"fillPatternY",0,y()),P.addGetterSetter(Ge,"fillLinearGradientColorStops"),P.addGetterSetter(Ge,"strokeLinearGradientColorStops"),P.addGetterSetter(Ge,"fillRadialGradientStartRadius",0),P.addGetterSetter(Ge,"fillRadialGradientEndRadius",0),P.addGetterSetter(Ge,"fillRadialGradientColorStops"),P.addGetterSetter(Ge,"fillPatternRepeat","repeat"),P.addGetterSetter(Ge,"fillEnabled",!0),P.addGetterSetter(Ge,"strokeEnabled",!0),P.addGetterSetter(Ge,"shadowEnabled",!0),P.addGetterSetter(Ge,"dashEnabled",!0),P.addGetterSetter(Ge,"strokeScaleEnabled",!0),P.addGetterSetter(Ge,"fillPriority","color"),P.addComponentsGetterSetter(Ge,"fillPatternOffset",["x","y"]),P.addGetterSetter(Ge,"fillPatternOffsetX",0,y()),P.addGetterSetter(Ge,"fillPatternOffsetY",0,y()),P.addComponentsGetterSetter(Ge,"fillPatternScale",["x","y"]),P.addGetterSetter(Ge,"fillPatternScaleX",1,y()),P.addGetterSetter(Ge,"fillPatternScaleY",1,y()),P.addComponentsGetterSetter(Ge,"fillLinearGradientStartPoint",["x","y"]),P.addComponentsGetterSetter(Ge,"strokeLinearGradientStartPoint",["x","y"]),P.addGetterSetter(Ge,"fillLinearGradientStartPointX",0),P.addGetterSetter(Ge,"strokeLinearGradientStartPointX",0),P.addGetterSetter(Ge,"fillLinearGradientStartPointY",0),P.addGetterSetter(Ge,"strokeLinearGradientStartPointY",0),P.addComponentsGetterSetter(Ge,"fillLinearGradientEndPoint",["x","y"]),P.addComponentsGetterSetter(Ge,"strokeLinearGradientEndPoint",["x","y"]),P.addGetterSetter(Ge,"fillLinearGradientEndPointX",0),P.addGetterSetter(Ge,"strokeLinearGradientEndPointX",0),P.addGetterSetter(Ge,"fillLinearGradientEndPointY",0),P.addGetterSetter(Ge,"strokeLinearGradientEndPointY",0),P.addComponentsGetterSetter(Ge,"fillRadialGradientStartPoint",["x","y"]),P.addGetterSetter(Ge,"fillRadialGradientStartPointX",0),P.addGetterSetter(Ge,"fillRadialGradientStartPointY",0),P.addComponentsGetterSetter(Ge,"fillRadialGradientEndPoint",["x","y"]),P.addGetterSetter(Ge,"fillRadialGradientEndPointX",0),P.addGetterSetter(Ge,"fillRadialGradientEndPointY",0),P.addGetterSetter(Ge,"fillPatternRotation",0),P.backCompat(Ge,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var ze=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Ve=ze.length;class je extends J{constructor(e){super(e),this.canvas=new R,this.hitCanvas=new F({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){$.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!$.prototype.moveUp.call(this))return!1;var e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if($.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if($.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return $.prototype.remove.call(this),e&&e.parentNode&&p._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&p.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),$.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){p.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){p.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,p.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,n=!1;;){for(let r=0;r<Ve;r++){const i=ze[r],a=this._getIntersection({x:e.x+i.x*t,y:e.y+i.y*t}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(!n)return null;t+=1}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,r=n[3];if(255===r){const e=p._rgbToHex(n[0],n[1],n[2]),t=Qe["#"+e];return t?{shape:t}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(e,t){var n=this.getLayer(),r=e||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),J.prototype.drawScene.call(this,r,t),this._fire("draw",{node:this}),this}drawHit(e,t){var n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),J.prototype.drawHit.call(this,r,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){p.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return p.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return p.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}je.prototype.nodeType="Layer",o(je),P.addGetterSetter(je,"imageSmoothingEnabled",!0),P.addGetterSetter(je,"clearBeforeDraw",!0),P.addGetterSetter(je,"hitGraphEnabled",!0,x());class We extends je{constructor(e){super(e),this.listening(!1),p.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}We.prototype.nodeType="FastLayer",o(We);class He extends J{_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&p.throw("You may only add groups and shapes to groups.")}}He.prototype.nodeType="Group",o(He);var Ye=i.performance&&i.performance.now?function(){return i.performance.now()}:function(){return(new Date).getTime()};class Xe{constructor(e,t){this.id=Xe.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Ye(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){var t=[];return t=e?e.length>0?e:[e]:[],this.layers=t,this}getLayers(){return this.layers}addLayer(e){var t,n=this.layers,r=n.length;for(t=0;t<r;t++)if(n[t]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e,t=Xe.animations,n=t.length;for(e=0;e<n;e++)if(t[e].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Ye(),Xe._addAnimation(this),this}stop(){return Xe._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var t,n=e.id,r=this.animations,i=r.length;for(t=0;t<i;t++)if(r[t].id===n){this.animations.splice(t,1);break}}static _runFrames(){var e,t,n,r,i,a,o,s,l={},c=this.animations;for(r=0;r<c.length;r++)if(t=(e=c[r]).layers,n=e.func,e._updateFrameObject(Ye()),a=t.length,!n||!1!==n.call(e,e.frame))for(i=0;i<a;i++)void 0!==(o=t[i])._id&&(l[o._id]=o);for(s in l)l.hasOwnProperty(s)&&l[s].batchDraw()}static _animationLoop(){var e=Xe;e.animations.length?(e._runFrames(),p.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,p.requestAnimFrame(this._animationLoop))}}Xe.animations=[],Xe.animIdCounter=0,Xe.animRunning=!1;var Ze={node:1,duration:1,easing:1,onFinish:1,yoyo:1},$e=0,Ke=["fill","stroke","shadowColor"];class Je{constructor(e,t,n,r,i,a,o){this.prop=e,this.propFunc=t,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()}fire(e){var t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class et{constructor(e){var t,n,r=this,i=e.node,o=i._id,s=e.easing||tt.Linear,l=!!e.yoyo;t=void 0===e.duration?.3:0===e.duration?.001:e.duration,this.node=i,this._id=$e++;var c=i.getLayer()||(i instanceof a.Stage?i.getLayers():null);for(n in c||p.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Xe((function(){r.tween.onEnterFrame()}),c),this.tween=new Je(n,(function(e){r._tweenFunc(e)}),s,0,1,1e3*t,l),this._addListeners(),et.attrs[o]||(et.attrs[o]={}),et.attrs[o][this._id]||(et.attrs[o][this._id]={}),et.tweens[o]||(et.tweens[o]={}),e)void 0===Ze[n]&&this._addAttr(n,e[n]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){var n,r,i,a,o,s,l,c,u=this.node,h=u._id;if((i=et.tweens[h][e])&&delete et.attrs[h][i][e],n=u.getAttr(e),p._isArray(t))if(r=[],o=Math.max(t.length,n.length),"points"===e&&t.length!==n.length&&(t.length>n.length?(l=n,n=p._prepareArrayForTween(n,t,u.closed())):(s=t,t=p._prepareArrayForTween(t,n,u.closed()))),0===e.indexOf("fill"))for(a=0;a<o;a++)if(a%2==0)r.push(t[a]-n[a]);else{var d=p.colorToRGBA(n[a]);c=p.colorToRGBA(t[a]),n[a]=d,r.push({r:c.r-d.r,g:c.g-d.g,b:c.b-d.b,a:c.a-d.a})}else for(a=0;a<o;a++)r.push(t[a]-n[a]);else-1!==Ke.indexOf(e)?(n=p.colorToRGBA(n),r={r:(c=p.colorToRGBA(t)).r-n.r,g:c.g-n.g,b:c.b-n.b,a:c.a-n.a}):r=t-n;et.attrs[h][this._id][e]={start:n,diff:r,end:t,trueEnd:s,trueStart:l},et.tweens[h][e]=this._id}_tweenFunc(e){var t,n,r,i,a,o,s,l,c=this.node,u=et.attrs[c._id][this._id];for(t in u){if(r=(n=u[t]).start,i=n.diff,l=n.end,p._isArray(r))if(a=[],s=Math.max(r.length,l.length),0===t.indexOf("fill"))for(o=0;o<s;o++)o%2==0?a.push((r[o]||0)+i[o]*e):a.push("rgba("+Math.round(r[o].r+i[o].r*e)+","+Math.round(r[o].g+i[o].g*e)+","+Math.round(r[o].b+i[o].b*e)+","+(r[o].a+i[o].a*e)+")");else for(o=0;o<s;o++)a.push((r[o]||0)+i[o]*e);else a=-1!==Ke.indexOf(t)?"rgba("+Math.round(r.r+i.r*e)+","+Math.round(r.g+i.g*e)+","+Math.round(r.b+i.b*e)+","+(r.a+i.a*e)+")":r+i*e;c.setAttr(t,a)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,t=et.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,t=et.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e,t=this.node._id,n=this._id,r=et.tweens[t];for(e in this.pause(),r)delete et.tweens[t][e];delete et.attrs[t][n]}}et.attrs={},et.tweens={},$.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new et(e).play()};const tt={BackEaseIn(e,t,n,r){var i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t},BackEaseOut(e,t,n,r){var i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},BackEaseInOut(e,t,n,r){var i=1.70158;return(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},ElasticEaseIn(e,t,n,r,i,a){var o=0;return 0===e?t:1==(e/=r)?t+n:(a||(a=.3*r),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)+t)},ElasticEaseOut(e,t,n,r,i,a){var o=0;return 0===e?t:1==(e/=r)?t+n:(a||(a=.3*r),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*(2*Math.PI)/a)+n+t)},ElasticEaseInOut(e,t,n,r,i,a){var o=0;return 0===e?t:2==(e/=r/2)?t+n:(a||(a=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI)/a)*.5+n+t)},BounceEaseOut:(e,t,n,r)=>(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(e,t,n,r)=>n-tt.BounceEaseOut(r-e,0,n,r)+t,BounceEaseInOut:(e,t,n,r)=>e<r/2?.5*tt.BounceEaseIn(2*e,0,n,r)+t:.5*tt.BounceEaseOut(2*e-r,0,n,r)+.5*n+t,EaseIn:(e,t,n,r)=>n*(e/=r)*e+t,EaseOut:(e,t,n,r)=>-n*(e/=r)*(e-2)+t,EaseInOut:(e,t,n,r)=>(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,r)=>n*(e/=r)*e*e*e*e+t,StrongEaseOut:(e,t,n,r)=>n*((e=e/r-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,r)=>(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,r)=>n*e/r+t},nt=p._assign(a,{Util:p,Transform:s,Node:$,Container:J,Stage:Re,stages:Ee,Layer:je,FastLayer:We,Group:He,DD:k,Shape:Ge,shapes:Qe,Animation:Xe,Tween:et,Easings:tt,Context:A,Canvas:E});class rt extends Ge{_sceneFunc(e){var t=a.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,n),e.arc(0,0,this.innerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),n=this.clockwise(),r=a.getAngle(n?360-this.angle():this.angle()),i=Math.cos(Math.min(r,Math.PI)),o=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),s=Math.sin(Math.min(r,Math.PI/2)),l=i*(i>0?e:t),c=o*(o>0?e:t),u=s*(s>0?t:e);return{x:l,y:n?-1*u:c,width:1*t-l,height:u-c}}}function it(e,t,n,r,i,a,o){var s=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-r,2)),c=o*s/(s+l),u=o*l/(s+l);return[n-c*(i-e),r-c*(a-t),n+u*(i-e),r+u*(a-t)]}function at(e,t){var n,r,i=e.length,a=[];for(n=2;n<i-2;n+=2)r=it(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),isNaN(r[0])||(a.push(r[0]),a.push(r[1]),a.push(e[n]),a.push(e[n+1]),a.push(r[2]),a.push(r[3]));return a}rt.prototype._centroid=!0,rt.prototype.className="Arc",rt.prototype._attrsAffectingSize=["innerRadius","outerRadius"],o(rt),P.addGetterSetter(rt,"innerRadius",0,y()),P.addGetterSetter(rt,"outerRadius",0,y()),P.addGetterSetter(rt,"angle",0,y()),P.addGetterSetter(rt,"clockwise",!1,x());class ot extends Ge{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(e){var t,n,r,i=this.points(),a=i.length,o=this.tension(),s=this.closed(),l=this.bezier();if(a){if(e.beginPath(),e.moveTo(i[0],i[1]),0!==o&&a>4){for(n=(t=this.getTensionPoints()).length,r=s?0:4,s||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);r<n-2;)e.bezierCurveTo(t[r++],t[r++],t[r++],t[r++],t[r++],t[r++]);s||e.quadraticCurveTo(t[n-2],t[n-1],i[a-2],i[a-1])}else if(l)for(r=2;r<a;)e.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);else for(r=2;r<a;r+=2)e.lineTo(i[r],i[r+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():at(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,n=this.tension(),r=it(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),i=it(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),a=at(e,n);return[r[2],r[3]].concat(a).concat([i[0],i[1],e[t-2],e[t-1],i[2],i[3],r[0],r[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};for(var t,n,r=(e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points())[0],i=e[0],a=e[1],o=e[1],s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],r=Math.min(r,t),i=Math.max(i,t),a=Math.min(a,n),o=Math.max(o,n);return{x:r,y:a,width:i-r,height:o-a}}}ot.prototype.className="Line",ot.prototype._attrsAffectingSize=["points","bezier","tension"],o(ot),P.addGetterSetter(ot,"closed",!1),P.addGetterSetter(ot,"bezier",!1),P.addGetterSetter(ot,"tension",0,y()),P.addGetterSetter(ot,"points",[],function(){if(a.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(p._isArray(e)?e.forEach((function(e){p._isNumber(e)||p.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")})):p.warn(m(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}());class st extends Ge{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=st.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength;this.on("dataChange.konva",(function(){this.dataArray=st.parsePathData(this.data()),this.pathLength=0;for(var e=0;e<this.dataArray.length;++e)this.pathLength+=this.dataArray[e].pathLength}))}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var n=!1,r=0;r<t.length;r++){var i=t[r].command,a=t[r].points;switch(i){case"L":e.lineTo(a[0],a[1]);break;case"M":e.moveTo(a[0],a[1]);break;case"C":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":e.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],h=a[5],d=a[6],f=a[7],g=l>c?l:c,p=l>c?1:l/c,m=l>c?c/l:1;e.translate(o,s),e.rotate(d),e.scale(p,m),e.arc(0,0,g,u,u+h,1-f),e.scale(1/p,1/m),e.rotate(-d),e.translate(-o,-s);break;case"z":n=!0,e.closePath()}}n||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach((function(t){if("A"===t.command){var n=t.points[4],r=t.points[5],i=t.points[4]+r,a=Math.PI/180;if(Math.abs(n-i)<a&&(a=Math.abs(n-i)),r<0)for(let r=n-a;r>i;r-=a){const n=st.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],r,0);e.push(n.x,n.y)}else for(let r=n+a;r<i;r+=a){const n=st.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],r,0);e.push(n.x,n.y)}}else if("C"===t.command)for(let n=0;n<=1;n+=.01){const r=st.getPointOnCubicBezier(n,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);e.push(r.x,r.y)}else e=e.concat(t.points)}));for(var t,n,r=e[0],i=e[0],a=e[1],o=e[1],s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],isNaN(t)||(r=Math.min(r,t),i=Math.max(i,t)),isNaN(n)||(a=Math.min(a,n),o=Math.max(o,n));return{x:r,y:a,width:i-r,height:o-a}}getLength(){return this.pathLength}getPointAtLength(e){var t,n=0,r=this.dataArray.length;if(!r)return null;for(;n<r&&e>this.dataArray[n].pathLength;)e-=this.dataArray[n].pathLength,++n;if(n===r)return{x:(t=this.dataArray[n-1].points.slice(-2))[0],y:t[1]};if(e<.01)return{x:(t=this.dataArray[n].points.slice(0,2))[0],y:t[1]};var i=this.dataArray[n],a=i.points;switch(i.command){case"L":return st.getPointOnLine(e,i.start.x,i.start.y,a[0],a[1]);case"C":return st.getPointOnCubicBezier(e/i.pathLength,i.start.x,i.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return st.getPointOnQuadraticBezier(e/i.pathLength,i.start.x,i.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],h=a[5],d=a[6];return u+=h*e/i.pathLength,st.getPointOnEllipticalArc(o,s,l,c,u,d)}return null}static getLineLength(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}static getPointOnLine(e,t,n,r,i,a,o){void 0===a&&(a=t),void 0===o&&(o=n);var s=(i-n)/(r-t+1e-8),l=Math.sqrt(e*e/(1+s*s));r<t&&(l*=-1);var c,u=s*l;if(r===t)c={x:a,y:o+u};else if((o-n)/(a-t+1e-8)===s)c={x:a+l,y:o+u};else{var h,d,f=this.getLineLength(t,n,r,i),g=(a-t)*(r-t)+(o-n)*(i-n);h=t+(g/=f*f)*(r-t),d=n+g*(i-n);var p=this.getLineLength(a,o,h,d),m=Math.sqrt(e*e-p*p);l=Math.sqrt(m*m/(1+s*s)),r<t&&(l*=-1),c={x:h+l,y:d+(u=s*l)}}return c}static getPointOnCubicBezier(e,t,n,r,i,a,o,s,l){function c(e){return e*e*e}function u(e){return 3*e*e*(1-e)}function h(e){return 3*e*(1-e)*(1-e)}function d(e){return(1-e)*(1-e)*(1-e)}return{x:s*c(e)+a*u(e)+r*h(e)+t*d(e),y:l*c(e)+o*u(e)+i*h(e)+n*d(e)}}static getPointOnQuadraticBezier(e,t,n,r,i,a,o){function s(e){return e*e}function l(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:a*s(e)+r*l(e)+t*c(e),y:o*s(e)+i*l(e)+n*c(e)}}static getPointOnEllipticalArc(e,t,n,r,i,a){var o=Math.cos(a),s=Math.sin(a),l=n*Math.cos(i),c=r*Math.sin(i);return{x:e+(l*o-c*s),y:t+(l*s+c*o)}}static parsePathData(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);var i,a=t.split("|"),o=[],s=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<a.length;r++){var h=a[r],d=h.charAt(0);for(h=h.slice(1),s.length=0;i=u.exec(h);)s.push(i[0]);for(var f=[],g=0,p=s.length;g<p;g++)if("00"!==s[g]){var m=parseFloat(s[g]);isNaN(m)?f.push(0):f.push(m)}else f.push(0,0);for(;f.length>0&&!isNaN(f[0]);){var S,y,v,b,C,w,x,D,T,P,I=null,A=[],L=l,O=c;switch(d){case"l":l+=f.shift(),c+=f.shift(),I="L",A.push(l,c);break;case"L":l=f.shift(),c=f.shift(),A.push(l,c);break;case"m":var _=f.shift(),E=f.shift();if(l+=_,c+=E,I="M",o.length>2&&"z"===o[o.length-1].command)for(var R=o.length-2;R>=0;R--)if("M"===o[R].command){l=o[R].points[0]+_,c=o[R].points[1]+E;break}A.push(l,c),d="l";break;case"M":l=f.shift(),c=f.shift(),I="M",A.push(l,c),d="L";break;case"h":l+=f.shift(),I="L",A.push(l,c);break;case"H":l=f.shift(),I="L",A.push(l,c);break;case"v":c+=f.shift(),I="L",A.push(l,c);break;case"V":c=f.shift(),I="L",A.push(l,c);break;case"C":A.push(f.shift(),f.shift(),f.shift(),f.shift()),l=f.shift(),c=f.shift(),A.push(l,c);break;case"c":A.push(l+f.shift(),c+f.shift(),l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),I="C",A.push(l,c);break;case"S":y=l,v=c,"C"===(S=o[o.length-1]).command&&(y=l+(l-S.points[2]),v=c+(c-S.points[3])),A.push(y,v,f.shift(),f.shift()),l=f.shift(),c=f.shift(),I="C",A.push(l,c);break;case"s":y=l,v=c,"C"===(S=o[o.length-1]).command&&(y=l+(l-S.points[2]),v=c+(c-S.points[3])),A.push(y,v,l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),I="C",A.push(l,c);break;case"Q":A.push(f.shift(),f.shift()),l=f.shift(),c=f.shift(),A.push(l,c);break;case"q":A.push(l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),I="Q",A.push(l,c);break;case"T":y=l,v=c,"Q"===(S=o[o.length-1]).command&&(y=l+(l-S.points[0]),v=c+(c-S.points[1])),l=f.shift(),c=f.shift(),I="Q",A.push(y,v,l,c);break;case"t":y=l,v=c,"Q"===(S=o[o.length-1]).command&&(y=l+(l-S.points[0]),v=c+(c-S.points[1])),l+=f.shift(),c+=f.shift(),I="Q",A.push(y,v,l,c);break;case"A":b=f.shift(),C=f.shift(),w=f.shift(),x=f.shift(),D=f.shift(),T=l,P=c,l=f.shift(),c=f.shift(),I="A",A=this.convertEndpointToCenterParameterization(T,P,l,c,x,D,b,C,w);break;case"a":b=f.shift(),C=f.shift(),w=f.shift(),x=f.shift(),D=f.shift(),T=l,P=c,l+=f.shift(),c+=f.shift(),I="A",A=this.convertEndpointToCenterParameterization(T,P,l,c,x,D,b,C,w)}o.push({command:I||d,points:A,start:{x:L,y:O},pathLength:this.calcLength(L,O,I||d,A)})}"z"!==d&&"Z"!==d||o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,t,n,r){var i,a,o,s,l=st;switch(n){case"L":return l.getLineLength(e,t,r[0],r[1]);case"C":for(i=0,a=l.getPointOnCubicBezier(0,e,t,r[0],r[1],r[2],r[3],r[4],r[5]),s=.01;s<=1;s+=.01)o=l.getPointOnCubicBezier(s,e,t,r[0],r[1],r[2],r[3],r[4],r[5]),i+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case"Q":for(i=0,a=l.getPointOnQuadraticBezier(0,e,t,r[0],r[1],r[2],r[3]),s=.01;s<=1;s+=.01)o=l.getPointOnQuadraticBezier(s,e,t,r[0],r[1],r[2],r[3]),i+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case"A":i=0;var c=r[4],u=r[5],h=r[4]+u,d=Math.PI/180;if(Math.abs(c-h)<d&&(d=Math.abs(c-h)),a=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),u<0)for(s=c-d;s>h;s-=d)o=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(s=c+d;s<h;s+=d)o=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=l.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=l.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),i+=l.getLineLength(a.x,a.y,o.x,o.y)}return 0}static convertEndpointToCenterParameterization(e,t,n,r,i,a,o,s,l){var c=l*(Math.PI/180),u=Math.cos(c)*(e-n)/2+Math.sin(c)*(t-r)/2,h=-1*Math.sin(c)*(e-n)/2+Math.cos(c)*(t-r)/2,d=u*u/(o*o)+h*h/(s*s);d>1&&(o*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((o*o*(s*s)-o*o*(h*h)-s*s*(u*u))/(o*o*(h*h)+s*s*(u*u)));i===a&&(f*=-1),isNaN(f)&&(f=0);var g=f*o*h/s,p=f*-s*u/o,m=(e+n)/2+Math.cos(c)*g-Math.sin(c)*p,S=(t+r)/2+Math.sin(c)*g+Math.cos(c)*p,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},v=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},b=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(v(e,t))},C=b([1,0],[(u-g)/o,(h-p)/s]),w=[(u-g)/o,(h-p)/s],x=[(-1*u-g)/o,(-1*h-p)/s],D=b(w,x);return v(w,x)<=-1&&(D=Math.PI),v(w,x)>=1&&(D=0),0===a&&D>0&&(D-=2*Math.PI),1===a&&D<0&&(D+=2*Math.PI),[m,S,o,s,C,D,c,a]}}st.prototype.className="Path",st.prototype._attrsAffectingSize=["data"],o(st),P.addGetterSetter(st,"data");class lt extends ot{_sceneFunc(e){super._sceneFunc(e);var t=2*Math.PI,n=this.points(),r=n,i=0!==this.tension()&&n.length>4;i&&(r=this.getTensionPoints());var a,o,s=this.pointerLength(),l=n.length;if(i){const e=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],n[l-2],n[l-1]],t=st.calcLength(r[r.length-4],r[r.length-3],"C",e),i=st.getPointOnQuadraticBezier(Math.min(1,1-s/t),e[0],e[1],e[2],e[3],e[4],e[5]);a=n[l-2]-i.x,o=n[l-1]-i.y}else a=n[l-2]-n[l-4],o=n[l-1]-n[l-3];var c=(Math.atan2(o,a)+t)%t,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[l-2],n[l-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-s,u/2),e.lineTo(-s,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),i?(a=(r[0]+r[2])/2-n[0],o=(r[1]+r[3])/2-n[1]):(a=n[2]-n[0],o=n[3]-n[1]),e.rotate((Math.atan2(-o,-a)+t)%t),e.moveTo(0,0),e.lineTo(-s,u/2),e.lineTo(-s,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}}lt.prototype.className="Arrow",o(lt),P.addGetterSetter(lt,"pointerLength",10,y()),P.addGetterSetter(lt,"pointerWidth",10,y()),P.addGetterSetter(lt,"pointerAtBeginning",!1),P.addGetterSetter(lt,"pointerAtEnding",!0);class ct extends Ge{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}ct.prototype._centroid=!0,ct.prototype.className="Circle",ct.prototype._attrsAffectingSize=["radius"],o(ct),P.addGetterSetter(ct,"radius",0,y());class ut extends Ge{_sceneFunc(e){var t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}ut.prototype.className="Ellipse",ut.prototype._centroid=!0,ut.prototype._attrsAffectingSize=["radiusX","radiusY"],o(ut),P.addComponentsGetterSetter(ut,"radius",["x","y"]),P.addGetterSetter(ut,"radiusX",0,y()),P.addGetterSetter(ut,"radiusY",0,y());class ht extends Ge{constructor(e){super(e),this.on("imageChange.konva",(()=>{this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",(()=>{this._requestDraw()}))}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),n=this.getHeight(),r=this.cornerRadius(),i=this.attrs.image;let a;if(i){const e=this.attrs.cropWidth,r=this.attrs.cropHeight;a=e&&r?[i,this.cropX(),this.cropY(),e,r,0,0,t,n]:[i,0,0,t,n]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?p.drawRoundedRectPath(e,t,n,r):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)),i&&(r&&e.clip(),e.drawImage.apply(e,a))}_hitFunc(e){var t=this.width(),n=this.height(),r=this.cornerRadius();e.beginPath(),r?p.drawRoundedRectPath(e,t,n,r):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width}getHeight(){var e,t;return null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height}static fromURL(e,t,n=null){var r=p.createImageElement();r.onload=function(){var e=new ht({image:r});t(e)},r.onerror=n,r.crossOrigin="Anonymous",r.src=e}}ht.prototype.className="Image",o(ht),P.addGetterSetter(ht,"cornerRadius",0,v(4)),P.addGetterSetter(ht,"image"),P.addComponentsGetterSetter(ht,"crop",["x","y","width","height"]),P.addGetterSetter(ht,"cropX",0,y()),P.addGetterSetter(ht,"cropY",0,y()),P.addGetterSetter(ht,"cropWidth",0,y()),P.addGetterSetter(ht,"cropHeight",0,y());var dt=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],ft="up",gt="right",pt="down",mt="left",St=dt.length;class yt extends He{constructor(e){super(e),this.on("add.konva",(function(e){this._addListeners(e.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t,n=this,r=function(){n._sync()};for(t=0;t<St;t++)e.on(dt[t]+"Change.konva",r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e,t,n,r,i,a,o,s=this.getText(),l=this.getTag();if(s&&l){switch(e=s.width(),t=s.height(),n=l.pointerDirection(),r=l.pointerWidth(),o=l.pointerHeight(),i=0,a=0,n){case ft:i=e/2,a=-1*o;break;case gt:i=e+r,a=t/2;break;case pt:i=e/2,a=t+o;break;case mt:i=-1*r,a=t/2}l.setAttrs({x:-1*i,y:-1*a,width:e,height:t}),s.setAttrs({x:-1*i,y:-1*a})}}}yt.prototype.className="Label",o(yt);class vt extends Ge{_sceneFunc(e){var t=this.width(),n=this.height(),r=this.pointerDirection(),i=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let s=0,l=0,c=0,u=0;"number"==typeof o?s=l=c=u=Math.min(o,t/2,n/2):(s=Math.min(o[0]||0,t/2,n/2),l=Math.min(o[1]||0,t/2,n/2),u=Math.min(o[2]||0,t/2,n/2),c=Math.min(o[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(s,0),r===ft&&(e.lineTo((t-i)/2,0),e.lineTo(t/2,-1*a),e.lineTo((t+i)/2,0)),e.lineTo(t-l,0),e.arc(t-l,l,l,3*Math.PI/2,0,!1),r===gt&&(e.lineTo(t,(n-a)/2),e.lineTo(t+i,n/2),e.lineTo(t,(n+a)/2)),e.lineTo(t,n-u),e.arc(t-u,n-u,u,0,Math.PI/2,!1),r===pt&&(e.lineTo((t+i)/2,n),e.lineTo(t/2,n+a),e.lineTo((t-i)/2,n)),e.lineTo(c,n),e.arc(c,n-c,c,Math.PI/2,Math.PI,!1),r===mt&&(e.lineTo(0,(n+a)/2),e.lineTo(-1*i,n/2),e.lineTo(0,(n-a)/2)),e.lineTo(0,s),e.arc(s,s,s,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,n=this.pointerWidth(),r=this.pointerHeight(),i=this.pointerDirection(),a=this.width(),o=this.height();return i===ft?(t-=r,o+=r):i===pt?o+=r:i===mt?(e-=1.5*n,a+=n):i===gt&&(a+=1.5*n),{x:e,y:t,width:a,height:o}}}vt.prototype.className="Tag",o(vt),P.addGetterSetter(vt,"pointerDirection","none"),P.addGetterSetter(vt,"pointerWidth",0,y()),P.addGetterSetter(vt,"pointerHeight",0,y()),P.addGetterSetter(vt,"cornerRadius",0,v(4));class bt extends Ge{_sceneFunc(e){var t=this.cornerRadius(),n=this.width(),r=this.height();e.beginPath(),t?p.drawRoundedRectPath(e,n,r,t):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}}bt.prototype.className="Rect",o(bt),P.addGetterSetter(bt,"cornerRadius",0,v(4));class Ct extends Ge{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(var r=0;r<e;r++)n.push({x:t*Math.sin(2*r*Math.PI/e),y:-1*t*Math.cos(2*r*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();var t=e[0].x,n=e[0].y,r=e[0].x,i=e[0].y;return e.forEach((e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.y)})),{x:t,y:r,width:n-t,height:i-r}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Ct.prototype.className="RegularPolygon",Ct.prototype._centroid=!0,Ct.prototype._attrsAffectingSize=["radius"],o(Ct),P.addGetterSetter(Ct,"radius",0,y()),P.addGetterSetter(Ct,"sides",0,y());var wt=2*Math.PI;class xt extends Ge{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,wt,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),wt,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}xt.prototype.className="Ring",xt.prototype._centroid=!0,xt.prototype._attrsAffectingSize=["innerRadius","outerRadius"],o(xt),P.addGetterSetter(xt,"innerRadius",0,y()),P.addGetterSetter(xt,"outerRadius",0,y());class Dt extends Ge{constructor(e){super(e),this._updated=!0,this.anim=new Xe((()=>{var e=this._updated;return this._updated=!1,e})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(e){var t=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[t],a=this.frameOffsets(),o=i[r+0],s=i[r+1],l=i[r+2],c=i[r+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),u)if(a){var h=a[t],d=2*n;e.drawImage(u,o,s,l,c,h[d+0],h[d+1],l,c)}else e.drawImage(u,o,s,l,c,0,0,l,c)}_hitFunc(e){var t=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[t],a=this.frameOffsets(),o=i[r+2],s=i[r+3];if(e.beginPath(),a){var l=a[t],c=2*n;e.rect(l[c+0],l[c+1],o,s)}else e.rect(0,0,o,s);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval((function(){e._updateIndex()}),1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}}Dt.prototype.className="Sprite",o(Dt),P.addGetterSetter(Dt,"animation"),P.addGetterSetter(Dt,"animations"),P.addGetterSetter(Dt,"frameOffsets"),P.addGetterSetter(Dt,"image"),P.addGetterSetter(Dt,"frameIndex",0,y()),P.addGetterSetter(Dt,"frameRate",17,y()),P.backCompat(Dt,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Tt extends Ge{_sceneFunc(e){var t=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(var i=1;i<2*r;i++){var a=i%2==0?n:t,o=a*Math.sin(i*Math.PI/r),s=-1*a*Math.cos(i*Math.PI/r);e.lineTo(o,s)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}function Pt(e){return Array.from(e)}Tt.prototype.className="Star",Tt.prototype._centroid=!0,Tt.prototype._attrsAffectingSize=["innerRadius","outerRadius"],o(Tt),P.addGetterSetter(Tt,"numPoints",5,y()),P.addGetterSetter(Tt,"innerRadius",0,y()),P.addGetterSetter(Tt,"outerRadius",0,y());var It,At="auto",Lt="justify",Ot="left",_t="middle",Et="normal",Rt=" ",Ft="none",kt=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Mt=kt.length;function qt(){return It||(It=p.createCanvasElement().getContext("2d"))}class Ut extends Ge{constructor(e){super(function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(e)),this._partialTextX=0,this._partialTextY=0;for(var t=0;t<Mt;t++)this.on(kt[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,n=t.length;if(this.text()){var r,i=this.padding(),a=this.fontSize(),o=this.lineHeight()*a,s=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),h=this.letterSpacing(),d=this.fill(),f=this.textDecoration(),g=-1!==f.indexOf("underline"),p=-1!==f.indexOf("line-through"),m=0,S=(m=o/2,0),y=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",_t),e.setAttr("textAlign",Ot),s===_t?l=(this.getHeight()-n*o-2*i)/2:"bottom"===s&&(l=this.getHeight()-n*o-2*i),e.translate(i,l+i),r=0;r<n;r++){S=0,y=0;var v,b,C,w=t[r],x=w.text,D=w.width,T=w.lastInParagraph;if(e.save(),"right"===c?S+=u-D-2*i:"center"===c&&(S+=(u-D-2*i)/2),g){e.save(),e.beginPath(),e.moveTo(S,m+y+Math.round(a/2)),b=0===(v=x.split(" ").length-1),C=c!==Lt||T?D:u-2*i,e.lineTo(S+Math.round(C),m+y+Math.round(a/2)),e.lineWidth=a/15;const t=this._getLinearGradient();e.strokeStyle=t||d,e.stroke(),e.restore()}if(p){e.save(),e.beginPath(),e.moveTo(S,m+y),b=0===(v=x.split(" ").length-1),C=c===Lt&&T&&!b?u-2*i:D,e.lineTo(S+Math.round(C),m+y),e.lineWidth=a/15;const t=this._getLinearGradient();e.strokeStyle=t||d,e.stroke(),e.restore()}if(0!==h||c===Lt){v=x.split(" ").length-1;for(var P=Pt(x),I=0;I<P.length;I++){var A=P[I];" "!==A||T||c!==Lt||(S+=(u-2*i-D)/v),this._partialTextX=S,this._partialTextY=m+y,this._partialText=A,e.fillStrokeShape(this),S+=this.measureSize(A).width+h}}else this._partialTextX=S,this._partialTextY=m+y,this._partialText=x,e.fillStrokeShape(this);e.restore(),n>1&&(m+=o)}}}_hitFunc(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=p._isString(e)?e:null==e?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===At||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===At||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return p.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n=qt(),r=this.fontSize();return n.save(),n.font=this._getContextFont(),t=n.measureText(e),n.restore(),{width:t.width,height:r}}_getContextFont(){return this.fontStyle()+Rt+this.fontVariant()+Rt+(this.fontSize()+"px ")+this.fontFamily().split(",").map((e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e})).join(", ")}_addTextLine(e){this.align()===Lt&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),n=e.length;return qt().measureText(e).width+(n?t*(n-1):0)}_setTextData(){var e=this.text().split("\n"),t=+this.fontSize(),n=0,r=this.lineHeight()*t,i=this.attrs.width,a=this.attrs.height,o=i!==At&&void 0!==i,s=a!==At&&void 0!==a,l=this.padding(),c=i-2*l,u=a-2*l,h=0,d=this.wrap(),f="char"!==d&&d!==Ft,g=this.ellipsis();this.textArr=[],qt().font=this._getContextFont();for(var p=g?this._getTextWidth(""):0,m=0,S=e.length;m<S;++m){var y=e[m],v=this._getTextWidth(y);if(o&&v>c)for(;y.length>0;){for(var b=0,C=y.length,w="",x=0;b<C;){var D=b+C>>>1,T=y.slice(0,D+1),P=this._getTextWidth(T)+p;P<=c?(b=D+1,w=T,x=P):C=D}if(!w)break;if(f){var I,A=y[w.length];(I=(A===Rt||"-"===A)&&x<=c?w.length:Math.max(w.lastIndexOf(Rt),w.lastIndexOf("-"))+1)>0&&(b=I,w=w.slice(0,b),x=this._getTextWidth(w))}if(w=w.trimRight(),this._addTextLine(w),n=Math.max(n,x),h+=r,this._shouldHandleEllipsis(h)){this._tryToAddEllipsisToLastLine();break}if((y=(y=y.slice(b)).trimLeft()).length>0&&(v=this._getTextWidth(y))<=c){this._addTextLine(y),h+=r,n=Math.max(n,v);break}}else this._addTextLine(y),h+=r,n=Math.max(n,v),this._shouldHandleEllipsis(h)&&m<S-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),s&&h+r>u)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){var t=+this.fontSize(),n=this.lineHeight()*t,r=this.attrs.height,i=r!==At&&void 0!==r,a=r-2*this.padding();return!(this.wrap()!==Ft)||i&&e+n>a}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,t=e!==At&&void 0!==e,n=e-2*this.padding(),r=this.ellipsis(),i=this.textArr[this.textArr.length-1];if(i&&r){if(t)this._getTextWidth(i.text+"")<n||(i.text=i.text.slice(0,i.text.length-3));this.textArr.splice(this.textArr.length-1,1),this._addTextLine(i.text+"")}}getStrokeScaleEnabled(){return!0}}Ut.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},Ut.prototype._strokeFunc=function(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},Ut.prototype.className="Text",Ut.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],o(Ut),P.overWriteSetter(Ut,"width",b()),P.overWriteSetter(Ut,"height",b()),P.addGetterSetter(Ut,"fontFamily","Arial"),P.addGetterSetter(Ut,"fontSize",12,y()),P.addGetterSetter(Ut,"fontStyle",Et),P.addGetterSetter(Ut,"fontVariant",Et),P.addGetterSetter(Ut,"padding",0,y()),P.addGetterSetter(Ut,"align",Ot),P.addGetterSetter(Ut,"verticalAlign","top"),P.addGetterSetter(Ut,"lineHeight",1,y()),P.addGetterSetter(Ut,"wrap","word"),P.addGetterSetter(Ut,"ellipsis",!1,x()),P.addGetterSetter(Ut,"letterSpacing",0,y()),P.addGetterSetter(Ut,"text","",C()),P.addGetterSetter(Ut,"textDecoration","");var Bt="normal";function Nt(e){e.fillText(this.partialText,0,0)}function Qt(e){e.strokeText(this.partialText,0,0)}class Gt extends Ge{constructor(e){super(e),this.dummyCanvas=p.createCanvasElement(),this.dataArray=[],this.dataArray=st.parsePathData(this.attrs.data),this.on("dataChange.konva",(function(){this.dataArray=st.parsePathData(this.attrs.data),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo;"underline"===t&&e.beginPath();for(var a=0;a<i.length;a++){e.save();var o=i[a].p0;e.translate(o.x,o.y),e.rotate(i[a].rotation),this.partialText=i[a].text,e.fillStrokeShape(this),"underline"===t&&(0===a&&e.moveTo(0,r/2+1),e.lineTo(r,r/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=n,e.lineWidth=r/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var n=t[0].p0;e.moveTo(n.x,n.y)}for(var r=0;r<t.length;r++){var i=t[r].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return p.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Ut.prototype.setText.call(this,e)}_getContextFont(){return Ut.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var n=t.measureText(e);return t.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,t=this._getTextSize(this.attrs.text),n=this.letterSpacing(),r=this.align(),i=this.kerningFunc();this.textWidth=t.width,this.textHeight=t.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var o=0,s=0;s<e.dataArray.length;s++)e.dataArray[s].pathLength>0&&(o+=e.dataArray[s].pathLength);var l=0;"center"===r&&(l=Math.max(0,o/2-a/2)),"right"===r&&(l=Math.max(0,o-a));for(var c,u,h,d=Pt(this.text()),f=this.text().split(" ").length-1,g=-1,p=0,m=function(){p=0;for(var t=e.dataArray,n=g+1;n<t.length;n++){if(t[n].pathLength>0)return g=n,t[n];"M"===t[n].command&&(c={x:t[n].points[0],y:t[n].points[1]})}return{}},S=function(t){var i=e._getTextSize(t).width+n;" "===t&&"justify"===r&&(i+=(o-a)/f);var s=0,l=0;for(u=void 0;Math.abs(i-s)/i>.01&&l<20;){l++;for(var d=s;void 0===h;)(h=m())&&d+h.pathLength<i&&(d+=h.pathLength,h=void 0);if(0===Object.keys(h).length||void 0===c)return;var g=!1;switch(h.command){case"L":st.getLineLength(c.x,c.y,h.points[0],h.points[1])>i?u=st.getPointOnLine(i,c.x,c.y,h.points[0],h.points[1],c.x,c.y):h=void 0;break;case"A":var S=h.points[4],y=h.points[5],v=h.points[4]+y;0===p?p=S+1e-8:i>s?p+=Math.PI/180*y/Math.abs(y):p-=Math.PI/360*y/Math.abs(y),(y<0&&p<v||y>=0&&p>v)&&(p=v,g=!0),u=st.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],p,h.points[6]);break;case"C":0===p?p=i>h.pathLength?1e-8:i/h.pathLength:i>s?p+=(i-s)/h.pathLength/2:p=Math.max(p-(s-i)/h.pathLength/2,0),p>1&&(p=1,g=!0),u=st.getPointOnCubicBezier(p,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);break;case"Q":0===p?p=i/h.pathLength:i>s?p+=(i-s)/h.pathLength:p-=(s-i)/h.pathLength,p>1&&(p=1,g=!0),u=st.getPointOnQuadraticBezier(p,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3])}void 0!==u&&(s=st.getLineLength(c.x,c.y,u.x,u.y)),g&&(g=!1,h=void 0)}},y=l/(e._getTextSize("C").width+n)-1,v=0;v<y&&(S("C"),void 0!==c&&void 0!==u);v++)c=u;for(var b=0;b<d.length&&(S(d[b]),void 0!==c&&void 0!==u);b++){var C=st.getLineLength(c.x,c.y,u.x,u.y),w=0;if(i)try{w=i(d[b-1],d[b])*this.fontSize()}catch(e){w=0}c.x+=w,u.x+=w,this.textWidth+=w;var x=st.getPointOnLine(w+C/2,c.x,c.y,u.x,u.y),D=Math.atan2(u.y-c.y,u.x-c.x);this.glyphInfo.push({transposeX:x.x,transposeY:x.y,text:d[b],rotation:D,p0:c,p1:u}),c=u}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach((function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)}));for(var t,n,r=e[0]||0,i=e[0]||0,a=e[1]||0,o=e[1]||0,s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],r=Math.min(r,t),i=Math.max(i,t),a=Math.min(a,n),o=Math.max(o,n);var l=this.fontSize();return{x:r-l/2,y:a-l/2,width:i-r+l,height:o-a+l}}destroy(){return p.releaseCanvas(this.dummyCanvas),super.destroy()}}Gt.prototype._fillFunc=Nt,Gt.prototype._strokeFunc=Qt,Gt.prototype._fillFuncHit=Nt,Gt.prototype._strokeFuncHit=Qt,Gt.prototype.className="TextPath",Gt.prototype._attrsAffectingSize=["text","fontSize","data"],o(Gt),P.addGetterSetter(Gt,"data"),P.addGetterSetter(Gt,"fontFamily","Arial"),P.addGetterSetter(Gt,"fontSize",12,y()),P.addGetterSetter(Gt,"fontStyle",Bt),P.addGetterSetter(Gt,"align","left"),P.addGetterSetter(Gt,"letterSpacing",0,y()),P.addGetterSetter(Gt,"textBaseline","middle"),P.addGetterSetter(Gt,"fontVariant",Bt),P.addGetterSetter(Gt,"text",""),P.addGetterSetter(Gt,"textDecoration",null),P.addGetterSetter(Gt,"kerningFunc",null);var zt="tr-konva",Vt=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((e=>e+`.${zt}`)).join(" "),jt="nodesRect",Wt=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Ht={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Yt="ontouchstart"in a._global;var Xt=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Zt(e,t,n){const r=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),i=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return Object.assign(Object.assign({},e),{rotation:e.rotation+t,x:r,y:i})}function $t(e,t){const n=function(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}(e);return Zt(e,t,n)}class Kt extends He{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Vt,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return p.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return zt+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter((e=>!e.isAncestorOf(this)||(p.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)));return this._nodes=e=t,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((e=>{const t=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},n=e._attrsAffectingSize.map((e=>e+"Change."+this._getEventNamespace())).join(" ");e.on(n,t),e.on(Wt.map((e=>e+`.${this._getEventNamespace()}`)).join(" "),t),e.on(`absoluteTransformChange.${this._getEventNamespace()}`,t),this._proxyDrag(e)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,(n=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(n,!1)})),e.on(`dragmove.${this._getEventNamespace()}`,(n=>{if(!t)return;const r=e.getAbsolutePosition(),i=r.x-t.x,a=r.y-t.y;this.nodes().forEach((t=>{if(t===e)return;if(t.isDragging())return;const r=t.getAbsolutePosition();t.setAbsolutePosition({x:r.x+i,y:r.y+a}),t.startDrag(n)})),t=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((e=>{e.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(jt),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(jt,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){var r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=e.getAbsoluteScale(n),o=e.getAbsolutePosition(n),s=r.x*i.x-e.offsetX()*i.x,l=r.y*i.y-e.offsetY()*i.y;const c=(a.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return Zt({x:o.x+s*Math.cos(c)+l*Math.sin(-c),y:o.y+l*Math.cos(c)+s*Math.sin(c),width:r.width*i.x,height:r.height*i.y,rotation:c},-a.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map((t=>{const n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var r=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],i=t.getAbsoluteTransform();r.forEach((function(t){var n=i.point(t);e.push(n)}))}));const t=new s;var n,r,i,o;t.rotate(-a.getAngle(this.rotation())),e.forEach((function(e){var a=t.point(e);void 0===n&&(n=i=a.x,r=o=a.y),n=Math.min(n,a.x),r=Math.min(r,a.y),i=Math.max(i,a.x),o=Math.max(o,a.y)})),t.invert();const l=t.point({x:n,y:r});return{x:l.x,y:l.y,width:i-n,height:o-r,rotation:a.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Xt.forEach(function(e){this._createAnchor(e)}.bind(this)),this._createAnchor("rotater")}_createAnchor(e){var t=new bt({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Yt?10:"auto"}),n=this;t.on("mousedown touchstart",(function(e){n._handleMouseDown(e)})),t.on("dragstart",(e=>{t.stopDrag(),e.cancelBubble=!0})),t.on("dragend",(e=>{e.cancelBubble=!0})),t.on("mouseenter",(()=>{var n=a.getAngle(this.rotation()),r=function(e,t){if("rotater"===e)return"crosshair";t+=p.degToRad(Ht[e]||0);var n=(p.radToDeg(t)%360+360)%360;return p._inRange(n,337.5,360)||p._inRange(n,0,22.5)?"ns-resize":p._inRange(n,22.5,67.5)?"nesw-resize":p._inRange(n,67.5,112.5)?"ew-resize":p._inRange(n,112.5,157.5)?"nwse-resize":p._inRange(n,157.5,202.5)?"ns-resize":p._inRange(n,202.5,247.5)?"nesw-resize":p._inRange(n,247.5,292.5)?"ew-resize":p._inRange(n,292.5,337.5)?"nwse-resize":(p.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(e,n);t.getStage().content&&(t.getStage().content.style.cursor=r),this._cursorChange=!0})),t.on("mouseout",(()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(t)}_createBack(){var e=new Ge({name:"back",width:0,height:0,draggable:!0,sceneFunc(e){var t=this.getParent(),n=t.padding();e.beginPath(),e.rect(-n,-n,this.width()+2*n,this.height()+2*n),e.moveTo(this.width()/2,-n),t.rotateEnabled()&&e.lineTo(this.width()/2,-t.rotateAnchorOffset()*p._sign(this.height())-n),e.fillStrokeShape(this)},hitFunc:(e,t)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();e.beginPath(),e.rect(-n,-n,t.width()+2*n,t.height()+2*n),e.fillStrokeShape(t)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",(e=>{e.cancelBubble=!0})),e.on("dragmove",(e=>{e.cancelBubble=!0})),e.on("dragend",(e=>{e.cancelBubble=!0})),this.on("dragmove",(e=>{this.update()}))}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),n=t.width,r=t.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/i),this.cos=Math.abs(n/i),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=e.target.getAbsolutePosition(),o=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach((t=>{t._fire("transformstart",{evt:e.evt,target:t})}))}_handleMouseMove(e){var t,n,r,i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(e);const s=o.getPointerPosition();let l={x:s.x-this._anchorDragOffset.x,y:s.y-this._anchorDragOffset.y};const c=i.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),i.setAbsolutePosition(l);const u=i.getAbsolutePosition();if(c.x!==u.x||c.y!==u.y)if("rotater"!==this._movingAnchorName){var h=this.keepRatio()||e.shiftKey,d=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(h){var f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(f.x-i.x(),2)+Math.pow(f.y-i.y(),2));var g=this.findOne(".top-left").x()>f.x?-1:1,p=this.findOne(".top-left").y()>f.y?-1:1;t=r*this.cos*g,n=r*this.sin*p,this.findOne(".top-left").x(f.x-t),this.findOne(".top-left").y(f.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){if(h){f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(i.x()-f.x,2)+Math.pow(f.y-i.y(),2));g=this.findOne(".top-right").x()<f.x?-1:1,p=this.findOne(".top-right").y()>f.y?-1:1;t=r*this.cos*g,n=r*this.sin*p,this.findOne(".top-right").x(f.x+t),this.findOne(".top-right").y(f.y-n)}var m=i.position();this.findOne(".top-left").y(m.y),this.findOne(".bottom-right").x(m.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(i.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(i.x());else if("bottom-left"===this._movingAnchorName){if(h){f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(f.x-i.x(),2)+Math.pow(i.y()-f.y,2));g=f.x<i.x()?-1:1,p=i.y()<f.y?-1:1;t=r*this.cos*g,n=r*this.sin*p,i.x(f.x-t),i.y(f.y+n)}m=i.position(),this.findOne(".top-left").x(m.x),this.findOne(".bottom-right").y(m.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(i.y());else if("bottom-right"===this._movingAnchorName){if(h){f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(i.x()-f.x,2)+Math.pow(i.y()-f.y,2));g=this.findOne(".bottom-right").x()<f.x?-1:1,p=this.findOne(".bottom-right").y()<f.y?-1:1;t=r*this.cos*g,n=r*this.sin*p,this.findOne(".bottom-right").x(f.x+t),this.findOne(".bottom-right").y(f.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(d=this.centeredScaling()||e.altKey){var S=this.findOne(".top-left"),y=this.findOne(".bottom-right"),v=S.x(),b=S.y(),C=this.getWidth()-y.x(),w=this.getHeight()-y.y();y.move({x:-v,y:-b}),S.move({x:C,y:w})}var x=this.findOne(".top-left").getAbsolutePosition();t=x.x,n=x.y;var D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),T=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:D,height:T,rotation:a.getAngle(this.rotation())},e)}else{var P=this._getNodeRect();t=i.x()-P.width/2,n=-i.y()+P.height/2;let r=Math.atan2(-n,t)+Math.PI/2;P.height<0&&(r-=Math.PI);const o=a.getAngle(this.rotation())+r,s=a.getAngle(this.rotationSnapTolerance()),l=$t(P,function(e,t,n){let r=t;for(let i=0;i<e.length;i++){const o=a.getAngle(e[i]),s=Math.abs(o-t)%(2*Math.PI);Math.min(s,2*Math.PI-s)<n&&(r=o)}return r}(this.rotationSnaps(),o,s)-P.rotation);this._fitNodesInto(l,e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var t=this.getNode();this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach((t=>{t._fire("transformend",{evt:e,target:t})})),this._movingAnchorName=null}}_fitNodesInto(e,t){var n=this._getNodeRect();if(p._inRange(e.width,2*-this.padding()-1,1))return void this.update();if(p._inRange(e.height,2*-this.padding()-1,1))return void this.update();const r=this.flipEnabled();var i=new s;if(i.rotate(a.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const t=i.point({x:2*-this.padding(),y:0});if(e.x+=t.x,e.y+=t.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,!r)return void this.update()}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const t=i.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.width+=2*this.padding(),!r)return void this.update()}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const t=i.point({x:0,y:2*-this.padding()});if(e.x+=t.x,e.y+=t.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!r)return void this.update()}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const t=i.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!r)return void this.update()}if(this.boundBoxFunc()){const t=this.boundBoxFunc()(n,e);t?e=t:p.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,l=new s;l.translate(n.x,n.y),l.rotate(n.rotation),l.scale(n.width/o,n.height/o);const c=new s;c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(e.width/o,e.height/o);const u=c.multiply(l.invert());this._nodes.forEach((e=>{var n;const r=e.getParent().getAbsoluteTransform(),i=e.getTransform().copy();i.translate(e.offsetX(),e.offsetY());const a=new s;a.multiply(r.copy().invert()).multiply(u).multiply(r).multiply(i);const o=a.decompose();e.setAttrs(o),this._fire("transform",{evt:t,target:e}),e._fire("transform",{evt:t,target:e}),null===(n=e.getLayer())||void 0===n||n.batchDraw()})),this.rotation(p._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation(p._getRotation(t.rotation));var n=t.width,r=t.height,i=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();this.find("._anchor").forEach((e=>{e.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:a&&i.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:a&&i.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:a&&i.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:a&&i.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:a&&i.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:a&&i.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:a&&i.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:a&&i.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*p._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(e=this.getLayer())||void 0===e||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),He.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return $.prototype.toObject.call(this)}clone(e){return $.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Kt.prototype.className="Transformer",o(Kt),P.addGetterSetter(Kt,"enabledAnchors",Xt,(function(e){return e instanceof Array||p.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach((function(e){-1===Xt.indexOf(e)&&p.warn("Unknown anchor name: "+e+". Available names are: "+Xt.join(", "))})),e||[]})),P.addGetterSetter(Kt,"flipEnabled",!0,x()),P.addGetterSetter(Kt,"resizeEnabled",!0),P.addGetterSetter(Kt,"anchorSize",10,y()),P.addGetterSetter(Kt,"rotateEnabled",!0),P.addGetterSetter(Kt,"rotationSnaps",[]),P.addGetterSetter(Kt,"rotateAnchorOffset",50,y()),P.addGetterSetter(Kt,"rotationSnapTolerance",5,y()),P.addGetterSetter(Kt,"borderEnabled",!0),P.addGetterSetter(Kt,"anchorStroke","rgb(0, 161, 255)"),P.addGetterSetter(Kt,"anchorStrokeWidth",1,y()),P.addGetterSetter(Kt,"anchorFill","white"),P.addGetterSetter(Kt,"anchorCornerRadius",0,y()),P.addGetterSetter(Kt,"borderStroke","rgb(0, 161, 255)"),P.addGetterSetter(Kt,"borderStrokeWidth",1,y()),P.addGetterSetter(Kt,"borderDash"),P.addGetterSetter(Kt,"keepRatio",!0),P.addGetterSetter(Kt,"centeredScaling",!1),P.addGetterSetter(Kt,"ignoreStroke",!1),P.addGetterSetter(Kt,"padding",0,y()),P.addGetterSetter(Kt,"node"),P.addGetterSetter(Kt,"nodes"),P.addGetterSetter(Kt,"boundBoxFunc"),P.addGetterSetter(Kt,"anchorDragBoundFunc"),P.addGetterSetter(Kt,"shouldOverdrawWholeArea",!1),P.addGetterSetter(Kt,"useSingleNodeRotation",!0),P.backCompat(Kt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Jt extends Ge{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,a.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}function en(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Jt.prototype.className="Wedge",Jt.prototype._centroid=!0,Jt.prototype._attrsAffectingSize=["radius"],o(Jt),P.addGetterSetter(Jt,"radius",0,y()),P.addGetterSetter(Jt,"angle",0,y()),P.addGetterSetter(Jt,"clockwise",!1),P.backCompat(Jt,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var tn=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],nn=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];P.addGetterSetter($,"blurRadius",0,y(),P.afterSetFilter);P.addGetterSetter($,"brightness",0,y(),P.afterSetFilter);P.addGetterSetter($,"contrast",0,y(),P.afterSetFilter);function rn(e,t,n,r,i){var a=n-t,o=i-r;return 0===a?r+o/2:0===o?r:o*((e-t)/a)+r}P.addGetterSetter($,"embossStrength",.5,y(),P.afterSetFilter),P.addGetterSetter($,"embossWhiteLevel",.5,y(),P.afterSetFilter),P.addGetterSetter($,"embossDirection","top-left",null,P.afterSetFilter),P.addGetterSetter($,"embossBlend",!1,null,P.afterSetFilter);P.addGetterSetter($,"enhance",0,y(),P.afterSetFilter);P.addGetterSetter($,"hue",0,y(),P.afterSetFilter),P.addGetterSetter($,"saturation",0,y(),P.afterSetFilter),P.addGetterSetter($,"luminance",0,y(),P.afterSetFilter);P.addGetterSetter($,"hue",0,y(),P.afterSetFilter),P.addGetterSetter($,"saturation",0,y(),P.afterSetFilter),P.addGetterSetter($,"value",0,y(),P.afterSetFilter);function an(e,t,n){var r=4*(n*e.width+t),i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function on(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}P.addGetterSetter($,"kaleidoscopePower",2,y(),P.afterSetFilter),P.addGetterSetter($,"kaleidoscopeAngle",0,y(),P.afterSetFilter);P.addGetterSetter($,"threshold",0,y(),P.afterSetFilter);P.addGetterSetter($,"noise",.2,y(),P.afterSetFilter);P.addGetterSetter($,"pixelSize",8,y(),P.afterSetFilter);P.addGetterSetter($,"levels",.5,y(),P.afterSetFilter);P.addGetterSetter($,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),P.addGetterSetter($,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),P.addGetterSetter($,"blue",0,S,P.afterSetFilter);P.addGetterSetter($,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),P.addGetterSetter($,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),P.addGetterSetter($,"blue",0,S,P.afterSetFilter),P.addGetterSetter($,"alpha",1,(function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e}));P.addGetterSetter($,"threshold",.5,y(),P.afterSetFilter);const sn=nt.Util._assign(nt,{Arc:rt,Arrow:lt,Circle:ct,Ellipse:ut,Image:ht,Label:yt,Tag:vt,Line:ot,Path:st,Rect:bt,RegularPolygon:Ct,Ring:xt,Sprite:Dt,Star:Tt,Text:Ut,TextPath:Gt,Transformer:Kt,Wedge:Jt,Filters:{Blur:function(e){var t=Math.round(this.blurRadius());t>0&&function(e,t){var n,r,i,a,o,s,l,c,u,h,d,f,g,p,m,S,y,v,b,C,w,x,D,T,P=e.data,I=e.width,A=e.height,L=t+t+1,O=I-1,_=A-1,E=t+1,R=E*(E+1)/2,F=new en,k=null,M=F,q=null,U=null,B=tn[t],N=nn[t];for(i=1;i<L;i++)M=M.next=new en,i===E&&(k=M);for(M.next=F,l=s=0,r=0;r<A;r++){for(S=y=v=b=c=u=h=d=0,f=E*(C=P[s]),g=E*(w=P[s+1]),p=E*(x=P[s+2]),m=E*(D=P[s+3]),c+=R*C,u+=R*w,h+=R*x,d+=R*D,M=F,i=0;i<E;i++)M.r=C,M.g=w,M.b=x,M.a=D,M=M.next;for(i=1;i<E;i++)a=s+((O<i?O:i)<<2),c+=(M.r=C=P[a])*(T=E-i),u+=(M.g=w=P[a+1])*T,h+=(M.b=x=P[a+2])*T,d+=(M.a=D=P[a+3])*T,S+=C,y+=w,v+=x,b+=D,M=M.next;for(q=F,U=k,n=0;n<I;n++)P[s+3]=D=d*B>>N,0!==D?(D=255/D,P[s]=(c*B>>N)*D,P[s+1]=(u*B>>N)*D,P[s+2]=(h*B>>N)*D):P[s]=P[s+1]=P[s+2]=0,c-=f,u-=g,h-=p,d-=m,f-=q.r,g-=q.g,p-=q.b,m-=q.a,a=l+((a=n+t+1)<O?a:O)<<2,c+=S+=q.r=P[a],u+=y+=q.g=P[a+1],h+=v+=q.b=P[a+2],d+=b+=q.a=P[a+3],q=q.next,f+=C=U.r,g+=w=U.g,p+=x=U.b,m+=D=U.a,S-=C,y-=w,v-=x,b-=D,U=U.next,s+=4;l+=I}for(n=0;n<I;n++){for(y=v=b=S=u=h=d=c=0,f=E*(C=P[s=n<<2]),g=E*(w=P[s+1]),p=E*(x=P[s+2]),m=E*(D=P[s+3]),c+=R*C,u+=R*w,h+=R*x,d+=R*D,M=F,i=0;i<E;i++)M.r=C,M.g=w,M.b=x,M.a=D,M=M.next;for(o=I,i=1;i<=t;i++)s=o+n<<2,c+=(M.r=C=P[s])*(T=E-i),u+=(M.g=w=P[s+1])*T,h+=(M.b=x=P[s+2])*T,d+=(M.a=D=P[s+3])*T,S+=C,y+=w,v+=x,b+=D,M=M.next,i<_&&(o+=I);for(s=n,q=F,U=k,r=0;r<A;r++)P[3+(a=s<<2)]=D=d*B>>N,D>0?(D=255/D,P[a]=(c*B>>N)*D,P[a+1]=(u*B>>N)*D,P[a+2]=(h*B>>N)*D):P[a]=P[a+1]=P[a+2]=0,c-=f,u-=g,h-=p,d-=m,f-=q.r,g-=q.g,p-=q.b,m-=q.a,a=n+((a=r+E)<_?a:_)*I<<2,c+=S+=q.r=P[a],u+=y+=q.g=P[a+1],h+=v+=q.b=P[a+2],d+=b+=q.a=P[a+3],q=q.next,f+=C=U.r,g+=w=U.g,p+=x=U.b,m+=D=U.a,S-=C,y-=w,v-=x,b-=D,U=U.next,s+=I}}(e,t)},Brighten:function(e){var t,n=255*this.brightness(),r=e.data,i=r.length;for(t=0;t<i;t+=4)r[t]+=n,r[t+1]+=n,r[t+2]+=n},Contrast:function(e){var t,n=Math.pow((this.contrast()+100)/100,2),r=e.data,i=r.length,a=150,o=150,s=150;for(t=0;t<i;t+=4)a=r[t],o=r[t+1],s=r[t+2],a/=255,a-=.5,a*=n,a+=.5,o/=255,o-=.5,o*=n,o+=.5,s/=255,s-=.5,s*=n,s+=.5,a=(a*=255)<0?0:a>255?255:a,o=(o*=255)<0?0:o>255?255:o,s=(s*=255)<0?0:s>255?255:s,r[t]=a,r[t+1]=o,r[t+2]=s},Emboss:function(e){var t=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),a=0,o=0,s=e.data,l=e.width,c=e.height,u=4*l,h=c;switch(r){case"top-left":a=-1,o=-1;break;case"top":a=-1,o=0;break;case"top-right":a=-1,o=1;break;case"right":a=0,o=1;break;case"bottom-right":a=1,o=1;break;case"bottom":a=1,o=0;break;case"bottom-left":a=1,o=-1;break;case"left":a=0,o=-1;break;default:p.error("Unknown emboss direction: "+r)}do{var d=(h-1)*u,f=a;h+f<1&&(f=0),h+f>c&&(f=0);var g=(h-1+f)*l*4,m=l;do{var S=d+4*(m-1),y=o;m+y<1&&(y=0),m+y>l&&(y=0);var v=g+4*(m-1+y),b=s[S]-s[v],C=s[S+1]-s[v+1],w=s[S+2]-s[v+2],x=b,D=x>0?x:-x;if((C>0?C:-C)>D&&(x=C),(w>0?w:-w)>D&&(x=w),x*=t,i){var T=s[S]+x,P=s[S+1]+x,I=s[S+2]+x;s[S]=T>255?255:T<0?0:T,s[S+1]=P>255?255:P<0?0:P,s[S+2]=I>255?255:I<0?0:I}else{var A=n-x;A<0?A=0:A>255&&(A=255),s[S]=s[S+1]=s[S+2]=A}}while(--m)}while(--h)},Enhance:function(e){var t,n,r,i,a=e.data,o=a.length,s=a[0],l=s,c=a[1],u=c,h=a[2],d=h,f=this.enhance();if(0!==f){for(i=0;i<o;i+=4)(t=a[i+0])<s?s=t:t>l&&(l=t),(n=a[i+1])<c?c=n:n>u&&(u=n),(r=a[i+2])<h?h=r:r>d&&(d=r);var g,p,m,S,y,v,b,C,w;for(l===s&&(l=255,s=0),u===c&&(u=255,c=0),d===h&&(d=255,h=0),f>0?(p=l+f*(255-l),m=s-f*(s-0),y=u+f*(255-u),v=c-f*(c-0),C=d+f*(255-d),w=h-f*(h-0)):(p=l+f*(l-(g=.5*(l+s))),m=s+f*(s-g),y=u+f*(u-(S=.5*(u+c))),v=c+f*(c-S),C=d+f*(d-(b=.5*(d+h))),w=h+f*(h-b)),i=0;i<o;i+=4)a[i+0]=rn(a[i+0],s,l,m,p),a[i+1]=rn(a[i+1],c,u,v,y),a[i+2]=rn(a[i+2],h,d,w,C)}},Grayscale:function(e){var t,n,r=e.data,i=r.length;for(t=0;t<i;t+=4)n=.34*r[t]+.5*r[t+1]+.16*r[t+2],r[t]=n,r[t+1]=n,r[t+2]=n},HSL:function(e){var t,n,r,i,a,o=e.data,s=o.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=127*this.luminance(),h=1*l*Math.cos(c*Math.PI/180),d=1*l*Math.sin(c*Math.PI/180),f=.299+.701*h+.167*d,g=.587-.587*h+.33*d,p=.114-.114*h-.497*d,m=.299-.299*h-.328*d,S=.587+.413*h+.035*d,y=.114-.114*h+.293*d,v=.299-.3*h+1.25*d,b=.587-.586*h-1.05*d,C=.114+.886*h-.2*d;for(t=0;t<s;t+=4)n=o[t+0],r=o[t+1],i=o[t+2],a=o[t+3],o[t+0]=f*n+g*r+p*i+u,o[t+1]=m*n+S*r+y*i+u,o[t+2]=v*n+b*r+C*i+u,o[t+3]=a},HSV:function(e){var t,n,r,i,a,o=e.data,s=o.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=l*c*Math.cos(u*Math.PI/180),d=l*c*Math.sin(u*Math.PI/180),f=.299*l+.701*h+.167*d,g=.587*l-.587*h+.33*d,p=.114*l-.114*h-.497*d,m=.299*l-.299*h-.328*d,S=.587*l+.413*h+.035*d,y=.114*l-.114*h+.293*d,v=.299*l-.3*h+1.25*d,b=.587*l-.586*h-1.05*d,C=.114*l+.886*h-.2*d;for(t=0;t<s;t+=4)n=o[t+0],r=o[t+1],i=o[t+2],a=o[t+3],o[t+0]=f*n+g*r+p*i,o[t+1]=m*n+S*r+y*i,o[t+2]=v*n+b*r+C*i,o[t+3]=a},Invert:function(e){var t,n=e.data,r=n.length;for(t=0;t<r;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]},Kaleidoscope:function(e){var t,n,r,i,a,o,s,l,c,u=e.width,h=e.height,d=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),g=Math.floor(u*(f%360)/360);if(!(d<1)){var m=p.createCanvasElement();m.width=u,m.height=h;var S=m.getContext("2d").getImageData(0,0,u,h);p.releaseCanvas(m),function(e,t,n){var r,i,a,o,s=e.data,l=t.data,c=e.width,u=e.height,h=n.polarCenterX||c/2,d=n.polarCenterY||u/2,f=0,g=0,p=0,m=0,S=Math.sqrt(h*h+d*d);i=c-h,a=u-d,S=(o=Math.sqrt(i*i+a*a))>S?o:S;var y,v,b,C,w=u,x=c,D=360/x*Math.PI/180;for(v=0;v<x;v+=1)for(b=Math.sin(v*D),C=Math.cos(v*D),y=0;y<w;y+=1)i=Math.floor(h+S*y/w*C),f=s[0+(r=4*((a=Math.floor(d+S*y/w*b))*c+i))],g=s[r+1],p=s[r+2],m=s[r+3],l[0+(r=4*(v+y*c))]=f,l[r+1]=g,l[r+2]=p,l[r+3]=m}(e,S,{polarCenterX:u/2,polarCenterY:h/2});for(var y=u/Math.pow(2,d);y<=8;)y*=2,d-=1;var v=y=Math.ceil(y),b=0,C=v,w=1;for(g+y>u&&(b=v,C=0,w=-1),n=0;n<h;n+=1)for(t=b;t!==C;t+=w)l=4*(u*n+Math.round(t+g)%u),i=S.data[l+0],a=S.data[l+1],o=S.data[l+2],s=S.data[l+3],c=4*(u*n+t),S.data[c+0]=i,S.data[c+1]=a,S.data[c+2]=o,S.data[c+3]=s;for(n=0;n<h;n+=1)for(v=Math.floor(y),r=0;r<d;r+=1){for(t=0;t<v+1;t+=1)l=4*(u*n+t),i=S.data[l+0],a=S.data[l+1],o=S.data[l+2],s=S.data[l+3],c=4*(u*n+2*v-t-1),S.data[c+0]=i,S.data[c+1]=a,S.data[c+2]=o,S.data[c+3]=s;v*=2}!function(e,t,n){var r,i,a,o,s,l,c=e.data,u=t.data,h=e.width,d=e.height,f=n.polarCenterX||h/2,g=n.polarCenterY||d/2,p=0,m=0,S=0,y=0,v=Math.sqrt(f*f+g*g);i=h-f,a=d-g,v=(l=Math.sqrt(i*i+a*a))>v?l:v;var b,C,w,x=d,D=h,T=n.polarRotation||0;for(i=0;i<h;i+=1)for(a=0;a<d;a+=1)o=i-f,s=a-g,b=Math.sqrt(o*o+s*s)*x/v,C=(C=(180*Math.atan2(s,o)/Math.PI+360+T)%360)*D/360,w=Math.floor(C),p=c[0+(r=4*(Math.floor(b)*h+w))],m=c[r+1],S=c[r+2],y=c[r+3],u[0+(r=4*(a*h+i))]=p,u[r+1]=m,u[r+2]=S,u[r+3]=y}(S,e,{polarRotation:0})}},Mask:function(e){var t=function(e,t){var n=an(e,0,0),r=an(e,e.width-1,0),i=an(e,0,e.height-1),a=an(e,e.width-1,e.height-1),o=t||10;if(on(n,r)<o&&on(r,a)<o&&on(a,i)<o&&on(i,n)<o){for(var s=function(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([r,n,a,i]),l=[],c=0;c<e.width*e.height;c++){var u=on(s,[e.data[4*c],e.data[4*c+1],e.data[4*c+2]]);l[c]=u<o?0:255}return l}}(e,this.threshold());return t&&function(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}(e,t=function(e,t,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-a,g=l+d-a;if(f>=0&&f<n&&g>=0&&g<t){var p=r[h*i+d];u+=e[f*t+g]*p}}o[c]=u}return o}(t=function(e,t,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-a,g=l+d-a;if(f>=0&&f<n&&g>=0&&g<t){var p=r[h*i+d];u+=e[f*t+g]*p}}o[c]=u>=1020?255:0}return o}(t=function(e,t,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-a,g=l+d-a;if(f>=0&&f<n&&g>=0&&g<t){var p=r[h*i+d];u+=e[f*t+g]*p}}o[c]=2040===u?255:0}return o}(t,e.width,e.height),e.width,e.height),e.width,e.height)),e},Noise:function(e){var t,n=255*this.noise(),r=e.data,i=r.length,a=n/2;for(t=0;t<i;t+=4)r[t+0]+=a-2*a*Math.random(),r[t+1]+=a-2*a*Math.random(),r[t+2]+=a-2*a*Math.random()},Pixelate:function(e){var t,n,r,i,a,o,s,l,c,u,h,d,f,g,m=Math.ceil(this.pixelSize()),S=e.width,y=e.height,v=Math.ceil(S/m),b=Math.ceil(y/m),C=e.data;if(m<=0)p.error("pixelSize value can not be <= 0");else for(d=0;d<v;d+=1)for(f=0;f<b;f+=1){for(i=0,a=0,o=0,s=0,c=(l=d*m)+m,h=(u=f*m)+m,g=0,t=l;t<c;t+=1)if(!(t>=S))for(n=u;n<h;n+=1)n>=y||(i+=C[(r=4*(S*n+t))+0],a+=C[r+1],o+=C[r+2],s+=C[r+3],g+=1);for(i/=g,a/=g,o/=g,s/=g,t=l;t<c;t+=1)if(!(t>=S))for(n=u;n<h;n+=1)n>=y||(C[(r=4*(S*n+t))+0]=i,C[r+1]=a,C[r+2]=o,C[r+3]=s)}},Posterize:function(e){var t,n=Math.round(254*this.levels())+1,r=e.data,i=r.length,a=255/n;for(t=0;t<i;t+=1)r[t]=Math.floor(r[t]/a)*a},RGB:function(e){var t,n,r=e.data,i=r.length,a=this.red(),o=this.green(),s=this.blue();for(t=0;t<i;t+=4)n=(.34*r[t]+.5*r[t+1]+.16*r[t+2])/255,r[t]=n*a,r[t+1]=n*o,r[t+2]=n*s,r[t+3]=r[t+3]},RGBA:function(e){var t,n,r=e.data,i=r.length,a=this.red(),o=this.green(),s=this.blue(),l=this.alpha();for(t=0;t<i;t+=4)n=1-l,r[t]=a*l+r[t]*n,r[t+1]=o*l+r[t+1]*n,r[t+2]=s*l+r[t+2]*n},Sepia:function(e){var t,n,r,i,a=e.data,o=a.length;for(t=0;t<o;t+=4)n=a[t+0],r=a[t+1],i=a[t+2],a[t+0]=Math.min(255,.393*n+.769*r+.189*i),a[t+1]=Math.min(255,.349*n+.686*r+.168*i),a[t+2]=Math.min(255,.272*n+.534*r+.131*i)},Solarize:function(e){var t=e.data,n=e.width,r=4*n,i=e.height;do{var a=(i-1)*r,o=n;do{var s=a+4*(o-1),l=t[s],c=t[s+1],u=t[s+2];l>127&&(l=255-l),c>127&&(c=255-c),u>127&&(u=255-u),t[s]=l,t[s+1]=c,t[s+2]=u}while(--o)}while(--i)},Threshold:function(e){var t,n=255*this.threshold(),r=e.data,i=r.length;for(t=0;t<i;t+=1)r[t]=r[t]<n?0:255}}})}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);a.r(i);var o={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.nc=void 0;var o={};return(()=>{"use strict";a.r(o),a.d(o,{DicomViewer:()=>Gs});var e={};a.r(e),a.d(e,{ar:()=>yr,en:()=>gr,ru:()=>mr});var t=a(787),n=a.n(t);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var s=a(697),l=a.n(s);function c(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=c(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function u(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=c(e))&&(r&&(r+=" "),r+=t);return r}const h=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}};var d=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const f=h((function(e){return d.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var g=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),p=Math.abs,m=String.fromCharCode,S=Object.assign;function y(e){return e.trim()}function v(e,t,n){return e.replace(t,n)}function b(e,t){return e.indexOf(t)}function C(e,t){return 0|e.charCodeAt(t)}function w(e,t,n){return e.slice(t,n)}function x(e){return e.length}function D(e){return e.length}function T(e,t){return t.push(e),e}var P=1,I=1,A=0,L=0,O=0,_="";function E(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:P,column:I,length:o,return:""}}function R(e,t){return S(E("",null,null,"",null,null,0),e,{length:-e.length},t)}function F(){return O=L>0?C(_,--L):0,I--,10===O&&(I=1,P--),O}function k(){return O=L<A?C(_,L++):0,I++,10===O&&(I=1,P++),O}function M(){return C(_,L)}function q(){return L}function U(e,t){return w(_,e,t)}function B(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N(e){return P=I=1,A=x(_=e),L=0,[]}function Q(e){return _="",e}function G(e){return y(U(L-1,j(91===e?e+2:40===e?e+1:e)))}function z(e){for(;(O=M())&&O<33;)k();return B(e)>2||B(O)>3?"":" "}function V(e,t){for(;--t&&k()&&!(O<48||O>102||O>57&&O<65||O>70&&O<97););return U(e,q()+(t<6&&32==M()&&32==k()))}function j(e){for(;k();)switch(O){case e:return L;case 34:case 39:34!==e&&39!==e&&j(O);break;case 40:41===e&&j(e);break;case 92:k()}return L}function W(e,t){for(;k()&&e+O!==57&&(e+O!==84||47!==M()););return"/*"+U(t,L-1)+"*"+m(47===e?e:k())}function H(e){for(;!B(M());)k();return U(e,L)}var Y="-ms-",X="-moz-",Z="-webkit-",$="comm",K="rule",J="decl",ee="@keyframes";function te(e,t){for(var n="",r=D(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ne(e,t,n,r){switch(e.type){case"@import":case J:return e.return=e.return||e.value;case $:return"";case ee:return e.return=e.value+"{"+te(e.children,r)+"}";case K:e.value=e.props.join(",")}return x(n=te(e.children,r))?e.return=e.value+"{"+n+"}":""}function re(e,t){switch(function(e,t){return(((t<<2^C(e,0))<<2^C(e,1))<<2^C(e,2))<<2^C(e,3)}(e,t)){case 5103:return Z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+e+X+e+Y+e+e;case 6828:case 4268:return Z+e+Y+e+e;case 6165:return Z+e+Y+"flex-"+e+e;case 5187:return Z+e+v(e,/(\w+).+(:[^]+)/,Z+"box-$1$2"+Y+"flex-$1$2")+e;case 5443:return Z+e+Y+"flex-item-"+v(e,/flex-|-self/,"")+e;case 4675:return Z+e+Y+"flex-line-pack"+v(e,/align-content|flex-|-self/,"")+e;case 5548:return Z+e+Y+v(e,"shrink","negative")+e;case 5292:return Z+e+Y+v(e,"basis","preferred-size")+e;case 6060:return Z+"box-"+v(e,"-grow","")+Z+e+Y+v(e,"grow","positive")+e;case 4554:return Z+v(e,/([^-])(transform)/g,"$1"+Z+"$2")+e;case 6187:return v(v(v(e,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),e,"")+e;case 5495:case 3959:return v(e,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return v(v(e,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+Y+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+e+e;case 4095:case 3583:case 4068:case 2532:return v(e,/(.+)-inline(.+)/,Z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-t>6)switch(C(e,t+1)){case 109:if(45!==C(e,t+4))break;case 102:return v(e,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+X+(108==C(e,t+3)?"$3":"$2-$3"))+e;case 115:return~b(e,"stretch")?re(v(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==C(e,t+1))break;case 6444:switch(C(e,x(e)-3-(~b(e,"!important")&&10))){case 107:return v(e,":",":"+Z)+e;case 101:return v(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Z+(45===C(e,14)?"inline-":"")+"box$3$1"+Z+"$2$3$1"+Y+"$2box$3")+e}break;case 5936:switch(C(e,t+11)){case 114:return Z+e+Y+v(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Z+e+Y+v(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Z+e+Y+v(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Z+e+Y+e+e}return e}function ie(e){return Q(ae("",null,null,null,[""],e=N(e),0,[0],e))}function ae(e,t,n,r,i,a,o,s,l){for(var c=0,u=0,h=o,d=0,f=0,g=0,p=1,S=1,y=1,C=0,w="",D=i,P=a,I=r,A=w;S;)switch(g=C,C=k()){case 40:if(108!=g&&58==A.charCodeAt(h-1)){-1!=b(A+=v(G(C),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:A+=G(C);break;case 9:case 10:case 13:case 32:A+=z(g);break;case 92:A+=V(q()-1,7);continue;case 47:switch(M()){case 42:case 47:T(se(W(k(),q()),t,n),l);break;default:A+="/"}break;case 123*p:s[c++]=x(A)*y;case 125*p:case 59:case 0:switch(C){case 0:case 125:S=0;case 59+u:f>0&&x(A)-h&&T(f>32?le(A+";",r,n,h-1):le(v(A," ","")+";",r,n,h-2),l);break;case 59:A+=";";default:if(T(I=oe(A,t,n,c,u,i,s,w,D=[],P=[],h),a),123===C)if(0===u)ae(A,t,I,I,D,a,h,s,P);else switch(d){case 100:case 109:case 115:ae(e,I,I,r&&T(oe(e,I,I,0,0,i,s,w,i,D=[],h),P),i,P,h,s,r?D:P);break;default:ae(A,I,I,I,[""],P,0,s,P)}}c=u=f=0,p=y=1,w=A="",h=o;break;case 58:h=1+x(A),f=g;default:if(p<1)if(123==C)--p;else if(125==C&&0==p++&&125==F())continue;switch(A+=m(C),C*p){case 38:y=u>0?1:(A+="\f",-1);break;case 44:s[c++]=(x(A)-1)*y,y=1;break;case 64:45===M()&&(A+=G(k())),d=M(),u=h=x(w=A+=H(q())),C++;break;case 45:45===g&&2==x(A)&&(p=0)}}return a}function oe(e,t,n,r,i,a,o,s,l,c,u){for(var h=i-1,d=0===i?a:[""],f=D(d),g=0,m=0,S=0;g<r;++g)for(var b=0,C=w(e,h+1,h=p(m=o[g])),x=e;b<f;++b)(x=y(m>0?d[b]+" "+C:v(C,/&\f/g,d[b])))&&(l[S++]=x);return E(e,t,n,0===i?K:s,l,c,u)}function se(e,t,n){return E(e,t,n,$,m(O),w(e,2,-2),0)}function le(e,t,n,r){return E(e,t,n,J,w(e,0,r),w(e,r+1,-1),r)}var ce=function(e,t,n){for(var r=0,i=0;r=i,i=M(),38===r&&12===i&&(t[n]=1),!B(i);)k();return U(e,L)},ue=function(e,t){return Q(function(e,t){var n=-1,r=44;do{switch(B(r)){case 0:38===r&&12===M()&&(t[n]=1),e[n]+=ce(L-1,t,n);break;case 2:e[n]+=G(r);break;case 4:if(44===r){e[++n]=58===M()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=m(r)}}while(r=k());return e}(N(e),t))},he=new WeakMap,de=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||he.get(n))&&!r){he.set(e,!0);for(var i=[],a=ue(t,i),o=n.props,s=0,l=0;s<a.length;s++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},fe=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},ge=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case J:e.return=re(e.value,e.length);break;case ee:return te([R(e,{value:v(e.value,"@","@"+Z)})],r);case K:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return te([R(e,{props:[v(t,/:(read-\w+)/,":"+X+"$1")]})],r);case"::placeholder":return te([R(e,{props:[v(t,/:(plac\w+)/,":"+Z+"input-$1")]}),R(e,{props:[v(t,/:(plac\w+)/,":"+X+"$1")]}),R(e,{props:[v(t,/:(plac\w+)/,Y+"input-$1")]})],r)}return""}))}}];const pe=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||ge;var i,a,o={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var l,c,u,h,d=[ne,(h=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],f=(c=[de,fe].concat(r,d),u=D(c),function(e,t,n,r){for(var i="",a=0;a<u;a++)i+=c[a](e,t,n,r)||"";return i});a=function(e,t,n,r){l=n,te(ie(e?e+"{"+t.styles+"}":t.styles),f),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new g({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return p.sheet.hydrate(s),p};const me=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};const Se={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ye=/[A-Z]|^ms/g,ve=/_EMO_([^_]+?)_([^]*?)_EMO_/g,be=function(e){return 45===e.charCodeAt(1)},Ce=function(e){return null!=e&&"boolean"!=typeof e},we=h((function(e){return be(e)?e:e.replace(ye,"-$&").toLowerCase()})),xe=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(ve,(function(e,t,n){return Te={name:t,styles:n,next:Te},t}))}return 1===Se[e]||be(e)||"number"!=typeof t||0===t?t:t+"px"};function De(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Te={name:n.name,styles:n.styles,next:Te},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Te={name:r.name,styles:r.styles,next:Te},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=De(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!=typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Ce(o)&&(r+=we(a)+":"+xe(a,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=De(e,t,o);switch(a){case"animation":case"animationName":r+=we(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)Ce(o[l])&&(r+=we(a)+":"+xe(a,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Te,a=n(e);return Te=i,De(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Te,Pe=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Ie=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Te=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=De(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=De(n,t,e[o]),r&&(i+=a[o]);Pe.lastIndex=0;for(var s,l="";null!==(s=Pe.exec(i));)l+="-"+s[1];return{name:me(i)+l,styles:i,next:Te}},Ae=(0,t.createContext)("undefined"!=typeof HTMLElement?pe({key:"css"}):null);Ae.Provider;var Le=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Ae);return e(n,i,r)}))},Oe=(0,t.createContext)({});var _e=f,Ee=function(e){return"theme"!==e},Re=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?_e:Ee},Fe=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},ke=function(){return null};const Me=function e(n,i){var a,o,s=n.__emotion_real===n,l=s&&n.__emotion_base||n;void 0!==i&&(a=i.label,o=i.target);var c=Fe(n,i,s),u=c||Re(l),h=!u("as");return function(){var d=arguments,f=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==a&&f.push("label:"+a+";"),null==d[0]||void 0===d[0].raw)f.push.apply(f,d);else{0,f.push(d[0][0]);for(var g=d.length,p=1;p<g;p++)f.push(d[p],d[0][p])}var m=Le((function(e,n,r){var i,a,s,d,g=h&&e.as||l,p="",m=[],S=e;if(null==e.theme){for(var y in S={},e)S[y]=e[y];S.theme=(0,t.useContext)(Oe)}"string"==typeof e.className?(i=n.registered,a=m,s=e.className,d="",s.split(" ").forEach((function(e){void 0!==i[e]?a.push(i[e]+";"):d+=e+" "})),p=d):null!=e.className&&(p=e.className+" ");var v=Ie(f.concat(m),n.registered,S);!function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(n,v,"string"==typeof g);p+=n.key+"-"+v.name,void 0!==o&&(p+=" "+o);var b=h&&void 0===c?Re(g):u,C={};for(var w in e)h&&"as"===w||b(w)&&(C[w]=e[w]);C.className=p,C.ref=r;var x=(0,t.createElement)(g,C),D=(0,t.createElement)(ke,null);return(0,t.createElement)(t.Fragment,null,D,x)}));return m.displayName=void 0!==a?a:"Styled("+("string"==typeof l?l:l.displayName||l.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=l,m.__emotion_styles=f,m.__emotion_forwardProp=c,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(t,n){return e(t,r({},i,n,{shouldForwardProp:Fe(m,n,!0)})).apply(void 0,f)},m}};var qe=Me.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){qe[e]=qe(e)}));const Ue=qe;
/** @license MUI v5.2.6
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function Be(e,t){return Ue(e,t)}function Ne(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function Qe(e,t,n={clone:!0}){const i=n.clone?r({},e):e;return Ne(e)&&Ne(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(Ne(t[r])&&r in e&&Ne(e[r])?i[r]=Qe(e[r],t[r],n):i[r]=t[r])})),i}const Ge=function(e,t){return t?Qe(e,t,{clone:!1}):e};function ze(e){let t="https://mui.com/production-error/?code="+e;for(let e=1;e<arguments.length;e+=1)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Ve(e){if("string"!=typeof e)throw new Error(ze(7));return e.charAt(0).toUpperCase()+e.slice(1)}const je={xs:0,sm:600,md:900,lg:1200,xl:1536},We={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${je[e]}px)`};function He(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||We;return t.reduce(((r,i,a)=>(r[e.up(e.keys[a])]=n(t[a]),r)),{})}if("object"==typeof t){const e=r.breakpoints||We;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||je).indexOf(i)){r[e.up(i)]=n(t[i],i)}else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function Ye(e={}){var t;return(null==e||null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function Xe(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function Ze(e,t){return t&&"string"==typeof t?t.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e):null}function $e(e,t,n,r=n){let i;return i="function"==typeof e?e(n):Array.isArray(e)?e[n]||r:Ze(e,n)||r,t&&(i=t(i)),i}const Ke=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,a=e=>{if(null==e[t])return null;const a=e[t],o=Ze(e.theme,r)||{};return He(e,a,(e=>{let r=$e(o,i,e);return e===r&&"string"==typeof e&&(r=$e(o,i,`${t}${"default"===e?"":Ve(e)}`,e)),!1===n?r:{[n]:r}}))};return a.propTypes={},a.filterProps=[t],a};const Je=function(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),n=e=>Object.keys(e).reduce(((n,r)=>t[r]?Ge(n,t[r](e)):n),{});return n.propTypes={},n.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),n};const et={m:"margin",p:"padding"},tt={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},nt={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},rt=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!nt[e])return[e];e=nt[e]}const[t,n]=e.split(""),r=et[t],i=tt[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),it=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],at=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],ot=[...it,...at];function st(e,t,n,r){const i=Ze(e,t)||n;return"number"==typeof i?e=>"string"==typeof e?e:i*e:Array.isArray(i)?e=>"string"==typeof e?e:i[e]:"function"==typeof i?i:()=>{}}function lt(e){return st(e,"spacing",8)}function ct(e,t){if("string"==typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:`-${n}`}function ut(e,t,n,r){if(-1===t.indexOf(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=ct(t,n),e)),{})}(rt(n),r);return He(e,e[n],i)}function ht(e,t){const n=lt(e.theme);return Object.keys(e).map((r=>ut(e,t,r,n))).reduce(Ge,{})}function dt(e){return ht(e,it)}function ft(e){return ht(e,at)}function gt(e){return ht(e,ot)}dt.propTypes={},dt.filterProps=it,ft.propTypes={},ft.filterProps=at,gt.propTypes={},gt.filterProps=ot;const pt=gt;function mt(e){return"number"!=typeof e?e:`${e}px solid`}const St=Ke({prop:"border",themeKey:"borders",transform:mt}),yt=Ke({prop:"borderTop",themeKey:"borders",transform:mt}),vt=Ke({prop:"borderRight",themeKey:"borders",transform:mt}),bt=Ke({prop:"borderBottom",themeKey:"borders",transform:mt}),Ct=Ke({prop:"borderLeft",themeKey:"borders",transform:mt}),wt=Ke({prop:"borderColor",themeKey:"palette"}),xt=Ke({prop:"borderTopColor",themeKey:"palette"}),Dt=Ke({prop:"borderRightColor",themeKey:"palette"}),Tt=Ke({prop:"borderBottomColor",themeKey:"palette"}),Pt=Ke({prop:"borderLeftColor",themeKey:"palette"}),It=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=st(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:ct(t,e)});return He(e,e.borderRadius,n)}return null};It.propTypes={},It.filterProps=["borderRadius"];const At=Je(St,yt,vt,bt,Ct,wt,xt,Dt,Tt,Pt,It),Lt=Je(Ke({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),Ke({prop:"display"}),Ke({prop:"overflow"}),Ke({prop:"textOverflow"}),Ke({prop:"visibility"}),Ke({prop:"whiteSpace"})),Ot=Je(Ke({prop:"flexBasis"}),Ke({prop:"flexDirection"}),Ke({prop:"flexWrap"}),Ke({prop:"justifyContent"}),Ke({prop:"alignItems"}),Ke({prop:"alignContent"}),Ke({prop:"order"}),Ke({prop:"flex"}),Ke({prop:"flexGrow"}),Ke({prop:"flexShrink"}),Ke({prop:"alignSelf"}),Ke({prop:"justifyItems"}),Ke({prop:"justifySelf"})),_t=e=>{if(void 0!==e.gap&&null!==e.gap){const t=st(e.theme,"spacing",8),n=e=>({gap:ct(t,e)});return He(e,e.gap,n)}return null};_t.propTypes={},_t.filterProps=["gap"];const Et=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=st(e.theme,"spacing",8),n=e=>({columnGap:ct(t,e)});return He(e,e.columnGap,n)}return null};Et.propTypes={},Et.filterProps=["columnGap"];const Rt=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=st(e.theme,"spacing",8),n=e=>({rowGap:ct(t,e)});return He(e,e.rowGap,n)}return null};Rt.propTypes={},Rt.filterProps=["rowGap"];const Ft=Je(_t,Et,Rt,Ke({prop:"gridColumn"}),Ke({prop:"gridRow"}),Ke({prop:"gridAutoFlow"}),Ke({prop:"gridAutoColumns"}),Ke({prop:"gridAutoRows"}),Ke({prop:"gridTemplateColumns"}),Ke({prop:"gridTemplateRows"}),Ke({prop:"gridTemplateAreas"}),Ke({prop:"gridArea"})),kt=Je(Ke({prop:"position"}),Ke({prop:"zIndex",themeKey:"zIndex"}),Ke({prop:"top"}),Ke({prop:"right"}),Ke({prop:"bottom"}),Ke({prop:"left"})),Mt=Je(Ke({prop:"color",themeKey:"palette"}),Ke({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),Ke({prop:"backgroundColor",themeKey:"palette"})),qt=Ke({prop:"boxShadow",themeKey:"shadows"});function Ut(e){return e<=1&&0!==e?100*e+"%":e}const Bt=Ke({prop:"width",transform:Ut}),Nt=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||je[t]||Ut(t)}};return He(e,e.maxWidth,t)}return null};Nt.filterProps=["maxWidth"];const Qt=Ke({prop:"minWidth",transform:Ut}),Gt=Ke({prop:"height",transform:Ut}),zt=Ke({prop:"maxHeight",transform:Ut}),Vt=Ke({prop:"minHeight",transform:Ut}),jt=(Ke({prop:"size",cssProperty:"width",transform:Ut}),Ke({prop:"size",cssProperty:"height",transform:Ut}),Je(Bt,Nt,Qt,Gt,zt,Vt,Ke({prop:"boxSizing"}))),Wt=Ke({prop:"fontFamily",themeKey:"typography"}),Ht=Ke({prop:"fontSize",themeKey:"typography"}),Yt=Ke({prop:"fontStyle",themeKey:"typography"}),Xt=Ke({prop:"fontWeight",themeKey:"typography"}),Zt=Ke({prop:"letterSpacing"}),$t=Ke({prop:"lineHeight"}),Kt=Ke({prop:"textAlign"}),Jt=Je(Ke({prop:"typography",cssProperty:!1,themeKey:"typography"}),Wt,Ht,Yt,Xt,Zt,$t,Kt),en={borders:At.filterProps,display:Lt.filterProps,flexbox:Ot.filterProps,grid:Ft.filterProps,positions:kt.filterProps,palette:Mt.filterProps,shadows:qt.filterProps,sizing:jt.filterProps,spacing:pt.filterProps,typography:Jt.filterProps},tn={borders:At,display:Lt,flexbox:Ot,grid:Ft,positions:kt,palette:Mt,shadows:qt,sizing:jt,spacing:pt,typography:Jt},nn=Object.keys(en).reduce(((e,t)=>(en[t].forEach((n=>{e[n]=tn[t]})),e)),{});const rn=function(e,t,n){const r={[e]:t,theme:n},i=nn[e];return i?i(r):{[e]:t}};function an(e){const{sx:t,theme:n={}}=e||{};if(!t)return null;function r(e){let t=e;if("function"==typeof e)t=e(n);else if("object"!=typeof e)return e;const r=Ye(n.breakpoints),i=Object.keys(r);let a=r;return Object.keys(t).forEach((e=>{const r=(i=t[e],o=n,"function"==typeof i?i(o):i);var i,o;if(null!=r)if("object"==typeof r)if(nn[e])a=Ge(a,rn(e,r,n));else{const t=He({theme:n},r,(t=>({[e]:t})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),n=new Set(t);return e.every((e=>n.size===Object.keys(e).length))}(t,r)?a=Ge(a,t):a[e]=an({sx:r,theme:n})}else a=Ge(a,rn(e,r,n))})),Xe(i,a)}return Array.isArray(t)?t.map(r):r(t)}an.filterProps=["sx"];const on=an,sn=["sx"],ln=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((n=>{nn[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t};function cn(e){const{sx:t}=e,n=i(e,sn),{systemProps:a,otherProps:o}=ln(n);let s;return s=Array.isArray(t)?[a,...t]:"function"==typeof t?(...e)=>{const n=t(...e);return Ne(n)?r({},a,n):a}:r({},a,t),r({},o,{sx:s})}const un=["values","unit","step"];const hn={borderRadius:4};const dn=["breakpoints","palette","spacing","shape"];const fn=function(e={},...t){const{breakpoints:n={},palette:a={},spacing:o,shape:s={}}=e,l=i(e,dn),c=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,o=i(e,un),s=Object.keys(t);function l(e){return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n})`}function c(e){return`@media (max-width:${("number"==typeof t[e]?t[e]:e)-a/100}${n})`}function u(e,r){const i=s.indexOf(r);return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==i&&"number"==typeof t[s[i]]?t[s[i]]:r)-a/100}${n})`}return r({keys:s,values:t,up:l,down:c,between:u,only:function(e){return s.indexOf(e)+1<s.length?u(e,s[s.indexOf(e)+1]):l(e)},not:function(e){const t=s.indexOf(e);return 0===t?l(s[1]):t===s.length-1?c(s[t]):u(e,s[s.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},o)}(n),u=function(e=8){if(e.mui)return e;const t=lt({spacing:e}),n=(...e)=>(0===e.length?[1]:e).map((e=>{const n=t(e);return"number"==typeof n?`${n}px`:n})).join(" ");return n.mui=!0,n}(o);let h=Qe({breakpoints:c,direction:"ltr",components:{},palette:r({mode:"light"},a),spacing:u,shape:r({},hn,s)},l);return h=t.reduce(((e,t)=>Qe(e,t)),h),h};const gn=t.createContext(null);const pn=function(e=null){const n=t.useContext(gn);return n&&(r=n,0!==Object.keys(r).length)?n:e;var r},mn=fn();const Sn=function(e=mn){return pn(e)};var yn=a(893);const vn=["className","component"];const bn=e=>e,Cn=(()=>{let e=bn;return{configure(t){e=t},generate:t=>e(t),reset(){e=bn}}})();function wn(e,t,n){return r({toolbar:{minHeight:56,[`${e.up("xs")} and (orientation: landscape)`]:{minHeight:48},[e.up("sm")]:{minHeight:64}}},n)}function xn(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function Dn(e){if(e.type)return e;if("#"===e.charAt(0))return Dn(function(e){e=e.substr(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(ze(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(ze(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function Tn(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function Pn(e){let t="hsl"===(e=Dn(e)).type?Dn(function(e){e=Dn(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=(e,t=(e+n/30)%12)=>i-a*Math.max(Math.min(t-3,9-t,1),-1);let s="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),Tn({type:s,values:l})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function In(e,t){return e=Dn(e),t=xn(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,Tn(e)}function An(e,t){if(e=Dn(e),t=xn(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Tn(e)}function Ln(e,t){if(e=Dn(e),t=xn(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Tn(e)}const On={black:"#000",white:"#fff"},_n={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},En={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Rn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Fn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},kn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Mn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},qn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Un=["mode","contrastThreshold","tonalOffset"],Bn={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:On.white,default:On.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Nn={text:{primary:On.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:On.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Qn(e,t,n,r){const i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Ln(e.main,i):"dark"===t&&(e.dark=An(e.main,a)))}function Gn(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,o=i(e,Un),s=e.primary||function(e="light"){return"dark"===e?{main:kn[200],light:kn[50],dark:kn[400]}:{main:kn[700],light:kn[400],dark:kn[800]}}(t),l=e.secondary||function(e="light"){return"dark"===e?{main:En[200],light:En[50],dark:En[400]}:{main:En[500],light:En[300],dark:En[700]}}(t),c=e.error||function(e="light"){return"dark"===e?{main:Rn[500],light:Rn[300],dark:Rn[700]}:{main:Rn[700],light:Rn[400],dark:Rn[800]}}(t),u=e.info||function(e="light"){return"dark"===e?{main:Mn[400],light:Mn[300],dark:Mn[700]}:{main:Mn[700],light:Mn[500],dark:Mn[900]}}(t),h=e.success||function(e="light"){return"dark"===e?{main:qn[400],light:qn[300],dark:qn[700]}:{main:qn[800],light:qn[500],dark:qn[900]}}(t),d=e.warning||function(e="light"){return"dark"===e?{main:Fn[400],light:Fn[300],dark:Fn[700]}:{main:"#ed6c02",light:Fn[500],dark:Fn[900]}}(t);function f(e){const t=function(e,t){const n=Pn(e),r=Pn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Nn.text.primary)>=n?Nn.text.primary:Bn.text.primary;return t}const g=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:o=700})=>{if(!(e=r({},e)).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error(ze(11,t?` (${t})`:"",n));if("string"!=typeof e.main)throw new Error(ze(12,t?` (${t})`:"",JSON.stringify(e.main)));return Qn(e,"light",i,a),Qn(e,"dark",o,a),e.contrastText||(e.contrastText=f(e.main)),e},p={dark:Nn,light:Bn};return Qe(r({common:On,mode:t,primary:g({color:s,name:"primary"}),secondary:g({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:c,name:"error"}),warning:g({color:d,name:"warning"}),info:g({color:u,name:"info"}),success:g({color:h,name:"success"}),grey:_n,contrastThreshold:n,getContrastText:f,augmentColor:g,tonalOffset:a},p[t]),o)}const zn=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Vn={textTransform:"uppercase"},jn='"Roboto", "Helvetica", "Arial", sans-serif';function Wn(e,t){const n="function"==typeof t?t(e):t,{fontFamily:a=jn,fontSize:o=14,fontWeightLight:s=300,fontWeightRegular:l=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:h=16,allVariants:d,pxToRem:f}=n,g=i(n,zn);const p=o/14,m=f||(e=>e/h*p+"rem"),S=(e,t,n,i,o)=>{return r({fontFamily:a,fontWeight:e,fontSize:m(t),lineHeight:n},a===jn?{letterSpacing:(s=i/t,Math.round(1e5*s)/1e5)+"em"}:{},o,d);var s},y={h1:S(s,96,1.167,-1.5),h2:S(s,60,1.2,-.5),h3:S(l,48,1.167,0),h4:S(l,34,1.235,.25),h5:S(l,24,1.334,0),h6:S(c,20,1.6,.15),subtitle1:S(l,16,1.75,.15),subtitle2:S(c,14,1.57,.1),body1:S(l,16,1.5,.15),body2:S(l,14,1.43,.15),button:S(c,14,1.75,.4,Vn),caption:S(l,12,1.66,.4),overline:S(l,12,2.66,1,Vn)};return Qe(r({htmlFontSize:h,pxToRem:m,fontFamily:a,fontSize:o,fontWeightLight:s,fontWeightRegular:l,fontWeightMedium:c,fontWeightBold:u},y),g,{clone:!1})}function Hn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}const Yn=["none",Hn(0,2,1,-1,0,1,1,0,0,1,3,0),Hn(0,3,1,-2,0,2,2,0,0,1,5,0),Hn(0,3,3,-2,0,3,4,0,0,1,8,0),Hn(0,2,4,-1,0,4,5,0,0,1,10,0),Hn(0,3,5,-1,0,5,8,0,0,1,14,0),Hn(0,3,5,-1,0,6,10,0,0,1,18,0),Hn(0,4,5,-2,0,7,10,1,0,2,16,1),Hn(0,5,5,-3,0,8,10,1,0,3,14,2),Hn(0,5,6,-3,0,9,12,1,0,3,16,2),Hn(0,6,6,-3,0,10,14,1,0,4,18,3),Hn(0,6,7,-4,0,11,15,1,0,4,20,3),Hn(0,7,8,-4,0,12,17,2,0,5,22,4),Hn(0,7,8,-4,0,13,19,2,0,5,24,4),Hn(0,7,9,-4,0,14,21,2,0,5,26,4),Hn(0,8,9,-5,0,15,22,2,0,6,28,5),Hn(0,8,10,-5,0,16,24,2,0,6,30,5),Hn(0,8,11,-5,0,17,26,2,0,6,32,5),Hn(0,9,11,-5,0,18,28,2,0,7,34,6),Hn(0,9,12,-6,0,19,29,2,0,7,36,6),Hn(0,10,13,-6,0,20,31,3,0,8,38,7),Hn(0,10,13,-6,0,21,33,3,0,8,40,7),Hn(0,10,14,-6,0,22,35,3,0,8,42,7),Hn(0,11,14,-7,0,23,36,3,0,9,44,8),Hn(0,11,15,-7,0,24,38,3,0,9,46,8)],Xn=["duration","easing","delay"],Zn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},$n={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Kn(e){return`${Math.round(e)}ms`}function Jn(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function er(e){const t=r({},Zn,e.easing),n=r({},$n,e.duration);return r({getAutoHeightDuration:Jn,create:(e=["all"],r={})=>{const{duration:a=n.standard,easing:o=t.easeInOut,delay:s=0}=r;i(r,Xn);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof a?a:Kn(a)} ${o} ${"string"==typeof s?s:Kn(s)}`)).join(",")}},e,{easing:t,duration:n})}const tr={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},nr=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function rr(e={},...t){const{mixins:n={},palette:a={},transitions:o={},typography:s={}}=e,l=i(e,nr),c=Gn(a),u=fn(e);let h=Qe(u,{mixins:wn(u.breakpoints,u.spacing,n),palette:c,shadows:Yn.slice(),typography:Wn(c,s),transitions:er(o),zIndex:r({},tr)});return h=Qe(h,l),h=t.reduce(((e,t)=>Qe(e,t)),h),h}const ir=rr,ar=function(e={}){const{defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:o}=e,s=Be("div")(on);return t.forwardRef((function(e,t){const l=Sn(n),c=cn(e),{className:h,component:d="div"}=c,f=i(c,vn);return(0,yn.jsx)(s,r({as:d,ref:t,className:u(h,o?o(a):a),theme:l},f))}))}({defaultTheme:ir(),defaultClassName:"MuiBox-root",generateClassName:Cn.generate}),or=ar;var sr=a(107),lr=a(10),cr=a(43),ur=a(813),hr=function(e){return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))},dr={jpeg2000:hr(sr.default),"jpeg-lossless":hr(lr.default),"jpeg-baseline":hr(cr.default),rle:hr(ur.default)};const fr=JSON.parse('{"zoomAndPan":"Zooming and Panning","scroll":"Scroll Snapshots","windowLevel":"Brightness/Contrast","draw":"Draw","colorMap":"Color Map","history":"History","drawProtractor":"Protractor","drawArrow":"Arrow","drawRuler":"Ruler","drawRectangle":"Rectangle","drawEllipse":"Ellipse","drawRoi":"Area","drawFloodfill":"Floodfill","undo":"Undo","redo":"Redo","resetDisplay":"Reset","plain":"Plain","invplain":"Inverted","rainbow":"Rainbow","hot":"Hot","hotmetalblue":"Hot Metal Blue","pleaseWait":"Wait, please!","loading":"Loading...","dragOrClick":"Drag file or click to upload","maxFileSize":"Maximum file size","acceptFiles":"Accepted file types","delete":"Delete","options":"Options","export":"Markup export","import":"Markup import"}');var gr=a.t(fr,2);const pr=JSON.parse('{"zoomAndPan":"  ","scroll":" ","windowLevel":"/","draw":"","colorMap":" ","history":"","drawProtractor":"","drawArrow":"","drawRuler":"","drawRectangle":"","drawEllipse":"","drawRoi":"","drawFloodfill":"","undo":"","redo":"","resetDisplay":"","plain":" ","invplain":"","rainbow":"","hot":"","hotmetalblue":"  ","pleaseWait":", !","loading":" ...","dragOrClick":"   ,  ","maxFileSize":"  ","acceptFiles":"  ","delete":"","options":"","export":" ","import":" "}');var mr=a.t(pr,2);const Sr=JSON.parse('{"zoomAndPan":" ","scroll":" ","windowLevel":"/","draw":"","colorMap":" ","history":"","drawProtractor":"","drawArrow":"","drawRuler":"","drawRectangle":"","drawEllipse":" ","drawRoi":" ","drawFloodfill":" ","undo":"","redo":"","resetDisplay":" ","plain":"","invplain":"","rainbow":" ","hot":"","hotmetalblue":"  ","pleaseWait":"! ","loading":"  ...","dragOrClick":"    ","maxFileSize":"   ","acceptFiles":"  ","delete":"","options":"","export":" ","import":" "}');var yr=a.t(Sr,2),vr=a(705),br=a.n(vr),Cr=["x00100010","x00100020","x00100030","x00081030","x00181030","x00080050","x00200010","x00080020","x00080030","x0008103e","x00080021","x00080031","x00080022","x00080032","x00080023","x00080033","x00080012","x00080013","x00080080","x00080081","x00081010","x00100040","x00101010","x00101030"],wr=a(486),xr=a.n(wr);function Dr(){return Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dr.apply(this,arguments)}var Tr={xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},Pr=function(){return n().createElement("svg",Dr({},Tr,{fill:"currentColor",viewBox:"0 0 24 24"}),n().createElement("path",{d:"m 13.69,1.96875 c -5.5664,0 -10.08,4.5136 -10.08,10.08 H 0.25 l 4.3568,4.3568 0.0784,0.1568 4.5248,\r -4.5136 H 5.85 c 0,-4.3344 3.5056,-7.84 7.84,-7.84 4.3344,0 7.84,3.5056 7.84,7.84 0,4.3344 -3.5056,7.84\r -7.84,7.84 -2.1616,0 -4.1216,-0.8848 -5.5328,-2.3072 l -1.5904,1.5904 c 1.8256,1.8256 4.3344,2.9568\r 7.1232,2.9568 5.5664,0 10.08,-4.5136 10.08,-10.08 0,-5.5664 -4.5136,-10.08 -10.08,-10.08 z m -1.12,5.6\r v 5.6 l 4.7936,2.8448 0.8064,-1.3552 -3.92,-2.3296 v -4.76 z"}))},Ir=function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 512.354 512.354",fill:"currentColor"}),n().createElement("path",{d:"m497.513 90.178-43.213-46.814c-20.73-22.458-55.528-24.106-78.296-3.868-297.349 264.31-254.507\r 225.808-267.95 239.251-17.673 17.674-24.887 43.716-18.825 67.964 3.806 15.226-.722 31.577-11.816\r 42.676l-72.933 71.935c-9.52 9.39-2.863 25.679 10.533 25.679h97c3.978 0 7.793-1.58 10.606-4.393l24-24c11.101-11.1\r 27.457-15.63 42.683-11.823 24.484 6.121 50.468-1.328 67.964-18.825 13.355-13.355-24.686 27.9 240.426-262.067\r 19.604-21.439 19.554-54.337-.179-75.715zm-391.713 366.823h-54.217l36.358-35.86 26.859\r 26.86zm90.779-39.32c-20.462-5.116-42.145-1.203-59.479 10.194l-28.96-28.96c11.397-17.333 15.309-39.016\r 10.194-59.479-3.377-13.508.339-27.976 9.707-38.194l106.732 106.732c-10.217 9.367-24.685 13.084-38.194\r 9.707zm278.974-272.031-220.025 240.653-105.659-105.659 246.066-218.726c10.5-9.332 26.794-8.528 36.322\r 1.795 0-.1-.223-.242 43.212 46.814 9.221 9.99 9.258 25.09.084 35.123z"}),n().createElement("path",{d:"m416.013 457.001h-144c-8.284 0-15 6.716-15 15s6.716 15 15 15h144c8.284 0 15-6.716 15-15s-6.716-15-15-15z"}))},Ar=function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 512 512",stroke:"currentColor",fill:"currentColor"}),n().createElement("path",{d:"M 256.8,52 C 143.6072,52 52,143.5976 52,256.8 c 0,113.1928 91.5976,204.8 204.8,204.8 39.4224,0 59.9832,-6.1176 68.7496,-20.4568 19.0088,-31.0936 -35.7912,-74.8816 -20.5568,-103.5048 18.4192,-34.6056 97.4048,12.696 136.7896,-22.4608 C 455.1176,303.2744 461.6,284.1792 461.6,256.8 461.6,143.6072 370.0024,52 256.8,52 Z m 169.0008,245.2728 c -28.4352,25.38 -113.4752,-24.492 -141.9936,29.0888 -13.2288,24.8536 0.2576,51.1856 11.0936,72.344 5.4752,10.692 12.9752,25.3344 10.172,29.9184 -0.916,1.4992 -7.5504,8.976 -48.2728,8.976 C 157.1064,437.6 76,356.4936 76,256.8 76,157.1064 157.1064,76 256.8,76 c 99.6936,0 180.8,81.1064 180.8,180.8 0,19.8672 -3.9696,33.484 -11.7992,40.4728 z"}),n().createElement("path",{d:"m 180,280 c -26.4672,0 -48,21.5328 -48,48 0,26.4672 21.5328,48 48,48 26.4672,0 48,-21.5328 48,-48 0,-26.4672 -21.5328,-48 -48,-48 z m 0,72 c -13.2336,0 -24,-10.7664 -24,-24 0,-13.2336 10.7664,-24 24,-24 13.2336,0 24,10.7664 24,24 0,13.2336 -10.7664,24 -24,24 z"}),n().createElement("path",{d:"m 309.6,216.8 c 0,26.4672 21.5328,48 48,48 26.4672,0 48,-21.5328 48,-48 0,-26.4672 -21.5328,-48 -48,-48 -26.4672,0 -48,21.5328 -48,48 z m 72,0 c 0,13.2336 -10.7664,24 -24,24 -13.2336,0 -24,-10.7664 -24,-24 0,-13.2336 10.7664,-24 24,-24 13.2336,0 24,10.7664 24,24 z"}),n().createElement("path",{d:"m 258.4,100 c -26.4672,0 -48,21.5328 -48,48 0,26.4672 21.5328,48 48,48 26.4672,0 48,-21.5328 48,-48 0,-26.4672 -21.5328,-48 -48,-48 z m 0,72 c -13.2336,0 -24,-10.7664 -24,-24 0,-13.2336 10.7664,-24 24,-24 13.2336,0 24,10.7664 24,24 0,13.2336 -10.7664,24 -24,24 z"}),n().createElement("path",{d:"m 205.6,210.4 c 0,-26.4672 -21.5328,-48 -48,-48 -26.4672,0 -48,21.5328 -48,48 0,26.4672 21.5328,48 48,48 26.4672,0 48,-21.5328 48,-48 z m -72,0 c 0,-13.2336 10.7664,-24 24,-24 13.2336,0 24,10.7664 24,24 0,13.2336 -10.7664,24 -24,24 -13.2336,0 -24,-10.7664 -24,-24 z"}))},Lr=function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 512 512",fill:"currentColor",stroke:"currentColor"}),n().createElement("path",{d:"m182.461 155.48 49.539-49.539v262.059a24 24 0 0 0 48 0v-262.059l49.539 49.539a24 24 0 1 0\r 33.941-33.941l-90.509-90.51a24 24 0 0 0 -33.942 0l-90.509 90.51a24 24 0 1 0 33.941 33.941z"}),n().createElement("path",{d:"m464 232a24 24 0 0 0 -24 24v184h-368v-184a24 24 0 0 0 -48 0v192a40 40 0 0 0 40 40h384a40\r 40 0 0 0 40-40v-192a24 24 0 0 0 -24-24z"}))},Or=function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor"}),n().createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2\r 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))},_r=function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor"}),n().createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0\r 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}))},Er=function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor"}),n().createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}))},Rr={viewBox:"0 0 512 512",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},Fr=function(e,t,r){var i={fill:e,fillOpacity:1,strokeWidth:1},a={strokeWidth:1,fill:r},o={strokeWidth:1,fill:t};return n().createElement("svg",Rr,n().createElement("rect",{style:i,width:"512",height:"512",x:"0",y:"0"}),n().createElement("path",{style:a,d:"m 357.38755,482.96255 v -40.96376 c -0.01,-10.33898 3.11545,-20.44814 8.98196,-29.04519 L 476.11773,251.78881 c 3.72265,-5.49442 2.98396,-12.79437 -1.76734,-17.46701 -19.79955,-19.32799 -51.18575,-21.24047 -73.28054,-4.46524 l -39.53258,30.10109 22.4307,-131.76307 c 3.40547,-19.93604 -9.5662,-39.041132 -29.66038,-43.684805 -20.09418,-4.643716 -40.42339,6.765666 -46.48381,26.088155 l -11.55531,36.78641 V 74.96453 c 0.006,-22.053389 -17.90413,-40.112676 -40.42084,-40.760315 -22.51676,-0.647592 -41.47768,16.351241 -42.79534,38.36689 l -4.03772,67.209135 -9.28245,-42.402275 C 195.55244,78.254971 176.64552,65.81439 156.98043,69.24773 137.31534,72.68107 123.9666,90.753121 126.7967,110.11174 l 11.49804,78.79853 -46.118196,-56.4362 C 82.440183,120.56158 65.225037,117.4965 51.827943,125.29011 38.430845,133.08373 32.950229,149.3518 38.982567,163.41907 l 99.776923,240.31984 c 3.01244,7.28438 4.32159,15.13653 3.83139,22.98059 l -3.59713,56.24305 z m -197.98002,0 3.51054,-54.99893 c 0.6767,-10.83157 -1.13104,-21.67412 -5.29065,-31.73281 l -99.794714,-240.37723 -0.0547,-0.13191 c -4.92214,-11.38249 10.605814,-20.44226 18.48979,-10.7879 l 69.435104,84.97409 c 6.48003,7.92837 19.50518,2.41043 18.03779,-7.64152 L 146.9647,107.29344 c -1.30053,-8.732094 4.7146,-16.897959 13.58842,-18.446903 8.87376,-1.548898 17.40093,4.078568 19.2631,12.712673 l 25.00411,114.23616 c 1.06891,4.87717 5.65427,8.23093 10.73467,7.85147 5.08039,-0.37927 9.09298,-4.37541 9.39387,-9.35485 l 8.44587,-140.545139 c 0.53344,-11.350443 10.26479,-20.18548 21.86592,-19.852049 11.60113,0.333571 20.78622,9.712171 20.63861,21.073686 V 213.7024 c 6.3e-4,11.44598 16.48286,13.87267 19.92228,2.93316 l 31.47887,-100.16607 c 3.23628,-10.30271 14.77114,-15.7019 24.99387,-11.69914 8.18923,3.24824 12.99695,11.6077 11.58715,20.14717 l -26.72813,156.95387 c -1.52023,8.95456 8.97652,15.07942 16.29843,9.5101 l 60.12208,-45.77926 c 12.48058,-9.47297 29.8804,-9.6407 42.54909,-0.4099 L 349.41914,401.89309 c -8.10117,11.87078 -12.41858,25.82963 -12.40462,40.10608 v 40.96376 c -177.60699,-3.8e-4 0,0 -177.60699,-3.8e-4 z"}),n().createElement("path",{style:o,d:"M 142.18851,258.72225 91.255933,168.9688 a 10.186514,9.9726051 0 1 0 -17.808573,9.68593 l 50.93258,89.75345 a 10.186514,9.9726051 0 0 0 17.80857,-9.68593 z"}),n().createElement("path",{style:o,d:"m 163.06067,289.64733 a 10.187004,9.9730848 0 0 0 -18.80683,7.6714 l 50.93257,119.67126 a 10.187004,9.9730848 0 1 0 18.80682,-7.67139 z"}),n().createElement("path",{style:o,d:"m 209.37873,271.11944 a 10.186514,9.9726051 0 1 0 -19.76437,4.83675 l 35.65279,139.61646 a 10.186514,9.9726051 0 0 0 19.76441,-4.83671 z"}),n().createElement("path",{style:o,d:"m 179.1719,184.00625 a 10.186514,9.9726051 0 0 0 -7.82579,11.84246 l 10.9136,49.86306 a 10.186553,9.972643 0 0 0 19.92098,-4.17855 l -10.91356,-49.86301 a 10.186514,9.9726051 0 0 0 -12.09523,-7.66396 z"}),n().createElement("path",{style:o,d:"m 174.0201,170.48961 a 10.199248,9.9850713 0 0 0 9.97006,-12.06433 l -10.18654,-46.5384 a 10.186514,9.9726051 0 0 0 -19.91972,4.17851 l 10.18653,46.53841 a 10.186514,9.9726051 0 0 0 9.94967,7.88581 z"}),n().createElement("path",{style:o,d:"m 255.5224,253.59259 a 10.186514,9.9726051 0 0 0 -10.18654,9.97262 v 149.5891 a 10.186534,9.9726241 0 0 0 20.37306,0 v -149.5891 a 10.186514,9.9726051 0 0 0 -10.18652,-9.97262 z"}),n().createElement("path",{style:o,d:"m 255.5224,143.89394 a 10.186514,9.9726051 0 0 0 -10.18654,9.97264 v 79.78081 a 10.186534,9.9726241 0 0 0 20.37306,0 v -79.78081 a 10.186514,9.9726051 0 0 0 -10.18652,-9.97264 z"}),n().createElement("path",{style:o,d:"m 255.5224,64.113126 a 10.186514,9.9726051 0 0 0 -10.18654,9.972575 v 49.863059 a 10.186534,9.9726241 0 0 0 20.37306,0 V 74.085701 A 10.186514,9.9726051 0 0 0 255.5224,64.113126 Z"}),n().createElement("path",{style:o,d:"m 314.64367,253.39937 a 10.326579,10.109729 0 0 0 2.00927,0.19553 10.186514,9.9726051 0 0 0 9.97771,-8.01919 l 8.14919,-39.89044 a 10.186975,9.973056 0 1 0 -19.97828,-3.91174 l -8.14924,39.89038 a 10.186514,9.9726051 0 0 0 7.99135,11.73528 z"}),n().createElement("path",{style:o,d:"m 328.90476,183.59117 a 10.324032,10.107235 0 0 0 2.00803,0.19553 10.186514,9.9726051 0 0 0 9.97897,-8.01925 l 6.1119,-29.91781 a 10.186975,9.973056 0 1 0 -19.97828,-3.91175 l -6.11192,29.91782 a 10.186514,9.9726051 0 0 0 7.9913,11.73528 z"}),n().createElement("path",{style:o,d:"m 346.66371,334.42682 a 10.186514,9.9726051 0 0 0 -13.66651,4.45897 l -35.6528,69.80826 c -0.0712,0.13946 -0.12753,0.2841 -0.19105,0.42497 L 321.28013,275.2717 a 10.186964,9.9730458 0 0 0 -20.06361,-3.46797 l -25.16581,139.61646 a 10.186514,9.9726051 0 1 0 20.06236,3.46797 l 0.18963,-1.04711 a 10.178874,9.9651257 0 0 0 19.26271,3.7734 l 35.65278,-69.80825 a 10.186514,9.9726051 0 0 0 -4.55462,-13.37948 z"}),n().createElement("path",{style:o,d:"m 357.38755,333.37347 a 10.155955,9.9426873 0 0 0 7.20311,-2.92074 l 20.37307,-19.94523 a 10.186778,9.972864 0 0 0 -14.40631,-14.10373 l -20.37301,19.9452 a 10.186514,9.9726051 0 0 0 7.20314,17.0245 z"}),n().createElement("path",{style:o,d:"m 398.13359,293.48303 a 10.155955,9.9426873 0 0 0 7.20315,-2.92073 l 20.373,-19.94519 A 10.186777,9.9728625 0 0 0 411.3035,256.51333 l -20.37307,19.94518 a 10.186514,9.9726051 0 0 0 7.20316,17.02452 z"}))},kr=[{id:"zoomAndPan",name:"ZoomAndPan",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 18 18",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n().createElement("path",{d:"M 9.063125,1.6328125 V 16.352812 m -7.36,-7.3599995 h 14.719998 m -9.199998,-5.52 1.84,-1.84\r 1.840003,1.84 m 3.679999,7.3600015 1.839996,-1.8400015 -1.839994,-1.84 m -3.68,7.3600025 -1.840004,1.839999\r -1.84,-1.839997 m -3.68,-7.3600045 -1.84,1.84 1.84,1.8400035"}))}},{id:"windowLevel",name:"WindowLevel",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 18 18",fill:"currentColor",stroke:"currentColor"}),n().createElement("path",{d:"M 13.993752,4.09375 A 7.0003587,7.0003588 0 0 1 4.09375,13.993752 Z",opacity:".8",stroke:"none"}),n().createElement("circle",{cx:"9.04",cy:"9.04",r:"7.2",fill:"none",strokeWidth:"2"}))}},{id:"scroll",name:"Scroll",Icon:function(){return n().createElement("svg",Dr({},Tr,{name:"bars",viewBox:"0 0 512 512",fill:"currentColor"}),n().createElement("path",{d:"m486.662 46.517h-280.147c-13.912 0-25.229 11.318-25.229 25.23v52.973h-65.413c-13.912 0-25.229 11.318-25.229 25.229v52.973h-65.414c-13.912 0-25.23 11.318-25.23 25.23v211.993c0 13.911 11.318 25.229 25.23 25.229h280.147c13.912 0 25.229-11.318 25.229-25.229v-52.973h65.413c13.912 0 25.229-11.318 25.229-25.23v-52.973h65.413c13.912 0 25.23-11.317 25.23-25.229v-211.992c.001-13.913-11.318-25.231-25.229-25.231zm-456.662 388.858v-202.453h270.606c0 43.595-.001 160.685 0 202.452h-270.606zm361.249-78.203h-60.643v-129.02c0-13.912-11.318-25.229-25.229-25.229h-184.734v-48.203h270.606zm90.643-78.203h-60.643v-129.019c0-13.911-11.318-25.229-25.229-25.229h-184.735v-48.204h270.606v202.452z"}))}}],Mr=[{id:"drawRectangle",name:"Draw",option:"Rectangle",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 448 512",fill:"currentColor"}),n().createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6\r 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"}))}},{id:"drawEllipse",name:"Draw",option:"Ellipse",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 512 512",fill:"currentColor"}),n().createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"}))}},{id:"drawRoi",name:"Draw",option:"Roi",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 74 74",fill:"currentColor",stroke:"currentColor",strokeWidth:"3"}),n().createElement("path",{d:"m49.76 63.37h-25.52a1 1 0 0 1 -1-1 4.31 4.31 0 0 0 -4.31-4.3 4.227 4.227 0 0 0 -1.408.233 1 1 0 0 1 -1.27-.595l-7.3-19.67a1 1 0 0 1 .635-1.3 4.318 4.318 0 0 0 2.04-6.86 1 1 0 0 1 .184-1.445l20.189-14.662a1 1 0 0 1 1.42.254 4.288 4.288 0 0 0 7.156 0 1 1 0 0 1 1.424-.254l4.879 3.54a1 1 0 1 1 -1.179 1.619l-4.1-2.979a6.284 6.284 0 0 1 -9.193 0l-18.632 13.527a6.32 6.32 0 0 1 -2.612 8.769l6.65 17.92a6.328 6.328 0 0 1 7.348 5.2h23.678a6.328 6.328 0 0 1 7.348-5.2l6.65-17.92a6.319 6.319 0 0 1 -2.612-8.768l-3.212-2.33a1 1 0 0 1 1.174-1.619l4 2.9a1 1 0 0 1 .185 1.445 4.318 4.318 0 0 0 2.04 6.86 1 1 0 0 1 .635 1.3l-7.3 19.67a1 1 0 0 1 -1.27.595 4.227 4.227 0 0 0 -1.408-.233 4.31 4.31 0 0 0 -4.31 4.3 1 1 0 0 1 -.999 1.003z"}),n().createElement("path",{d:"m52.919 23.93a.989.989 0 0 1 -.585-.19l-1.95-1.41a1 1 0 0 1 1.172-1.62l1.95 1.41a1 1 0 0 1 -.587 1.81z"}),n().createElement("path",{d:"m37 17.945a6.3 6.3 0 1 1 5.242-2.8 6.3 6.3 0 0 1 -5.242 2.8zm0-10.61a4.308 4.308 0 1 0 4.3 4.3 4.3 4.3 0 0 0 -4.3-4.3z"}),n().createElement("path",{d:"m8.3 38.925a6.305 6.305 0 1 1 4.864-10.336 6.387 6.387 0 0 1 1.446 4.026 6.294 6.294 0 0 1 -6.31 6.31zm0-10.61a4.306 4.306 0 1 0 4.31 4.3 4.286 4.286 0 0 0 -4.31-4.3z"}),n().createElement("path",{d:"m65.7 38.925a6.3 6.3 0 0 1 -6.31-6.31 6.286 6.286 0 0 1 6.31-6.3 6.305 6.305 0 0 1 0 12.61zm0-10.61a4.287 4.287 0 0 0 -4.31 4.3 4.305 4.305 0 1 0 4.31-4.3z"}),n().createElement("path",{d:"m55.07 68.665a6.3 6.3 0 1 1 0-12.6 6.228 6.228 0 0 1 2.072.347 6.3 6.3 0 0 1 -2.072 12.253zm0-10.6a4.286 4.286 0 1 0 1.411.234 4.258 4.258 0 0 0 -1.411-.234z"}),n().createElement("path",{d:"m18.93 68.665a6.3 6.3 0 0 1 -2.069-12.254 6.222 6.222 0 0 1 2.069-.346 6.3 6.3 0 1 1 0 12.6zm0-10.6a4.253 4.253 0 0 0 -1.408.233 4.319 4.319 0 1 0 1.408-.233z"}))}},{id:"drawFloodfill",name:"Floodfill",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 512 512",fill:"currentColor"}),n().createElement("path",{d:"M488.474,239.615L325.232,76.951l42.849-42.802c7.814-7.806,7.821-20.47,0.015-28.284\r c-7.805-7.815-20.468-7.821-28.284-0.016L98.47,246.928c-33.716,9.407-58.524,40.397-58.524,77.073c0,11.046,8.954,20,20,20\r c11.046,0,20-8.954,20-20c0-15.522,8.887-29.007,21.839-35.635l169.196,168.616c15.594,15.578,36.068,23.364,56.545,23.363\r c20.48-0.001,40.963-7.794,56.544-23.375l104.445-104.175c15.113-15.114,23.435-35.209,23.431-56.584\r C511.942,274.835,503.613,254.743,488.474,239.615z M460.249,324.491L355.804,428.668c-15.587,15.588-40.959,15.594-56.569-0.002\r L154.072,284.001h221.875c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H158l138.932-138.78l163.288,162.71\r c7.56,7.554,11.725,17.6,11.727,28.288C471.948,306.905,467.788,316.952,460.249,324.491z"}),n().createElement("path",{d:"M95.171,399.293c-10.177-15.195-20.241-27.475-20.665-27.991c-3.799-4.623-9.469-7.302-15.452-7.302\r c-5.983,0-11.653,2.679-15.452,7.302c-0.424,0.516-10.488,12.796-20.665,27.991C2.426,429.918,0.054,444.611,0.054,453.001\r c0,32.533,26.468,59,59,59c32.532,0,59-26.467,59-59C118.054,444.611,115.682,429.918,95.171,399.293z M59.054,472.001\r c-10.477,0-19-8.523-19.001-18.952c0.004-0.08,0.526-8.269,16.288-31.75c0.907-1.35,1.813-2.677,2.713-3.971\r c0.899,1.294,1.806,2.621,2.713,3.971c15.488,23.074,16.262,31.381,16.287,31.738C78.034,463.496,69.518,472.001,59.054,472.001z"}))}},{id:"drawArrow",name:"Draw",option:"Arrow",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),n().createElement("circle",{cx:"6.5",cy:"6.5",r:"6"}),n().createElement("path",{d:"M6.5 3v7M3 6.5h7"}),n().createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))}},{id:"drawRuler",name:"Draw",option:"Ruler",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}),n().createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},n().createElement("circle",{cx:"6.5",cy:"6.5",r:"6"}),n().createElement("path",{d:"M6.5 3v7M3 6.5h7"}),n().createElement("path",{d:"M22.5 6L6 22.5",strokeWidth:"3",strokeDasharray:"0.6666,5"})))}},{id:"drawProtractor",name:"Draw",option:"Protractor",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 460 460",stroke:"currentColor",fill:"currentColor"}),n().createElement("path",{d:"M450.815,358.339h-226.7c-3.4-49.9-28.6-95.8-68.9-125.4l129.3-133.4c3.9-4,3.8-10.3-0.2-14.2c-4-3.9-10.3-3.8-14.2,0.2\r l-137.6,142l-129.7,133.7c-3.9,4-3.7,10.4,0.3,14.3c1.9,1.8,4.3,2.8,6.9,2.8h440.8c5.5,0,10-4.5,10-10\r S456.315,358.339,450.815,358.339z M33.615,358.339l107.5-110.8c36.5,25.6,59.7,66.3,63,110.8H33.615z",strokeWidth:"2"}))}}],qr=[{id:"undo",name:"undo",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 24",stroke:"currentColor",fill:"currentColor"}),n().createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0\r 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}))}},{id:"resetDisplay",name:"resetDisplay",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 28",fill:"currentColor"}),n().createElement("path",{d:"M24 14c0 6.609-5.391 12-12 12a11.972 11.972 0 0 1-9.234-4.328.52.52 0 0\r 1 .031-.672l2.141-2.156a.599.599 0 0 1 .391-.141.51.51 0 0 1 .359.187A7.91 7.91 0 0 0 12 21.999c4.406\r 0 8-3.594 8-8s-3.594-8-8-8A7.952 7.952 0 0 0 6.563 8.14l2.141 2.156a.964.964 0 0 1 .219 1.078 1.002\r 1.002 0 0 1-.922.625h-7c-.547 0-1-.453-1-1v-7c0-.406.25-.766.625-.922a.964.964 0 0 1 1.078.219l2.031\r 2.016c2.203-2.078 5.187-3.313 8.266-3.313 6.609 0 12 5.391 12 12z"}))}},{id:"redo",name:"redo",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 24 24",stroke:"currentColor",fill:"currentColor"}),n().createElement("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5\r 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}))}}],Ur=[{id:"plain",name:"plain",Icon:function(){return Fr("#333333","#e6e6e6","#b3b3b3")}},{id:"invplain",name:"invplain",Icon:function(){return Fr("#e6e6e6","#808080","#666666")}},{id:"hot",name:"hot",Icon:function(){return Fr("#333333","#ff4a00","#800000")}},{id:"hotmetalblue",name:"hotmetalblue",Icon:function(){return Fr("#333333","#c80000","#0000c8")}},{id:"rainbow",name:"rainbow",Icon:function(){return Fr("#333333","#00ff00","#0000be")}}],Br=[{id:"delete",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 448 512",fill:"currentColor"}),n().createElement("path",{d:"m 48.8,443.59998 a 43.2,43.2 0 0 0 43.2,43.2 h 259.2 a 43.2,43.2 0 0 0 43.2,-43.2 v -302.4 H 48.8 Z m\r 244.8,-230.4 a 14.4,14.4 0 0 1 28.8,0 v 201.6 a 14.4,14.4 0 0 1 -28.8,0 z m -86.4,0 a 14.4,14.4 0 0 1 28.8,0 v\r 201.6 a 14.4,14.4 0 0 1 -28.8,0 z m -86.4,0 a 14.4,14.4 0 0 1 28.8,0 v 201.6 a 14.4,14.4 0 0 1 -28.8,0 z m\r 288,-158.399998 h -108 l -8.46,-16.83 A 21.6,21.6 0 0 0 272.99,25.999983 H 170.12 a 21.348,21.348 0 0 0\r -19.26,11.969999 l -8.46,16.83 h -108 a 14.4,14.4 0 0 0 -14.4,14.4 v 28.8 a 14.4,14.4 0 0 0 14.4,14.399998\r h 374.4 a 14.4,14.4 0 0 0 14.4,-14.399998 v -28.8 a 14.4,14.4 0 0 0 -14.4,-14.4 z"}))}},{id:"export",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 512 512",fill:"currentColor"}),n().createElement("path",{d:"M352,288.994v127.008H64v-288h96v-64H32c-17.664,0-32,14.336-32,32v352c0,17.696,14.336,32,32,32h352\r c17.696,0,32-14.304,32-32V288.994H352z"}),n().createElement("path",{d:"M505.6,131.202l-128-96c-4.8-3.648-11.328-4.224-16.736-1.504c-5.44,2.72-8.864,8.256-8.864,14.304v48h-48\r c-97.056,0-176,78.944-176,176c0,7.424,5.12,13.888,12.32,15.584c1.216,0.288,2.464,0.416,3.68,0.416\r c5.952,0,11.552-3.328,14.304-8.832l3.776-7.52c24.544-49.12,73.888-79.648,128.8-79.648H352v48\r c0,6.048,3.424,11.584,8.832,14.304c5.408,2.72,11.936,2.144,16.768-1.504l128-96c4.032-3.008,6.4-7.776,6.4-12.8\r S509.632,134.21,505.6,131.202z"}))}},{id:"import",Icon:function(){return n().createElement("svg",Dr({},Tr,{viewBox:"0 0 512 512",fill:"currentColor"}),n().createElement("path",{d:"M352,288.994v127.008H64v-288h96v-64H32c-17.664,0-32,14.336-32,32v352c0,17.696,14.336,32,32,32h352\r c17.696,0,32-14.304,32-32V288.994H352z"}),n().createElement("path",{d:"m 135.63077,215.41382 127.99999,96 c 4.8,3.648 11.328,4.224 16.736,1.504 5.44,-2.72 8.864,-8.256\r 8.864,-14.304 v -48 h 48 c 97.05599,0 175.99999,-78.944 175.99999,-176 0,-7.424003 -5.12,-13.888003\r -12.32,-15.584003 -1.216,-0.288005 -2.464,-0.416005 -3.68,-0.416005 -5.952,0 -11.552,3.328005\r -14.304,8.832005 l -3.776,7.520003 c -24.544,49.12 -73.88799,79.648 -128.79999,79.648 h -61.12 v\r -48 c 0,-6.048 -3.424,-11.584005 -8.832,-14.304 -5.408,-2.72 -11.936,-2.144 -16.768,1.503995 L\r 135.63077,189.81382 c -4.032,3.008 -6.4,7.776 -6.4,12.8 0,5.024 2.368,9.792 6.4,12.8 z"}))}}],Nr={color:"#babdc5",background:"#ffffff"},Qr={color:"#8dd04d",background:"#000000"},Gr={full:"full",edit:"edit",view:"view",base:"base"},zr=(0,t.createContext)();function Vr(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function jr(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Object.create;function Wr(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}Object.create;var Hr=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function Yr(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=Hr.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var Xr=[".DS_Store","Thumbs.db"];function Zr(e){return(null!==e.target&&e.target.files?Jr(e.target.files):[]).map((function(e){return Yr(e)}))}function $r(e,t){return Vr(this,void 0,void 0,(function(){var n;return jr(this,(function(r){switch(r.label){case 0:return e.items?(n=Jr(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(ei))]):[3,2];case 1:return[2,Kr(ti(r.sent()))];case 2:return[2,Kr(Jr(e.files).map((function(e){return Yr(e)})))]}}))}))}function Kr(e){return e.filter((function(e){return-1===Xr.indexOf(e.name)}))}function Jr(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function ei(e){if("function"!=typeof e.webkitGetAsEntry)return ni(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?ii(t):ni(e)}function ti(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Wr(arguments[t]));return e}(e,Array.isArray(t)?ti(t):[t])}),[])}function ni(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=Yr(t);return Promise.resolve(n)}function ri(e){return Vr(this,void 0,void 0,(function(){return jr(this,(function(t){return[2,e.isDirectory?ii(e):ai(e)]}))}))}function ii(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var a=this;t.readEntries((function(t){return Vr(a,void 0,void 0,(function(){var a,o,s;return jr(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return a=l.sent(),e(a),[3,4];case 3:return o=l.sent(),n(o),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(ri)),r.push(s),i(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function ai(e){return Vr(this,void 0,void 0,(function(){return jr(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=Yr(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var oi=a(363);function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return li(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ci=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},ui=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," bytes")}},hi=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," bytes")}},di={code:"too-many-files",message:"Too many files"};function fi(e,t){var n="application/x-moz-file"===e.type||(0,oi.Z)(e,t);return[n,n?null:ci(t)]}function gi(e,t,n){if(pi(e.size))if(pi(t)&&pi(n)){if(e.size>n)return[!1,ui(n)];if(e.size<t)return[!1,hi(t)]}else{if(pi(t)&&e.size<t)return[!1,hi(t)];if(pi(n)&&e.size>n)return[!1,ui(n)]}return[!0,null]}function pi(e){return null!=e}function mi(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function Si(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function yi(e){e.preventDefault()}function vi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!mi(e)&&t&&t.apply(void 0,[e].concat(r)),mi(e)}))}}function bi(e){return function(e){if(Array.isArray(e))return xi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||wi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ci(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||wi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(e,t){if(e){if("string"==typeof e)return xi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xi(e,t):void 0}}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Pi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ii(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Ai=(0,t.forwardRef)((function(e,r){var i=e.children,a=_i(Ii(e,["children"])),o=a.open,s=Ii(a,["open"]);return(0,t.useImperativeHandle)(r,(function(){return{open:o}}),[o]),n().createElement(t.Fragment,null,i(Ti(Ti({},s),{},{open:o})))}));Ai.displayName="Dropzone";var Li={disabled:!1,getFilesFromEvent:function(e){return Vr(this,void 0,void 0,(function(){return jr(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?$r(e.dataTransfer,e.type):Zr(e))];var n}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null};Ai.defaultProps=Li,Ai.propTypes={children:l().func,accept:l().oneOfType([l().string,l().arrayOf(l().string)]),multiple:l().bool,preventDropOnDocument:l().bool,noClick:l().bool,noKeyboard:l().bool,noDrag:l().bool,noDragEventsBubbling:l().bool,minSize:l().number,maxSize:l().number,maxFiles:l().number,disabled:l().bool,getFilesFromEvent:l().func,onFileDialogCancel:l().func,onDragEnter:l().func,onDragLeave:l().func,onDragOver:l().func,onDrop:l().func,onDropAccepted:l().func,onDropRejected:l().func,validator:l().func};var Oi={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function _i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Ti(Ti({},Li),e),r=n.accept,i=n.disabled,a=n.getFilesFromEvent,o=n.maxSize,s=n.minSize,l=n.multiple,c=n.maxFiles,u=n.onDragEnter,h=n.onDragLeave,d=n.onDragOver,f=n.onDrop,g=n.onDropAccepted,p=n.onDropRejected,m=n.onFileDialogCancel,S=n.preventDropOnDocument,y=n.noClick,v=n.noKeyboard,b=n.noDrag,C=n.noDragEventsBubbling,w=n.validator,x=(0,t.useRef)(null),D=(0,t.useRef)(null),T=Ci((0,t.useReducer)(Ei,Oi),2),P=T[0],I=T[1],A=P.isFocused,L=P.isFileDialogActive,O=P.draggedFiles,_=(0,t.useCallback)((function(){D.current&&(I({type:"openDialog"}),D.current.value=null,D.current.click())}),[I]),E=function(){L&&setTimeout((function(){D.current&&(D.current.files.length||(I({type:"closeDialog"}),"function"==typeof m&&m()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",E,!1),function(){window.removeEventListener("focus",E,!1)}}),[D,L,m]);var R=(0,t.useCallback)((function(e){x.current&&x.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),_()))}),[x,D]),F=(0,t.useCallback)((function(){I({type:"focus"})}),[]),k=(0,t.useCallback)((function(){I({type:"blur"})}),[]),M=(0,t.useCallback)((function(){y||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?_():setTimeout(_,0))}),[D,y]),q=(0,t.useRef)([]),U=function(e){x.current&&x.current.contains(e.target)||(e.preventDefault(),q.current=[])};(0,t.useEffect)((function(){return S&&(document.addEventListener("dragover",yi,!1),document.addEventListener("drop",U,!1)),function(){S&&(document.removeEventListener("dragover",yi),document.removeEventListener("drop",U))}}),[x,S]);var B=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),W(e),q.current=[].concat(bi(q.current),[e.target]),Si(e)&&Promise.resolve(a(e)).then((function(t){mi(e)&&!C||(I({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e))}))}),[a,u,C]),N=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),W(e);var t=Si(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&d&&d(e),!1}),[d,C]),Q=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),W(e);var t=q.current.filter((function(e){return x.current&&x.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),q.current=t,t.length>0||(I({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Si(e)&&h&&h(e))}),[x,h,C]),G=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),W(e),q.current=[],Si(e)&&Promise.resolve(a(e)).then((function(t){if(!mi(e)||C){var n=[],i=[];t.forEach((function(e){var t=Ci(fi(e,r),2),a=t[0],l=t[1],c=Ci(gi(e,s,o),2),u=c[0],h=c[1],d=w?w(e):null;if(a&&u&&!d)n.push(e);else{var f=[l,h];d&&(f=f.concat(d)),i.push({file:e,errors:f.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach((function(e){i.push({file:e,errors:[di]})})),n.splice(0)),I({acceptedFiles:n,fileRejections:i,type:"setFiles"}),f&&f(n,i,e),i.length>0&&p&&p(i,e),n.length>0&&g&&g(n,e)}})),I({type:"reset"})}),[l,r,s,o,c,a,f,g,p,C,w]),z=function(e){return i?null:e},V=function(e){return v?null:z(e)},j=function(e){return b?null:z(e)},W=function(e){C&&e.stopPropagation()},H=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onKeyDown,a=e.onFocus,o=e.onBlur,s=e.onClick,l=e.onDragEnter,c=e.onDragOver,u=e.onDragLeave,h=e.onDrop,d=Ii(e,["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"]);return Ti(Ti(Pi({onKeyDown:V(vi(r,R)),onFocus:V(vi(a,F)),onBlur:V(vi(o,k)),onClick:z(vi(s,M)),onDragEnter:j(vi(l,B)),onDragOver:j(vi(c,N)),onDragLeave:j(vi(u,Q)),onDrop:j(vi(h,G))},n,x),i||v?{}:{tabIndex:0}),d)}}),[x,R,F,k,M,B,N,Q,G,v,b,i]),Y=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),X=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.onChange,a=e.onClick,o=Ii(e,["refKey","onChange","onClick"]);return Ti(Ti({},Pi({accept:r,multiple:l,type:"file",style:{display:"none"},onChange:z(vi(i,G)),onClick:z(vi(a,Y)),autoComplete:"off",tabIndex:-1},n,D)),o)}}),[D,r,l,G,i]),Z=O.length,$=Z>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,a=e.multiple,o=e.maxFiles;return!(!a&&t.length>1||a&&o>=1&&t.length>o)&&t.every((function(e){var t=si(fi(e,n),1)[0],a=si(gi(e,r,i),1)[0];return t&&a}))}({files:O,accept:r,minSize:s,maxSize:o,multiple:l,maxFiles:c}),K=Z>0&&!$;return Ti(Ti({},P),{},{isDragAccept:$,isDragReject:K,isFocused:A&&!i,getRootProps:H,getInputProps:X,rootRef:x,inputRef:D,open:z(_)})}function Ei(e,t){switch(t.type){case"focus":return Ti(Ti({},e),{},{isFocused:!0});case"blur":return Ti(Ti({},e),{},{isFocused:!1});case"openDialog":return Ti(Ti({},e),{},{isFileDialogActive:!0});case"closeDialog":return Ti(Ti({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return Ti(Ti({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return Ti(Ti({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Ti({},Oi);default:return e}}function Ri(e,t,n){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>(r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e)),[]).join(" ")})),r}const Fi=["variant"];function ki(e){return 0===e.length}function Mi(e){const{variant:t}=e,n=i(e,Fi);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?ki(r)?e[t]:Ve(e[t]):`${ki(r)?t:Ve(t)}${Ve(e[t].toString())}`})),r}const qi=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Ui=["theme"],Bi=["theme"];function Ni(e){return 0===Object.keys(e).length}function Qi(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Gi=fn();const zi=ir(),Vi=function(e={}){const{defaultTheme:t=Gi,rootShouldForwardProp:n=Qi,slotShouldForwardProp:a=Qi}=e;return(e,o={})=>{const{name:s,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:h}=o,d=i(o,qi),f=void 0!==c?c:l&&"Root"!==l||!1,g=u||!1;let p=Qi;"Root"===l?p=n:l&&(p=a);const m=Be(e,r({shouldForwardProp:p,label:undefined},d));return(e,...n)=>{const a=n?n.map((e=>"function"==typeof e&&e.__emotion_real!==e?n=>{let{theme:a}=n,o=i(n,Ui);return e(r({theme:Ni(a)?t:a},o))}:e)):[];let o=e;s&&h&&a.push((e=>{const n=Ni(e.theme)?t:e.theme,r=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(s,n);return r?h(e,r):null})),s&&!f&&a.push((e=>{const n=Ni(e.theme)?t:e.theme;return((e,t,n,r)=>{var i,a;const{ownerState:o={}}=e,s=[],l=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return l&&l.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{o[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&s.push(t[Mi(n.props)])})),s})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=Mi(e.props);r[t]=e.style})),r})(s,n),n,s)})),g||a.push((e=>{const n=Ni(e.theme)?t:e.theme;return on(r({},e,{theme:n}))}));const l=a.length-n.length;if(Array.isArray(e)&&l>0){const t=new Array(l).fill("");o=[...e,...t],o.raw=[...e.raw,...t]}else"function"==typeof e&&(o=n=>{let{theme:a}=n,o=i(n,Bi);return e(r({theme:Ni(a)?t:a},o))});return m(o,...a)}}}({defaultTheme:zi,rootShouldForwardProp:e=>Qi(e)&&"classes"!==e}),ji=Vi;function Wi(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){const n=r({},t);return Object.keys(e).forEach((t=>{void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,i):i}function Hi({props:e,name:t}){return function({props:e,name:t,defaultTheme:n}){return Wi({theme:Sn(n),name:t,props:e})}({props:e,name:t,defaultTheme:zi})}const Yi=Ve,Xi={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function Zi(e,t){return Xi[t]||`${Cn.generate(e)}-${t}`}function $i(e,t){const n={};return t.forEach((t=>{n[t]=Zi(e,t)})),n}function Ki(e){return Zi("MuiTypography",e)}$i("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Ji=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],ea=ji("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${Yi(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((({theme:e,ownerState:t})=>r({margin:0},t.variant&&e.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16}))),ta={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},na={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ra=t.forwardRef((function(e,t){const n=Hi({props:e,name:"MuiTypography"}),a=(e=>na[e]||e)(n.color),o=cn(r({},n,{color:a})),{align:s="inherit",className:l,component:c,gutterBottom:h=!1,noWrap:d=!1,paragraph:f=!1,variant:g="body1",variantMapping:p=ta}=o,m=i(o,Ji),S=r({},o,{align:s,color:a,className:l,component:c,gutterBottom:h,noWrap:d,paragraph:f,variant:g,variantMapping:p}),y=c||(f?"p":p[g]||ta[g])||"span",v=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:a,classes:o}=e;return Ri({root:["root",a,"inherit"!==e.align&&`align${Yi(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},Ki,o)})(S);return(0,yn.jsx)(ea,r({as:y,ref:t,ownerState:S,className:u(v.root,l)},m))})),ia=ra;var aa=a(379),oa=a.n(aa),sa=a(795),la=a.n(sa),ca=a(569),ua=a.n(ca),ha=a(565),da=a.n(ha),fa=a(216),ga=a.n(fa),pa=a(589),ma=a.n(pa),Sa=a(405),ya={};ya.styleTagTransform=ma(),ya.setAttributes=da(),ya.insert=ua().bind(null,"head"),ya.domAPI=la(),ya.insertStyleElement=ga();oa()(Sa.Z,ya);const va=Sa.Z&&Sa.Z.locals?Sa.Z.locals:void 0;var ba=a(764).lW;function Ca(){return Ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ca.apply(this,arguments)}var wa={accept:"*/dicom,.dcm, image/dcm, */dcm, .dicom",maxFiles:1,multiple:!1,maxSize:16777216},xa=function(e){var r=e.onChange,i=e.onError,a=e.colorScheme,o=_i(wa),s=o.acceptedFiles,l=o.getRootProps,c=o.getInputProps,u=(0,t.useContext)(zr).translate,h=s[0];if(h){var d=new FileReader;d.onabort=function(){return i&&i("File reading was aborted")},d.onerror=function(){return i&&i("File reading has failed")},d.onload=function(){var e=function(e){try{var t=new Uint8Array(e),n=br().parseDicom(t);return Cr.forEach((function(e){var t=n.string(e),r=n.elements[e];if(t&&r)for(var i=r.length,a=r.dataOffset,o=new Array(t.length+1).join("*"),s=0;s<i;s++)n.byteArray[a+s]=o.length>s?o.charCodeAt(s):32})),n.byteArray.buffer}catch(e){return null}}(d.result),t=ba.from(e).toString("base64");r("data:application/octet-stream;base64,".concat(t))},d.readAsArrayBuffer(h)}var f=a.background,g=a.color;return n().createElement(or,Ca({},l({className:va.dropZone}),{style:{background:f,color:g}}),n().createElement("input",c()),n().createElement(or,{margin:1,width:48,height:48},n().createElement(Lr,null)),n().createElement(ia,{variant:"h6",className:va.titleText},u("dragOrClick")),n().createElement(ia,{variant:"caption",className:va.titleText},u("maxFileSize"),":",n().createElement("b",null," 16 MB. "),u("acceptFiles"),":",n().createElement("b",null," dcm, dicom. ")))};a(679);function Da(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ie(t)}var Ta=function(){var e=Da.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Pa(e){return Zi("MuiCircularProgress",e)}$i("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ia=["className","color","disableShrink","size","style","thickness","value","variant"];let Aa,La,Oa,_a,Ea=e=>e;const Ra=44,Fa=Ta(Aa||(Aa=Ea`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),ka=Ta(La||(La=Ea`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Ma=ji("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Yi(n.color)}`]]}})((({ownerState:e,theme:t})=>r({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:t.palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&Da(Oa||(Oa=Ea`
      animation: ${0} 1.4s linear infinite;
    `),Fa))),qa=ji("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Ua=ji("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Yi(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>r({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&Da(_a||(_a=Ea`
      animation: ${0} 1.4s ease-in-out infinite;
    `),ka))),Ba=t.forwardRef((function(e,t){const n=Hi({props:e,name:"MuiCircularProgress"}),{className:a,color:o="primary",disableShrink:s=!1,size:l=40,style:c,thickness:h=3.6,value:d=0,variant:f="indeterminate"}=n,g=i(n,Ia),p=r({},n,{color:o,disableShrink:s,size:l,thickness:h,value:d,variant:f}),m=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return Ri({root:["root",n,`color${Yi(r)}`],svg:["svg"],circle:["circle",`circle${Yi(n)}`,i&&"circleDisableShrink"]},Pa,t)})(p),S={},y={},v={};if("determinate"===f){const e=2*Math.PI*((Ra-h)/2);S.strokeDasharray=e.toFixed(3),v["aria-valuenow"]=Math.round(d),S.strokeDashoffset=`${((100-d)/100*e).toFixed(3)}px`,y.transform="rotate(-90deg)"}return(0,yn.jsx)(Ma,r({className:u(m.root,a),style:r({width:l,height:l},y,c),ownerState:p,ref:t,role:"progressbar"},v,g,{children:(0,yn.jsx)(qa,{className:m.svg,ownerState:p,viewBox:"22 22 44 44",children:(0,yn.jsx)(Ua,{className:m.circle,style:S,ownerState:p,cx:Ra,cy:Ra,r:(Ra-h)/2,fill:"none",strokeWidth:h})})}))})),Na=Ba;var Qa=a(812),Ga={};Ga.styleTagTransform=ma(),Ga.setAttributes=da(),Ga.insert=ua().bind(null,"head"),Ga.domAPI=la(),Ga.insertStyleElement=ga();oa()(Qa.Z,Ga);const za=Qa.Z&&Qa.Z.locals?Qa.Z.locals:void 0;var Va=function(){var e=(0,t.useContext)(zr).translate;return n().createElement(or,{className:za.flexCenter},n().createElement(or,{marginRight:3,className:za.whiteColor},n().createElement(ia,{variant:"body1",className:za.textBold},e("pleaseWait")),n().createElement(ia,{variant:"body1"},e("loading"))),n().createElement(or,{position:"relative",display:"inline-flex"},n().createElement(Na,{className:za.whiteColor})))};function ja(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Wa(e,n){return t.useMemo((()=>null==e&&null==n?null:t=>{ja(e,t),ja(n,t)}),[e,n])}const Ha="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function Ya(e){const n=t.useRef(e);return Ha((()=>{n.current=e})),t.useCallback(((...e)=>(0,n.current)(...e)),[])}function Xa(e){return e&&e.ownerDocument||document}function Za(e){return e.substring(2).toLowerCase()}const $a=function(e){const{children:n,disableReactTree:r=!1,mouseEvent:i="onClick",onClickAway:a,touchEvent:o="onTouchEnd"}=e,s=t.useRef(!1),l=t.useRef(null),c=t.useRef(!1),u=t.useRef(!1);t.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const h=Wa(n.ref,l),d=Ya((e=>{const t=u.current;u.current=!1;const n=Xa(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n))return;if(s.current)return void(s.current=!1);let i;i=e.composedPath?e.composedPath().indexOf(l.current)>-1:!n.documentElement.contains(e.target)||l.current.contains(e.target),i||!r&&t||a(e)})),f=e=>t=>{u.current=!0;const r=n.props[e];r&&r(t)},g={ref:h};return!1!==o&&(g[o]=f(o)),t.useEffect((()=>{if(!1!==o){const e=Za(o),t=Xa(l.current),n=()=>{s.current=!0};return t.addEventListener(e,d),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,d),t.removeEventListener("touchmove",n)}}}),[d,o]),!1!==i&&(g[i]=f(i)),t.useEffect((()=>{if(!1!==i){const e=Za(i),t=Xa(l.current);return t.addEventListener(e,d),()=>{t.removeEventListener(e,d)}}}),[d,i]),(0,yn.jsx)(t.Fragment,{children:t.cloneElement(n,g)})};function Ka(e){return Zi("MuiPaper",e)}$i("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Ja=["className","component","elevation","square","variant"],eo=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)},to=ji("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})((({theme:e,ownerState:t})=>r({backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},"outlined"===t.variant&&{border:`1px solid ${e.palette.divider}`},"elevation"===t.variant&&r({boxShadow:e.shadows[t.elevation]},"dark"===e.palette.mode&&{backgroundImage:`linear-gradient(${In("#fff",eo(t.elevation))}, ${In("#fff",eo(t.elevation))})`})))),no=t.forwardRef((function(e,t){const n=Hi({props:e,name:"MuiPaper"}),{className:a,component:o="div",elevation:s=1,square:l=!1,variant:c="elevation"}=n,h=i(n,Ja),d=r({},n,{component:o,elevation:s,square:l,variant:c}),f=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return Ri({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},Ka,i)})(d);return(0,yn.jsx)(to,r({as:o,ownerState:d,className:u(f.root,a),ref:t},h))})),ro=Wa,io=Ya;let ao,oo=!0,so=!1;const lo={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function co(e){e.metaKey||e.altKey||e.ctrlKey||(oo=!0)}function uo(){oo=!1}function ho(){"hidden"===this.visibilityState&&so&&(oo=!0)}function fo(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(e){}return oo||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!lo[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const go=function(){const e=t.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",co,!0),t.addEventListener("mousedown",uo,!0),t.addEventListener("pointerdown",uo,!0),t.addEventListener("touchstart",uo,!0),t.addEventListener("visibilitychange",ho,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(e){return!!fo(e)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(so=!0,window.clearTimeout(ao),ao=window.setTimeout((()=>{so=!1}),100),n.current=!1,!0)},ref:e}};function po(e,t){return po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},po(e,t)}const mo=n().createContext(null);function So(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function yo(e,t,n){return null!=n[t]?n[t]:e.props[t]}function vo(e,n,r){var i=So(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var l=o in n,c=o in i,u=n[o],h=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,t.isValidElement)(u)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:u.props.in,exit:yo(s,"exit",e),enter:yo(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:yo(s,"exit",e),enter:yo(s,"enter",e)})}})),a}var bo=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Co=function(e){var a,o;function s(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,po(a,o);var l=s.prototype;return l.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},l.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,So(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:yo(e,"appear",r),enter:yo(e,"enter",r),exit:yo(e,"exit",r)})}))):vo(e,a,o),firstRender:!1}},l.handleExited=function(e,t){var n=So(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=r({},t.children);return delete n[e.key],{children:n}})))},l.render=function(){var e=this.props,t=e.component,r=e.childFactory,a=i(e,["component","childFactory"]),o=this.state.contextValue,s=bo(this.state.children).map(r);return delete a.appear,delete a.enter,delete a.exit,null===t?n().createElement(mo.Provider,{value:o},s):n().createElement(mo.Provider,{value:o},n().createElement(t,a,s))},s}(n().Component);Co.propTypes={},Co.defaultProps={component:"div",childFactory:function(e){return e}};const wo=Co;const xo=function(e){const{className:n,classes:r,pulsate:i=!1,rippleX:a,rippleY:o,rippleSize:s,in:l,onExited:c,timeout:h}=e,[d,f]=t.useState(!1),g=u(n,r.ripple,r.rippleVisible,i&&r.ripplePulsate),p={width:s,height:s,top:-s/2+o,left:-s/2+a},m=u(r.child,d&&r.childLeaving,i&&r.childPulsate);return l||d||f(!0),t.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,h);return()=>{clearTimeout(e)}}}),[c,l,h]),(0,yn.jsx)("span",{className:g,style:p,children:(0,yn.jsx)("span",{className:m})})};const Do=$i("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),To=["center","classes","className"];let Po,Io,Ao,Lo,Oo=e=>e;const _o=Ta(Po||(Po=Oo`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Eo=Ta(Io||(Io=Oo`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Ro=Ta(Ao||(Ao=Oo`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Fo=ji("span",{name:"MuiTouchRipple",slot:"Root",skipSx:!0})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ko=ji(xo,{name:"MuiTouchRipple",slot:"Ripple"})(Lo||(Lo=Oo`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Do.rippleVisible,_o,550,(({theme:e})=>e.transitions.easing.easeInOut),Do.ripplePulsate,(({theme:e})=>e.transitions.duration.shorter),Do.child,Do.childLeaving,Eo,550,(({theme:e})=>e.transitions.easing.easeInOut),Do.childPulsate,Ro,(({theme:e})=>e.transitions.easing.easeInOut)),Mo=t.forwardRef((function(e,n){const a=Hi({props:e,name:"MuiTouchRipple"}),{center:o=!1,classes:s={},className:l}=a,c=i(a,To),[h,d]=t.useState([]),f=t.useRef(0),g=t.useRef(null);t.useEffect((()=>{g.current&&(g.current(),g.current=null)}),[h]);const p=t.useRef(!1),m=t.useRef(null),S=t.useRef(null),y=t.useRef(null);t.useEffect((()=>()=>{clearTimeout(m.current)}),[]);const v=t.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:a}=e;d((e=>[...e,(0,yn.jsx)(ko,{classes:{ripple:u(s.ripple,Do.ripple),rippleVisible:u(s.rippleVisible,Do.rippleVisible),ripplePulsate:u(s.ripplePulsate,Do.ripplePulsate),child:u(s.child,Do.child),childLeaving:u(s.childLeaving,Do.childLeaving),childPulsate:u(s.childPulsate,Do.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},f.current)])),f.current+=1,g.current=a}),[s]),b=t.useCallback(((e={},t={},n)=>{const{pulsate:r=!1,center:i=o||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===e.type&&p.current)return void(p.current=!1);"touchstart"===e.type&&(p.current=!0);const s=a?null:y.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,h;if(i||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(i)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2==0&&(h+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;h=Math.sqrt(e**2+t**2)}e.touches?null===S.current&&(S.current=()=>{v({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})},m.current=setTimeout((()=>{S.current&&(S.current(),S.current=null)}),80)):v({pulsate:r,rippleX:c,rippleY:u,rippleSize:h,cb:n})}),[o,v]),C=t.useCallback((()=>{b({},{pulsate:!0})}),[b]),w=t.useCallback(((e,t)=>{if(clearTimeout(m.current),"touchend"===e.type&&S.current)return S.current(),S.current=null,void(m.current=setTimeout((()=>{w(e,t)})));S.current=null,d((e=>e.length>0?e.slice(1):e)),g.current=t}),[]);return t.useImperativeHandle(n,(()=>({pulsate:C,start:b,stop:w})),[C,b,w]),(0,yn.jsx)(Fo,r({className:u(s.root,Do.root,l),ref:y},c,{children:(0,yn.jsx)(wo,{component:null,exit:!0,children:h})}))})),qo=Mo;function Uo(e){return Zi("MuiButtonBase",e)}const Bo=$i("MuiButtonBase",["root","disabled","focusVisible"]),No=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"],Qo=ji("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Bo.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Go=t.forwardRef((function(e,n){const a=Hi({props:e,name:"MuiButtonBase"}),{action:o,centerRipple:s=!1,children:l,className:c,component:h="button",disabled:d=!1,disableRipple:f=!1,disableTouchRipple:g=!1,focusRipple:p=!1,LinkComponent:m="a",onBlur:S,onClick:y,onContextMenu:v,onDragLeave:b,onFocus:C,onFocusVisible:w,onKeyDown:x,onKeyUp:D,onMouseDown:T,onMouseLeave:P,onMouseUp:I,onTouchEnd:A,onTouchMove:L,onTouchStart:O,tabIndex:_=0,TouchRippleProps:E,type:R}=a,F=i(a,No),k=t.useRef(null),M=t.useRef(null),{isFocusVisibleRef:q,onFocus:U,onBlur:B,ref:N}=go(),[Q,G]=t.useState(!1);function z(e,t,n=g){return io((r=>{t&&t(r);return!n&&M.current&&M.current[e](r),!0}))}d&&Q&&G(!1),t.useImperativeHandle(o,(()=>({focusVisible:()=>{G(!0),k.current.focus()}})),[]),t.useEffect((()=>{Q&&p&&!f&&M.current.pulsate()}),[f,p,Q]);const V=z("start",T),j=z("stop",v),W=z("stop",b),H=z("stop",I),Y=z("stop",(e=>{Q&&e.preventDefault(),P&&P(e)})),X=z("start",O),Z=z("stop",A),$=z("stop",L),K=z("stop",(e=>{B(e),!1===q.current&&G(!1),S&&S(e)}),!1),J=io((e=>{k.current||(k.current=e.currentTarget),U(e),!0===q.current&&(G(!0),w&&w(e)),C&&C(e)})),ee=()=>{const e=k.current;return h&&"button"!==h&&!("A"===e.tagName&&e.href)},te=t.useRef(!1),ne=io((e=>{p&&!te.current&&Q&&M.current&&" "===e.key&&(te.current=!0,M.current.stop(e,(()=>{M.current.start(e)}))),e.target===e.currentTarget&&ee()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&ee()&&"Enter"===e.key&&!d&&(e.preventDefault(),y&&y(e))})),re=io((e=>{p&&" "===e.key&&M.current&&Q&&!e.defaultPrevented&&(te.current=!1,M.current.stop(e,(()=>{M.current.pulsate(e)}))),D&&D(e),y&&e.target===e.currentTarget&&ee()&&" "===e.key&&!e.defaultPrevented&&y(e)}));let ie=h;"button"===ie&&(F.href||F.to)&&(ie=m);const ae={};"button"===ie?(ae.type=void 0===R?"button":R,ae.disabled=d):(F.href||F.to||(ae.role="button"),d&&(ae["aria-disabled"]=d));const oe=ro(N,k),se=ro(n,oe),[le,ce]=t.useState(!1);t.useEffect((()=>{ce(!0)}),[]);const ue=le&&!f&&!d;const he=r({},a,{centerRipple:s,component:h,disabled:d,disableRipple:f,disableTouchRipple:g,focusRipple:p,tabIndex:_,focusVisible:Q}),de=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,a=Ri({root:["root",t&&"disabled",n&&"focusVisible"]},Uo,i);return n&&r&&(a.root+=` ${r}`),a})(he);return(0,yn.jsxs)(Qo,r({as:ie,className:u(de.root,c),ownerState:he,onBlur:K,onClick:y,onContextMenu:j,onFocus:J,onKeyDown:ne,onKeyUp:re,onMouseDown:V,onMouseLeave:Y,onMouseUp:H,onDragLeave:W,onTouchEnd:Z,onTouchMove:$,onTouchStart:X,ref:se,tabIndex:d?-1:_,type:R},ae,F,{children:[l,ue?(0,yn.jsx)(qo,r({ref:M,center:s},E)):null]}))})),zo=Go;function Vo(e){return Zi("MuiIconButton",e)}const jo=$i("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Wo=["edge","children","className","color","disabled","disableFocusRipple","size"],Ho=ji(zo,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${Yi(n.color)}`],n.edge&&t[`edge${Yi(n.edge)}`],t[`size${Yi(n.size)}`]]}})((({theme:e,ownerState:t})=>r({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:In(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})),(({theme:e,ownerState:t})=>r({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&r({color:e.palette[t.color].main},!t.disableRipple&&{"&:hover":{backgroundColor:In(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${jo.disabled}`]:{backgroundColor:"transparent",color:e.palette.action.disabled}}))),Yo=t.forwardRef((function(e,t){const n=Hi({props:e,name:"MuiIconButton"}),{edge:a=!1,children:o,className:s,color:l="default",disabled:c=!1,disableFocusRipple:h=!1,size:d="medium"}=n,f=i(n,Wo),g=r({},n,{edge:a,color:l,disabled:c,disableFocusRipple:h,size:d}),p=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:a}=e;return Ri({root:["root",n&&"disabled","default"!==r&&`color${Yi(r)}`,i&&`edge${Yi(i)}`,`size${Yi(a)}`]},Vo,t)})(g);return(0,yn.jsx)(Ho,r({className:u(p.root,s),centerRipple:!0,focusRipple:!h,disabled:c,ref:t,ownerState:g},f,{children:o}))})),Xo=Yo;var Zo=a(635),$o={};$o.styleTagTransform=ma(),$o.setAttributes=da(),$o.insert=ua().bind(null,"head"),$o.domAPI=la(),$o.insertStyleElement=ga();oa()(Zo.Z,$o);const Ko=Zo.Z&&Zo.Z.locals?Zo.Z.locals:void 0;var Jo=function(e){var r=e.onClick,i=e.title,a=e.Icon,o=e.isActive,s=e.color,l=e.size,c=void 0===l?28:l,u=(0,t.useContext)(zr).translate,h="".concat(Ko.iconButton," ").concat(o?Ko.active:"");return n().createElement(Xo,{onClick:r,className:h,style:{color:s},"aria-label":i,title:u(i)},n().createElement(or,{width:c,height:c,className:Ko.iconContainer},n().createElement(a,null)))},es=function(e){var t=e.option,r=e.onClick,i=e.isActive,a=e.color;return n().createElement(Jo,{title:t.id,Icon:t.Icon,onClick:function(){return r(t.id)},isActive:i,color:a})},ts=a(784),ns={};ns.styleTagTransform=ma(),ns.setAttributes=da(),ns.insert=ua().bind(null,"head"),ns.domAPI=la(),ns.insertStyleElement=ga();oa()(ts.Z,ns);const rs=ts.Z&&ts.Z.locals?ts.Z.locals:void 0;function is(){return is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},is.apply(this,arguments)}function as(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return os(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ss=function(e){var r=e.colorScheme,i=e.title,a=e.Icon,o=e.isActive,s=e.closeOnSelect,l=e.numRows,c=void 0===l?2:l,u=e.items,h=as((0,t.useState)(null),2),d=h[0],f=h[1],g=r.color,p=function(){return f(!1)},m=50*c,S=25*(1-c);return n().createElement($a,{onClickAway:p},n().createElement(or,{className:rs.menu},n().createElement(Jo,{onClick:function(){return f(!0)},title:i,Icon:a,color:g,isActive:o}),d?n().createElement(or,{className:rs.menuContent,left:S},n().createElement(no,{elevation:3},n().createElement(or,{className:rs.itemsContainer,width:m},u.map((function(e,t){return n().createElement(es,is({},e,{onClick:function(t){e.onClick(t),s&&p()},color:g,key:t}))}))))):null))},ls=a(145),cs={};cs.styleTagTransform=ma(),cs.setAttributes=da(),cs.insert=ua().bind(null,"head"),cs.domAPI=la(),cs.insertStyleElement=ga();oa()(ls.Z,cs);const us=ls.Z&&ls.Z.locals?ls.Z.locals:void 0;function hs(e){return function(e){if(Array.isArray(e))return gs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ds(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||fs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fs(e,t){if(e){if("string"==typeof e)return gs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gs(e,t):void 0}}function gs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ps=function(e){var r=e.onChange,i=e.colorScheme,a=e.loaded,o=e.onControlAction,s=e.displayMode,l=ds((0,t.useState)(null),2),c=l[0],u=l[1],h=ds((0,t.useState)(null),2),d=h[0],f=h[1],g=i.background,p=i.color;(0,t.useEffect)((function(){a&&(m("plain"),S("zoomAndPan"))}),[a]);var m=function(e){var t=Ur.find((function(t){return t.id===e}));t&&(f(e),r({colorMap:t.name}))},S=function(e){var t=[].concat(hs(kr),hs(Mr)).find((function(t){return t.id===e}));if(t){var n=t.name,i=t.option;u(e),r({name:n,option:i})}},y=function(e){var t=qr.find((function(t){return t.id===e}));if(t){var n=t.name;"resetDisplay"===e?(m("plain"),r({action:"deleteDraws"})):r({action:n})}},v=(0,t.useMemo)((function(){return n().createElement(t.Fragment,null,kr.map((function(e,t){return n().createElement(es,{option:e,onClick:S,isActive:c===e.id,key:"viewerTools_".concat(t),color:p})})))}),[a,c,JSON.stringify(i)]),b=(0,t.useMemo)((function(){return n().createElement(ss,{title:"draw",colorScheme:i,Icon:Ir,isActive:Mr.some((function(e){return e.id===c})),closeOnSelect:!0,items:Mr.map((function(e){return{option:e,onClick:S,isActive:c===e.id}}))})}),[a,c,JSON.stringify(i)]),C=(0,t.useMemo)((function(){return n().createElement(ss,{title:"colorMap",colorScheme:i,Icon:Ar,closeOnSelect:!0,items:Ur.map((function(e){return{option:e,onClick:m,isActive:d===e.id}}))})}),[a,d,JSON.stringify(i)]),w=(0,t.useMemo)((function(){return n().createElement(ss,{title:"history",colorScheme:i,Icon:Pr,numRows:3,items:qr.map((function(e){return{option:e,onClick:y}}))})}),[a,JSON.stringify(i)]),x=n().createElement(ss,{title:"options",colorScheme:i,Icon:_r,numRows:1,closeOnSelect:!0,items:Br.map((function(e){return{option:e,onClick:o}}))}),D=[Gr.full,Gr.edit];return s===Gr.base?null:n().createElement(or,{style:{background:g,border:"1px solid ".concat(p)},className:us.container},n().createElement(or,{display:"flex",alignItems:"center"},v,D.includes(s)?b:null,C,D.includes(s)?w:null),s===Gr.full?x:null,a?null:n().createElement(or,{className:us.loading},n().createElement(Va,null)))},ms=a(818),Ss={};Ss.styleTagTransform=ma(),Ss.setAttributes=da(),Ss.insert=ua().bind(null,"head"),Ss.domAPI=la(),Ss.insertStyleElement=ga();oa()(ms.Z,Ss);const ys=ms.Z&&ms.Z.locals?ms.Z.locals:void 0;var vs=a(918),bs=a.n(vs),Cs=["drawcreate","drawchange","drawmove","drawdelete"],ws={Scroll:{},ZoomAndPan:{},WindowLevel:{},Floodfill:{events:Cs},Draw:{options:["Ruler","Arrow","Protractor","Rectangle","Ellipse","Roi"],type:"factory",events:Cs}};function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){Ts(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Is(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Is(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Is(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var As=function(e){var r=e.data,i=e.colorScheme,a=e.onError,o=e.markup,s=e.onMarkupChange,l=e.onControlAction,c=e.displayMode,u=Ps((0,t.useState)(null),2),h=u[0],d=u[1],f=Ps((0,t.useState)(null),2),g=f[0],p=f[1],m=Ps((0,t.useState)(null),2),S=m[0],y=m[1],v=Ps((0,t.useState)(960),2),b=v[0],C=v[1],w=(0,t.useRef)(null);(0,t.useEffect)((function(){bs().image.decoderScripts=dr,bs().tool.colourMaps={plain:bs().image.lut.plain,invplain:bs().image.lut.invPlain,rainbow:bs().image.lut.rainbow,hot:bs().image.lut.hot,hotiron:bs().image.lut.hot_iron,pet:bs().image.lut.pet,hotmetalblue:bs().image.lut.hot_metal_blue,pet20step:bs().image.lut.pet_20step};var e=function(e){var t=e.onLoad,n=e.onError,r=new(bs().App);return r.init({dataViewConfigs:{"*":[{divId:"layerGroup0"}]},tools:ws}),r.addEventListener("loadstart",(function(){return t(!1)})),r.addEventListener("loadend",(function(){return t(!0)})),r.addEventListener("keydown",(function(e){return r.defaultOnKeydown(e)})),r.addEventListener("error",(function(e){return n(e)})),r}({onError:y,onLoad:p});d(e)}),[]),(0,t.useEffect)((function(){var e=null;return h&&[Gr.full,Gr.edit].includes(c)&&(e=setInterval((function(){var e=JSON.parse(h.getState()),t=e.drawings,n=e.drawingsDetails;JSON.stringify({drawings:t,drawingsDetails:n})!==JSON.stringify(o)&&s({drawings:t,drawingsDetails:n})}),1e3)),function(){return e&&clearInterval(e)}}),[JSON.stringify(h),JSON.stringify(o)]),(0,t.useEffect)((function(){h&&h.loadURLs([r],{})}),[JSON.stringify(h),r]),(0,t.useEffect)((function(){a&&S&&a(S)}),[S]),(0,t.useEffect)((function(){if(g){var e,t,n;o&&x(o);var r=null==w||null===(e=w.current)||void 0===e||null===(t=e.getElementsByTagName("canvas"))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.height;C&&C(r||960),window.addEventListener("resize",null==h?void 0:h.onResize)}return function(){window.removeEventListener("resize",null==h?void 0:h.onResize)}}),[g]);var x=function(e){try{if(e){var t=JSON.parse(h.getState());(new(bs().io.State)).apply(h,Ds(Ds({},t),e))}}catch(e){console.error("An error occurred while loading the markup")}},D=i.color,T=i.background,P=(0,t.useMemo)((function(){return n().createElement(or,{className:ys.dwvContainer,height:b},n().createElement("div",{id:"layerGroup0",className:ys.layerGroup,style:{borderColor:D,background:T},ref:w}))}),[h,b,D,T]),I=(0,t.useMemo)((function(){return n().createElement(or,{width:32,marginX:"auto",marginY:1},n().createElement(ia,{variant:"body2",fontWeight:"bold",style:{color:D}},n().createElement(Or,null)))}),[D]);return n().createElement(or,{style:{position:"relative"}},n().createElement(or,{style:{height:"100%"}},h?n().createElement(ps,{onChange:function(e){var t=e.action,n=e.colorMap,r=e.name,i=e.option;if(h)try{t&&h[t]&&h[t](),n&&h.setColourMap(n),r&&h.setTool(r),i&&h.setDrawShape&&h.setDrawShape(i)}catch(e){console.error("An error occurred while dwvApp working")}},loaded:g,colorScheme:i,onControlAction:l,displayMode:c}):null,S?I:P))},Ls=a(595),Os={};Os.styleTagTransform=ma(),Os.setAttributes=da(),Os.insert=ua().bind(null,"head"),Os.domAPI=la(),Os.insertStyleElement=ga();oa()(Ls.Z,Os);const _s=Ls.Z&&Ls.Z.locals?Ls.Z.locals:void 0;function Es(){return Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Es.apply(this,arguments)}function Rs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ks=function(e){var r=e.color,i=e.fullscreenEnabled,a=e.rerender,o=e.Component,s=e.componentProps,l=Rs((0,t.useState)(!1),2),c=l[0],u=l[1],h=(0,t.useRef)(null),d=function(e){u(document.fullscreenElement===e.target),a()},f=c?{colorScheme:Qr}:{};return n().createElement(or,null,i?n().createElement(or,{className:_s.fullScreenButtonContainer},n().createElement(or,{className:_s.fullScreenButton},n().createElement(Xo,{style:{color:r},onClick:function(){var e=null==h?void 0:h.current;if(!e)return null;e.onfullscreenchange=d,!document.fullscreenElement&&Boolean(null==e?void 0:e.requestFullscreen)?e.requestFullscreen().then().catch((function(e){return console.error(e)})):document.exitFullscreen().then()}},n().createElement(Er,null)))):null,n().createElement(or,{ref:h,className:c&&_s.fullScreenContainer},n().createElement(o,Es({},s,f))))};function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){Us(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ns(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qs=function(){return(new Date).getTime()},Gs=function(r){var i=r.data,a=void 0===i?null:i,o=r.markup,s=void 0===o?null:o,l=r.additionalMarkup,c=void 0===l?null:l,u=r.onDataChange,h=void 0===u?function(){}:u,d=r.onMarkupChange,f=void 0===d?function(){}:d,g=r.onError,p=void 0===g?function(){}:g,m=r.colorScheme,S=void 0===m?Nr:m,y=r.locale,v=void 0===y?"en":y,b=r.displayMode,C=void 0===b?Gr.full:b,w=r.fullscreenEnabled,x=void 0===w||w,D=(0,t.useMemo)((function(){return JSON.stringify(function(e,t){if(!t)return e;var n=JSON.parse(JSON.stringify(t).replace(/#ffff80/g,"#ff8000"));return xr().mergeWith(e,n,(function(e,t){if(xr().isArray(e))return e.concat(t)}))}(JSON.parse(s),JSON.parse(c)))}),[s,c]),T=Bs((0,t.useState)(a),2),P=T[0],I=T[1],A=Bs((0,t.useState)(D),2),L=A[0],O=A[1],_=Bs((0,t.useState)(Qs()),2),E=_[0],R=_[1];(0,t.useEffect)((function(){P!==a&&I(a)}),[a]),(0,t.useEffect)((function(){P!==a&&h(P)}),[P]),(0,t.useEffect)((function(){L!==D&&O(D)}),[D]),(0,t.useEffect)((function(){(L!==D||D)&&f(L)}),[L]),(0,t.useEffect)((function(){return D!==L&&F()}),[D]);var F=function(){return R(Qs())},k=function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file.json",n=document.createElement("a"),r=new Blob([JSON.stringify(e)],{type:"text/plain;charset=utf-8"});n.href=URL.createObjectURL(r),n.download=t,n.click()}(L,"DICOM_Markup_".concat(Qs(),".json"))},M=function(){var e,t;e=function(e){O(e),F()},(t=document.createElement("input")).type="file",t.accept=".json",t.multiple=!1,t.onchange=function(t){var n,r=null==t||null===(n=t.target)||void 0===n?void 0:n.files[0];if(r)try{var i=new FileReader;i.onload=function(){return(null==i?void 0:i.result)&&e(JSON.parse((new TextDecoder).decode(i.result)))},i.readAsArrayBuffer(r)}catch(e){console.error("An error occurred while reading markup file")}},t.click()},q=function(){I(null),O(null)},U=qs(qs({},Nr),S),B=U.color,N=U.background;return n().createElement(zr.Provider,{value:{lang:v,translate:function(t){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",i=e[n]?e[n]:gr;return i&&i[t]?i[t]:r}(t,v)}}},n().createElement(or,{id:"dicom_viewer"},P?n().createElement(ks,{color:B,fullscreenEnabled:x&&C!==Gr.base,rerender:F,Component:As,componentProps:{data:P,markup:L?JSON.parse(L):null,onError:p,colorScheme:{color:B,background:N},onMarkupChange:function(e){return O(JSON.stringify(e))},displayMode:C,onControlAction:function(e){var t,n={delete:q,export:k,import:M};Object.keys(n).includes(e)&&(null===(t=n[e])||void 0===t||t.call(n))},key:E}}):n().createElement(xa,{onChange:function(e){return I(e)},onError:p,colorScheme:{color:B,background:N}})))}})(),o})()));