var dwv=dwv||{};dwv.decoder=dwv.decoder||{},dwv.decoder.RleDecoder=function(){},dwv.decoder.RleDecoder.prototype.decode=function(a,b,c,d,e,f){var g=b/8,h=new DataView(a.buffer,a.byteOffset),k=new Int8Array(a.buffer,a.byteOffset),l=new ArrayBuffer(d*e*g),m=new Int8Array(l),n=h.getInt32(0,!0),o=0,p=1;0===f&&(p=e);for(var q=0,r=0;r<n;++r){1!==e&&0===f&&(o=r);var s=h.getInt32(4*(r+1),!0),t=h.getInt32(4*(r+2),!0);(r==n-1||0===t)&&(t=a.length),q=s;for(var u=0;q<t;)if(u=k[q],++q,0<=u&&127>=u)for(var v=0;v<u+1;++v)m[o*g]=k[q],++q,o+=p;else if(-1>=u&&-127<=u){var w=k[q];++q;for(var x=0;x<-u+1;++x)m[o*g]=w,o+=p}}var y=null;return 8===b?c?y=new Int8Array(l):y=new Uint8Array(l):16==b&&(c?y=new Int16Array(l):y=new Uint16Array(l)),y},self.addEventListener("message",function(a){var b=new dwv.decoder.RleDecoder;self.postMessage([b.decode(a.data.buffer,a.data.meta.bitsAllocated,a.data.meta.isSigned,a.data.meta.sliceSize,a.data.meta.samplesPerPixel,a.data.meta.planarConfiguration)])},!1);